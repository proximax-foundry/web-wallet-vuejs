import{_ as Q,a7 as ie,ad as le,u as ce,r as I,ac as de,ab as pe,c as b,E as k,O as me,A as ue,w as v,af as he,n as S,I as ge,H as O,k as C,P as fe,o as c,b as h,s as N,z as d,e as a,t as i,B as _,m as x,f,l as F,Q as xe,i as Y}from"./index-002fca0b.js";import{S as ye}from"./SelectInputPluginClean-934f8215.js";import{a as _e,s as ve}from"./column.esm-9b0c9e35.js";import{t as we}from"./jdenticon-module-8162ac79.js";import{_ as be}from"./icon-more-options-3f3cfda9.js";import{_ as ke}from"./icon-link-new-caba1c4b.js";import{_ as Se}from"./icon-plus-7207f329.js";import"./multiselect-0dcafc4e.js";const Te={components:{DataTable:_e,Column:ve,SelectInputPluginClean:ye},name:"NamespaceDataTable",props:{account:ie,address:String},directives:{tooltip:le},setup(n,T){const{t:m}=ce(),o=I(!1),g=()=>{window.innerWidth<"1024"?o.value=!1:o.value=!0};g(),de(()=>{window.addEventListener("resize",g)}),pe(()=>{window.removeEventListener("resize",g)});const y=b(()=>k.readBlockHeight?k.readBlockHeight:0),{address:L}=me(n),A=Y().appContext.config.globalProperties.emitter,D=I([]),H=I("");n.address&&(H.value=ue.Address.createFromRawAddress(L.value).plain());const t=b(()=>{let s=[];return s.push({value:"",label:m("general.showAll")}),v.currentLoggedInWallet.accounts.forEach(u=>{s.push({value:u.address,label:u.name})}),v.currentLoggedInWallet.others.forEach(u=>{s.push({value:u.address,label:u.name})}),s});let E=new he(S.chainNetworkName);E.init();let j=parseInt(E.blockGenerationTargetTime);const X=(s,u,$)=>{let e=new Date,l=K(s,u,$),r={years:l.getFullYear()-e.getFullYear(),months:l.getMonth()-e.getMonth(),days:l.getDate()-e.getDate(),hours:l.getHours()-e.getHours(),mins:l.getMinutes()-e.getMinutes()};if(r.mins<0&&(r.hours--,r.mins+=60),r.hours<0&&(r.days--,r.hours+=24),r.days<0){r.months--;var w=new Date(e.getTime());w.setDate(32),r.days=32-e.getDate()-w.getDate()+l.getDate()}return r.months<0&&(r.years--,r.months+=12),r.years>0?r.years+" "+m("general.year",r.years):r.months>0?r.months+" "+m("general.month",r.months):r.days>0?r.days+" "+m("general.day",r.days):r.hours>0?r.hours+" "+m("general.hour",r.hours):r.mins+" "+m("general.minute",r.mins)},K=(s,u,$)=>{let e=new Date;return e.setTime(e.getTime()+s*24*60*60*1e3),e.setTime(e.getTime()+u*60*60*1e3),e.setTime(e.getTime()+$*60*1e3),e},q=b(()=>{let s=[];if(P.value){let e=v.currentLoggedInWallet.accounts.find(l=>l.address==P.value);e||(e=v.currentLoggedInWallet.others.find(l=>l.address==P.value)),e.namespaces.forEach(l=>{s.push({namespace:l,account:e})})}else v.currentLoggedInWallet.accounts.forEach(e=>{e.namespaces.forEach(l=>{s.push({namespace:l,account:e})})}),v.currentLoggedInWallet.others.forEach(e=>{e.namespaces.forEach(l=>{s.push({namespace:l,account:e})})});let u=[],$=new ge("ThemeStyleConfig");if($.init(),s.length>0)for(let e=0;e<s.length;++e){let l="";switch(s[e].namespace.linkType){case 1:l="Asset";break;case 2:l="Address";break}let r,w,M;if(typeof s[e].namespace.endHeight=="string")r="valid",s[e].namespace.endHeight==="F".repeat(16)&&(w="Never",M="Never");else{let R=s[e].namespace.endHeight-y.value,W=Math.floor(60*60*24/j),G=Math.floor(60*60/j),B=Math.floor(R/W),z=Math.floor(R%W/G),U=R%W%G;R>0?R<W*14?r="expiring":r="valid":r="expired",B>0||z>0||U>0?w=O.convertDisplayDateTimeFormat24(K(B,z,U)):w="None",y.value?R>0?M=X(B,z,U):w!="-"?M=m("general.expired"):M="-":M=""}let oe={i:e,idHex:s[e].namespace.idHex,name:s[e].namespace.name,linkType:l,linkedId:l==="Address"?O.createAddress(s[e].namespace.linkedId).pretty():s[e].namespace.linkedId,endHeight:s[e].namespace.endHeight,expiring:r,expiryRelative:M,expiry:y.value?w:"",explorerLink:k.isReady?S.currentNetworkProfile.chainExplorer.url+"/"+S.currentNetworkProfile.chainExplorer.namespaceInfoRoute+"/"+s[e].namespace.idHex:"",address:O.createAddress(s[e].account.address).pretty(),icon:we(s[e].account.address,30,$.jdenticonConfig)};u.push(oe)}return u}),P=I(""),J=s=>{V.value=s,D.value[s]=!D.value[s]},V=I("");A.on("PAGE_CLICK",()=>{for(var s=0;s<D.value.length;)s!=V.value&&(D.value[s]=!1),s++});const Z=s=>{V.value=s},ee=()=>{V.value="e"},te=b(()=>k.isReady?S.currentNetworkProfile.chainExplorer.url:""),se=b(()=>k.isReady?S.currentNetworkProfile.chainExplorer.publicKeyRoute:""),ae=b(()=>k.isReady?S.currentNetworkProfile.chainExplorer.addressRoute:""),ne=b(()=>k.isReady?S.currentNetworkProfile.chainExplorer.namespaceInfoRoute:""),re=b(()=>k.isReady?S.currentNetworkProfile.chainExplorer.assetInfoRoute:"");return{addressExplorerURL:ae,assetExplorerURL:re,namespaceExplorerURL:ne,publicKeyExplorerURL:se,explorerBaseURL:te,showMenu:J,isMenuShow:D,hoverOverMenu:Z,hoverOutMenu:ee,listAccounts:t,filterNamespaces:P,generateDatatable:q,selectedAddress:H,wideScreen:o}}},De={class:"flex justify-between"},Ie={class:"text-sm pt-1 text-gray-700 ml-2 lg:ml-7"},Ne={class:"uppercase text-xxs text-gray-300 font-bold mb-1"},Ee={class:"uppercase font-bold text-txs"},$e={class:"uppercase text-xxs text-gray-300 font-bold mb-1"},Me={key:0,class:"uppercase font-bold text-txs"},Re={key:1,class:"text-gray-300 text-xs"},Ce={class:"text-center"},Le={class:"text-txs"},Ae={class:"text-txs uppercase"},He={key:0,class:"uppercase text-txs"},Pe={key:1,class:"text-txs"},Ve={key:0,class:"data.expiryRelative text-txs"},We={key:1,class:"text-gray-300 text-txs"},Be=["innerHTML"],ze=["onMouseover"],Ue=["onClick"],Oe={key:0,class:"mt-1 pop-option absolute right-0 w-32 rounded-sm shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10 text-left lg:mr-2",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},Fe={role:"none",class:"my-2"},je=["href"],Ke=a("img",{src:ke,class:"inline-block ml-2 relative -top-1"},null,-1);function Ge(n,T,m,o,g,y){const L=C("SelectInputPluginClean"),p=C("Column"),A=C("router-link"),D=C("DataTable"),H=fe("tooltip");return c(),h("div",null,[N(D,{value:o.generateDatatable,paginator:!0,rows:10,alwaysShowPaginator:!1,responsiveLayout:"scroll"},{header:d(()=>[a("div",De,[a("span",Ie,i(n.$t("general.namespace",2)),1),N(L,{modelValue:o.filterNamespaces,"onUpdate:modelValue":T[0]||(T[0]=t=>o.filterNamespaces=t),options:o.listAccounts,selectDefault:o.selectedAddress,class:"w-48 lg:w-60 inline-block"},null,8,["modelValue","options","selectDefault"])])]),empty:d(()=>[_(i(n.$t("general.noRecord")),1)]),loading:d(()=>[_(i(n.$t("dashboard.fetchingTx")),1)]),default:d(()=>[o.wideScreen?f("",!0):(c(),x(p,{key:0,style:{width:"250px"}},{body:d(({data:t})=>[a("div",null,[a("div",Ne,i(n.$t("general.name")),1),a("div",Ee,i(t.name),1)])]),_:1})),o.wideScreen?f("",!0):(c(),x(p,{key:1,style:{width:"250px"}},{body:d(({data:t})=>[a("div",null,[a("div",$e,i(n.$t("dashboard.expirationEstimate")),1),t.expiry?(c(),h("div",Me,[_(i(t.expiry)+" ",1),a("div",{class:F(["rounded-full w-2 h-2 inline-block ml-2",t.expiring=="expired"?"bg-red-500":t.expiring=="expiring"?"bg-yellow-500":"bg-green-500"])},null,2)])):(c(),h("div",Re,i(n.$t("dashboard.fetching")),1))])]),_:1})),o.wideScreen?(c(),x(p,{key:2,style:{width:"30px"}},{body:d(({data:t})=>[a("div",Ce,[a("div",{class:F(["rounded-full w-2 h-2 inline-block",t.expiring=="expired"?"bg-red-500":t.expiring=="expiring"?"bg-yellow-500":"bg-green-500"])},null,2)])]),_:1})):f("",!0),o.wideScreen?(c(),x(p,{key:3,field:"name",header:n.$t("general.name"),style:{"`wideScreen?'min-width":"160px'?'width: 160px'`"}},{body:d(({data:t})=>[a("span",Le,i(t.name),1)]),_:1},8,["header"])):f("",!0),o.wideScreen?(c(),x(p,{key:4,field:"namespaceId",header:n.$t("general.namespaceId"),style:{"`wideScreen?'min-width":"180px'?'width: 180px'`"}},{body:d(({data:t})=>[a("span",Ae,i(t.idHex),1)]),_:1},8,["header"])):f("",!0),o.wideScreen?(c(),x(p,{key:5,field:"linkedId",header:n.$t("general.linkedAssetAddress"),style:{"`wideScreen?'min-width":"200px'?'width: 200px'`"}},{body:d(({data:t})=>[t.linkedId?(c(),h("span",He,i(t.linkedId),1)):(c(),h("span",Pe,i(n.$t("general.noLinkedAsset")),1))]),_:1},8,["header"])):f("",!0),o.wideScreen?(c(),x(p,{key:6,field:"linkType",header:n.$t("general.expires"),style:{"`wideScreen?'min-width":"150px'?'width: 150px'`"}},{body:d(({data:t})=>[t.expiryRelative?(c(),h("div",Ve,i(t.expiryRelative),1)):(c(),h("div",We,i(n.$t("dashboard.fetching")),1))]),_:1},8,["header"])):f("",!0),o.wideScreen?(c(),x(p,{key:7,field:"Active",header:n.$t("dashboard.expirationEstimate"),style:{"`wideScreen?'min-width":"210px'?'width: 210px'`"}},{body:d(({data:t})=>[a("span",{class:F(["text-txs",t.expiring=="expired"?"text-red-500":t.expiring=="expiring"?"text-yellow-500":"text-green-500"])},i(t.expiry),3)]),_:1},8,["header"])):f("",!0),o.wideScreen?(c(),x(p,{key:8,field:"Account",header:n.$t("general.account"),bodyStyle:"text-align: center; overflow: visible",style:{"`wideScreen?'min-width":"60px'?'width: 60px'`"}},{body:d(({data:t})=>[xe(a("div",{innerHTML:t.icon,class:"inline-block"},null,8,Be),[[H,{value:"<tiptitle>WALLET ADDRESS</tiptitle><tiptext>"+t.address+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),default:d(()=>[_("> ")]),_:1},8,["header"])):f("",!0),N(p,{style:{width:"30px"}},{body:d(({data:t})=>[a("div",{class:"text-txs text-center lg:mr-2",onMouseover:E=>o.hoverOverMenu(t.i),onMouseout:T[1]||(T[1]=(...E)=>o.hoverOutMenu&&o.hoverOutMenu(...E))},[a("img",{src:be,class:"w-4 h-4 cursor-pointer inline-block",onClick:E=>o.showMenu(t.i)},null,8,Ue),o.isMenuShow[t.i]?(c(),h("div",Oe,[a("div",Fe,[N(A,{to:{name:"ViewServicesNamespaceExtend",params:{address:t.address,namespaceId:t.idHex}},class:"block hover:bg-gray-100 transition duration-200 p-2 z-20"},{default:d(()=>[_(i(n.$t("general.extendDuration")),1)]),_:2},1032,["to"]),N(A,{to:{name:"ViewUpdateNamespaceMetadata",params:{targetId:t.idHex}},class:"block hover:bg-gray-100 transition duration-200 p-2 z-20"},{default:d(()=>[_("Update Metadata")]),_:2},1032,["to"]),a("a",{href:t.explorerLink,class:"block hover:bg-gray-100 transition duration-200 p-2 z-20",target:"_new"},[_(i(n.$t("general.viewInExplorer")),1),Ke],8,je)])])):f("",!0)],40,ze)]),_:1})]),_:1},8,["value"])])}const Qe=Q(Te,[["render",Ge]]),Ye="/web-wallet-vuejs/assets/namespace_default-a764df25.svg",Xe={name:"ViewServicesNamespace",components:{NamespaceDataTable:Qe},props:{address:String},setup(){const n=I(0),m=Y().appContext.config.globalProperties.emitter,o=I([]);return v.currentLoggedInWallet&&(v.currentLoggedInWallet.accounts.forEach(g=>{g.namespaces.forEach(y=>{o.value.push(y)})}),v.currentLoggedInWallet.others.forEach(g=>{g.namespaces.forEach(y=>{o.value.push(y)})})),m.on("TXN_CONFIRMED",g=>{setTimeout(()=>{++n.value},1e3)}),{namespaces:o,defaultIndex:n}}},qe={class:"ml-2 mr-2 w-full lg:ml-auto lg:mr-auto mt-5"},Je={key:0},Ze=a("img",{src:Se,class:"inline-block mr-2"},null,-1),et={key:1,class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},tt={class:"flex justify-between text-sm mb-5"},st={class:"text-gray-700"},at={class:"border border-gray-200 filter drop-shadow-xl py-2 sm:py-14 px-2 sm:px-28 text-center bg-white"},nt=a("img",{src:Ye,class:"inline-block h-18 w-18"},null,-1),rt={class:"text-gray-700 text-sm my-5"},ot={class:"text-gray-600 text-tsm my-5"},it={class:"sm:grid sm:grid-cols-2 mt-10 lg:mt-16"},lt={class:"mb-8 sm:pr-1"},ct={href:"https://bcdocs.xpxsirius.io/docs/built-in-features/namespace/",target:"_new",class:"sm:h-9 lg:h-5 text-blue-primary font-bold text-tsm items-start flex"},dt={class:"text-gray-400 text-tsm my-3 sm:pr-2"},pt={class:"mb-8"},mt={href:"https://t.me/proximaxhelpdesk",target:"_new",class:"sm:h-9 lg:h-5 text-blue-primary font-bold text-tsm items-start flex"},ut={class:"text-gray-400 text-tsm my-3"};function ht(n,T,m,o,g,y){const L=C("NamespaceDataTable"),p=C("router-link");return c(),h("div",null,[a("div",qe,[o.namespaces.length>0?(c(),h("div",Je,[(c(),x(L,{class:"mt-10 w-full",key:o.defaultIndex,address:m.address},null,8,["address"])),N(p,{to:{name:"ViewServicesNamespaceCreate"},class:"mt-10 lg:mt-0 bg-blue-primary px-5 py-3 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center w-60"},{default:d(()=>[Ze,_(i(n.$t("namespace.registerNewNamespace")),1)]),_:1})])):(c(),h("div",et,[a("div",tt,[a("div",null,[a("span",st,i(n.$t("general.namespace",2)),1)])]),a("div",at,[nt,a("div",rt,i(n.$t("namespace.noNamespace2")),1),a("div",ot,i(n.$t("namespace.namespaceDescription")),1),N(p,{to:{name:"ViewServicesNamespaceCreate"},class:"bg-blue-primary py-2 px-7 rounded-lg text-white font-bold mt-4 inline-block"},{default:d(()=>[_(i(n.$t("namespace.registerNamespace")),1)]),_:1})]),a("div",it,[a("div",lt,[a("a",ct,i(n.$t("general.namespaceQues")),1),a("div",dt,i(n.$t("namespace.namespaceAns")),1)]),a("div",pt,[a("a",mt,i(n.$t("general.feedback")),1),a("div",ut,i(n.$t("general.feedbackDescription")),1)])])]))])])}const kt=Q(Xe,[["render",ht]]);export{kt as default};
