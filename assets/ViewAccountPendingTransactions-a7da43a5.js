import{d as I,H as r,c as h,w as o,r as l,a as k,E as d,i as F,o as L,b as Q,e as u,m as i,v as y,x as w,z as B,S as O}from"./index-c59831c6.js";import{A as V,_ as D}from"./AccountTabs.vue_vue_type_script_setup_true_lang-51b42284.js";import{_ as E}from"./PendingDataTable.vue_vue_type_script_setup_true_lang-cf680a9a.js";import{D as S}from"./dashboardService-00a797d2.js";import"./jdenticon-module-fd1c13a7.js";import"./functions-3adf3897.js";import"./TextInput-4142d0f6.js";import"./TextInputClean-1fa2c718.js";import"./icon-key-5b3f7dda.js";import"./icon-message-e27d55b6.js";import"./icon-proximax-logo-gray-c2486ce1.js";import"./column.esm-2078094e.js";const N={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},W={class:"flex my-2 gap-5 flex-none text-xs md:text-sm"},M=u("div",{class:"border rounded-md text-white py-2 px-5",style:{background:"#f3a91d"}}," Pending ",-1),Z=I({__name:"ViewAccountPendingTransactions",props:{address:String},setup(s){const c=s;let _=r.createTransactionFieldOrder(r.getQueryParamOrder_v2().DESC,r.getTransactionSortField().BLOCK);const n=h(()=>{if(!o.currentLoggedInWallet)return null;let e=o.currentLoggedInWallet.accounts.find(a=>a.address==c.address)||o.currentLoggedInWallet.others.find(a=>a.address==c.address);return e||null}),m=l([]),g=l([]),p=l([]),b=h(()=>m.value.concat(p.value).concat(g.value));let T=new S(o.currentLoggedInWallet,n.value),f=r.getTransactionGroupType(),x=async()=>{if(!n.value)return;let e=r.createTransactionQueryParams();e.pageSize=1,e.address=n.value.address,e.embedded=!0,e.updateFieldOrder(_);let a=await T.searchTxns(f.UNCONFIRMED,e),t=await T.formatUnconfirmedMixedTxns(a.transactions);m.value=t},A=async()=>{if(!n.value)return;let e=new S(o.currentLoggedInWallet,n.value),a=r.createTransactionQueryParams();a.pageSize=100,a.address=n.value.address;let t=await e.searchTxns(f.PARTIAL,a),v=await e.formatPartialMixedTxns(t.transactions);g.value=v},P=()=>{if(!n.value)return;let e=[];d.autoAnnounceSignedTransaction.forEach(a=>{let t=B.TransactionMapping.createFromPayload(a.signedTransaction.payload);(O.castToAggregate(t).innerTransactions.find(C=>C.signer.address.plain()==c.address)!=null||a.signedTransaction.signer==n.value.publicKey)&&e.push({type:"Aggregate Bonded",hash:a.signedTransaction.hash,deadline:t.deadline.value,groupType:"In Queue",recipient:"",sender:"",amount:"",message:"",sda:""})}),p.value=e};return k([d.unconfirmedTransactions,d.autoAnnounceSignedTransaction,()=>d.aggregateBondedTxLength,d.confirmedTransactions],async()=>{await x(),await A(),await x(),P()},{immediate:!0,deep:!0}),(e,a)=>{const t=F("router-link");return L(),Q("div",null,[u("div",N,[i(V,{address:s.address,class:"mb-6"},null,8,["address"]),i(D,{address:s.address,selected:"txn"},null,8,["address"]),u("div",W,[i(t,{to:{name:"ViewAccountConfirmedTransactions",params:{address:s.address}},class:"border opacity-60 hover:opacity-100 cursor-pointer rounded-md text-white py-2 px-4",style:{background:"#007cff"}},{default:y(()=>[w("Confirmed")]),_:1},8,["to"]),M,i(t,{to:{name:"ViewAccountFailedTransactions",params:{address:s.address}},class:"border opacity-60 hover:opacity-100 cursor-pointer rounded-md text-white py-2 px-5",style:{background:"#dc143c"}},{default:y(()=>[w("Failed")]),_:1},8,["to"])]),i(E,{transaction:b.value,class:"mt-3"},null,8,["transaction"])])])}}});export{Z as default};
