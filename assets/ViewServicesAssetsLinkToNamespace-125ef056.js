import{_ as te,o,b as n,e as t,t as a,f as y,d as xe,r as i,c as d,z as j,F as ge,g as pe,j as me,h as Te,a5 as Ce,u as Se,l as we,A as Ne,B as g,n as V,H as u,R as Ae,ai as ee,b5 as ve,w as H,D as Fe,am as q,a as B,i as U,S as Le,m as E,x as w,P as W,aa as $e,v as Me}from"./index-c6fbb434.js";import{_ as Ie}from"./PasswordInput.vue_vue_type_script_setup_true_lang-6e79a7fc.js";import{A as N}from"./assetsUtils-7a7b4cad.js";import{_ as Ve}from"./delete-8b454e7f.js";import{_ as Be}from"./TransactionFeeDisplay.vue_vue_type_script_setup_true_lang-ec1bbeb4.js";import{t as Ee}from"./jdenticon-module-e10ef9f6.js";import{M as Pe}from"./multisigUtils-0e90ceed.js";import{T as G}from"./transactionState-7e8e0da5.js";import{_ as De}from"./icon-asset-2a9ae6ea.js";import{_ as J}from"./icon-info-8b4f1351.js";import"./proximax-logo-ecfc3767.js";const He={props:{placeholder:String,errorMessage:String,showError:Boolean,modelValue:String,title:String,disabled:Boolean},emits:["update:modelValue"],name:"SelectLinkType",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},watch:{showError:function(e){e?(this.borderColor="border-2 border-red-primary",this.textErr=!0):(this.borderColor="border-2 border-gray-300",this.textErr=!1)}}},Ue={class:"border border-gray-200 px-2 py-1 h-14 rounded-md"},We={class:"uppercase text-gray-500 text-txs text-left mb-2"},je={class:"flex items-center"},ze=["value","disabled","checked"],Re={for:"link",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},qe=["value","disabled","checked"],Ge={for:"unlink",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},Je={class:"h-3 mb-2"},Oe={key:0,class:"error error-text text-left"};function Qe(e,r,m,s,k,S){return o(),n("div",null,[t("div",Ue,[t("div",We,a(m.title),1),t("div",je,[t("input",{id:"link",type:"radio",name:"linkType",value:m.modelValue,disabled:m.disabled,class:"h-5 w-5",onChange:r[0]||(r[0]=c=>e.$emit("update:modelValue","link")),checked:m.modelValue=="link"},null,40,ze),t("label",Re,a(e.$t("general.link")),1),t("input",{id:"unlink",type:"radio",name:"linkType",value:m.modelValue,disabled:m.disabled,class:"h-5 w-5",onChange:r[1]||(r[1]=c=>e.$emit("update:modelValue","unlink")),checked:m.modelValue=="unlink"},null,40,qe),t("label",Ge,a(e.$t("general.unlink")),1)])]),t("div",Je,[k.textErr||m.showError?(o(),n("div",Oe,a(m.errorMessage),1)):y("",!0)])])}const Xe=te(He,[["render",Qe]]),Ye=xe({emits:["select-account","update:modelValue"],name:"SelectInputNamespace",props:["modelValue","action","address","assetId"],setup(e){const r=i(!1);Te().appContext.config.globalProperties.emitter;const s=i(""),k=c=>{s.value=c.value,r.value=!r.value},S=d(()=>N.listActiveNamespacesToLink(e.assetId,j.Address.createFromRawAddress(e.address).plain(),e.action));return{selectNamespace:k,namespaces:S,toggleSelection:r,selectedNamespace:s}}}),Ze={class:"relative"},Ke={class:"flex"},et={class:"flex flex-col ml-2 text-left"},tt={class:"text-blue-primary font-semibold text-xxs mb-1 uppercase",style:{"line-height":"9px"}},st={key:0,class:"mt-1 text-tsm font-bold"},at={key:1,class:"text-tsm font-bold"},lt={key:0,class:"text-xxs ml-auto cursor-pointer text-blue-primary font-semibold mt-auto mb-auto"},ot={key:1,class:"text-xxs ml-auto cursor-pointer text-blue-primary font-semibold mt-auto mb-auto"},nt={class:"relative"},it={key:0,class:"absolute border border-t-0 w-full z-50 bg-white max-h-40 overflow-auto px-3 filter drop-shodow-xl"},rt={key:0,class:"pl-2 pt-4 text-xxs text-gray-400 uppercase"},ct={key:1,class:"text-xxs pt-2 pl-2 pb-2"},dt=["onClick"],ut={key:0,class:"cursor-pointer text-blue-primary text-xxs mt-0.5 ml-auto font-semibold uppercase"},mt={key:1,class:"text-gray-300 text-xxs mt-0.5 ml-auto uppercase"},vt={key:2,class:"text-gray-500 text-xxs mt-0.5 ml-auto uppercase"};function gt(e,r,m,s,k,S){return o(),n("div",Ze,[t("div",{onClick:r[1]||(r[1]=c=>e.toggleSelection=!e.toggleSelection),class:"border ml-auto mr-auto py-3 px-2 cursor-pointer rounded-md w-full h-14"},[t("div",Ke,[t("div",et,[t("div",tt,a(e.$t("general.namespace")),1),e.selectedNamespace!=""?(o(),n("div",st,a(e.selectedNamespace),1)):(o(),n("div",at,a(e.$t("namespace.selectNamespace")),1))]),!e.toggleSelection&&e.selectedNamespace==""?(o(),n("div",lt,a(e.$t("general.select")),1)):y("",!0),!e.toggleSelection&&e.selectedNamespace!=""?(o(),n("div",ot,a(e.$t("general.change")),1)):y("",!0),e.toggleSelection?(o(),n("img",{key:2,onClick:r[0]||(r[0]=c=>e.selectedNamespace=""),src:Ve,class:"h-5 w-5 ml-auto cursor-pointer text-blue-primary font-semibold mt-auto mb-auto"})):y("",!0)])]),t("div",nt,[e.toggleSelection?(o(),n("div",it,[e.namespaces.length>0?(o(),n("div",rt,a(e.$t("namespace.selectNamespace")),1)):(o(),n("div",ct,a(e.$t("general.listEmpty")),1)),(o(!0),n(ge,null,pe(e.namespaces,(c,A)=>(o(),n("div",{key:A,class:me(["px-2 py-3 flex items-center",[A!=e.namespaces.length-1?"border-b border-gray-200":"",c.disabled?"":"cursor-pointer"]]),onClick:b=>{e.selectNamespace(c),e.$emit("update:modelValue",e.selectedNamespace)}},[t("div",{class:me(["text-xs truncate",c.disabled?"text-gray-300":"text-black font-semibold"])},a(c.label),3),c.label!=e.selectedNamespace&&!c.disabled?(o(),n("div",ut,a(e.$t("general.select")),1)):c.disabled?(o(),n("div",mt,a(e.$t("general.disabled")),1)):(o(),n("div",vt,a(e.$t("general.current")),1))],10,dt))),128))])):y("",!0)])])}const pt=te(Ye,[["render",gt]]),bt={name:"ViewServicesAssetsLinkToNamespace",directives:{tooltip:Ce},components:{PasswordInput:Ie,SelectLinkType:Xe,SelectInputNamespace:pt,TransactionFeeDisplay:Be},props:{assetId:String,address:String},setup(e){Se();const r=we();Ne();const m=d(()=>g.nativeToken.label),s=i(""),k=i(!1),S=i(!1),c=i(!1),A=i(!1),b=i(""),O=d(()=>g.nativeToken.label),Q=d(()=>V.currentNetworkProfileConfig?u.convertToExact(V.currentNetworkProfileConfig.lockedFundsPerAggregate,g.nativeToken.divisibility):0),F=d(()=>V.currentNetworkProfileConfig?u.convertToCurrency(V.currentNetworkProfileConfig.lockedFundsPerAggregate,g.nativeToken.divisibility):0),v=d(()=>V.currentNetworkProfile?u.convertToExact(Ae.getLockFundFee(),g.nativeToken.divisibility):0),P=d(()=>Q.value+v.value),be=d(()=>z.value==""),se=i(""),p=i(u.createAddress(e.address).plain()),X=i(""),Y=i(0),fe=i(ee(p.value)),ae=d(()=>{let l=ve(b.value)?ve(b.value).balance:0;return u.toCurrencyFormat(l)}),le=d(()=>b.value.length<=0?Y.value<C.value:Number(ae.value)<C.value+P.value),oe=d(()=>_.value.cosignerList.length==0&&ee(p.value)),L=i("0");let f=d(()=>H.currentLoggedInWallet?H.currentLoggedInWallet.accounts.find(l=>l.address==p.value)||H.currentLoggedInWallet.others.find(l=>l.address==p.value):null);f.value&&(se.value=f.value.name,p.value=f.value.address,X.value=u.toCurrencyFormat(f.value.balance,g.nativeToken.divisibility),Y.value=f.value.balance);let ne=new Fe("ThemeStyleConfig");ne.init();const he=i(Ee(e.address,40,ne.jdenticonConfig)),h=i(""),x=i(0),ie=i(0),re=i(0),ce=i(!1),de=i(!1),T=i("link"),z=i("");if(f.value){let l=f.value.assets.find(M=>M.idHex===e.assetId);l!=null&&(h.value=l.idHex,ce.value=l.transferable,de.value=l.supplyMutable,x.value=l.divisibility,ie.value=u.convertToCurrency(l.supply,l.divisibility),re.value=l.amount)}const R=i("0.000000"),C=i(0),_=d(()=>{if(!f.value)return{hasCosigner:!1,cosignerList:[]};if(V.currentNetworkProfileConfig){let l=Pe.getCosignerInWallet(f.value?f.value.publicKey:""),M=[];return l.cosignerList.forEach(I=>{M.push({publicKey:I,name:q(I).name,balance:q(I).balance,address:q(I).address})}),l.cosignerList=M,{hasCosigner:l.hasCosigner,cosignerList:l.cosignerList}}else return{hasCosigner:!1,cosignerList:[]}}),Z=d(()=>_.value.cosignerList.length>0?_.value.cosignerList.length>1?b.value:q(_.value.cosignerList[0].publicKey).address:"");b.value=_.value.cosignerList.length>0?_.value.cosignerList[0].address:"",B(_,l=>{l.cosignerList.length>0&&(b.value=l.cosignerList.length>0?_.value.cosignerList[0].address:"")});try{R.value=u.convertToCurrency(N.getMosaicSupplyChangeTransactionFee(h.value,T.value,L.value,x.value),g.nativeToken.divisibility),C.value=u.convertToExact(N.getMosaicSupplyChangeTransactionFee(h.value,T.value,L.value,x.value),g.nativeToken.divisibility)}catch(l){console.log(l)}const ye=()=>{let l;if(T.value=="link")l=h.value;else{let K=H.currentLoggedInWallet.accounts.find(D=>D.address==p.value);K||(K=H.currentLoggedInWallet.others.find(D=>D.address==p.value)),l=K.namespaces.find(D=>D.name===z.value).linkedId}const M=g.buildTxn;let I=T.value=="link"?j.AliasActionType.Link:j.AliasActionType.Unlink;const ke=M.assetAlias(I,new j.NamespaceId(z.value),new j.MosaicId(l));Z.value?(G.selectedAddress=Z.value,G.selectedMultisigAddress=p.value):G.selectedAddress=p.value,G.unsignedTransactionPayload=ke.serialize(),r.push({name:"ViewConfirmTransaction"})};B(T,l=>{R.value=u.convertToCurrency(N.getMosaicSupplyChangeTransactionFee(h.value,l,L.value,x.value),g.nativeToken.divisibility),C.value=u.convertToExact(N.getMosaicSupplyChangeTransactionFee(h.value,l,L.value,x.value),g.nativeToken.divisibility)}),B(L,l=>{h.value&&(R.value=u.convertToCurrency(N.getMosaicSupplyChangeTransactionFee(h.value,T.value,l,x.value),g.nativeToken.divisibility),C.value=u.convertToExact(N.getMosaicSupplyChangeTransactionFee(h.value,T.value,l,x.value),g.nativeToken.divisibility))});const ue=d(()=>ee(p.value)?parseFloat(P.value)+C.value:C.value),_e=d(()=>u.amountFormatterSimple(ue.value,0)),$=l=>{k.value=l,S.value=l};return B(ue,l=>{X.value<l?$(!0):$(!1)}),B(le,l=>{$(!!l)}),B(oe,l=>{$(!!l)}),{currentNativeTokenName:m,selectedAccName:se,selectedAccAdd:p,balance:X,balanceNumber:Y,showNoBalance:le,lockFundTxFee:v,lockFundCurrency:F,lockFundTotalFee:P,totalFeeFormatted:_e,err:s,disableCreate:be,showPasswdError:c,supply:L,disabledPassword:k,currencyName:O,isMultiSigBool:fe,selectAsset:h,selectAction:T,linkNamespace:ye,transactionFee:R,transactionFeeExact:C,assetSupply:ie,assetAmount:re,assetDivisibility:x,assetTransferable:ce,assetMutable:de,selectNamespace:z,getMultiSigCosigner:_,cosignerBalanceInsufficient:A,cosignerAddress:b,cosigner:Z,isNotCosigner:oe,disabledSelectAction:S,Helper:u,svgString:he,checkCosignBalance:ae}}},ft={class:"w-10/12 ml-auto mr-auto"},ht={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},yt={class:"xl:col-span-2 p-6 lg:p-12"},_t={class:"lg:flex lg:justify-between lg:items-center"},kt={class:"font-semibold mb-4 inline-block mt-1"},xt={class:"flex items-center"},Tt=["innerHTML"],Ct={class:"ml-2"},St={class:"text-blue-primary text-xxs font-bold uppercase mb-1"},wt={class:"font-bold text-black text-sm"},Nt={key:0,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},At={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},Ft={class:"inline-block text-xs"},Lt={key:1,class:"rounded-md bg-yellow-200 w-full p-2 flex items-center justify-center"},$t={class:"rounded-full w-5 h-5 bg-yellow-100 inline-block relative mr-2"},Mt={class:"inline-block text-xs"},It={key:2,class:"error error_box"},Vt={class:"text-right w-full"},Bt={key:0,class:"inline-block"},Et={class:"text-tsm text-left mt-3"},Pt={key:0,class:"font-bold"},Dt={key:0,class:"error"},Ht={key:1,class:"font-bold"},Ut=["value"],Wt={key:2,class:"error"},jt={class:"border border-blue-primary p-4 bg-blue-100 flex items-center rounded mt-5"},zt=t("img",{src:De},null,-1),Rt={class:"ml-1"},qt={class:"uppercase text-blue-primary font-semibold text-xxs"},Gt={class:"text-black text-sm font-bold"},Jt={class:"border border-gray-200 p-4 rounded mt-5"},Ot={class:"lg:grid lg:grid-cols-2"},Qt={class:"my-3"},Xt={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Yt={src:J,class:"inline-block ml-2 relative",style:{top:"-1px"}},Zt={class:"text-black font-bold text-sm"},Kt={class:"my-3"},es={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},ts={src:J,class:"inline-block ml-2 relative",style:{top:"-1px"}},ss={class:"text-black font-bold text-sm"},as={class:"my-3"},ls={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},os={src:J,class:"inline-block ml-2 relative",style:{top:"-1px"}},ns={class:"uppercase text-black font-bold text-sm"},is={class:"my-3"},rs={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},cs={src:J,class:"inline-block ml-2 relative",style:{top:"-1px"}},ds={class:"uppercase text-black font-bold text-sm"},us={class:"lg:grid lg:grid-cols-2 mt-5"},ms={class:"bg-navy-primary py-6 px-12 xl:col-span-1"},vs=["disabled"],gs={class:"text-center"};function ps(e,r,m,s,k,S){const c=U("font-awesome-icon"),A=U("SelectLinkType"),b=U("SelectInputNamespace"),O=U("TransactionFeeDisplay"),Q=U("router-link"),F=Le("tooltip");return o(),n("div",null,[t("div",ft,[t("div",ht,[t("div",yt,[t("div",_t,[t("div",kt,a(e.$t("general.linkToNamespace")),1),t("div",xt,[t("div",{innerHTML:s.svgString,class:"inline-block"},null,8,Tt),t("div",Ct,[t("div",St,a(e.$t("asset.assetCreatedBy")),1),t("div",wt,a(s.selectedAccName),1)])])]),s.showNoBalance?(o(),n("div",Nt,[t("div",At,[E(c,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),t("div",Ft,a(e.$t("general.insufficientBalance")),1)])):s.isNotCosigner?(o(),n("div",Lt,[t("div",$t,[E(c,{icon:"exclamation",class:"text-yellow-500 h-3 w-3 absolute",style:{top:"5px",left:"7px"}})]),t("div",Mt,a(e.$t("general.noCosigner")),1)])):y("",!0),s.err!=""?(o(),n("div",It,a(s.err),1)):y("",!0),t("div",Vt,[s.getMultiSigCosigner.cosignerList.length>0?(o(),n("div",Bt,[t("div",Et,[w(a(e.$t("general.initiateBy"))+": ",1),s.getMultiSigCosigner.cosignerList.length==1?(o(),n("span",Pt,[w(a(s.getMultiSigCosigner.cosignerList[0].name)+" ("+a(e.$t("general.balance"))+": "+a(s.Helper.amountFormatterSimple(s.getMultiSigCosigner.cosignerList[0].balance,0))+" "+a(s.currentNativeTokenName)+") ",1),s.getMultiSigCosigner.cosignerList[0].balance<s.lockFundTotalFee?(o(),n("span",Dt,"- "+a(e.$t("general.insufficientBalance")),1)):y("",!0)])):(o(),n("span",Ht,[W(t("select",{"onUpdate:modelValue":r[0]||(r[0]=v=>s.cosignerAddress=v)},[(o(!0),n(ge,null,pe(s.getMultiSigCosigner.cosignerList,(v,P)=>(o(),n("option",{value:v.address,key:P},a(v.name)+" ("+a(e.$t("general.balance"))+": "+a(v.balance)+" "+a(s.currentNativeTokenName)+")",9,Ut))),128))],512),[[$e,s.cosignerAddress]])])),s.cosignerBalanceInsufficient?(o(),n("div",Wt,"- "+a(e.$t("general.insufficientBalance")),1)):y("",!0)])])):y("",!0)]),t("div",jt,[zt,t("div",Rt,[t("div",qt,a(e.$t("general.assetId")),1),t("div",Gt,a(s.selectAsset),1)])]),t("div",Jt,[t("div",Ot,[t("div",Qt,[t("div",Xt,[w(a(e.$t("asset.currentSupply")),1),W(t("img",Yt,null,512),[[F,{value:"<tiptext>"+e.$t("asset.supplyMsg2")+"<br>"+e.$t("asset.supplyMsg3")+"</tiptext>",escape:!1},void 0,{bottom:!0}]])]),t("div",Zt,a(s.assetAmount),1)]),t("div",Kt,[t("div",es,[w(a(e.$t("general.divisibility")),1),W(t("img",ts,null,512),[[F,{value:"<tiptext>"+e.$t("asset.divisibilityMsg4")+"<br><br>"+e.$t("asset.divisibilityMsg2")+"<br>"+e.$t("asset.divisibilityMsg3")+"</tiptext>",escape:!1},void 0,{bottom:!0}]])]),t("div",ss,a(s.assetDivisibility),1)]),t("div",as,[t("div",ls,[w(a(e.$t("general.transferable")),1),W(t("img",os,null,512),[[F,{value:"<tiptext>"+e.$t("asset.transferableMsg")+"</tiptext>",escape:!1},void 0,{bottom:!0}]])]),t("div",ns,a(s.assetTransferable?e.$t("general.yes"):e.$t("general.no")),1)]),t("div",is,[t("div",rs,[w(a(e.$t("general.supplyMutable")),1),W(t("img",cs,null,512),[[F,{value:"<tiptext>"+e.$t("asset.supplyMutableMsg")+"</tiptext>",escape:!1},void 0,{bottom:!0}]])]),t("div",ds,a(s.assetMutable?e.$t("general.yes"):e.$t("general.no")),1)])])]),t("div",us,[E(A,{title:e.$t("asset.modificationType"),class:"lg:mr-4",modelValue:s.selectAction,"onUpdate:modelValue":r[1]||(r[1]=v=>s.selectAction=v),disabled:s.disabledSelectAction},null,8,["title","modelValue","disabled"]),E(b,{action:s.selectAction,modelValue:s.selectNamespace,"onUpdate:modelValue":r[2]||(r[2]=v=>s.selectNamespace=v),address:s.selectedAccAdd,assetId:s.selectAsset},null,8,["action","modelValue","address","assetId"])])]),t("div",ms,[E(O,{"transaction-fee":s.transactionFee,"total-fee-formatted":s.totalFeeFormatted,"get-multi-sig-cosigner":s.getMultiSigCosigner,"check-cosign-balance":s.checkCosignBalance,"lock-fund-currency":s.lockFundCurrency,"lock-fund-tx-fee":String(s.lockFundTxFee),balance:s.balance,"selected-acc-add":s.selectedAccAdd},null,8,["transaction-fee","total-fee-formatted","get-multi-sig-cosigner","check-cosign-balance","lock-fund-currency","lock-fund-tx-fee","balance","selected-acc-add"]),t("button",{type:"submit",class:"mt-3 w-full blue-btn py-4 disabled:opacity-50 disabled:cursor-auto text-white",disabled:s.disableCreate,onClick:r[3]||(r[3]=(...v)=>s.linkNamespace&&s.linkNamespace(...v))},a(s.selectAction=="link"?e.$t("general.linkToNamespace"):e.$t("namespace.unlinkNamespace")),9,vs),t("div",gs,[E(Q,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white border-b-2 border-white"},{default:Me(()=>[w(a(e.$t("general.cancel")),1)]),_:1})])])])])])}const Ns=te(bt,[["render",ps]]);export{Ns as default};
