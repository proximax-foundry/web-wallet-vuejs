import{_ as Q,a5 as ne,M as ie,o as p,b as f,e as t,j as G,t as d,O as ue,f as M,x as de,d as Ie,l as Ae,r as a,u as Pe,c as m,W as R,w as K,B as s,H as E,n as C,S as z,a as se,i as oe,m as b,v as $e,h as Ee,z as N}from"./index-1ac46190.js";import{_ as Se,a as Ve,b as Ne,c as Me}from"./TxnSummary.vue_vue_type_script_setup_true_lang-702a14c9.js";import{_ as Fe}from"./PasswordInput.vue_vue_type_script_setup_true_lang-efb7e039.js";import{S as De}from"./SupplyInputClean-f0f1bcdc.js";import{_ as ce}from"./icon-info-8b4f1351.js";import{A as j}from"./assetsUtils-554ef9f5.js";import{T as Z}from"./transactionState-93525e11.js";import"./jdenticon-module-d7f49388.js";import"./proximax-logo-ecfc3767.js";const Ue="/web-wallet-vuejs/assets/icon-done-a0410eac.svg",Be="/web-wallet-vuejs/assets/icon-undone-5c4de078.svg",Le={directives:{tooltip:ne},props:{title:String,disabled:Boolean,modelValue:Boolean,toolTip:String},emits:["update:modelValue"],name:"CheckInput",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},methods:{clickInputText:function(){!this.showError&&!this.disabled&&(this.borderColor="border-2 border-blue-primary")},getIcon(){return require(`@/${this.icon}`)},blurInputText:function(){this.disabled||(this.modelValue==""?(this.borderColor="border-2 border-red-primary",this.textErr=!0):(this.borderColor="border-2 border-gray-300",this.textErr=!1))},focusInputText:function(){this.borderColor="border-2 border-blue-primary",this.textErr=!1}},mounted(){this.emitter.on("CLEAR_TEXT",u=>{this.inputText=u,this.textErr=!1,this.borderColor="border border-gray-300"})}},We={class:"border border-gray-200 px-2 py-1 h-14 flex items-center justify-between rounded-md"},Re={key:0,src:ce,class:"inline-block ml-2 relative",style:{top:"-1px"}},Ke={key:0,src:Ue,class:"inline-block"},je={key:1,src:Be,class:"inline-block"};function He(u,c,o,S,F,i){const D=ie("tooltip");return p(),f("div",{class:G(`${o.disabled?"opacity-50":"cursor-pointer"}`)},[t("div",We,[t("div",null,[t("div",{class:G(["inline-block font-bold text-tsm",`${o.disabled?"text-gray-500":"text-black"}`])},d(o.title),3),o.toolTip?ue((p(),f("img",Re,null,512)),[[D,{value:"<tiptext>"+o.toolTip+"</tiptext>",escape:!1},void 0,{bottom:!0}]]):M("",!0)]),o.modelValue?(p(),f("img",Ke)):(p(),f("img",je))])],2)}const re=Q(Le,[["render",He]]);const Oe={directives:{tooltip:ne},props:{placeholder:String,errorMessage:String,icon:String,showError:Boolean,modelValue:String,title:String,disabled:Boolean,max:Number,toolTip:String},emits:["update:modelValue"],name:"NumberInputClean",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},methods:{clickInputText:function(){this.pswdErr||(this.borderColor="border-2 border-blue-primary")},validateKey:function(u){if(u.charCode<48||u.charCode>54)u.preventDefault();else return u.key},validate:function(u){this.$emit("update:modelValue",u.data)}},mounted(){this.emitter.on("CLEAR_TEXT",u=>{this.inputText=u,this.textErr=!1,this.borderColor="border border-gray-300"})}},Xe={class:"border border-gray-200 px-2 py-1 h-14 rounded-md"},qe={class:"uppercase text-gray-500 text-txs text-left mb-2"},ze={key:0,src:ce,class:"inline-block ml-1 relative cursor-pointer",style:{top:"-1px"}},Ze=["disabled","value","max","placeholder"],Ge={class:"h-3 mb-2"},Qe={key:0,class:"error error-text text-left"};function Je(u,c,o,S,F,i){const D=ie("tooltip");return p(),f("div",{class:G(o.disabled?"opacity-50":"")},[t("div",Xe,[t("div",qe,[de(d(o.placeholder)+" ",1),o.toolTip?ue((p(),f("img",ze,null,512)),[[D,{value:"<tiptext>"+o.toolTip+"</tiptext>",escape:!0},void 0,{bottom:!0}]]):M("",!0)]),t("input",{disabled:o.disabled,value:o.modelValue,onInput:c[0]||(c[0]=(...g)=>i.validate&&i.validate(...g)),onKeypress:c[1]||(c[1]=(...g)=>i.validateKey&&i.validateKey(...g)),type:"number",maxlength:"1",min:"0",max:o.max,placeholder:o.placeholder,class:"number_input",onClick:c[2]||(c[2]=g=>i.clickInputText()),onFocus:c[3]||(c[3]=g=>g.target.select())},null,40,Ze)]),t("div",Ge,[F.textErr||o.showError?(p(),f("div",Qe,d(o.errorMessage),1)):M("",!0)])],2)}const Ye=Q(Oe,[["render",Je]]),et={class:"w-10/12 ml-auto mr-auto"},tt={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},lt={class:"xl:col-span-2 p-12"},at={class:"font-semibold mb-4"},st={key:0,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},ot={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},rt={class:"inline-block text-xs"},nt={key:1,class:"error error_box"},it={class:"mt-4"},ut={class:"flex gap-1 mt-3"},dt={key:0,class:"mt-3"},ct={class:"lg:grid lg:grid-cols-2 mt-5"},vt={class:"lg:mr-2"},mt={class:"lg:ml-2"},bt={class:"lg:grid lg:grid-cols-2"},pt={class:"mb-5 lg:mb-0 lg:mr-2"},ft={class:"mb-5 lg:mb-0 lg:ml-2"},gt={class:"bg-navy-primary py-6 px-6 xl:col-span-1"},ht={class:"text-xs text-white my-5"},yt=["disabled"],_t={class:"text-center"},xt={class:"sm:grid sm:grid-cols-2 mt-10 lg:mt-16"},Tt={class:"mb-8"},wt={href:"https://bcdocs.xpxsirius.io/docs/built-in-features/mosaic/",target:"_new",class:"sm:h-9 lg:h-5 text-blue-primary font-bold text-tsm flex items-start"},kt={class:"text-gray-400 text-xs lg:text-tsm my-3 sm:pr-2"},Ct={class:"mb-8"},It={href:"https://t.me/proximaxhelpdesk",target:"_new",class:"sm:h-9 lg:h-5 text-blue-primary font-bold text-tsm items-start flex"},At={class:"text-gray-400 text-tsm my-3"},Pt="^[^ ]{8,}$",$t=Ie({__name:"ViewServicesAssetsCreate",setup(u){const c=Ae(),S=Ee().appContext.config.globalProperties.emitter,F=a(!1),i=a(""),{t:D}=Pe(),g=a(""),v=a("0"),ve=a(!1),y=a(!1),_=a(!1),me=m(()=>x.value||ee.value),B=m(()=>ee.value),J=a(!1),H=a(!1),be=a("month"),pe=a("1"),fe=a(!1),ge=a(!1),Y=a(!1),T=a("0"),ee=a(!1),I=a(),A=a();try{I.value=R.createPublicAccount(K.currentLoggedInWallet?K.currentLoggedInWallet.selectDefaultAccount().publicKey:"",s.networkType)}catch(e){console.log(e)}const he=a("0"),P=a(0);try{he.value=E.amountFormatterSimple(j.createAssetTransactionFee(I.value,Number(T.value),_.value,y.value,Number(v.value)),s.nativeToken.divisibility),P.value=E.convertToExact(j.createAssetTransactionFee(I.value,Number(T.value),_.value,y.value,Number(v.value)),s.nativeToken.divisibility)}catch(e){console.log(e)}const L=m(()=>C.currentNetworkProfileConfig?E.convertToExact(C.currentNetworkProfileConfig.mosaicRentalFee,s.nativeToken.divisibility):0),ye=m(()=>C.currentNetworkProfileConfig?E.convertToCurrency(C.currentNetworkProfileConfig.mosaicRentalFee,s.nativeToken.divisibility):"0"),te=m(()=>C.currentNetworkProfileConfig?E.convertToExact(C.currentNetworkProfileConfig.lockedFundsPerAggregate,s.nativeToken.divisibility):0),le=m(()=>C.currentNetworkProfile?E.convertToExact(z.getLockFundFee(),s.nativeToken.divisibility):0),ae=m(()=>te.value+le.value),_e=m(()=>!(i.value.match(Pt)&&v.value!=null&&Number(T.value)>0&&!F.value&&!fe.value&&!x.value)),r=a(null),V=a(null),w=a(null),k=a(0),W=a(0),O=async e=>{if(s.chainAPI&&e)try{const l=await s.chainAPI.accountAPI.getAccountInfo(N.Address.createFromRawAddress(e)),h=l.mosaics.findIndex($=>$.id.toHex()==s.nativeToken.assetId);return h!=-1?l.mosaics[h].amount.compact()/Math.pow(10,s.nativeToken.divisibility):0}catch{return 0}},x=m(()=>{if(w.value)return r.value?W.value<L.value?!0:k.value<P.value+ae.value:k.value<L.value+P.value});k.value<L.value+P.value?(J.value=!0,H.value=!0,Y.value=!0):(J.value=!1,H.value=!1,Y.value=!1);const U=()=>{i.value="",v.value="0",T.value="0",pe.value="1",be.value="month",H.value=!1,y.value=!1,_.value=!1};se(w,async(e,l)=>{e==null?(k.value=0,U(),V.value=null,r.value=null,A.value=null):e!=l&&(U(),V.value=null,r.value=null,A.value=null,k.value=await O(e))}),se(r,async(e,l)=>{e==null?(W.value=0,U(),V.value=null,r.value=null,A.value=null,k.value=await O(w.value)):e!=l&&(U(),W.value=await O(e))});const xe=m(()=>r?ae.value+P.value:L.value+P.value),Te=m(()=>E.amountFormatterSimple(xe.value,0)),we=e=>{F.value=e},ke=async()=>{if(!R.verifyWalletPassword(K.currentLoggedInWallet.name,C.chainNetworkName,i.value)){g.value=D("general.walletPasswordInvalid",{name:K.currentLoggedInWallet.name});return}let l;if(r.value){const h=s.buildTxn.mosaicDefinition(A.value,_.value,y.value,Number(v.value)),$=h.toAggregateV1(A.value);let n=N.MosaicSupplyType.Increase;const X=s.buildTxn.buildMosaicSupplyChange(h.mosaicId,n,N.UInt64.fromUint(j.addZeros(Number(v.value),Number(T.value)))).toAggregateV1(A.value),q=[$,X],Ce=await s.chainAPI.nodeAPI.getNodeTime();l=z.signTxnWithPassword(w.value,r.value,i.value,null,q,new N.UInt64(Ce.sendTimeStamp))}else{const h=s.buildTxn.mosaicDefinition(I.value,_.value,y.value,Number(v.value)),$=h.toAggregateV1(I.value);let n=N.MosaicSupplyType.Increase;const X=s.buildTxn.buildMosaicSupplyChange(h.mosaicId,n,N.UInt64.fromUint(j.addZeros(Number(v.value),Number(T.value)))).toAggregateV1(I.value);let q=s.buildTxn.aggregateComplete([$,X]);l=z.signTxnWithPassword(w.value,r.value,i.value,q)}U(),Z.lockHashPayload=l.hashLockTxnPayload,Z.transactionPayload=l.txnPayload,Z.selectedAddress=w.value,c.push({name:"ViewConfirmTransaction"})};return S.on("select-account",e=>{w.value=e}),S.on("select-account-public-key",e=>{I.value=R.createPublicAccount(e,s.networkType)}),S.on("select-multisig-account",e=>{V.value=e.label,r.value=e.value,A.value=R.createPublicAccount(e.publicKey,s.networkType)}),S.on("CLOSE_MULTISIG",()=>{V.value=null,r.value=null}),(e,l)=>{const h=oe("font-awesome-icon"),$=oe("router-link");return p(),f("div",null,[t("div",et,[t("div",tt,[t("div",lt,[t("div",at,d(e.$t("asset.createAssets")),1),x.value?(p(),f("div",st,[t("div",ot,[b(h,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),t("div",rt,d(e.$t("general.insufficientBalance")),1)])):M("",!0),g.value!=""?(p(),f("div",nt,d(g.value),1)):M("",!0),t("div",it,[t("div",ut,[b(Se,{type:"asset"}),b(Ve,{"selected-address":w.value},null,8,["selected-address"])]),r.value?(p(),f("div",dt,[b(Ne,{"select-default-address":r.value,"select-default-name":V.value,type:"asset"},null,8,["select-default-address","select-default-name"])])):M("",!0),t("div",ct,[t("div",vt,[b(De,{disabled:x.value||B.value,modelValue:T.value,"onUpdate:modelValue":l[0]||(l[0]=n=>T.value=n),balance:Number.MAX_VALUE,placeholder:e.$t("general.supply"),type:"text",onShowError:we,decimal:Number(v.value),toolTip:e.$t("asset.supplyMsg1")+" <br><br>"+e.$t("asset.supplyMsg2")+"<br>"+e.$t("asset.supplyMsg3")},null,8,["disabled","modelValue","balance","placeholder","decimal","toolTip"])]),t("div",mt,[b(Ye,{disabled:x.value||B.value,modelValue:v.value,"onUpdate:modelValue":l[1]||(l[1]=n=>v.value=n),max:6,placeholder:e.$t("general.divisibility"),showError:ve.value,toolTip:e.$t("asset.divisibilityMsg1")+" <br><br>"+e.$t("asset.divisibilityMsg2")+"<br>"+e.$t("asset.divisibilityMsg3")},null,8,["disabled","modelValue","placeholder","showError","toolTip"])])]),t("div",bt,[t("div",pt,[b(re,{disabled:x.value||B.value,modelValue:y.value,"onUpdate:modelValue":l[2]||(l[2]=n=>y.value=n),title:e.$t("general.transferable"),toolTip:e.$t("asset.transferableMsg"),onClick:l[3]||(l[3]=n=>x.value?"":y.value=!y.value)},null,8,["disabled","modelValue","title","toolTip"])]),t("div",ft,[b(re,{disabled:x.value||B.value,modelValue:_.value,"onUpdate:modelValue":l[4]||(l[4]=n=>_.value=n),title:e.$t("general.supplyMutable"),toolTip:e.$t("asset.supplyMutableMsg"),onClick:l[5]||(l[5]=n=>x.value?"":_.value=!_.value)},null,8,["disabled","modelValue","title","toolTip"])])])])]),t("div",gt,[b(Me,{"signer-native-token-balance":k.value,"asset-rental-fee-currency":ye.value,"native-token-balance":r.value?W.value:k.value,"lock-fund":te.value,"lock-fund-tx-fee":le.value,"selected-multisig-address":r.value,"txn-fee":P.value,"total-fee":Number(Te.value)},null,8,["signer-native-token-balance","asset-rental-fee-currency","native-token-balance","lock-fund","lock-fund-tx-fee","selected-multisig-address","txn-fee","total-fee"]),t("div",ht,d(e.$t("general.enterPasswordContinue")),1),b(Fe,{placeholder:e.$t("general.password"),errorMessage:e.$t("general.passwordRequired"),showError:ge.value,modelValue:i.value,"onUpdate:modelValue":l[6]||(l[6]=n=>i.value=n),disabled:me.value},null,8,["placeholder","errorMessage","showError","modelValue","disabled"]),t("button",{type:"submit",class:"mt-3 w-full blue-btn py-4 disabled:opacity-50 disabled:cursor-auto text-white",disabled:_e.value,onClick:ke},d(e.$t("asset.createAssets")),9,yt),t("div",_t,[b($,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white border-b-2 border-white"},{default:$e(()=>[de(d(e.$t("general.cancel")),1)]),_:1})])])]),t("div",xt,[t("div",Tt,[t("a",wt,d(e.$t("general.assetQues")),1),t("div",kt,d(e.$t("asset.assetAns")),1)]),t("div",Ct,[t("a",It,d(e.$t("general.feedback")),1),t("div",At,d(e.$t("general.feedbackDescription")),1)])])])])}}});const Lt=Q($t,[["__scopeId","data-v-d144a1c1"]]);export{Lt as default};
