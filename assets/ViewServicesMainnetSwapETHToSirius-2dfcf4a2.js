import{_ as We,c as N,A as Ge,g as n,a1 as ze,bc as Je,n as Ke,D as ae,y as Ye,w as q,H as Ze,r as P,o as r,f as l,e as t,s as d,h as o,t as c,i as u,l as v,a as p,b as ke,O as $e,R as et}from"./index-d2e8ccc1.js";import{S as tt}from"./SupplyInputClean-d2d2dfad.js";import{S as st,_ as at}from"./icon-dots-80222923.js";import{_ as nt}from"./SelectInputAccount.vue_vue_type_script_setup_true_lang-e07ec14b.js";import{c as rt}from"./functions-35769730.js";import{S as E,a as _e}from"./swapUtils-b9902fba.js";import{_ as ot}from"./eth-aa063e38.js";import{_ as it}from"./address-ae442d6a.js";import{B as X,_ as Se,C as Ce}from"./icon-connected-f35fa7e5.js";import{_ as Me}from"./icon-xpx-072deeab.js";import{p as lt}from"./units-c9939692.js";import"./icon-info-8b4f1351.js";import"./jdenticon-module-59aa2fb9.js";import"./jspdf.es.min-5233ca6d.js";import"./qrcode-892e467f.js";const dt={name:"ViewServicesMainnetSwapETHToSirius",components:{SupplyInputClean:tt,SwapCertificateComponent:st,SelectInputAccount:nt},setup(){const g=N(()=>Ge.nativeToken.label),s=n(!0);window.ethereum&&(window.ethereum.isMetaMask||(s.value=!1)),ze(()=>{});let h=new Je(Ke.chainNetworkName);h.init();const e=n(0),O=n(""),V=n("");(async()=>{try{const a=await E.fetchTokenServiceInfo(h.swap_IN_SERVICE_URL,"xpx");a.status==200?(V.value=a.data.ethInfo.scAddress,O.value=a.data.ethInfo.sinkAddress,e.value=parseInt(a.data.siriusInfo.feeAmount),C.value=""):C.value="Swapping service is temporary not available. Please try again later"}catch{C.value="Swapping service is temporary not available. Please try again later"}})();let f=h.ETHChainId,Q=h.ETHNetworkName;const H=n(!1),k=n(!1),x=n(null),i=n(0),W=n(0),ne=n(""),G=n(!1),R=n(!1),j=n(!1),D=n(!1),L=n("Retry"),Te=h.ETHScanUrl,Ie=E.getIncoming_ETHSwapTransfer_URL(h.swap_IN_SERVICE_URL,"xpx"),z=n(!1),Ae=N(()=>R.value?"Approval on MetaMask is rejected":"Please sign transaction confirmation in MetaMask");let b,_;typeof window.ethereum<"u"?(b=new X(window.ethereum),_=b.getSigner(),H.value=!0,k.value=!!ethereum.isConnected(),ethereum.request({method:"eth_accounts"}).then(re).catch(a=>{console.error(a)}),ethereum.request({method:"eth_chainId"}).then(a=>{oe(a,!1)}).catch(a=>{console.error(a)}),ethereum.on("accountsChanged",Ne),ethereum.on("chainChanged",a=>{oe(a,!0)})):console.log("MetaMask not installed");function re(a){a.length===0?(W.value=0,x.value=""):a[0]!==x.value&&(x.value=a[0],J()),k.value=!!ethereum.isConnected()}function Ne(a){window.ethereum.isMetaMask&&(a.length===0?(W.value=0,x.value=""):a[0]!==x.value&&(x.value=a[0],C.value="",J())),k.value=!!ethereum.isConnected()}function oe(a,m=!1){ne.value=a,f===parseInt(a)?(I.value="",m&&J()):I.value="Please select "+Q+" on MetaMask to swap"}function J(){ethereum.request({method:"eth_getBalance",params:[x.value,"latest"]}).then(a=>{W.value=parseInt(a)/Math.pow(10,18)}).catch(a=>{console.error(a)})}const Pe=()=>{window.ethereum.isMetaMask==null?s.value=!1:(s.value=!0,ethereum.request({method:"eth_requestAccounts"}).then(re).catch(a=>{a.code===4001?console.log("Please connect to MetaMask."):a.code=="-32002"&&(C.value="Please click on MetaMask extension to approve connection")}))};ae([ne,x,V],([a,m,y])=>{y!=null&&y!=""&&(async()=>{try{b=new X(window.ethereum,"any"),_=b.getSigner();const pe=await new Ce(y,_e,_).balanceOf(m);i.value=pe.toNumber()/Math.pow(10,6)}catch{i.value=0}})()}),ae(i,a=>{a<=e.value?T.value=!0:T.value=!1});const ie=n(!1),le=n(!1),de=n(!1),ce=n(!1),me=n(!1),ue=n(!1),fe=n(!1),B=n(""),K=n(""),ve=n(""),Y=n(""),Z=n(""),$=n(""),ee=n(""),Ee=()=>{E.generateIncomingPdfCert("ETH",Y.value,S.value,Z.value,$.value,ee.value)},Ve=Ye(),He=a=>{let m=document.getElementById(a).getAttribute("copyValue"),y=document.getElementById(a).getAttribute("copySubject");rt(m),Ve.add({severity:"info",summary:y+" copied",detail:m,group:"br-custom",life:3e3})},te=n(1),Re=n(!1),xe=n(!0),T=n(!1),je=n(!1),S=n(q.currentLoggedInWallet.selectDefaultAccount().address),I=n(""),C=n(""),De=N(()=>!(w.value>0&&S.value!=""&&!I.value&&i.value>=w.value&&w.value>e.value)),w=n("0"),Le=N(()=>{let a=q.currentLoggedInWallet.accounts.find(m=>m.address==S.value);return a||(a=q.currentLoggedInWallet.others.find(m=>m.address==S.value)),a.name}),Be=N(()=>w.value-50>0?w.value-50:0);ae(w,a=>{a<=e.value?T.value=!0:T.value=!1});const Ue=()=>{te.value=2,setTimeout(()=>ie.value=!0,1e3),setTimeout(()=>{le.value=!0,(async()=>await be())()},2e3)},be=async()=>{try{I.value="",G.value=!1,b=new X(window.ethereum,"any"),_=b.getSigner();const m=new Ce(V.value,_e,_);var a={gasLimit:(await E.getETH_GasLimit(h.gasPriceConsultURL)).standardGasLimit};const M=await m.transfer(O.value,lt(w.value,6),a);B.value=M.hash,K.value=Te+M.hash,(await b.getTransaction(M.hash)).hash===M.hash&&Fe()}catch(m){G.value=!0,(m.code="-32000")&&(m.value=m.message)}},Fe=()=>{de.value=!0},se=n(!1),U=n(!1),A=n(!1),qe=()=>{se.value=!0,U.value=!0,A.value=!1,setTimeout(async()=>{await ye()},2e3)},ye=async()=>{const a=await Xe();se.value=!1,a?z.value?(U.value=!1,A.value=!0):(A.value=!1,setTimeout(()=>ce.value=!0,1e3),setTimeout(()=>{me.value=!0,(async()=>await he())()},2e3)):(U.value=!1,A.value=!0)},ge=n(""),he=async()=>{try{R.value=!1,b=new X(window.ethereum,"any"),_=b.getSigner();const a=await _.signMessage(S.value);ve.value=a;const m={recipient:S.value,signature:a,txnInfo:{network:"ETH",txnHash:B.value}};ge.value=m,await we()}catch{R.value=!0}},Xe=async()=>{try{let a=await b.getTransactionReceipt(B.value);return a&&a.status===1?!0:a&&a.status===0?(z.value=!0,!0):!1}catch(a){return console.log(a),!1}},F=n(0),we=async()=>{ue.value=!0,fe.value=!0,L.value="Initiating swap...",D.value=!0;let a=JSON.stringify(ge.value);try{const m=await fetch(Ie,{method:"POST",headers:{"Content-Type":"application/json"},body:a});if(m.status==200||m.status==201){const y=await m.json();j.value=!1,$.value=y.remoteTxnHash,Y.value=y.timestamp,Z.value=y.ctxId,ee.value=E.generateQRCode(K.value),setTimeout(()=>xe.value=!1,1e3),F.value=0}else m.status==208?console.log("208"):(j.value=!0,++F.value,L.value="Retry",D.value=!1)}catch{j.value=!0,++F.value,L.value="Retry",D.value=!1}},Oe=()=>{te.value=3},Qe=n(!1);return{err:I,balance:i,isInstallMetamask:H,connectMetamask:Pe,isMetamaskConnected:k,currentAccount:x,copy:He,currentPage:te,isDisabledValidate:xe,siriusAddress:S,disableSiriusAddress:Re,showAmountErr:T,sendRequest:Ue,validated:Oe,amount:w,disableAmount:je,isDisabledSwap:De,savedCheck:Qe,step1:ie,step2:le,step3:de,step4:ce,step5:me,step6:ue,step7:fe,validationLink:K,validationHash:B,messageHash:ve,transactionHash:$,swapTimestamp:Y,swapId:Z,swapQr:ee,saveCertificate:Ee,isInvalidConfirmedMeta:G,isInvalidSignedMeta:R,isInvalidSwapService:j,getValidation:be,getSigned:he,defaultXPXTxFee:e,serviceErr:C,swapServerErrIndex:F,afterSigned:we,disableRetrySwap:D,retrySwapButtonText:L,signatureMessage:Ae,checkTxnConfirmation:ye,triggerTxnConfirmation:qe,isCheckingTxnConfirmation:se,isDisabledCheckTxnConfirmed:U,isTxnNotConfirmed:A,transactionFailed:z,verifyMetaMaskPlugin:s,currentNativeTokenName:g,walletState:q,amountReceived:Be,Helper:Ze,siriusName:Le}}},ct={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},mt={class:"mt-6 p-6 border filter shadow-lg text-center"},ut={class:"flex my-10"},ft={class:"flex-none"},vt={class:"flex border border-gray-300 rounded-md filter shadow-md"},xt={class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},bt={class:"flex-none"},yt={class:"flex border border-gray-300 rounded-md filter shadow-md"},gt={class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},ht={class:"flex-none"},wt={class:"flex border border-gray-300 rounded-md filter shadow-md"},pt={class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},kt={key:0},_t={key:0,class:"error error_box mb-5"},St={key:1,class:"bg-yellow-200 text-yellow-900 text-tsm p-3 mb-5 rounded-2xl"},Ct={class:"my-2"},Mt={href:"https://bit.ly/3mVayCu",target:"_new",class:"text-blue-primary"},Tt={key:2,class:"error error_box mb-5"},It={key:3,class:"error error_box mb-5"},At={class:"mb-5 md:flex md:justify-between border border-gray-200 rounded"},Nt={class:"flex justify-left"},Pt={class:"text-left flex items-center"},Et={class:"font-bold text-black text-tsm break-all mr-2"},Vt={key:0,class:"border-l border-gray-200 text-green-500 font-semibold text-xxs w-16 lg:w-20 flex items-center justify-center uppercase"},Ht={class:"border-l border-gray-200 text-blue-primary text-tsm font-bold w-16 lg:w-20 flex justify-center items-center"},Rt={key:0},jt={key:1},Dt={class:"md:hidden"},Lt={key:0,class:"border-t border-gray-200 text-green-500 font-semibold text-xxs uppercase p-2"},Bt={class:"border-t border-gray-200 text-blue-primary text-tsm font-bold p-3"},Ut={key:0},Ft={key:1},qt={class:"text-left"},Xt={class:"bg-blue-50 border border-blue-primary h-20 mt-5 rounded flex items-center justify-center"},Ot={class:"my-4 text-xs"},Qt={class:"mt-10 text-center"},Wt=["disabled"],Gt={key:1},zt={class:"text-lg my-7"},Jt={key:0,class:"error error_box mb-5"},Kt={class:"flex border-b border-gray-300 p-3"},Yt={class:"flex-none"},Zt={class:"flex h-full justify-center"},$t={class:"flex border-b border-gray-300 p-3"},es={class:"flex-none"},ts={class:"flex h-full justify-center"},ss={key:0,class:"mt-5"},as={class:"flex border-b border-gray-300 p-3"},ns={class:"flex-none"},rs={class:"flex h-full justify-center"},os={key:0,class:"bg-yellow-100 py-2 px-5 mt-3 rounded flex"},is=["href","copyValue"],ls={class:"flex-none mr-3"},ds={class:"sm:flex"},cs=["disabled"],ms={key:1,class:"py-2 sm:flex-grow text-xs mt-3"},us={class:"mb-1"},fs=["href"],vs={key:1,class:"text-tsm mt-2 bg-blue-100 px-4 py-2 rounded-xl inline-block text-blue-900"},xs={key:2,class:"text-tsm mt-2 bg-red-100 px-4 py-2 rounded-xl inline-block text-red-primary"},bs={class:"flex border-b border-gray-300 p-3"},ys={class:"flex-none"},gs={class:"flex h-full justify-center"},hs={class:"flex border-b border-gray-300 p-3"},ws={class:"flex-none"},ps={class:"flex h-full justify-center"},ks={key:0,class:"mt-5"},_s={class:"flex border-b border-gray-300 p-3"},Ss={class:"flex-none"},Cs={class:"flex h-full justify-center"},Ms={key:0,class:"bg-yellow-100 py-2 px-5 mt-2 rounded flex"},Ts=["copyValue"],Is={class:"flex-none mr-3"},As={class:"flex border-b border-gray-300 p-3"},Ns={class:"flex-none"},Ps={class:"flex h-full justify-center"},Es={key:0,class:"mt-5"},Vs=["disabled"],Hs={key:1,class:"mt-5 text-tsm sm:text-sm"},Rs={class:"mt-10 text-center"},js=["disabled"],Ds={key:2},Ls={class:"mt-3"},Bs=["href"],Us={class:"md:mx-20 lg:mx-10 xl:mx-40 border-2 border-gray-200 mt-4 p-5 text-xs font-bold filter shadow-lg"},Fs={class:"break-all"},qs={class:"mt-1"},Xs={class:"text-blue-primary mb-1"},Os={class:"mt-1"},Qs={class:"inline-flex items-center mb-5"},Ws={class:"sm:mt-5 text-center"};function Gs(g,s,h,e,O,V){const f=P("font-awesome-icon"),Q=P("SupplyInputClean"),H=P("SelectInputAccount"),k=P("router-link"),x=P("swap-certificate-component");return r(),l("div",null,[t("div",ct,[t("div",mt,[s[55]||(s[55]=t("div",{class:"text-md"},"Main Network Swap",-1)),s[56]||(s[56]=t("div",{class:"text-xs my-3 mb-5 sm:mb-10"},[t("img",{src:ot,class:"mr-2 h-5 inline-block"}),d("Swap from ETH to Proximax Sirius Chain")],-1)),t("div",ut,[t("div",ft,[t("div",vt,[t("div",{class:o(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage>=1?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:o(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=1?"text-white":"text-gray-400"}`])},"1",2)],2),t("div",xt,c(g.$t("swap.transaction")),1)])]),s[17]||(s[17]=t("div",{class:"flex-grow self-center md:mx-4 h-0.5 bg-gray-100"},null,-1)),t("div",bt,[t("div",yt,[t("div",{class:o(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage>=2?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:o(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=2?"text-white":"text-gray-400"}`])},"2",2)],2),t("div",gt,c(g.$t("swap.validation")),1)])]),s[18]||(s[18]=t("div",{class:"flex-grow self-center md:mx-4 h-0.5 bg-gray-100"},null,-1)),t("div",ht,[t("div",wt,[t("div",{class:o(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage==3?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:o(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=3?"text-white":"text-gray-400"}`])},"3",2)],2),t("div",pt,c(g.$t("swap.certificate")),1)])])]),e.currentPage==1?(r(),l("div",kt,[s[33]||(s[33]=t("div",{class:"text-lg my-7 font-bold"},"Transaction Details",-1)),e.isInstallMetamask?u("",!0):(r(),l("div",_t,c(g.$t("swap.noMetamask")),1)),e.verifyMetaMaskPlugin?u("",!0):(r(),l("div",St,[s[22]||(s[22]=d("Please make sure there is no other crypto wallet extension currently being enabled except ")),s[23]||(s[23]=t("b",null,"MetaMask",-1)),s[24]||(s[24]=d(".")),t("div",Ct,[s[20]||(s[20]=d("Refer to the ")),t("a",Mt,[s[19]||(s[19]=d("walkthrough")),v(f,{icon:"external-link-alt",class:"text-blue-primary w-3 h-3 self-center inline-block ml-1"})]),s[21]||(s[21]=d(" for more details."))]),s[25]||(s[25]=d("Please refresh this page after disabling other wallet extensions."))])),e.serviceErr!=""?(r(),l("div",Tt,c(e.serviceErr),1)):u("",!0),e.err!=""?(r(),l("div",It,c(e.err),1)):u("",!0),t("div",At,[t("div",Nt,[s[27]||(s[27]=t("div",{class:"w-18 flex items-center justify-center py-5 sm:h-20"},[t("img",{src:it,class:"w-8 h-8 inline-block"})],-1)),t("div",Pt,[t("div",null,[s[26]||(s[26]=t("div",{class:"text-xxs uppercase text-blue-primary font-bold mb-1"},"From MetaMask Address",-1)),t("div",Et,c(e.isMetamaskConnected&&e.currentAccount?e.currentAccount:"Not connected"),1)])])]),t("div",{class:o(["md:grid hidden",e.currentAccount?"grid-cols-2":"grid-cols-1"])},[e.currentAccount?(r(),l("div",Vt,s[28]||(s[28]=[t("div",null,[t("img",{src:Se,class:"inline-block"}),t("div",null,"Connected")],-1)]))):u("",!0),t("div",Ht,[e.isInstallMetamask?(r(),l("div",Rt,[e.currentAccount?(r(),l("div",{key:1,class:"cursor-pointer",onClick:s[1]||(s[1]=i=>e.connectMetamask())},"Change")):(r(),l("div",{key:0,class:"cursor-pointer",onClick:s[0]||(s[0]=i=>e.connectMetamask())},"Connect"))])):(r(),l("div",jt,s[29]||(s[29]=[t("a",{href:"https://metamask.io/",target:"_new"},"Download",-1)])))])],2),t("div",Dt,[e.currentAccount?(r(),l("div",Lt,s[30]||(s[30]=[t("div",{class:"flex items-center justify-center"},[t("img",{src:Se,class:"inline-block mr-2 w-4 h-4"}),d(" Connected ")],-1)]))):u("",!0),t("div",Bt,[e.isInstallMetamask?(r(),l("div",Ut,[e.currentAccount?(r(),l("div",{key:1,class:"cursor-pointer",onClick:s[3]||(s[3]=i=>e.connectMetamask())},"Change")):(r(),l("div",{key:0,class:"cursor-pointer",onClick:s[2]||(s[2]=i=>e.connectMetamask())},"Connect"))])):(r(),l("div",Ft,s[31]||(s[31]=[t("a",{href:"https://metamask.io/",target:"_new"},"Download",-1)])))])])]),v(Q,{disabled:e.disableAmount,modelValue:e.amount,"onUpdate:modelValue":s[4]||(s[4]=i=>e.amount=i),balance:e.balance,placeholder:"ERC20 "+e.currentNativeTokenName+" (MINIMUM = 51 )",type:"text",showError:e.showAmountErr,errorMessage:e.amount?parseFloat(e.amount)<=e.defaultXPXTxFee?"Insufficient amount":"Insufficient token balance.":"Required Field",decimal:6,toolTip:"BEP20 token amount to swap. Minimum 51 BEP20 amount is required as 50 will be deducted from the amount as transaction fee."},null,8,["disabled","modelValue","balance","placeholder","showError","errorMessage"]),t("div",qt,[v(H,{modelValue:e.siriusAddress,"onUpdate:modelValue":s[5]||(s[5]=i=>e.siriusAddress=i),placeholder:"To Sirius Chain Account",selectDefault:e.walletState.currentLoggedInWallet.selectDefaultAccount().address},null,8,["modelValue","selectDefault"])]),t("div",Xt,[d(c(e.amountReceived)+" "+c(e.currentNativeTokenName)+" ",1),s[32]||(s[32]=t("img",{src:Me,class:"w-5 h-5 ml-4"},null,-1))]),t("div",Ot,"The fees for the transaction on Sirius Chain will be deducted from this amount, which is 50 "+c(e.currentNativeTokenName),1),t("div",Qt,[t("button",{onClick:s[6]||(s[6]=i=>g.$router.push({name:"ViewServicesMainnetSwap"})),class:"text-black font-bold text-xs mr-5 focus:outline-none disabled:opacity-50"},"Cancel"),t("button",{type:"submit",class:"default-btn focus:outline-none disabled:opacity-50",disabled:e.isDisabledSwap,onClick:s[7]||(s[7]=i=>e.sendRequest())},"Send Request",8,Wt)])])):u("",!0),e.currentPage==2?(r(),l("div",Gt,[t("div",zt,[e.err!=""?(r(),l("div",Jt,c(e.err),1)):u("",!0),t("div",{class:o(["font-bold text-left text-xs md:text-sm",e.step1?"text-gray-700":"text-gray-300"])},"Step 1: Send ERC20 "+c(e.currentNativeTokenName)+" to the escrow account",3),t("div",Kt,[t("div",Yt,[t("div",{class:o(["rounded-full border w-6 h-6 transition-all duration-500",e.step1?"border-blue-primary":"border-gray-300"])},[t("div",Zt,[v(f,{icon:"check",class:o([e.step1?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block transition-all duration-500"])},null,8,["class"])])],2)]),t("div",{class:o(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step1?"text-gray-700":"text-gray-300"])},"Sending transaction to MetaMask",2)]),t("div",$t,[t("div",es,[t("div",{class:o(["rounded-full border w-6 h-6 transition-all duration-500",e.isInvalidConfirmedMeta?"border-red-primary":e.step2?"border-blue-primary":"border-gray-300"])},[t("div",ts,[e.isInvalidConfirmedMeta?(r(),p(f,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block transition-all duration-500"})):(r(),p(f,{key:1,icon:"check",class:o([e.step2?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block transition-all duration-500"])},null,8,["class"]))])],2)]),t("div",{class:o(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step2?"text-gray-700":"text-gray-300"])},[d(c(e.isInvalidConfirmedMeta?"Approval in MetaMask is rejected":"Waiting for confirmation in MetaMask")+" ",1),e.isInvalidConfirmedMeta?(r(),l("div",ss,[t("button",{type:"button",class:"bg-blue-primary rounded mr-5 focus:outline-none text-tsm font-bold py-2 border-blue-primary px-8 text-white hover:shadow-lg",onClick:s[8]||(s[8]=(...i)=>e.getValidation&&e.getValidation(...i))},"Retry"),v(k,{to:{name:"ViewServicesMainnetSwap"},class:"px-6 py-2 text-gray-500 outline-none focus:outline-none mr-4 w-32 text-tsm",tag:"button"},{default:ke(()=>s[34]||(s[34]=[d("Cancel this swap")])),_:1})])):u("",!0)],2)]),t("div",as,[t("div",ns,[t("div",{class:o(["rounded-full border w-6 h-6",e.step3?"border-blue-primary":"border-gray-300"])},[t("div",rs,[v(f,{icon:"check",class:o([e.step3?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"])])],2)]),t("div",{class:o(["text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step3?"text-gray-700":"text-gray-300"])},[s[42]||(s[42]=d(" Transaction hash: ")),e.validationHash?(r(),l("div",os,[t("a",{href:e.validationLink,target:"_new",class:o([e.isInvalidConfirmedMeta?"text-gray-300":"text-blue-primary","flex-grow break-all text-tsm self-center hover:underline"]),id:"validateTransfer",copyValue:e.validationHash,copySubject:"Transfer hash"},[v(f,{icon:"external-link-alt",class:"text-blue-primary w-3 h-3 self-center inline-block mr-2"}),d(c(e.validationHash),1)],10,is),t("div",ls,[e.step3?(r(),p(f,{key:0,icon:"copy",onClick:s[9]||(s[9]=i=>e.copy("validateTransfer")),class:"w-5 h-5 text-blue-primary cursor-pointer self-center mx-3 absolute top-2 hover:opacity-90 duration-800 transition-all"})):u("",!0)])])):u("",!0),t("div",ds,[e.validationHash?(r(),l("button",{key:0,class:"sm:flex-none justify-start sm:justify-end bg-blue-primary h-15 w-60 rounded mr-5 focus:outline-none text-xs font-bold py-2 border border-blue-primary px-8 text-white hover:shadow-lg mt-3 sm:mt-0 disabled:opacity-50 self-center",type:"button",disabled:e.isDisabledCheckTxnConfirmed||e.transactionFailed,onClick:s[10]||(s[10]=(...i)=>e.triggerTxnConfirmation&&e.triggerTxnConfirmation(...i))},c(e.isCheckingTxnConfirmation?"Checking transaction confirmation...":"Check transaction confirmation to proceed"),9,cs)):u("",!0),e.validationHash?(r(),l("div",ms,[s[38]||(s[38]=t("div",{class:"mb-1"},"One block confirmation needed to proceed.",-1)),s[39]||(s[39]=t("div",{class:"mb-1"},[t("b",null,"Do not change Gas Limit, Max Piority Fee or Max Fee"),d(".")],-1)),s[40]||(s[40]=t("div",{class:"mb-1"},"Confirmation might take up to 30 minutes, 1 hour or more due to high transaction volumes.",-1)),s[41]||(s[41]=t("div",{class:"mb-1"},[d("Please "),t("b",null,"do not close or refresh"),d(" this page until the swap process is complete and you have saved your certificate.")],-1)),t("div",us,[s[36]||(s[36]=d("View confirmation status on ")),t("a",{href:e.validationLink,target:"_new",class:"text-blue-primary inline-block hover:text-blue-900 hover:underline"},[s[35]||(s[35]=d("EtherScan")),v(f,{icon:"external-link-alt",class:"ml-1 text-blue-primary w-3 h-3 self-center inline-block"})],8,fs),s[37]||(s[37]=d("."))])])):u("",!0)]),e.isTxnNotConfirmed&&!e.transactionFailed?(r(),l("div",vs,"Transaction is not confirmed yet. Please check again in a moment")):u("",!0),e.transactionFailed?(r(),l("div",xs,"Transaction failed. Please try again with suggested gas price and gas limit")):u("",!0)],2)]),t("div",{class:o(["font-bold text-left text-xs md:text-sm mt-4",e.step4?"text-gray-700":"text-gray-300"])},"Step 2: Validate your Sirius address",2),t("div",bs,[t("div",ys,[t("div",{class:o(["rounded-full border w-6 h-6",e.step4?"border-blue-primary":"border-gray-300"])},[t("div",gs,[v(f,{icon:"check",class:o([e.step4?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"])])],2)]),t("div",{class:o(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step4?"text-gray-700":"text-gray-300"])},"Sending message to MetaMask",2)]),t("div",hs,[t("div",ws,[t("div",{class:o(["rounded-full border w-6 h-6",e.isInvalidSignedMeta?"border-red-primary":e.step5?"border-blue-primary":"border-gray-300"])},[t("div",ps,[e.isInvalidSignedMeta?(r(),p(f,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block"})):(r(),p(f,{key:1,icon:"check",class:o([e.step5?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"]))])],2)]),t("div",{class:o(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step5?"text-gray-700":"text-gray-300"])},[d(c(e.signatureMessage)+" ",1),e.isInvalidSignedMeta?(r(),l("div",ks,[t("button",{type:"button",class:"bg-blue-primary rounded mr-5 focus:outline-none text-tsm py-2 px-4 text-white hover:shadow-lg w-24",onClick:s[11]||(s[11]=(...i)=>e.getSigned&&e.getSigned(...i))},"Retry")])):u("",!0)],2)]),t("div",_s,[t("div",Ss,[t("div",{class:o(["rounded-full border w-6 h-6",e.step6?"border-blue-primary":"border-gray-300"])},[t("div",Cs,[v(f,{icon:"check",class:o([e.step6?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"])])],2)]),t("div",{class:o(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step6?"text-gray-700":"text-gray-300"])},[s[43]||(s[43]=d("Message signed with signature: ")),e.messageHash&&e.step6?(r(),l("div",Ms,[t("div",{class:o([e.step6?"text-gray-500":"text-gray-300","text-tsm break-all flex-grow"]),id:"validateMessage",copyValue:e.messageHash,copySubject:"Signature hash"},c(e.messageHash),11,Ts),t("div",Is,[e.step6?(r(),p(f,{key:0,icon:"copy",onClick:s[12]||(s[12]=i=>e.copy("validateMessage")),class:"w-5 h-5 text-blue-primary cursor-pointer self-center ml-3 absolute top-2 hover:opacity-90 duration-800 transition-all"})):u("",!0)])])):u("",!0)],2)]),t("div",{class:o(["font-bold text-left text-xs md:text-sm mt-4",e.step7?"text-gray-700":"text-gray-300"])},"Step 3: Initiate swap",2),t("div",As,[t("div",Ns,[t("div",{class:o(["rounded-full border w-6 h-6",e.isInvalidSwapService?"border-red-primary":e.step7?"border-blue-primary":"border-gray-300"])},[t("div",Ps,[e.isInvalidSwapService?(r(),p(f,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block"})):(r(),p(f,{key:1,icon:"check",class:o([e.step7?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"]))])],2)]),t("div",{class:o(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step7?"text-gray-700":"text-gray-300"])},[d(c(e.isInvalidSwapService?"Unable to send message to swap service":"Message sent to the swap service, swap initiated...")+" ",1),e.isInvalidSwapService&&e.swapServerErrIndex<=3?(r(),l("div",Es,[t("button",{type:"button",class:"bg-blue-primary rounded mr-5 focus:outline-none text-tmd py-2 px-4 text-white hover:shadow-lg disabled:opacity-50",onClick:s[13]||(s[13]=(...i)=>e.afterSigned&&e.afterSigned(...i)),disabled:e.disableRetrySwap},c(e.retrySwapButtonText),9,Vs)])):u("",!0),e.swapServerErrIndex>3?(r(),l("div",Hs,s[44]||(s[44]=[d(" Sorry. Please save the "),t("b",null,"transaction hash",-1),d(", the "),t("b",null,"signature",-1),d(" and contact our "),t("a",{href:"https://t.me/proximaxhelpdesk",target:"_new",class:"text-blue-primary font-bold underline"},"helpdesk",-1),d(". ")]))):u("",!0)],2)])]),t("div",Rs,[t("button",{type:"submit",class:"default-btn focus:outline-none disabled:opacity-50",disabled:e.isDisabledValidate,onClick:s[14]||(s[14]=i=>e.validated())},c(g.$t("general.continue")),9,js)])])):u("",!0),e.currentPage==3?(r(),l("div",Ds,[t("div",null,[s[51]||(s[51]=t("h1",{class:"default-title font-bold mt-5 mb-2"},"Congratulations!",-1)),s[52]||(s[52]=t("div",{class:"text-tsm mb-7"},"The swap process has already started!",-1)),v(x,{networkTerm:"ETH",swapType:"In",swapId:e.swapId,swapTimestamp:e.swapTimestamp,transactionHash:e.transactionHash,siriusName:e.siriusName,swappedAmount:e.amount,siriusAddress:e.Helper.createAddress(e.siriusAddress).pretty(),swapQr:e.swapQr,swapLink:e.validationLink},null,8,["swapId","swapTimestamp","transactionHash","siriusName","swappedAmount","siriusAddress","swapQr","swapLink"]),t("button",{type:"button",class:"w-40 hover:shadow-lg bg-blue-primary text-white text-xs hover:opacity-50 rounded font-bold px-4 py-3 border border-blue-primary outline-none mr-4 mt-6",onClick:s[15]||(s[15]=(...i)=>e.saveCertificate&&e.saveCertificate(...i))},"Download Certificate"),t("div",Ls,[t("a",{href:e.validationLink,target:"_new",class:"underline self-center text-xs font-bold text-blue-primary"},[s[45]||(s[45]=d("View Transaction in Explorer")),v(f,{icon:"external-link-alt",class:"ml-2 text-blue-500 w-3 h-3 self-center inline-block"})],8,Bs)]),s[53]||(s[53]=t("div",{class:"md:mx-20 lg:mx-40 font-bold text-center text-tsm py-5 sm:py-10 mt-5 sm:mt-10 border-t border-gray-200"},"Swap Details",-1)),t("div",Us,[s[47]||(s[47]=t("div",{class:"text-blue-primary mb-1"},"From: MetaMask Account",-1)),t("div",Fs,c(e.currentAccount),1),t("div",qs,"Swap Amount "+c(e.amount)+" ERC20 XPX",1),s[48]||(s[48]=t("div",null,[t("img",{src:at,class:"inline-block h-8 my-2"})],-1)),t("div",Xs,"To: "+c(e.siriusName),1),t("div",null,c(e.Helper.createAddress(e.siriusAddress).pretty()),1),t("div",Os,[d("Equivalent to "+c(e.amountReceived)+" "+c(e.currentNativeTokenName)+" ",1),s[46]||(s[46]=t("img",{src:Me,class:"w-3 h-3 ml-2 inline relative",style:{top:"-2px"}},null,-1))])]),s[54]||(s[54]=t("div",{class:"my-5 sm:my-7 text-gray-500 text-xs md:mx-20 lg:mx-10 xl:mx-40"},"Swap process may take a few hours to complete. Please save a copy of your certificate. It is needed in the event of an error.",-1)),t("label",Qs,[$e(t("input",{type:"checkbox",class:"h-5 w-5 bg-blue-primary",value:"true","onUpdate:modelValue":s[16]||(s[16]=i=>e.savedCheck=i)},null,512),[[et,e.savedCheck]]),s[49]||(s[49]=t("span",{class:"ml-2 cursor-pointer text-xs font-bold"},"I confirm that I have downloaded a copy of my certificate.",-1))]),t("div",Ws,[v(k,{to:{name:"ViewServicesMainnetSwap"},class:o(["default-btn mr-5 focus:outline-none w-40 inline-block mt-1",e.savedCheck?"":"opacity-50"]),is:e.savedCheck?"router-link":"span",tag:"button"},{default:ke(()=>s[50]||(s[50]=[d("Done")])),_:1},8,["class","is"])])])])):u("",!0)])])])}const da=We(dt,[["render",Gs]]);export{da as default};
