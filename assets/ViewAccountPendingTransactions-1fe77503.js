import{d as I,H as r,c as y,w as o,g as c,D as k,A as l,z as u,r as F,o as Q,f as B,e as m,l as d,b as h,s as w,x as D,B as O}from"./index-ac085045.js";import{A as V,_ as N}from"./AccountTabs.vue_vue_type_script_setup_true_lang-d29b9a74.js";import{_ as W}from"./PendingDataTable.vue_vue_type_script_setup_true_lang-994958da.js";import{D as S}from"./dashboardService-c86c9cb4.js";import"./jdenticon-module-2a95d186.js";import"./functions-c0137ee2.js";import"./TextInput-f71c8b4b.js";import"./TextInputClean-6fd2d429.js";import"./icon-key-5b3f7dda.js";import"./icon-message-e27d55b6.js";import"./icon-proximax-logo-gray-c2486ce1.js";import"./column.esm-a17d958d.js";const E={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},M={class:"flex my-2 gap-5 flex-none text-xs md:text-sm"},R=m("div",{class:"border rounded-md text-white py-2 px-5",style:{background:"#f3a91d"}}," Pending ",-1),ee=I({__name:"ViewAccountPendingTransactions",props:{address:String},setup(s){const i=s;let _=r.createTransactionFieldOrder(r.getQueryParamOrder_v2().DESC,r.getTransactionSortField().BLOCK);const n=y(()=>{if(!o.currentLoggedInWallet)return null;let e=o.currentLoggedInWallet.accounts.find(a=>a.address==i.address)||o.currentLoggedInWallet.others.find(a=>a.address==i.address);return e||null}),g=c([]),p=c([]),f=c([]),b=y(()=>g.value.concat(f.value).concat(p.value));let T=new S(o.currentLoggedInWallet,n.value),x=r.getTransactionGroupType(),A=async()=>{if(!n.value)return;let e=r.createTransactionQueryParams();e.pageSize=1,e.address=n.value.address,e.embedded=!0,e.updateFieldOrder(_);let a=await T.searchTxns(x.UNCONFIRMED,e),t=await T.formatUnconfirmedMixedTxns(a.transactions);g.value=t},L=async()=>{if(!n.value)return;let e=new S(o.currentLoggedInWallet,n.value),a=r.createTransactionQueryParams();a.pageSize=100,a.address=n.value.address;let t=await e.searchTxns(x.PARTIAL,a),v=await e.formatPartialMixedTxns(t.transactions);p.value=v},P=()=>{if(!n.value)return;let e=[];u.autoAnnounceSignedTransaction.forEach(a=>{let t=D.TransactionMapping.createFromPayload(a.signedTransaction.payload);(O.castToAggregate(t).innerTransactions.find(C=>C.signer.address.plain()==i.address)!=null||a.signedTransaction.signer==n.value.publicKey)&&e.push({type:"Aggregate Bonded",hash:a.signedTransaction.hash,deadline:t.deadline.value,groupType:"In Queue",recipient:"",sender:"",amount:"",message:"",sda:""})}),f.value=e};return k([l.txnActivityLog,l.txnCosignLog,l.txnSwapLog,u.autoAnnounceSignedTransaction,()=>u.aggregateBondedTxLength],async()=>{await A(),await L(),P()},{immediate:!0,deep:!0}),(e,a)=>{const t=F("router-link");return Q(),B("div",null,[m("div",E,[d(V,{address:s.address,class:"mb-6"},null,8,["address"]),d(N,{address:s.address,selected:"txn"},null,8,["address"]),m("div",M,[d(t,{to:{name:"ViewAccountConfirmedTransactions",params:{address:s.address}},class:"border opacity-60 hover:opacity-100 cursor-pointer rounded-md text-white py-2 px-4",style:{background:"#007cff"}},{default:h(()=>[w("Confirmed")]),_:1},8,["to"]),R,d(t,{to:{name:"ViewAccountFailedTransactions",params:{address:s.address}},class:"border opacity-60 hover:opacity-100 cursor-pointer rounded-md text-white py-2 px-5",style:{background:"#dc143c"}},{default:h(()=>[w("Failed")]),_:1},8,["to"])]),d(W,{transaction:b.value,class:"mt-3"},null,8,["transaction"])])])}}});export{ee as default};
