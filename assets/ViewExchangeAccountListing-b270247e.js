import{d as S,c as _,w as H,I as L,g as k,D as N,r as D,o as T,f as E,e as a,t as c,l as o,b as n,s as R,v as d,A as r,x as y,bf as M}from"./index-5ab99b99.js";import{s as p,a as C}from"./column.esm-097ca995.js";import{t as V}from"./jdenticon-module-3d0ed466.js";const B={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5 border-2 p-3"},$={class:"border border-blue-300 rounded-md p-3 mt-3 bg-blue-50"},F={class:"flex items-center gap-2"},X=["innerHTML"],O={class:"flex flex-col gap-0.5"},q={class:"font-semibold"},W={class:"flex"},j={class:"mr-1"},z={class:"text-blue-primary"},K={class:"flex"},U={class:"mr-1"},J={class:"text-blue-primary"},ee=S({__name:"ViewExchangeAccountListing",props:{address:{type:String,required:!0}},setup(v){const u=v,b=[{namespace:"prx.xpx",name:"XPX"},{namespace:"prx.metx",name:"METX"},{namespace:"xarcade.xar",name:"XAR"}],x=t=>{const s=b.find(l=>l.namespace==t);return s?s.name:t},A=_(()=>H.currentLoggedInWallet.convertAddressToName(u.address,!0)),h=new L("ThemeStyleConfig");h.init();const I=_(()=>V(u.address,40,h.jdenticonConfig)),f=k([]),G=async()=>{let t=[];const s=new y.ExchangeSdaHttp(r.nodeFullURL);t=(await M(s.getAccountSdaExchangeOffers(y.Address.createFromRawAddress(u.address)))).sdaOfferBalances;for(let e=0;e<t.length;e++){const m=await r.chainAPI.assetAPI.getMosaicsNames([t[e].mosaicIdGet,t[e].mosaicIdGive]),w=await r.chainAPI.assetAPI.getMosaics([t[e].mosaicIdGet,t[e].mosaicIdGive]);t[e].mosaicGetName=m[0].names.length?m[0].names[0].name:t[e].mosaicIdGet.toHex(),t[e].mosaicGiveName=m[1].names.length?m[1].names[0].name:t[e].mosaicIdGive.toHex(),t[e].mosaicGetDivisibility=w.find(g=>g.mosaicId.toHex()==t[e].mosaicIdGet.toHex()).divisibility,t[e].mosaicGiveDivisibility=w.find(g=>g.mosaicId.toHex()==t[e].mosaicIdGive.toHex()).divisibility}const i=await r.chainAPI.chainAPI.getBlockchainHeight();f.value=t.map(e=>({idPair:`${e.mosaicIdGive.toHex()}/${e.mosaicIdGet.toHex()}`,pair:`${x(e.mosaicGiveName)}/${x(e.mosaicGetName)} `,giveAmount:e.initialMosaicGiveAmount.compact()/Math.pow(10,e.mosaicGiveDivisibility),getAmount:e.initialMosaicGetAmount.compact()/Math.pow(10,e.mosaicGetDivisibility),deadline:new Date(Date.now()+(e.deadline.compact()-i)*15e3).toLocaleString()}))},P=N(r,async t=>{t.isReady&&(await G(),P())},{immediate:!0});return(t,s)=>{const l=D("router-link");return T(),E("div",null,[a("div",B,[a("div",$,[a("div",F,[a("div",{innerHTML:I.value},null,8,X),a("div",O,[s[0]||(s[0]=a("div",{class:"uppercase text-xxs text-blue-primary"},"Selected Account",-1)),a("div",q,c(A.value),1)])])]),s[3]||(s[3]=a("div",{class:"ml-4 my-3"},"SDA Offers",-1)),o(d(C),{value:f.value,paginator:!0,rows:10,responsiveLayout:"scroll",scrollDirection:"horizontal",alwaysShowPaginator:!1,paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",class:"w-full"},{empty:n(()=>s[1]||(s[1]=[R(" No exchanges found. ")])),default:n(()=>[o(d(p),{field:"deadline",header:"Deadline"}),o(d(p),{field:"give",header:"Give"},{body:n(({data:i})=>[a("div",W,[a("div",j,c(i.giveAmount),1),a("div",z,c(i.pair.split("/")[0]),1)])]),_:1}),o(d(p),{field:"get",header:"Get"},{body:n(({data:i})=>[a("div",K,[a("div",U,c(i.getAmount),1),a("div",J,c(i.pair.split("/")[1]),1)])]),_:1}),o(d(p),{header:"Action"},{body:n(({data:i})=>[o(l,{to:{name:"ViewExchangeRemove",query:{p:i.idPair,o:v.address}}},{default:n(()=>s[2]||(s[2]=[a("button",{class:"blue-btn py-2 px-3"},"Remove",-1)])),_:2},1032,["to"])]),_:1})]),_:1},8,["value"])])])}}});export{ee as default};
