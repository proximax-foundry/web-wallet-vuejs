import{_ as I,r as b,I as k,u as A,E as y,a as L,M as _,H,w as u,k as V,b as r,e as a,t as o,F as M,h as W,i as E,o as i,s as w,z as C,B as v,f as N}from"./index-9545ec17.js";import{t as F}from"./jdenticon-module-380bfcbc.js";const B={name:"ViewNotification",setup(){const l=b([]),h=E().appContext.config.globalProperties.emitter;let t=new k("ThemeStyleConfig");t.init();const p=b(t.jdenticonConfig),{t:m}=A(),g=c=>{let n=new Date,d=new Date(c),e={years:d.getFullYear()-n.getFullYear(),months:d.getMonth()-n.getMonth(),days:d.getDate()-n.getDate(),hours:d.getHours()-n.getHours(),mins:d.getMinutes()-n.getMinutes()};if(e.mins<0&&(e.hours--,e.mins+=60),e.hours<0&&(e.days--,e.hours+=24),e.days<0){e.months--;const T=new Date(n.getTime());T.setDate(32),e.days=32-n.getDate()-T.getDate()+d.getDate()}return e.months<0&&(e.years--,e.months+=12),e.years>0?e.years+" "+m("general.year",e.years.toString()):e.months>0?e.months+" "+m("general.month",e.months.toString()):e.days>0?e.days+" "+m("general.day",e.days.toString()):e.hours>0?e.hours+" "+m("general.hour",e.hours.toString()):e.mins+" "+m("general.minute",e.mins.toString())},s=()=>{if(!y.isReady){setTimeout(s,100);return}l.value=_.getNotificationFromStorage(),_.saveVisitedNotification(),h.emit("VIEW_NOTIFICATION")},f=c=>{if(u.currentLoggedInWallet){u.currentLoggedInWallet.setDefaultAccountByAddress(c);var n=u.currentLoggedInWallet.accounts.find(d=>d.address==c);n||(n=""),h.emit("DEFAULT_ACCOUNT_SWITCHED",n)}},x=()=>new Date().getTime(),S=async()=>{s()};if(y.isReady)S();else{let c=L(y.isReady,n=>{n&&(S(),c())})}return{notifications:l,NotificationUtils:_,updateDefaultAccount:f,Helper:H,themeStyleConfig:p,toSvg:F,walletState:u,currentTimestamp:x,relativeTime:g}}},P={class:"ml-2 mr-2 w-full lg:ml-auto lg:mr-auto mt-5"},O={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},R={class:"flex justify-between text-sm mb-5"},U={class:"text-gray-700"},j={key:0},Y={key:0},z=["innerHTML"],q={class:"text-gray-600 text-xs"},G={class:"mb-1 text-sm text-gray-700 font-bold"},J={key:1},K=["innerHTML"],Q={class:"text-gray-600 text-xs"},X={class:"mb-1 text-sm text-gray-700 font-bold"},Z={key:0},$={key:1},ee={key:1,class:"text-xs text-gray-500"};function te(l,D,h,t,p,m){const g=V("router-link");return i(),r("div",null,[a("div",P,[a("div",O,[a("div",R,[a("div",null,[a("span",U,o(l.$t("general.notification",2)),1)])]),t.notifications!=null&&t.notifications.length>0?(i(),r("div",j,[(i(!0),r(M,null,W(t.notifications,(s,f)=>(i(),r("div",{key:f},[s.type=="Partial"?(i(),r("div",Y,[w(g,{to:{name:"ViewAccountPendingTransactions",params:{address:s.address}},onClick:x=>t.updateDefaultAccount(s.address),class:"flex items-center border border-gray-100 w-full p-5 mb-3 text-tsm hover:bg-blue-50 transition-all duration-300"},{default:C(()=>[a("div",{innerHTML:t.toSvg(s.address,40,t.themeStyleConfig),class:"mr-2"},null,8,z),a("div",q,[a("div",G,o(t.walletState.currentLoggedInWallet?t.walletState.currentLoggedInWallet.convertAddressToNamePretty(s.address,!0):""),1),v(" "+o(s.label)+" "+o(l.$t("notification.pendingSignature",{time:t.relativeTime(s.timestamp)})),1)])]),_:2},1032,["to","onClick"])])):N("",!0),s.type=="Namespace"?(i(),r("div",J,[w(g,{to:{name:"ViewServicesNamespaceExtend",params:{address:t.Helper.createAddress(s.address).pretty(),namespaceId:s.id}},class:"flex items-center border border-gray-100 w-full p-5 mb-3 text-tsm hover:bg-blue-50 transition-all duration-300"},{default:C(()=>[a("div",{innerHTML:t.toSvg(s.address,40,t.themeStyleConfig),class:"mr-2"},null,8,K),a("div",Q,[a("div",X,o(t.walletState.currentLoggedInWallet.convertAddressToNamePretty(s.address,!0)),1),v(" "+o(l.$t("general.namespace"))+" ",1),a("b",null,o(s.label),1),v(),t.currentTimestamp()>s.timestamp?(i(),r("span",Z,"has expired")):(i(),r("span",$,o(l.$t("notification.isExpiring",{time:t.relativeTime(s.timestamp)})),1))])]),_:2},1032,["to"])])):N("",!0)]))),128))])):(i(),r("div",ee,o(l.$t("notification.noNotification")),1))])])])}const ae=I(B,[["render",te]]);export{ae as default};
