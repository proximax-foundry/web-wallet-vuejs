import{d as C,g as i,c as g,D as V,Q as k,o as p,f as m,e as u,s as q,t as h,O as N,i as y,h as B,_ as w}from"./index-d2e8ccc1.js";import{_ as F}from"./icon-info-8b4f1351.js";const L={class:"border border-gray-200 px-2 py-1 h-14 rounded-md"},T={class:"uppercase text-gray-500 text-txs text-left mb-2"},E={key:0,src:F,class:"inline-block ml-1 relative cursor-pointer",style:{top:"-1px"}},M=["value","placeholder","maxlength"],A={class:"h-3 mb-2"},K={key:0,class:"error error-text text-left"},f=16,P=C({__name:"SupplyInputClean",props:{modelValue:{type:String,required:!0},decimal:{type:Number,required:!0},placeholder:{type:String,required:!0},toolTip:{type:String,required:!1},disabled:{type:Boolean,required:!1},showError:{type:Boolean,required:!1},errorMessage:{type:String,required:!1}},emits:["update:modelValue","show-error"],setup(r,{emit:x}){const _=r,v=x,a=i(_.modelValue),n=i(0),o=i(!1),c=i(!1),b=(e,l)=>{const t=e.key;return t>="0"&&t<="9"||t==="."||t==="Backspace"||t==="Delete"||t==="ArrowLeft"||t==="ArrowRight"?(t==="."&&l.includes(".")&&e.preventDefault(),!0):(e.preventDefault(),!1)},S=e=>e.split(",").length-1,D=e=>{e.includes(".")?(e.includes(".0")&&(c.value=!0),o.value=!0):(o.value=!1,c.value=!1),isNaN(parseFloat(e))?a.value="0":a.value=e,v("update:modelValue",a.value)},d=g(()=>{let e=Intl.NumberFormat("en-US",{maximumFractionDigits:n.value}).format(parseFloat(a.value));return o.value&&!e.includes(".")&&(e=e+"."),c.value&&a.value!==e&&(e=e+"0"),e}),I=g(()=>{let e=0;return d.value.includes(",")&&(e=e+S(d.value)),o.value&&(e=e+1),f+e});return V(a,(e,l)=>{if(e.includes(".")){const[t,s]=e.split(".");n.value=f-t.length,s&&s.length>n.value&&(a.value=l)}else e.length>f&&(a.value=l);v("update:modelValue",parseFloat(a.value).toString())}),(e,l)=>{const t=k("tooltip");return p(),m("div",{class:B(r.disabled?"opacity-50":"")},[u("div",L,[u("div",T,[q(h(r.placeholder)+" ",1),r.toolTip?N((p(),m("img",E,null,512)),[[t,{value:"<tiptext>"+r.toolTip+"</tiptext>",escape:!1},void 0,{bottom:!0}]]):y("",!0)]),u("input",{value:d.value,class:"supply_input",placeholder:r.placeholder,maxlength:I.value,onInput:l[0]||(l[0]=s=>D(s.target.value.replace(/,/g,""))),onKeypress:l[1]||(l[1]=s=>b(s,s.target.value))},null,40,M)]),u("div",A,[r.showError?(p(),m("div",K,h(r.errorMessage),1)):y("",!0)])],2)}}});const Q=w(P,[["__scopeId","data-v-dc0cb77a"]]);export{Q as S};
