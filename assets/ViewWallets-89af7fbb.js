import{j as V,y as E,g as f,c as p,E as F,n as y,W as J,w as d,_ as L,r as $,o as a,f as o,e as s,l as W,b as B,t as n,i as u,T as Z,F as T,d as q,C as D,s as N,a as I,h as P,K}from"./index-bab83e60.js";import{_ as Y}from"./PasswordInput.vue_vue_type_script_setup_true_lang-4b78936e.js";const G={name:"ConfirmDeleteWalletModal",props:["walletName"],components:{PasswordInput:Y},setup(e){const{t}=V(),c=E();F().appContext.config.globalProperties.emitter;const _="^[^ ]{8,}$",m=f(""),i=f(""),r=f(!1),v=p(()=>!m.value.match(_));return{err:i,disableDelete:v,deleteWallet:b=>{var k=y.chainNetworkName,w=J.verifyWalletPassword(b,k,m.value);w==!0?(d.wallets.removeWalletByNetworkNameAndName(k,b),c.add({severity:"success",summary:t("general.notification"),detail:t("wallet.walletRemoved"),group:"br-custom",life:5e3})):(i.value=t("general.walletPasswordInvalid",{name:b}),m.value="")},walletPassword:m,toggleModal:r}}},Q="/web-wallet-vuejs/assets/icon-delete-0decb859.svg",X="/web-wallet-vuejs/assets/icon-delete-wallet-4d732b98.svg",ee={key:0,class:"popup-outer fixed flex z-50 text-black mt-10"},te={class:"modal-popup-box"},le={key:0,class:"error error_box mb-3 text-center"},se={class:"text-center mt-2 text-md font-normal"},ae={class:"text-black text-center text-xs mt-2 font-normal"},oe={class:"font-bold text-center text-xs mt-2"},ne={class:"w-92"},re={class:"text-center"},ie={class:"mt-3"},de=["disabled"];function ce(e,t,c,l,_,m){const i=$("PasswordInput");return a(),o(T,null,[s("img",{onClick:t[0]||(t[0]=r=>l.toggleModal=!l.toggleModal),src:Q,class:"cursor-pointer inline"}),W(Z,{enterActiveClass:"animate__animated animate__fadeInDown",leaveActiveClass:"animate__animated animate__fadeOutUp"},{default:B(()=>[l.toggleModal?(a(),o("div",ee,[s("div",te,[l.err!=""?(a(),o("div",le,n(l.err),1)):u("",!0),s("div",se,n(e.$t("wallet.walletDeletion")),1),t[5]||(t[5]=s("img",{src:X,class:"ml-auto mr-auto"},null,-1)),s("div",ae,n(e.$t("wallet.deleteMessage")),1),s("div",oe,n(e.$t("wallet.deleteWarning")),1),s("div",ne,[s("div",re,[s("div",ie,[W(i,{class:"w-8/12 ml-auto mr-auto",placeholder:e.$t("general.password"),errorMessage:e.$t("general.passwordRequired"),modelValue:l.walletPassword,"onUpdate:modelValue":t[1]||(t[1]=r=>l.walletPassword=r),icon:"lock"},null,8,["placeholder","errorMessage","modelValue"]),s("button",{onClick:t[2]||(t[2]=r=>l.deleteWallet(c.walletName)),class:"red-btn px-4 py-3 font-semibold cursor-pointer text-center ml-auto mt-3 mr-auto w-8/12 disabled:opacity-50 disabled:cursor-auto",disabled:l.disableDelete},n(e.$t("wallet.confirmDelete")),9,de),s("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-3",onClick:t[3]||(t[3]=r=>{l.toggleModal=!l.toggleModal,l.walletPassword="",l.err=""})},n(e.$t("general.cancel")),1)])])])])])):u("",!0)]),_:1}),l.toggleModal?(a(),o("div",{key:0,onClick:t[4]||(t[4]=r=>l.toggleModal=!l.toggleModal),class:"fixed inset-0 bg-opacity-60 z-20 bg-gray-100"})):u("",!0)],64)}const me=L(G,[["render",ce]]),we=q({name:"WalletTile",components:{ConfirmDeleteWalletModal:me},props:{wallet:{type:Object,default:null}},setup(e){const t=f(!1);V();const c="^[^ ]{8,}$",l=f(""),_=f(""),m=p(()=>!l.value.match(c)),i=p(()=>{let w=!0;return e.wallet.name==d.currentLoggedInWallet.name&&(w=!1),w}),r=()=>{t.value=!0},v=w=>{var h=y.chainNetworkName;d.wallets.removeWalletByNetworkNameAndName(h,w)},M=w=>{var h=y.chainNetworkName;const A=d.wallets.filterByNetworkNameAndName(h,w).convertToSimpleWallet();let U=D.enc.Utf8.parse(JSON.stringify(A)),j=D.enc.Base64.stringify(U);const O=Date.now(),g=new Date(O),R=g.getFullYear(),S=g.getMonth()+1<10?`0${g.getMonth()+1}`:g.getMonth()+1,H=g.getDate()<10?`0${g.getDate()}`:g.getDate(),z=new Blob([j],{type:""}),C=window.URL.createObjectURL(z),x=document.createElement("a");x.style.display="none",x.href=C,x.download=`${w}_${h}_${R}-${S}-${H}.wlt`,document.body.appendChild(x),x.click(),window.URL.revokeObjectURL(C)},b=p(()=>d.currentLoggedInWallet?d.currentLoggedInWallet.name:""),k=p(()=>d.currentLoggedInWallet);return{exportWallet:M,getModal:r,showModal:t,disableDelete:m,err:_,isLogin:k,walletState:d,deleteWallet:v,currentWalletName:b,canDelete:i}}}),ue={class:"p-1"},ge={class:"bg-white border rounded-lg border-gray-200 shadow-lg group"},pe={class:"flex justify-between items-center"},_e={class:"ml-4 mt-5 mb-5 mr-5 text-txs text-left"},ve={key:0,class:"font-bold text-blue-primary flex items-center"},fe={key:0,class:"w-36 inline truncate"},be={key:1,class:"w-36 inline-block truncate"},xe={key:2,class:"ml-0 mt-4"},ye={key:1,class:"font-bold text-blue-primary flex items-center"},ke={class:"w-32 inline-block truncate"},he={class:"text-txs pt-1 text-black-400"},$e={key:0,class:"xl:mr-3 xl:ml-0 text-xs font-bold"},We={class:"font-semibold text-txs"},Ne={key:1,class:"xl:mr-1 xl:ml-5 text-xs font-bold"};function Le(e,t,c,l,_,m){const i=$("ConfirmDeleteWalletModal");return a(),o("div",ue,[s("div",ge,[s("div",pe,[s("div",_e,[e.isLogin?(a(),o("div",ve,[e.isLogin?(a(),o("div",fe,[N(n(e.wallet.name)+" ",1),e.canDelete?(a(),I(i,{key:0,walletName:e.wallet.name},null,8,["walletName"])):u("",!0)])):u("",!0),e.isLogin?u("",!0):(a(),o("div",be,n(e.wallet.name),1)),e.isLogin?u("",!0):(a(),o("div",xe))])):(a(),o("div",ye,[s("div",ke,n(e.wallet.name),1)])),s("div",he,[N(n(e.$t("wallet.numberOfAccounts"))+": ",1),s("span",null,n(e.wallet.accounts.length),1)])]),e.isLogin?(a(),o("div",$e,[s("button",{class:"bg-transparent font-bold py-2 ml-2 mr-2 rounded inline-flex items-center",onClick:t[0]||(t[0]=r=>e.exportWallet(e.wallet.name))},[t[1]||(t[1]=s("svg",{class:"color-blue-primary",id:"file_upload_black_24dp",xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 20 20"},[s("path",{d:"M15.667,13.167v2.5h-10v-2.5H4v2.5a1.672,1.672,0,0,0,1.667,1.667h10a1.672,1.672,0,0,0,1.667-1.667v-2.5Zm-9.167-5L7.675,9.342l2.158-2.15V14H11.5V7.192l2.158,2.15,1.175-1.175L10.667,4Z",fill:"#007cff"})],-1)),s("span",We,n(e.$t("general.export")),1)])])):(a(),o("div",Ne,[e.isLogin?u("",!0):(a(),I(i,{key:0,walletName:e.wallet.name},null,8,["walletName"]))]))])])])}const Me=L(we,[["render",Le]]);const Ce={name:"ViewWallets",components:{WalletTile:Me},setup(){const e=p(()=>d.currentLoggedInWallet);return{wallets:p(()=>{var c=d.wallets.filterByNetworkName(y.chainNetworkName);return c}),walletState:d,networkState:y,isLogin:e}}},De={class:"p-1 text-gray-700"},Ie={key:0,class:"mt-8 text-center w-full"},Pe={class:"inline-block"};function Ve(e,t,c,l,_,m){const i=$("WalletTile"),r=$("router-link");return a(),o("div",De,[s("h1",{class:P(`${l.isLogin?"":"text-white"} text-lg mt-10 xl:mb-5 md:text-xl sm:mb-5  text-center`)},n(e.$t("wallet.myWallets")),3),s("div",{class:P(`${l.isLogin?"":"text-white"} text-sm md:px-5 xl:px-5 xl:mt-0 text-center`)},n(e.$t("wallet.walletsAvailable")),3),(a(!0),o(T,null,K(l.wallets,v=>(a(),o("div",{class:"mt-4",key:v},[W(i,{class:"w-96 ml-auto mr-auto",wallet:v},null,8,["wallet"])]))),128)),l.isLogin?u("",!0):(a(),o("div",Ie,[s("div",Pe,[W(r,{to:{name:"Home"},class:"flex items-center text-xs blue-btn py-4 px-10"},{default:B(()=>[N(n(e.$t("wallet.backHome")),1)]),_:1})])]))])}const Ue=L(Ce,[["render",Ve],["__scopeId","data-v-0dd729c1"]]);export{Ue as default};
