import{_ as ce,o as i,b as c,e as t,t as l,f as F,ad as we,u as ke,q as Se,D as Ce,c as o,E as p,r as v,n as C,H as h,V as Me,w as W,ao as z,I as Te,aH as O,a as M,bb as ie,k as V,P as Fe,s as x,B as T,Q as H,ag as Ae,F as Le,h as Ie,z as Ne,W as Pe}from"./index-75e3a228.js";import{_ as Ve}from"./PasswordInput.vue_vue_type_script_setup_true_lang-f0e3a1fe.js";import{S as Ee}from"./SupplyInputClean-29ba85e4.js";import{_ as Be}from"./TransactionFeeDisplay.vue_vue_type_script_setup_true_lang-723c097e.js";import{A as Q}from"./assetsUtils-24111f5f.js";import{t as De}from"./jdenticon-module-0e134424.js";import{M as We}from"./multisigUtils-50290651.js";import{_ as He}from"./icon-asset-2a9ae6ea.js";import{_ as Y}from"./icon-info-8b4f1351.js";import"./proximax-logo-ecfc3767.js";const Ue={props:{placeholder:String,errorMessage:String,showError:Boolean,modelValue:String,title:String,disabled:Boolean},emits:["update:modelValue"],name:"SelectModificationType",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},watch:{showError:function(s){s?(this.borderColor="border-2 border-red-primary",this.textErr=!0):(this.borderColor="border-2 border-gray-300",this.textErr=!1)}}},je={class:"border border-gray-200 px-2 py-1 h-14 rounded-md"},Re={class:"uppercase text-gray-500 text-txs text-left mb-2"},qe={class:"flex items-center"},ze=["value","disabled","checked"],Oe={for:"increase",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},Qe=["value","disabled","checked"],Ye={for:"decrease",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},Ge={class:"h-3 mb-2"},Je={key:0,class:"error error-text text-left"};function Xe(s,r,m,e,U,f){return i(),c("div",null,[t("div",je,[t("div",Re,l(m.title),1),t("div",qe,[t("input",{id:"increase",type:"radio",name:"modificationType",value:m.modelValue,disabled:m.disabled,class:"h-5 w-5",onChange:r[0]||(r[0]=g=>s.$emit("update:modelValue","increase")),checked:m.modelValue=="increase"},null,40,ze),t("label",Oe,l(s.$t("general.increase")),1),t("input",{id:"decrease",type:"radio",name:"modificationType",value:m.modelValue,disabled:m.disabled,class:"h-5 w-5",onChange:r[1]||(r[1]=g=>s.$emit("update:modelValue","decrease")),checked:m.modelValue=="decrease"},null,40,Qe),t("label",Ye,l(s.$t("general.decrease")),1)])]),t("div",Ge,[U.textErr||m.showError?(i(),c("div",Je,l(m.errorMessage),1)):F("",!0)])])}const Ze=ce(Ue,[["render",Xe]]),Ke={name:"ViewServicesAssetsModifySupplyChange",directives:{tooltip:we},components:{PasswordInput:Ve,SupplyInputClean:Ee,SelectModificationType:Ze,TransactionFeeDisplay:Be},props:{assetId:String,address:String},setup(s){const{t:r}=ke(),m=Se();Ce();let e=9e14;const U=o(()=>p.nativeToken.label),f=v(!1),g=v(""),j=v(""),A=v(!1),L=v(!1),I=v(!1),G="^[^ ]{8,}$",N=v(!1),n=v(!1),_=v(""),de=o(()=>p.nativeToken.label),ue=o(()=>C.currentNetworkProfileConfig?h.convertToExact(C.currentNetworkProfileConfig.lockedFundsPerAggregate,p.nativeToken.divisibility):0),ve=o(()=>C.currentNetworkProfileConfig?h.convertToCurrency(C.currentNetworkProfileConfig.lockedFundsPerAggregate,p.nativeToken.divisibility):0),te=o(()=>C.currentNetworkProfile?h.convertToExact(Me.getLockFundFee(),p.nativeToken.divisibility):0),J=o(()=>ue.value+te.value),me=o(()=>!(g.value.match(G)&&b.value>0&&!f.value&&!$.value&!R.value)),ge=o(()=>d.value?d.value.name:""),w=o(()=>d.value?d.value.address:""),X=o(()=>d.value?d.value.balance:0),se=o(()=>{if(d.value)return h.toCurrencyFormat(d.value.balance,p.nativeToken.divisibility)}),b=v("0"),ae=h.createAddress(s.address).plain();let d=o(()=>W.currentLoggedInWallet?W.currentLoggedInWallet.accounts.find(a=>a.address==ae)||W.currentLoggedInWallet.others.find(a=>a.address==ae):null);const fe=v(z(w.value));let le=new Te("ThemeStyleConfig");le.init();const be=v(De(s.address,40,le.jdenticonConfig)),k=v("increase");let Z=9e14;const u=o(()=>d.value?d.value.assets.find(a=>a.idHex===s.assetId):null),E=o(()=>u.value?u.value.amount:0),K=o(()=>u.value?u.value.idHex:""),pe=o(()=>u.value?u.value.transferable:!1),oe=o(()=>u.value?u.value.supplyMutable:!1),B=o(()=>u.value?u.value.divisibility:0),S=o(()=>u.value?u.value.supply/Math.pow(10,u.value.divisibility):0),y=o(()=>{if(!d.value)return{hasCosigner:!1,cosignerList:[]};if(C.currentNetworkProfileConfig){let a=We.getCosignerInWallet(d.value?d.value.publicKey:""),ne=[];return a.cosignerList.forEach(q=>{ne.push({publicKey:q,name:O(q).name,balance:O(q).balance,address:O(q).address})}),a.cosignerList=ne,{hasCosigner:a.hasCosigner,cosignerList:a.cosignerList}}else return{hasCosigner:!1,cosignerList:[]}});_.value=y.value.cosignerList.length>0?y.value.cosignerList[0].address:"",M(y,a=>{a.cosignerList.length>0&&(_.value=a.cosignerList.length>0?y.value.cosignerList[0].address:"")});const R=o(()=>y.value.cosignerList.length==0&&z(w.value)),$=o(()=>R.value?X.value<D.value:X.value<D.value+J.value),ee=o(()=>y.value.cosignerList.length>0?y.value.cosignerList.length>1?_.value:O(y.value.cosignerList[0].publicKey).address:""),he=o(()=>p.isReady?h.convertToCurrency(Q.getMosaicSupplyChangeTransactionFee(s.assetId,k.value,parseFloat(b.value),B.value),p.nativeToken.divisibility):"0"),D=o(()=>p.isReady?h.convertToExact(Q.getMosaicSupplyChangeTransactionFee(s.assetId,k.value,parseFloat(b.value),B.value),p.nativeToken.divisibility):0);M(oe,a=>{a?(I.value=!1,L.value=!1,A.value=!1):(I.value=!0,L.value=!0,A.value=!0)},{immediate:!0});const ye=()=>{if(!Pe.verifyWalletPassword(W.currentLoggedInWallet.name,C.chainNetworkName,g.value)){j.value=r("general.walletPasswordInvalid",{name:W.currentLoggedInWallet.name});return}ee.value?Q.changeAssetSupplyMultiSig(ee.value,g.value,K.value,k.value,b.value,B.value,w.value):Q.changeAssetSupply(w.value,g.value,K.value,k.value,b.value,B.value),m.push({name:"ViewAccountPendingTransactions",params:{address:w.value}})};M(k,a=>{a=="increase"?f.value=parseFloat(b.value)>Z-S.value:S.value==E.value?f.value=parseFloat(b.value)>S.value-1:f.value=parseFloat(b.value)>E.value}),M(b,a=>{k.value=="increase"?f.value=parseFloat(a)>Z-S.value:S.value==E.value?f.value=parseFloat(a)>S.value-1:f.value=parseFloat(a)>E.value});const re=o(()=>z(w.value)?parseFloat(J.value)+D.value:D.value),_e=o(()=>h.amountFormatterSimple(re.value,0)),P=a=>{A.value=a,L.value=a,I.value=a};M(re,a=>{se.value<a?P(!0):P(!1)}),M($,a=>{P(!!a)}),M(R,a=>{P(!!a)});const xe=o(()=>{let a=ie(_.value)?ie(_.value).balance:0;return h.toCurrencyFormat(a)});return{currentNativeTokenName:U,selectedAccName:ge,selectedAccAdd:w,balance:se,balanceNumber:X,showNoBalance:$,lockFundTxFee:te,lockFundCurrency:ve,lockFundTotalFee:J,totalFeeFormatted:_e,showSupplyErr:f,err:j,walletPassword:g,disableModify:me,showPasswdError:N,supply:b,disabledPassword:A,disabledSupply:L,currencyName:de,isMultiSig:z,isMultiSigBool:fe,selectAsset:K,selectIncreaseDecrease:k,modifyAsset:ye,transactionFee:he,transactionFeeExact:D,assetSupply:S,assetAmount:E,assetDivisibility:B,assetTransferable:pe,assetMutable:oe,getMultiSigCosigner:y,cosignerBalanceInsufficient:n,cosignerAddress:_,cosigner:ee,isNotCosigner:R,disabledSelectIncreaseDecrease:I,Helper:h,svgString:be,maxAmount:e,maxAssetSupply:Z,checkCosignBalance:xe}}},$e={class:"w-10/12 ml-auto mr-auto"},et={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},tt={class:"xl:col-span-2 p-6 lg:p-12"},st={class:"lg:flex lg:justify-between lg:items-center"},at={class:"font-semibold mb-4 inline-block mt-1"},lt={class:"flex items-center"},ot=["innerHTML"],rt={class:"ml-2"},nt={class:"text-blue-primary text-xxs font-bold uppercase mb-1"},it={class:"font-bold text-black text-sm"},ct={key:0,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},dt={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},ut=t("div",{class:"inline-block text-xs"},"Asset is immutable",-1),vt={key:1,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},mt={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},gt={class:"inline-block text-xs"},ft={key:2,class:"rounded-md bg-yellow-200 w-full p-2 flex items-center justify-center"},bt={class:"rounded-full w-5 h-5 bg-yellow-100 inline-block relative mr-2"},pt={class:"inline-block text-xs"},ht={key:3,class:"error error_box"},yt={class:"text-right w-full"},_t={key:0,class:"inline-block"},xt={class:"text-tsm text-left mt-3"},wt={key:0,class:"font-bold"},kt={key:0,class:"error"},St={key:1,class:"font-bold"},Ct=["value"],Mt={key:2,class:"error"},Tt={class:"border border-blue-primary p-4 bg-blue-100 flex items-center rounded mt-5"},Ft=t("img",{src:He},null,-1),At={class:"ml-1"},Lt={class:"uppercase text-blue-primary font-semibold text-xxs"},It={class:"text-black text-sm font-bold"},Nt={class:"border border-gray-200 p-4 rounded mt-5"},Pt={class:"lg:grid lg:grid-cols-2"},Vt={class:"my-3"},Et={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Bt={src:Y,class:"inline-block ml-2 relative",style:{top:"-1px"}},Dt={class:"text-black font-bold text-sm"},Wt={class:"my-3"},Ht={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Ut={src:Y,class:"inline-block ml-2 relative",style:{top:"-1px"}},jt={class:"text-black font-bold text-sm"},Rt={class:"my-3"},qt={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},zt={src:Y,class:"inline-block ml-2 relative",style:{top:"-1px"}},Ot={class:"uppercase text-black font-bold text-sm"},Qt={class:"my-3"},Yt={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Gt={src:Y,class:"inline-block ml-2 relative",style:{top:"-1px"}},Jt={class:"uppercase text-black font-bold text-sm"},Xt={class:"lg:grid lg:grid-cols-2 mt-5"},Zt={class:"bg-navy-primary py-6 px-12 xl:col-span-1"},Kt={class:"text-xs text-white mt-5 mb-1.5"},$t=["disabled"],es={class:"text-center"};function ts(s,r,m,e,U,f){const g=V("font-awesome-icon"),j=V("SelectModificationType"),A=V("SupplyInputClean"),L=V("TransactionFeeDisplay"),I=V("PasswordInput"),G=V("router-link"),N=Fe("tooltip");return i(),c("div",null,[t("div",$e,[t("div",et,[t("div",tt,[t("div",st,[t("div",at,l(s.$t("asset.modifyAssetSupply")),1),t("div",lt,[t("div",{innerHTML:e.svgString,class:"inline-block"},null,8,ot),t("div",rt,[t("div",nt,l(s.$t("asset.assetCreatedBy")),1),t("div",it,l(e.selectedAccName),1)])])]),e.assetMutable?F("",!0):(i(),c("div",ct,[t("div",dt,[x(g,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),ut])),e.showNoBalance?(i(),c("div",vt,[t("div",mt,[x(g,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),t("div",gt,l(s.$t("general.insufficientBalance")),1)])):e.isNotCosigner?(i(),c("div",ft,[t("div",bt,[x(g,{icon:"exclamation",class:"text-yellow-500 h-3 w-3 absolute",style:{top:"5px",left:"7px"}})]),t("div",pt,l(s.$t("general.noCosigner")),1)])):F("",!0),e.err!=""?(i(),c("div",ht,l(e.err),1)):F("",!0),t("div",yt,[e.getMultiSigCosigner.cosignerList.length>0?(i(),c("div",_t,[t("div",xt,[T(l(s.$t("general.initiateBy"))+": ",1),e.getMultiSigCosigner.cosignerList.length==1?(i(),c("span",wt,[T(l(e.getMultiSigCosigner.cosignerList[0].name)+" ("+l(s.$t("general.balance"))+": "+l(e.Helper.amountFormatterSimple(e.getMultiSigCosigner.cosignerList[0].balance,0))+" "+l(e.currentNativeTokenName)+") ",1),e.getMultiSigCosigner.cosignerList[0].balance<e.lockFundTotalFee?(i(),c("span",kt,"- "+l(s.$t("general.insufficientBalance")),1)):F("",!0)])):(i(),c("span",St,[H(t("select",{"onUpdate:modelValue":r[0]||(r[0]=n=>e.cosignerAddress=n)},[(i(!0),c(Le,null,Ie(e.getMultiSigCosigner.cosignerList,(n,_)=>(i(),c("option",{value:n.address,key:_},l(n.name)+" ("+l(s.$t("general.balance"))+": "+l(n.balance)+" "+l(e.currentNativeTokenName)+")",9,Ct))),128))],512),[[Ae,e.cosignerAddress]])])),e.cosignerBalanceInsufficient?(i(),c("div",Mt,"- "+l(s.$t("general.insufficientBalance")),1)):F("",!0)])])):F("",!0)]),t("div",Tt,[Ft,t("div",At,[t("div",Lt,l(s.$t("general.assetId")),1),t("div",It,l(e.selectAsset),1)])]),t("div",Nt,[t("div",Pt,[t("div",Vt,[t("div",Et,[T(l(s.$t("asset.currentSupply")),1),H(t("img",Bt,null,512),[[N,{value:"<tiptext>"+s.$t("asset.supplyMsg2")+"<br>"+s.$t("asset.supplyMsg3")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),t("div",Dt,l(e.assetAmount),1)]),t("div",Wt,[t("div",Ht,[T(l(s.$t("general.divisibility")),1),H(t("img",Ut,null,512),[[N,{value:"<tiptext>"+s.$t("asset.divisibilityMsg4")+"<br><br>"+s.$t("asset.divisibilityMsg2")+"<br>"+s.$t("asset.divisibilityMsg3")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),t("div",jt,l(e.assetDivisibility),1)]),t("div",Rt,[t("div",qt,[T(l(s.$t("general.transferable")),1),H(t("img",zt,null,512),[[N,{value:"<tiptext>"+s.$t("asset.transferableMsg")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),t("div",Ot,l(e.assetTransferable?s.$t("general.yes"):s.$t("general.no")),1)]),t("div",Qt,[t("div",Yt,[T(l(s.$t("general.supplyMutable")),1),H(t("img",Gt,null,512),[[N,{value:"<tiptext>"+s.$t("asset.supplyMutableMsg")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),t("div",Jt,l(e.assetMutable?s.$t("general.yes"):s.$t("general.no")),1)])])]),t("div",Xt,[x(j,{title:s.$t("asset.modificationType"),class:"lg:mr-4",modelValue:e.selectIncreaseDecrease,"onUpdate:modelValue":r[1]||(r[1]=n=>e.selectIncreaseDecrease=n)},null,8,["title","modelValue"]),x(A,{disabled:e.showNoBalance||e.isNotCosigner,modelValue:e.supply,"onUpdate:modelValue":r[2]||(r[2]=n=>e.supply=n),balance:e.maxAssetSupply-e.assetSupply.value,placeholder:s.$t("asset.quantityOf",{value:e.selectIncreaseDecrease}),type:"text",icon:"coins",showError:e.showSupplyErr,errorMessage:e.selectIncreaseDecrease=="increase"?" The total asset supply should not exceed 900T":" You have exceeded the maximum value for decrease asset supply.",decimal:Number(e.assetDivisibility),class:"lg:ml-4"},null,8,["disabled","modelValue","balance","placeholder","showError","errorMessage","decimal"])])]),t("div",Zt,[x(L,{"transaction-fee":e.transactionFee,"total-fee-formatted":e.totalFeeFormatted,"get-multi-sig-cosigner":e.getMultiSigCosigner,"check-cosign-balance":e.checkCosignBalance,"lock-fund-currency":e.lockFundCurrency,"lock-fund-tx-fee":String(e.lockFundTxFee),balance:e.balance,"selected-acc-add":e.selectedAccAdd},null,8,["transaction-fee","total-fee-formatted","get-multi-sig-cosigner","check-cosign-balance","lock-fund-currency","lock-fund-tx-fee","balance","selected-acc-add"]),t("div",Kt,l(s.$t("general.enterPasswordContinue")),1),x(I,{placeholder:s.$t("general.password"),errorMessage:s.$t("general.passwordRequired"),showError:e.showPasswdError,modelValue:e.walletPassword,"onUpdate:modelValue":r[3]||(r[3]=n=>e.walletPassword=n),disabled:e.disabledPassword},null,8,["placeholder","errorMessage","showError","modelValue","disabled"]),t("button",{type:"submit",class:"mt-3 w-full blue-btn py-4 disabled:opacity-50 disabled:cursor-auto text-white",disabled:e.disableModify,onClick:r[4]||(r[4]=(...n)=>e.modifyAsset&&e.modifyAsset(...n))},l(s.$t("asset.modifyAssetSupply")),9,$t),t("div",es,[x(G,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white border-b-2 border-white"},{default:Ne(()=>[T(l(s.$t("general.cancel")),1)]),_:1})])])])])])}const vs=ce(Ke,[["render",ts]]);export{vs as default};
