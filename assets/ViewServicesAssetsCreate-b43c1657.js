import{_ as X,ad as le,P as se,o as b,b as p,e as t,l as H,t as u,Q as ae,f as $,B as oe,d as ye,q as xe,r as l,u as we,c as v,W as U,w as R,E as i,H as A,n as T,V as ke,a as Z,k as ee,s as m,z as Te,i as Ce,A as Ae}from"./index-47dceba4.js";import{_ as Ie,a as Ee,b as $e,c as Ve}from"./TxnSummary.vue_vue_type_script_setup_true_lang-be039c67.js";import{_ as Ne}from"./PasswordInput.vue_vue_type_script_setup_true_lang-d6fe97da.js";import{S as Pe}from"./SupplyInputClean-cfa71f02.js";import{_ as re}from"./icon-info-8b4f1351.js";import{A as W}from"./assetsUtils-02aa47a4.js";import"./jdenticon-module-f990edd3.js";import"./proximax-logo-ecfc3767.js";const Se="/web-wallet-vuejs/assets/icon-done-a0410eac.svg",Fe="/web-wallet-vuejs/assets/icon-undone-5c4de078.svg",Me={directives:{tooltip:le},props:{title:String,disabled:Boolean,modelValue:Boolean,toolTip:String},emits:["update:modelValue"],name:"CheckInput",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},methods:{clickInputText:function(){!this.showError&&!this.disabled&&(this.borderColor="border-2 border-blue-primary")},getIcon(){return require(`@/${this.icon}`)},blurInputText:function(){this.disabled||(this.modelValue==""?(this.borderColor="border-2 border-red-primary",this.textErr=!0):(this.borderColor="border-2 border-gray-300",this.textErr=!1))},focusInputText:function(){this.borderColor="border-2 border-blue-primary",this.textErr=!1}},mounted(){this.emitter.on("CLEAR_TEXT",r=>{this.inputText=r,this.textErr=!1,this.borderColor="border border-gray-300"})}},Be={class:"border border-gray-200 px-2 py-1 h-14 flex items-center justify-between rounded-md"},De={key:0,src:re,class:"inline-block ml-2 relative",style:{top:"-1px"}},Le={key:0,src:Se,class:"inline-block"},Ue={key:1,src:Fe,class:"inline-block"};function Re(r,d,a,I,V,o){const N=se("tooltip");return b(),p("div",{class:H(`${a.disabled?"opacity-50":"cursor-pointer"}`)},[t("div",Be,[t("div",null,[t("div",{class:H(["inline-block font-bold text-tsm",`${a.disabled?"text-gray-500":"text-black"}`])},u(a.title),3),a.toolTip?ae((b(),p("img",De,null,512)),[[N,{value:"<tiptext>"+a.toolTip+"</tiptext>",escape:!1},void 0,{bottom:!0}]]):$("",!0)]),a.modelValue?(b(),p("img",Le)):(b(),p("img",Ue))])],2)}const te=X(Me,[["render",Re]]);const We={directives:{tooltip:le},props:{placeholder:String,errorMessage:String,icon:String,showError:Boolean,modelValue:String,title:String,disabled:Boolean,max:Number,toolTip:String},emits:["update:modelValue"],name:"NumberInputClean",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},methods:{clickInputText:function(){this.pswdErr||(this.borderColor="border-2 border-blue-primary")},validateKey:function(r){if(r.charCode<48||r.charCode>54)r.preventDefault();else return r.key},validate:function(r){this.$emit("update:modelValue",r.data)}},mounted(){this.emitter.on("CLEAR_TEXT",r=>{this.inputText=r,this.textErr=!1,this.borderColor="border border-gray-300"})}},Ke={class:"border border-gray-200 px-2 py-1 h-14 rounded-md"},je={class:"uppercase text-gray-500 text-txs text-left mb-2"},qe={key:0,src:re,class:"inline-block ml-1 relative cursor-pointer",style:{top:"-1px"}},He=["disabled","value","max","placeholder"],Xe={class:"h-3 mb-2"},ze={key:0,class:"error error-text text-left"};function Oe(r,d,a,I,V,o){const N=se("tooltip");return b(),p("div",{class:H(a.disabled?"opacity-50":"")},[t("div",Ke,[t("div",je,[oe(u(a.placeholder)+" ",1),a.toolTip?ae((b(),p("img",qe,null,512)),[[N,{value:"<tiptext>"+a.toolTip+"</tiptext>",escape:!0},void 0,{bottom:!0}]]):$("",!0)]),t("input",{disabled:a.disabled,value:a.modelValue,onInput:d[0]||(d[0]=(...f)=>o.validate&&o.validate(...f)),onKeypress:d[1]||(d[1]=(...f)=>o.validateKey&&o.validateKey(...f)),type:"number",maxlength:"1",min:"0",max:a.max,placeholder:a.placeholder,class:"number_input",onClick:d[2]||(d[2]=f=>o.clickInputText()),onFocus:d[3]||(d[3]=f=>f.target.select())},null,40,He)]),t("div",Xe,[V.textErr||a.showError?(b(),p("div",ze,u(a.errorMessage),1)):$("",!0)])],2)}const Qe=X(We,[["render",Oe]]),Ge={class:"w-10/12 ml-auto mr-auto"},Je={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},Ye={class:"xl:col-span-2 p-12"},Ze={class:"font-semibold mb-4"},et={key:0,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},tt={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},lt={class:"inline-block text-xs"},st={key:1,class:"error error_box"},at={class:"mt-4"},ot={class:"flex gap-1 mt-3"},rt={key:0,class:"mt-3"},nt={class:"lg:grid lg:grid-cols-2 mt-5"},it={class:"lg:mr-2"},ut={class:"lg:ml-2"},dt={class:"lg:grid lg:grid-cols-2"},ct={class:"mb-5 lg:mb-0 lg:mr-2"},vt={class:"mb-5 lg:mb-0 lg:ml-2"},mt={class:"bg-navy-primary py-6 px-6 xl:col-span-1"},bt={class:"text-xs text-white my-5"},pt=["disabled"],ft={class:"text-center"},gt={class:"sm:grid sm:grid-cols-2 mt-10 lg:mt-16"},_t={class:"mb-8"},ht={href:"https://bcdocs.xpxsirius.io/docs/built-in-features/mosaic/",target:"_new",class:"sm:h-9 lg:h-5 text-blue-primary font-bold text-tsm flex items-start"},yt={class:"text-gray-400 text-xs lg:text-tsm my-3 sm:pr-2"},xt={class:"mb-8"},wt={href:"https://t.me/proximaxhelpdesk",target:"_new",class:"sm:h-9 lg:h-5 text-blue-primary font-bold text-tsm items-start flex"},kt={class:"text-gray-400 text-tsm my-3"},Tt="^[^ ]{8,}$",Ct=ye({__name:"ViewServicesAssetsCreate",setup(r){const d=xe(),I=Ce().appContext.config.globalProperties.emitter,V=l(!1),o=l(""),{t:N}=we(),f=l(""),g=l("0"),ne=l(!1),_=l(!1),h=l(!1),ie=v(()=>y.value||Q.value),M=v(()=>Q.value),z=l(!1),K=l(!1),ue=l("month"),de=l("1"),ce=l(!1),ve=l(!1),O=l(!1),x=l("0"),Q=l(!1),P=l(),S=l();try{P.value=U.createPublicAccount(R.currentLoggedInWallet?R.currentLoggedInWallet.selectDefaultAccount().publicKey:"",i.networkType)}catch(e){console.log(e)}const me=l("0"),C=l(0);try{me.value=A.amountFormatterSimple(W.createAssetTransactionFee(P.value,Number(x.value),h.value,_.value,Number(g.value)),i.nativeToken.divisibility),C.value=A.convertToExact(W.createAssetTransactionFee(P.value,Number(x.value),h.value,_.value,Number(g.value)),i.nativeToken.divisibility)}catch(e){console.log(e)}const B=v(()=>T.currentNetworkProfileConfig?A.convertToExact(T.currentNetworkProfileConfig.mosaicRentalFee,i.nativeToken.divisibility):0),be=v(()=>T.currentNetworkProfileConfig?A.convertToCurrency(T.currentNetworkProfileConfig.mosaicRentalFee,i.nativeToken.divisibility):"0"),G=v(()=>T.currentNetworkProfileConfig?A.convertToExact(T.currentNetworkProfileConfig.lockedFundsPerAggregate,i.nativeToken.divisibility):0),J=v(()=>T.currentNetworkProfile?A.convertToExact(ke.getLockFundFee(),i.nativeToken.divisibility):0),Y=v(()=>G.value+J.value),pe=v(()=>!(o.value.match(Tt)&&g.value!=null&&Number(x.value)>0&&!V.value&&!ce.value&&!y.value)),n=l(null),E=l(null),w=l(null),k=l(0),D=l(0),j=async e=>{if(i.chainAPI&&e)try{const s=await i.chainAPI.accountAPI.getAccountInfo(Ae.Address.createFromRawAddress(e)),L=s.mosaics.findIndex(q=>q.id.toHex()==i.nativeToken.assetId);return L!=-1?s.mosaics[L].amount.compact()/Math.pow(10,i.nativeToken.divisibility):0}catch{return 0}},y=v(()=>{if(w.value)return n.value?D.value<B.value?!0:k.value<C.value+Y.value:k.value<B.value+C.value});k.value<B.value+C.value?(z.value=!0,K.value=!0,O.value=!0):(z.value=!1,K.value=!1,O.value=!1);const F=()=>{o.value="",g.value="0",x.value="0",de.value="1",ue.value="month",K.value=!1,_.value=!1,h.value=!1};Z(w,async(e,s)=>{e==null?(k.value=0,F(),E.value=null,n.value=null,S.value=null):e!=s&&(F(),E.value=null,n.value=null,S.value=null,k.value=await j(e))}),Z(n,async(e,s)=>{e==null?(D.value=0,F(),E.value=null,n.value=null,S.value=null,k.value=await j(w.value)):e!=s&&(F(),D.value=await j(e))});const fe=v(()=>n?Y.value+C.value:B.value+C.value),ge=v(()=>A.amountFormatterSimple(fe.value,0)),_e=e=>{V.value=e},he=()=>{if(!U.verifyWalletPassword(R.currentLoggedInWallet.name,T.chainNetworkName,o.value)){f.value=N("general.walletPasswordInvalid",{name:R.currentLoggedInWallet.name});return}n.value?W.createAssetMultiSig(w.value,o.value,S.value,Number(x.value),h.value,_.value,Number(g.value)):W.createAsset(w.value,o.value,P.value,Number(x.value),h.value,_.value,Number(g.value)),F(),d.push({name:"ViewAccountPendingTransactions",params:{address:w.value}})};return I.on("select-account",e=>{w.value=e}),I.on("select-account-public-key",e=>{P.value=U.createPublicAccount(e,i.networkType)}),I.on("select-multisig-account",e=>{E.value=e.label,n.value=e.value,S.value=U.createPublicAccount(e.publicKey,i.networkType)}),I.on("CLOSE_MULTISIG",()=>{E.value=null,n.value=null}),(e,s)=>{const L=ee("font-awesome-icon"),q=ee("router-link");return b(),p("div",null,[t("div",Ge,[t("div",Je,[t("div",Ye,[t("div",Ze,u(e.$t("asset.createAssets")),1),y.value?(b(),p("div",et,[t("div",tt,[m(L,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),t("div",lt,u(e.$t("general.insufficientBalance")),1)])):$("",!0),f.value!=""?(b(),p("div",st,u(f.value),1)):$("",!0),t("div",at,[t("div",ot,[m(Ie,{type:"asset"}),m(Ee,{"selected-address":w.value},null,8,["selected-address"])]),n.value?(b(),p("div",rt,[m($e,{"select-default-address":n.value,"select-default-name":E.value,type:"asset"},null,8,["select-default-address","select-default-name"])])):$("",!0),t("div",nt,[t("div",it,[m(Pe,{disabled:y.value||M.value,modelValue:x.value,"onUpdate:modelValue":s[0]||(s[0]=c=>x.value=c),balance:Number.MAX_VALUE,placeholder:e.$t("general.supply"),type:"text",onShowError:_e,decimal:Number(g.value),toolTip:e.$t("asset.supplyMsg1")+" <br><br>"+e.$t("asset.supplyMsg2")+"<br>"+e.$t("asset.supplyMsg3")},null,8,["disabled","modelValue","balance","placeholder","decimal","toolTip"])]),t("div",ut,[m(Qe,{disabled:y.value||M.value,modelValue:g.value,"onUpdate:modelValue":s[1]||(s[1]=c=>g.value=c),max:6,placeholder:e.$t("general.divisibility"),showError:ne.value,toolTip:e.$t("asset.divisibilityMsg1")+" <br><br>"+e.$t("asset.divisibilityMsg2")+"<br>"+e.$t("asset.divisibilityMsg3")},null,8,["disabled","modelValue","placeholder","showError","toolTip"])])]),t("div",dt,[t("div",ct,[m(te,{disabled:y.value||M.value,modelValue:_.value,"onUpdate:modelValue":s[2]||(s[2]=c=>_.value=c),title:e.$t("general.transferable"),toolTip:e.$t("asset.transferableMsg"),onClick:s[3]||(s[3]=c=>y.value?"":_.value=!_.value)},null,8,["disabled","modelValue","title","toolTip"])]),t("div",vt,[m(te,{disabled:y.value||M.value,modelValue:h.value,"onUpdate:modelValue":s[4]||(s[4]=c=>h.value=c),title:e.$t("general.supplyMutable"),toolTip:e.$t("asset.supplyMutableMsg"),onClick:s[5]||(s[5]=c=>y.value?"":h.value=!h.value)},null,8,["disabled","modelValue","title","toolTip"])])])])]),t("div",mt,[m(Ve,{"signer-native-token-balance":k.value,"asset-rental-fee-currency":be.value,"native-token-balance":n.value?D.value:k.value,"lock-fund":G.value,"lock-fund-tx-fee":J.value,"selected-multisig-address":n.value,"txn-fee":C.value,"total-fee":Number(ge.value)},null,8,["signer-native-token-balance","asset-rental-fee-currency","native-token-balance","lock-fund","lock-fund-tx-fee","selected-multisig-address","txn-fee","total-fee"]),t("div",bt,u(e.$t("general.enterPasswordContinue")),1),m(Ne,{placeholder:e.$t("general.password"),errorMessage:e.$t("general.passwordRequired"),showError:ve.value,modelValue:o.value,"onUpdate:modelValue":s[6]||(s[6]=c=>o.value=c),disabled:ie.value},null,8,["placeholder","errorMessage","showError","modelValue","disabled"]),t("button",{type:"submit",class:"mt-3 w-full blue-btn py-4 disabled:opacity-50 disabled:cursor-auto text-white",disabled:pe.value,onClick:he},u(e.$t("asset.createAssets")),9,pt),t("div",ft,[m(q,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white border-b-2 border-white"},{default:Te(()=>[oe(u(e.$t("general.cancel")),1)]),_:1})])])]),t("div",gt,[t("div",_t,[t("a",ht,u(e.$t("general.assetQues")),1),t("div",yt,u(e.$t("asset.assetAns")),1)]),t("div",xt,[t("a",wt,u(e.$t("general.feedback")),1),t("div",kt,u(e.$t("general.feedbackDescription")),1)])])])])}}});const Ft=X(Ct,[["__scopeId","data-v-96a81837"]]);export{Ft as default};
