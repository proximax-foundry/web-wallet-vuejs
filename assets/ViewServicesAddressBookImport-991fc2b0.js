import"./vue-86063517.js";import{_ as D,w as m,t as K}from"./index-5f2b4e3e.js";import{A as F}from"./addressBookUtils-0d3294bf.js";import{u as q}from"./primevue-e09f7e84.js";import{u as P}from"./vue-i18n-728f748b.js";import{_ as G}from"./icon-download-26660e63.js";import{r as C,B as W,o as d,z as c,A as r,l as B,g as o,a as y,m as M,e as k,F as J,k as Q,T as X,u as R,aW as Y,aT as Z}from"./@vue-a9ecc9f1.js";import"./@js-joda-d98eb16f.js";import"./tsjs-xpx-chain-sdk-84426b6a.js";import"./rxjs-1250b26d.js";import"./tslib-8dbab242.js";import"./@noble-f8eff84a.js";import"./js-sha3-d7d4f583.js";import"./node-stdlib-browser-23a8bc7f.js";import"./buffer-6d367910.js";import"./base64-js-50a5cdf9.js";import"./ieee754-44f7831e.js";import"./process-2209b2b3.js";import"./utf8-c941a4a0.js";import"./bip39-936aefa9.js";import"./axios-b48d2c29.js";import"./flatbuffers-edc4f8d7.js";import"./ws-0a714537.js";import"./vue-router-21fffbbf.js";import"./crypto-js-e64ac54c.js";import"./crypto-browserify-4fd8cccd.js";import"./randombytes-685e9383.js";import"./safe-buffer-c463177b.js";import"./create-hash-92c04a28.js";import"./inherits-804453d8.js";import"./md5.js-8d474739.js";import"./hash-base-bb85fc42.js";import"./readable-stream-2241ee9e.js";import"./events-86ccc6d8.js";import"./util-06f7ff32.js";import"./is-arguments-86164331.js";import"./has-tostringtag-7c6352d6.js";import"./has-symbols-cd7870b9.js";import"./call-bind-9e7f09da.js";import"./get-intrinsic-f35014ba.js";import"./has-proto-8ede3a55.js";import"./function-bind-68631a08.js";import"./has-ab8e2922.js";import"./is-generator-function-06dfaf9d.js";import"./which-typed-array-cf6b6a29.js";import"./for-each-f57c5052.js";import"./is-callable-7492318c.js";import"./available-typed-arrays-61974ec7.js";import"./gopd-bab4d6bd.js";import"./is-typed-array-037eef20.js";import"./util-deprecate-c3aabb3c.js";import"./string_decoder-ef7b01fe.js";import"./ripemd160-58dcfa02.js";import"./sha.js-cea3da2e.js";import"./cipher-base-aee0e03d.js";import"./stream-browserify-7496a08f.js";import"./create-hmac-e8b5ea4a.js";import"./browserify-sign-a708a95f.js";import"./browserify-rsa-bfbdcbb6.js";import"./bn.js-1ae23332.js";import"./elliptic-75e883ee.js";import"./minimalistic-assert-4cc49674.js";import"./minimalistic-crypto-utils-6f869a51.js";import"./brorand-03f0f79d.js";import"./hash.js-4f5dfe73.js";import"./hmac-drbg-87799258.js";import"./parse-asn1-465c125b.js";import"./asn1.js-405e93e4.js";import"./safer-buffer-2ac6237e.js";import"./evp_bytestokey-e91543fa.js";import"./browserify-aes-ce20a0e6.js";import"./buffer-xor-87a7236a.js";import"./pbkdf2-e2ae8643.js";import"./browserify-cipher-c4c37ca3.js";import"./browserify-des-3f7e64d9.js";import"./des.js-d262604a.js";import"./diffie-hellman-c8260aab.js";import"./miller-rabin-de27bf02.js";import"./create-ecdh-ffe720e9.js";import"./public-encrypt-fc0568a2.js";import"./randomfill-2874e5f1.js";import"./mathjs-2a513dae.js";import"./@babel-484168fe.js";import"./typed-function-4896e4f1.js";import"./decimal.js-d133ee8e.js";import"./complex.js-cf2520e8.js";import"./fraction.js-39e7906a.js";import"./javascript-natural-sort-c4dd0c27.js";import"./escape-latex-c8a96e7a.js";import"./seedrandom-c8f991ad.js";import"./tiny-emitter-56d49cfd.js";import"./crypto-random-string-d158262e.js";import"./jose-92e5544c.js";import"./vue-loading-overlay-b89251b1.js";import"./jspdf-30014160.js";import"./fflate-8981c52c.js";import"./vue-debounce-3bbbf8c6.js";import"./mitt-f7ef348c.js";/* empty css                   */import"./maska-6f10db43.js";import"./@fortawesome-014b81f2.js";import"./vue3-blocks-tree-e53499e3.js";import"./@intlify-16888cd3.js";const tt={name:"DisplayImportContactModal",props:[],components:{},data(){return{toggleModal:!1}},setup(){const{t}=P(),i=q(),e=R().appContext.config.globalProperties.emitter,s=C([]),p=C(0),u=C(0),n=C([]),L=A=>{var S=A.target.files||A.dataTransfer.files;S.length&&O(S[0])},j=()=>{p.value=0,u.value=0,n.value=[]},O=A=>{new Promise(I=>{var g=new FileReader;g.onload=()=>{I(g.result)},g.readAsText(A)}).then(I=>{if(!m.currentLoggedInWallet)return;const g=m.currentLoggedInWallet;var N=I.match(/[^\r\n]+/g);let T=[],x=[],$=[];N.shift(),N.forEach(w=>{var l,f,b,h,v=w.split(",");if(v.length>4){let a="";for(var E=0;E<v.length-1;++E)a=a+v[E]+",";l=a.replace(/['"]+/g,"")}else l=v[0].replace(/['"]+/g,"");f=v[1].replace(/['"]+/g,""),v[2]?b=v[2].replace(/['"]+/g,""):b="-none-",v[3]?h=v[3].replace(/['"]+/g,""):h=null;const z=g.accounts.findIndex(a=>a.name.toLowerCase()==l.toLowerCase()),U=g.contacts!=null?g.contacts.findIndex(a=>a.address==f):-1,H=g.contacts!=null?g.contacts.findIndex(a=>a.name.toLowerCase()==l.toLowerCase()):-1,V=m.currentLoggedInWallet.accounts.find(a=>a.default==!0);U>=0?T.push({label:l,address:f,group:b,publicKey:h}):H>=0||z>=0?F.verifyNetworkAddress(V.address,f).isPassed?x.push({label:l+" - 2",address:f,group:b,publicKey:h}):$.push({label:l,address:f,group:b,publicKey:h}):F.verifyNetworkAddress(V.address,f).isPassed?x.push({label:l,address:f,group:b,publicKey:h}):$.push({label:l,address:f,group:b,publicKey:h})}),T.length>0&&(u.value=T.length),x.length>0&&(x.forEach(w=>{let l=new K(w.label,w.address,w.group,w.publicKey);m.currentLoggedInWallet.addAddressBook(l)}),m.wallets.saveMyWalletOnlytoLocalStorage(m.currentLoggedInWallet),p.value=x.length,e.emit("REFRESH_CONTACT_LIST",!0),i.add({severity:"info",summary:t("general.addressBook"),detail:t("addressBook.newContactImported",p.value),group:"br-custom",life:5e3})),n.value=$},I=>{console.log(I)})};return{csv:s,contactAdded:p,contactExisted:u,contactInvalidAddress:n,onFileChange:L,closeModel:j}}},et=t=>(Y("data-v-b03246ac"),t=t(),Z(),t),ot=et(()=>r("img",{src:G,class:"inline-block mr-4 relative top-1"},null,-1)),rt={key:0,class:"popup-outer fixed flex z-50"},st={class:"modal-popup-box"},it={class:"delete-position"},nt={class:"w-104"},at={class:"default-title font-bold mt-0 mb-5"},lt={key:0,class:"bg-blue-200 text-left text-sm p-2 rounded-lg text-gray-800 mb-2"},dt={key:1,class:"bg-yellow-200 text-left text-sm p-2 rounded-lg text-gray-800 mb-2"},ct={key:2,class:"bg-red-200 text-left text-sm p-2 rounded-lg text-gray-800 mb-2"},mt={key:3,class:"text-left text-gray-800 mt-5"},pt={class:"font-bold mb-2"},ut={class:"inline-block mr-3 w-40"},gt={class:"inline-block"},ft={class:"py-5 my-5 text-tsm"},vt={enctype:"multipart/form-data"};function _t(t,i,_,e,s,p){const u=W("font-awesome-icon");return d(),c("div",null,[r("div",{onClick:i[0]||(i[0]=n=>s.toggleModal=!s.toggleModal),class:"cursor-pointer mt-5 py-2 px-5 rounded-md bg-blue-primary text-white text-tsm drop-shadow-lg filter hover:bg-blue-600 transition-all duration-500"},[ot,B(o(t.$t("general.import")),1)]),y(X,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:M(()=>[s.toggleModal?(d(),c("div",rt,[r("div",st,[r("div",it,[y(u,{icon:"times",class:"delete-icon-style",onClick:i[1]||(i[1]=n=>{s.toggleModal=!s.toggleModal,e.closeModel()})})]),r("div",nt,[r("h1",at,o(t.$t("addressBook.importAddress")),1),e.contactAdded>0?(d(),c("div",lt,o(e.contactAdded)+" "+o(t.$t("general.contact",e.contactAdded))+" "+o(t.$t("addressBook.addressBookMessage1")),1)):k("v-if",!0),e.contactExisted>0?(d(),c("div",dt,o(e.contactExisted)+" "+o(t.$t("general.contact",e.contactExisted))+" "+o(t.$t("addressBook.addressBookMessage2")),1)):k("v-if",!0),e.contactInvalidAddress.length>0?(d(),c("div",ct,o(e.contactInvalidAddress.length)+" "+o(t.$t("general.contact",e.contactInvalidAddress.length))+" "+o(t.$t("addressBook.addressBookMessage3")),1)):k("v-if",!0),e.contactInvalidAddress.length>0?(d(),c("div",mt,[r("div",pt,o(t.$t("general.contact",e.contactInvalidAddress.length))+" "+o(t.$t("addressBook.addressBookMessage4"))+":",1),(d(!0),c(J,null,Q(e.contactInvalidAddress,(n,L)=>(d(),c("div",{key:L,class:"text-left mb-2"},[r("div",ut,o(n.label),1),r("div",gt,o(n.address),1)]))),128))])):k("v-if",!0),r("div",ft,[r("form",vt,[r("input",{type:"file",onChange:i[2]||(i[2]=(...n)=>e.onFileChange&&e.onFileChange(...n))},null,32)])])])])])):k("v-if",!0)]),_:1}),s.toggleModal?(d(),c("div",{key:0,onClick:i[3]||(i[3]=n=>{s.toggleModal=!s.toggleModal,e.closeModel()}),class:"fixed inset-0 bg-opacity-60 bg-gray-100 z-20"})):k("v-if",!0)])}const bt=D(tt,[["render",_t],["__scopeId","data-v-b03246ac"],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/services/submodule/addressbook/components/DisplayImportContactModal.vue"]]),ht={name:"ViewServicesAddressBook",components:{DisplayImportContactModal:bt},setup(){P();const i=R().appContext.config.globalProperties.emitter,_=C([]),e=()=>{m.currentLoggedInWallet&&(_.value=[],m.currentLoggedInWallet.contacts!=null&&m.currentLoggedInWallet.contacts.length>0&&(m.currentLoggedInWallet.contacts.forEach(s=>{_.value.push(s)}),_.value.sort((s,p)=>s.name>p.name?1:s.name<p.name?-1:0)))};return e(),i.on("REFRESH_CONTACT_LIST",s=>{s&&setTimeout(()=>{e()},1e3)}),{list:_}}},wt={class:"w-9/12 ml-auto mr-auto mt-5"},kt={class:"flex text-xs font-semibold border-b-2 menu_title_div"},yt={class:"w-18 text-center border-b-2 pb-3 border-yellow-500"},It={class:"mt-10"},xt={class:"text-md my-5 font-semibold"},Ct={class:"flex cursor-pointer"},At={class:"border-2 border-blue-primary p-1 mb-3 w-20 text-white bg-blue-primary text-xs text-center font-semibold"},Bt={class:"text-tsm"};function Mt(t,i,_,e,s,p){const u=W("router-link"),n=W("DisplayImportContactModal");return d(),c("div",null,[r("div",wt,[r("div",kt,[y(u,{to:{name:"ViewServicesAddressBook"},class:"w-18 text-center border-b pb-3"},{default:M(()=>[B(o(t.$t("general.list")),1)]),_:1}),r("div",yt,o(t.$t("general.import")),1),y(u,{to:{name:"ViewServicesAddressBookExport"},class:"w-18 text-center border-b pb-3"},{default:M(()=>[B(o(t.$t("general.export")),1)]),_:1})]),r("div",It,[r("div",xt,o(t.$t("addressBook.importContacts")),1),r("div",Ct,[r("div",At,o(t.$t("wallet.importFile")),1),y(u,{to:{name:"ViewServicesAddressBookImportAccount"},class:"border-2 border-blue-primary p-1 mb-3 w-16 text-blue-primary text-xs text-center font-semibold"},{default:M(()=>[B(o(t.$t("general.account")),1)]),_:1})]),r("div",Bt,o(t.$t("addressBook.addBackUpContact")),1),y(n,{class:"inline-block w-36 flex-none"})])])])}const Co=D(ht,[["render",Mt],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/services/submodule/addressbook/views/ViewServicesAddressBookImport.vue"]]);export{Co as default};
