import{_ as N,u as A,r as u,q as C,c as W,w as o,k as v,b as P,e as r,s as g,z as x,t as d,f as T,W as i,n as L,E as I,a7 as E,o as k,B as S}from"./index-401acdd9.js";import{T as K}from"./TextInput-17341443.js";import{P as M}from"./PasswordInput-357714d6.js";import{_ as B}from"./chevron_left-0423cb29.js";const $={name:"ViewAccountCreate",components:{TextInput:K,PasswordInput:M},setup(){const{t}=A(),a=u(!1),s=u(""),e=u(""),f=u(!1),_="^[^ ]{8,}$",m=C(),w=W(()=>!(e.value.match(_)&&s.value.length!="")),n=o.currentLoggedInWallet?o.currentLoggedInWallet.name:"";return{walletState:o,err:a,create:()=>{if(!o.currentLoggedInWallet)return;const y=o.currentLoggedInWallet.accounts.find(p=>p.name==s.value);if(y)a.value=t("account.nameTaken"),console.log(y);else{var h=i.verifyWalletPassword(o.currentLoggedInWallet.name,L.chainNetworkName,e.value);if(h==-1)a.value=t("account.failCreate");else if(h==0)a.value=t("general.walletPasswordInvalid",{name:n});else{let p=i.createPassword(e.value);const c=i.generateNewAccount(I.networkType),b=i.createAccountSimpleFromPrivateKey(s.value,p,c.privateKey,I.networkType);let V=new E(s.value,c.publicKey,c.address.plain(),"pass:bip32",b.encryptedPrivateKey.encryptedKey,b.encryptedPrivateKey.iv);o.currentLoggedInWallet.accounts.push(V),o.wallets.saveMyWalletOnlytoLocalStorage(o.currentLoggedInWallet),m.push({name:"ViewAccountDetails",params:{address:c.address.address,accountCreated:!0}})}}},accountName:s,walletPassword:e,showPasswdError:f,disableCreate:w,clearInput:()=>{s.value="",e.value=""},walletName:n}}},j={class:"flex cursor-pointer"},U=r("img",{src:B},null,-1),q={class:"border w-8/12 ml-auto mr-auto mt-6 filter shadow-lg"},D={class:"text-lg text-center font-bold mt-10"},R={key:0,class:"error error_box mb-2 w-8/12 ml-auto mr-auto"},z={class:"w-8/12 ml-auto mr-auto mt-3"},F={class:"flex justify-center"},O=["disabled"],G=r("div",{class:"mt-10"},null,-1);function H(t,a,s,e,f,_){const m=v("router-link"),w=v("TextInput"),n=v("PasswordInput");return k(),P("div",null,[r("div",j,[U,g(m,{to:{name:"ViewAccountCreateSelectType"},class:"text-blue-primary text-xs mt-0.5"},{default:x(()=>[S(d(t.$t("general.back")),1)]),_:1})]),r("div",q,[r("div",D,d(t.$t("general.createNewAcc")),1),e.err!=""?(k(),P("div",R,d(e.err),1)):T("v-if",!0),r("div",z,[g(w,{placeholder:t.$t("account.namePlaceholder"),errorMessage:t.$t("account.enterAccountName"),modelValue:e.accountName,"onUpdate:modelValue":a[0]||(a[0]=l=>e.accountName=l),icon:"wallet"},null,8,["placeholder","errorMessage","modelValue"]),g(n,{class:"mt-3",placeholder:t.$t("general.enterPassword"),errorMessage:t.$t("general.passwordRequired"),showError:e.showPasswdError,icon:"lock",modelValue:e.walletPassword,"onUpdate:modelValue":a[1]||(a[1]=l=>e.walletPassword=l)},null,8,["placeholder","errorMessage","showError","modelValue"])]),r("div",F,[r("button",{type:"submit",class:"mt-3 blue-btn py-2 px-8 disabled:opacity-50",onClick:a[2]||(a[2]=l=>e.create()),disabled:e.disableCreate},d(t.$t("general.create")),9,O)]),G])])}const ee=N($,[["render",H],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/views/ViewAccountCreate.vue"]]);export{ee as default};
