import{_ as ae,a5 as ye,S as oe,o as b,b as f,e as t,j as G,t as d,P as ne,f as V,d as ie,r as l,n as w,a as Q,x as re,h as ue,l as _e,u as xe,c as h,W as q,w as te,B as n,H as N,R as Te,i as le,m as y,v as ke,z as U}from"./index-733b9285.js";import{_ as we,a as Ce,b as Ie,c as Se}from"./TxnSummary.vue_vue_type_script_setup_true_lang-54687fe2.js";import{S as Ae}from"./SupplyInputClean-7ea498a7.js";import{_ as ce}from"./icon-info-8b4f1351.js";import{A as W}from"./assetsUtils-446c39ff.js";import{T as H}from"./transactionState-f1b2b56c.js";import"./jdenticon-module-d6bd4e96.js";import"./proximax-logo-ecfc3767.js";const $e="/web-wallet-vuejs/assets/icon-done-a0410eac.svg",Ne="/web-wallet-vuejs/assets/icon-undone-5c4de078.svg",Ee={directives:{tooltip:ye},props:{title:String,disabled:Boolean,modelValue:Boolean,toolTip:String},emits:["update:modelValue"],name:"CheckInput",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},methods:{clickInputText:function(){!this.showError&&!this.disabled&&(this.borderColor="border-2 border-blue-primary")},getIcon(){return require(`@/${this.icon}`)},blurInputText:function(){this.disabled||(this.modelValue==""?(this.borderColor="border-2 border-red-primary",this.textErr=!0):(this.borderColor="border-2 border-gray-300",this.textErr=!1))},focusInputText:function(){this.borderColor="border-2 border-blue-primary",this.textErr=!1}},mounted(){this.emitter.on("CLEAR_TEXT",u=>{this.inputText=u,this.textErr=!1,this.borderColor="border border-gray-300"})}},Me={class:"border border-gray-200 px-2 py-1 h-14 flex items-center justify-between rounded-md"},Ve={key:0,src:ce,class:"inline-block ml-2 relative",style:{top:"-1px"}},Fe={key:0,src:$e,class:"inline-block"},Pe={key:1,src:Ne,class:"inline-block"};function De(u,L,_,C,R,F){const i=oe("tooltip");return b(),f("div",{class:G(`${_.disabled?"opacity-50":"cursor-pointer"}`)},[t("div",Me,[t("div",null,[t("div",{class:G(["inline-block font-bold text-tsm",`${_.disabled?"text-gray-500":"text-black"}`])},d(_.title),3),_.toolTip?ne((b(),f("img",Ve,null,512)),[[i,{value:"<tiptext>"+_.toolTip+"</tiptext>",escape:!1},void 0,{bottom:!0}]]):V("",!0)]),_.modelValue?(b(),f("img",Fe)):(b(),f("img",Pe))])],2)}const se=ae(Ee,[["render",De]]),Be={class:"border border-gray-200 px-2 py-1 h-14 rounded-md"},Ue={class:"uppercase text-gray-500 text-txs text-left mb-2"},Le={key:0,src:ce,class:"inline-block ml-1 relative cursor-pointer",style:{top:"-1px"}},Re=["disabled","value","placeholder"],je={class:"h-3 mb-2"},ze={key:0,class:"error error-text text-left"},Ke=ie({__name:"NumberInputClean",props:{placeholder:String,errorMessage:String,icon:String,showError:Boolean,modelValue:String,title:String,disabled:Boolean,max:Number,toolTip:String},emits:["update:modelValue"],setup(u,{emit:L}){const _=u,C=L,F=ue().appContext.config.globalProperties.emitter,i=l(""),X=l("border border-gray-300"),c=l(!1),a=l(_.modelValue),v=w.currentNetworkProfileConfig.maxMosaicDivisibility,E=l(!1),P=o=>{const m=o.key;return m>="0"&&m<="9"||m==="Backspace"||m==="Delete"||m==="ArrowLeft"||m==="ArrowRight"?!0:(o.preventDefault(),!1)},O=o=>{o.selectionStart<v.toString().length?E.value=!0:E.value=!1,isNaN(parseInt(o.value))?a.value="0":a.value=o.value.toString()};return Q(a,o=>{o.length>v.toString().length?E.value?a.value=parseInt(o.slice(0,v.toString().length)).toString():a.value=parseInt(o.slice(0,v.toString().length-1)+o.slice(-1)).toString():parseInt(o)>v?a.value=v.toString():a.value=parseInt(o).toString(),C("update:modelValue",a.value)}),F.on("CLEAR_TEXT",o=>{i.value=o,c.value=!1,X.value="border border-gray-300"}),(o,m)=>{const j=oe("tooltip");return b(),f("div",{class:G(u.disabled?"opacity-50":"")},[t("div",Be,[t("div",Ue,[re(d(u.placeholder)+" ",1),u.toolTip?ne((b(),f("img",Le,null,512)),[[j,{value:"<tiptext>"+u.toolTip+"</tiptext>",escape:!1},void 0,{bottom:!0}]]):V("",!0)]),t("input",{disabled:u.disabled,value:a.value,onInput:m[0]||(m[0]=g=>O(g.target)),onKeypress:P,placeholder:u.placeholder,class:"number_input"},null,40,Re)]),t("div",je,[c.value||u.showError?(b(),f("div",ze,d(u.errorMessage),1)):V("",!0)])],2)}}});const We={class:"w-10/12 ml-auto mr-auto"},He={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},Xe={class:"xl:col-span-2 p-12"},Oe={class:"font-semibold mb-4"},Ze={key:0,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},qe={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},Ge={class:"inline-block text-xs"},Qe={key:1,class:"error error_box"},Je={class:"mt-4"},Ye={class:"flex gap-1 mt-3"},et={key:0,class:"mt-3"},tt={class:"lg:grid lg:grid-cols-2 mt-5"},lt={class:"lg:mr-2"},st={class:"lg:ml-2"},at={class:"lg:grid lg:grid-cols-2"},ot={class:"mb-5 lg:mb-0 lg:mr-2"},nt={class:"mb-5 lg:mb-0 lg:ml-2"},it={class:"bg-navy-primary py-6 px-6 xl:col-span-1"},rt=["disabled"],ut={class:"text-center"},ct={class:"sm:grid sm:grid-cols-2 mt-10 lg:mt-16"},dt={class:"mb-8"},vt={href:"https://bcdocs.xpxsirius.io/docs/built-in-features/mosaic/",target:"_new",class:"sm:h-9 lg:h-5 text-blue-primary font-bold text-tsm flex items-start"},mt={class:"text-gray-400 text-xs lg:text-tsm my-3 sm:pr-2"},pt={class:"mb-8"},bt={href:"https://t.me/proximaxhelpdesk",target:"_new",class:"sm:h-9 lg:h-5 text-blue-primary font-bold text-tsm items-start flex"},ft={class:"text-gray-400 text-tsm my-3"},gt=ie({__name:"ViewServicesAssetsCreate",setup(u){const L=_e(),C=ue().appContext.config.globalProperties.emitter,R=l(!1);xe();const F=l(""),i=l("0"),X=l(!1),c=l(!1),a=l(!1),v=h(()=>de.value),E=l(!1),P=l(!1),O=l("month"),o=l("1"),m=l(!1),j=l(!1),g=l("0"),de=l(!1),I=l(),D=l();try{I.value=q.createPublicAccount(te.currentLoggedInWallet?te.currentLoggedInWallet.selectDefaultAccount().publicKey:"",n.networkType)}catch(e){console.log(e)}const ve=l("0"),S=l(0);try{ve.value=N.amountFormatterSimple(W.createAssetTransactionFee(I.value,Number(g.value),a.value,c.value,Number(i.value)),n.nativeToken.divisibility),S.value=N.convertToExact(W.createAssetTransactionFee(I.value,Number(g.value),a.value,c.value,Number(i.value)),n.nativeToken.divisibility)}catch(e){console.log(e)}const z=h(()=>w.currentNetworkProfileConfig?N.convertToExact(w.currentNetworkProfileConfig.mosaicRentalFee,n.nativeToken.divisibility):0),me=h(()=>w.currentNetworkProfileConfig?N.convertToCurrency(w.currentNetworkProfileConfig.mosaicRentalFee,n.nativeToken.divisibility):"0"),J=h(()=>w.currentNetworkProfileConfig?N.convertToExact(w.currentNetworkProfileConfig.lockedFundsPerAggregate,n.nativeToken.divisibility):0),Y=h(()=>w.currentNetworkProfile?N.convertToExact(Te.getLockFundFee(),n.nativeToken.divisibility):0),ee=h(()=>J.value+Y.value),pe=h(()=>!(A.value!=null&&i.value!=null&&Number(g.value)>0&&!R.value&&!m.value&&!T.value)),r=l(null),M=l(null),A=l(null),x=l(0),K=l(0),Z=async e=>{if(n.chainAPI&&e)try{const s=await n.chainAPI.accountAPI.getAccountInfo(U.Address.createFromRawAddress(e)),k=s.mosaics.findIndex($=>$.id.toHex()==n.nativeToken.assetId);return k!=-1?s.mosaics[k].amount.compact()/Math.pow(10,n.nativeToken.divisibility):0}catch{return 0}},T=h(()=>{if(A.value)return r.value?K.value<z.value?!0:x.value<S.value+ee.value:x.value<z.value+S.value});x.value<z.value+S.value?(E.value=!0,P.value=!0,j.value=!0):(E.value=!1,P.value=!1,j.value=!1);const B=()=>{i.value="0",g.value="0",o.value="1",O.value="month",P.value=!1,c.value=!1,a.value=!1};Q(A,async(e,s)=>{e==null?(x.value=0,B(),M.value=null,r.value=null,D.value=null):e!=s&&(B(),M.value=null,r.value=null,D.value=null,x.value=await Z(e))}),Q(r,async(e,s)=>{e==null?(K.value=0,B(),M.value=null,r.value=null,D.value=null,x.value=await Z(A.value)):e!=s&&(B(),K.value=await Z(e))});const be=h(()=>r?ee.value+S.value:z.value+S.value),fe=h(()=>N.amountFormatterSimple(be.value,0)),ge=e=>{R.value=e},he=()=>{if(r.value){const e=n.buildTxn.mosaicDefinition(D.value,a.value,c.value,Number(i.value));let s=U.MosaicSupplyType.Increase;const k=n.buildTxn.buildMosaicSupplyChange(e.mosaicId,s,U.UInt64.fromUint(W.addZeros(Number(i.value),Number(g.value)))),$=[e.serialize(),k.serialize()];H.unsignedTransactionPayload=$}else{const e=n.buildTxn.mosaicDefinition(I.value,a.value,c.value,Number(i.value)),s=e.toAggregateV1(I.value);let k=U.MosaicSupplyType.Increase;const $=n.buildTxn.buildMosaicSupplyChange(e.mosaicId,k,U.UInt64.fromUint(W.addZeros(Number(i.value),Number(g.value)))).toAggregateV1(I.value);let p=n.buildTxn.aggregateComplete([s,$]).serialize();H.unsignedTransactionPayload=p}B(),H.selectedAddress=A.value,H.selectedMultisigAddress=r.value,L.push({name:"ViewConfirmTransaction"})};return C.on("select-account",e=>{A.value=e}),C.on("select-account-public-key",e=>{I.value=q.createPublicAccount(e,n.networkType)}),C.on("select-multisig-account",e=>{M.value=e.label,r.value=e.value,D.value=q.createPublicAccount(e.publicKey,n.networkType)}),C.on("CLOSE_MULTISIG",()=>{M.value=null,r.value=null}),(e,s)=>{const k=le("font-awesome-icon"),$=le("router-link");return b(),f("div",null,[t("div",We,[t("div",He,[t("div",Xe,[t("div",Oe,d(e.$t("asset.createAssets")),1),T.value?(b(),f("div",Ze,[t("div",qe,[y(k,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),t("div",Ge,d(e.$t("general.insufficientBalance")),1)])):V("",!0),F.value!=""?(b(),f("div",Qe,d(F.value),1)):V("",!0),t("div",Je,[t("div",Ye,[y(we,{type:"asset"}),y(Ce,{"selected-address":A.value},null,8,["selected-address"])]),r.value?(b(),f("div",et,[y(Ie,{"select-default-address":r.value,"select-default-name":M.value,type:"asset"},null,8,["select-default-address","select-default-name"])])):V("",!0),t("div",tt,[t("div",lt,[y(Ae,{disabled:T.value||v.value,modelValue:g.value,"onUpdate:modelValue":s[0]||(s[0]=p=>g.value=p),balance:Number.MAX_VALUE,placeholder:e.$t("general.supply"),type:"text",onShowError:ge,decimal:Number(i.value),toolTip:e.$t("asset.supplyMsg1")+" <br><br>"+e.$t("asset.supplyMsg2")+"<br>"+e.$t("asset.supplyMsg3")},null,8,["disabled","modelValue","balance","placeholder","decimal","toolTip"])]),t("div",st,[y(Ke,{disabled:T.value||v.value,modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=p=>i.value=p),max:6,placeholder:e.$t("general.divisibility"),showError:X.value,toolTip:e.$t("asset.divisibilityMsg1")+" <br><br>"+e.$t("asset.divisibilityMsg2")+"<br>"+e.$t("asset.divisibilityMsg3")},null,8,["disabled","modelValue","placeholder","showError","toolTip"])])]),t("div",at,[t("div",ot,[y(se,{disabled:T.value||v.value,modelValue:c.value,"onUpdate:modelValue":s[2]||(s[2]=p=>c.value=p),title:e.$t("general.transferable"),toolTip:e.$t("asset.transferableMsg"),onClick:s[3]||(s[3]=p=>T.value?"":c.value=!c.value)},null,8,["disabled","modelValue","title","toolTip"])]),t("div",nt,[y(se,{disabled:T.value||v.value,modelValue:a.value,"onUpdate:modelValue":s[4]||(s[4]=p=>a.value=p),title:e.$t("general.supplyMutable"),toolTip:e.$t("asset.supplyMutableMsg"),onClick:s[5]||(s[5]=p=>T.value?"":a.value=!a.value)},null,8,["disabled","modelValue","title","toolTip"])])])])]),t("div",it,[y(Se,{"signer-native-token-balance":x.value,"asset-rental-fee-currency":me.value,"native-token-balance":r.value?K.value:x.value,"lock-fund":J.value,"lock-fund-tx-fee":Y.value,"selected-multisig-address":r.value,"txn-fee":S.value,"total-fee":Number(fe.value)},null,8,["signer-native-token-balance","asset-rental-fee-currency","native-token-balance","lock-fund","lock-fund-tx-fee","selected-multisig-address","txn-fee","total-fee"]),t("button",{type:"submit",class:"mt-3 w-full blue-btn py-4 disabled:opacity-50 disabled:cursor-auto text-white",disabled:pe.value,onClick:he},d(e.$t("asset.createAssets")),9,rt),t("div",ut,[y($,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white border-b-2 border-white"},{default:ke(()=>[re(d(e.$t("general.cancel")),1)]),_:1})])])]),t("div",ct,[t("div",dt,[t("a",vt,d(e.$t("general.assetQues")),1),t("div",mt,d(e.$t("asset.assetAns")),1)]),t("div",pt,[t("a",bt,d(e.$t("general.feedback")),1),t("div",ft,d(e.$t("general.feedbackDescription")),1)])])])])}}});const It=ae(gt,[["__scopeId","data-v-788b923f"]]);export{It as default};
