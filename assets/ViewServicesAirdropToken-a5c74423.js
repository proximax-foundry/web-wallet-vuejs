import{A as M,E as L,aj as Qe,ak as We,n as te,al as Fe,d as Ie,r as I,k as we,o as T,m as lt,I as Ge,c as J,b as D,e as a,t as R,s as X,i as Ce,_ as Xe,w as U,z as ye,f as j,am as at,an as g,u as ut,ao as ct,W as ue,H as ve,V as ft,a as Pe,C as S,B as Ve,ah as qe,ap as Ue,F as He,h as je,aq as dt,ar as Te,p as mt,j as _t}from"./index-47dceba4.js";import{M as ht}from"./multisigUtils-adaed49c.js";import{t as Oe}from"./jdenticon-module-f990edd3.js";import{_ as gt}from"./PasswordInput.vue_vue_type_script_setup_true_lang-d6fe97da.js";let pt=[{namespace:"prx.xpx",name:"XPX"},{namespace:"prx.metx",name:"METX"},{namespace:"xarcade.xar",name:"XAR"}];class me{static createAccount(e){return M.Account.createFromPrivateKey(e,L.networkType,1)}static async scanAsset(e){let l=M.PublicAccount.createFromPublicKey(e,L.networkType);try{let t=await L.chainAPI.accountAPI.getAccountInfo(l.address),n=t.mosaics.map(c=>c.id),r=await L.chainAPI.assetAPI.getMosaics(n),o=await L.chainAPI.assetAPI.getMosaicsNames(n);return t.mosaics.map(c=>{let f=c.id.toHex(),p=r.find(b=>b.mosaicId.toHex()===f).divisibility,d=o.find(b=>b.mosaicId.toHex()===f).names,C=d.length?d[0].name:"",w=pt.find(b=>b.namespace===C),A={id:f,amount:p?c.amount.compact()/Math.pow(10,p):c.amount.compact(),divisibility:p,namespaceName:C};return A.label=w?w.name:A.namespaceName?A.namespaceName:A.id.toUpperCase(),A})}catch{return[]}}static createDistributeAggregateTransactions(e,l,t,n){let r=M.PublicAccount.createFromPublicKey(e,L.networkType),o=[],s=Math.ceil(l.length/t),c=[],f=Math.pow(10,n.divisibility),p=n.namespaceName?new M.NamespaceId(n.namespaceName):new M.MosaicId(n.id);for(let d=0;d<l.length;++d){let C=Qe(We(l[d].amount),f),w=Number(C.toString()),A;l[d].publicKeyOrAddress.length===64?A=M.PublicAccount.createFromPublicKey(l[d].publicKeyOrAddress,L.networkType).address:A=M.Address.createFromRawAddress(l[d].publicKeyOrAddress);let b=new M.Mosaic(p,M.UInt64.fromUint(w)),O;l[d].message?O=M.PlainMessage.create(l[d].message):O=M.EmptyMessage;let k=L.buildTxn.transfer(A,O,[b]);c.push(k)}for(let d=0;d<s;++d){let C=d*t,w=(d+1)*t,A=c.slice(C,w),b=[];for(let k=0;k<A.length;++k)b.push(A[k].toAggregateV1(r));let O=L.buildTxn.aggregateBonded(b);o.push(O)}return o}static getLockFundTransactionFee(){const e=te.currentNetworkProfileConfig.lockedFundsPerAggregate??0;let l=new M.TransactionHash("0".repeat(64),M.TransactionType.AGGREGATE_BONDED_V1);return L.buildTxn.hashLock(new M.Mosaic(new M.NamespaceId("prx.xpx"),M.UInt64.fromUint(e)),M.UInt64.fromUint(Fe.getABTMaxSafeDuration()),l).maxFee.compact()}static async signAllAbtAndAnnounce(e,l){const t=te.currentNetworkProfileConfig.lockedFundsPerAggregate;let n=[],r=[],o=[],s=[];for(let p=0;p<e.length;++p){let d=l.preV2Sign(e[p],te.currentNetworkProfile.generationHash);n.push(d);let C=L.buildTxn.hashLock(new M.Mosaic(new M.NamespaceId(L.nativeToken.fullNamespace.trim()),M.UInt64.fromUint(t)),M.UInt64.fromUint(Fe.getABTMaxSafeDuration()),d),w=l.preV2Sign(C,te.currentNetworkProfile.generationHash);r.push(w),o.push({txnHash:d.hash,block:null}),o.push({txnHash:w.hash,block:null}),s.push({txnHash:d.hash,hashLockHash:w.hash})}let c=!1;for(let p=0;p<r.length;++p)await L.chainAPI.transactionAPI.announce(r[p]);console.log("All LockHash Txn announced, pending ABT announcement...");let f=[];for(;!c;){await new Promise(w=>setTimeout(w,15e3)),console.log("Checking LockHash Txn confirmation...");let d=await L.chainAPI.chainAPI.getBlockchainHeight(),C=n.filter(w=>!f.includes(w.hash));for(let w=0;w<C.length;++w){let A=s.find(O=>O.txnHash===C[w].hash).hashLockHash,b=await L.chainAPI.transactionAPI.getTransactionStatus(A);if(b.group===M.TransactionGroupType.CONFIRMED){let O=b.height.compact(),k=o.find(v=>v.txnHash===A);k.block=O,d>=k.block+1&&(await L.chainAPI.transactionAPI.announceAggregateBonded(C[w]),f.push(C[w].hash))}}f.length===n.length&&(c=!0)}return f}}const bt=Ie({__name:"SelectMultisigInput",props:{account:{type:Array,required:!0},selectedMultisig:{type:Object,required:!0}},emits:["select"],setup(i,{emit:e}){const l=I({}),t=o=>{e("select",o)},n=o=>{l.value[o.key]=!0},r=()=>{l.value={}};return(o,s)=>{const c=we("Tree");return T(),lt(c,{value:i.account,selectionMode:"single","onUpdate:selectionKeys":i.selectedMultisig,expandedKeys:l.value,filter:!0,filterMode:"strict",onNodeSelect:t,onNodeExpand:n,onNodeCollapse:r},null,8,["value","onUpdate:selectionKeys","expandedKeys"])}}}),vt={class:"w-full h-16 mt-0 border border-gray-200 px-2 py-2 rounded-md"},yt={class:"flex"},wt=["innerHTML"],It={class:"flex flex-col ml-2 text-left"},xt={class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}},St={class:"mt-2 text-base font-bold"},At={class:"ml-auto mt-auto mb-auto mr-6"},Nt=Ie({__name:"MultisigInput",props:{selectDefaultAddress:{type:String,required:!0},selectDefaultName:{type:String,required:!0}},setup(i){const e=i,t=Ce().appContext.config.globalProperties.emitter;let n=new Ge("ThemeStyleConfig");n.init();let r=I(n.jdenticonConfig);const o=J(()=>Oe(e.selectDefaultAddress,25,r.value)),s=()=>{t.emit("CLOSE_MULTISIG")};return(c,f)=>{const p=we("font-awesome-icon");return T(),D("div",vt,[a("div",yt,[a("div",{innerHTML:o.value},null,8,wt),a("div",It,[a("div",xt,R(c.$t("transfer.transferFrom"))+" "+R(c.$t("general.multisig")),1),a("div",St,R(i.selectDefaultName),1)]),a("div",At,[X(p,{icon:"times",class:"delete-icon-style",onClick:f[0]||(f[0]=d=>s())})])])])}}}),Ot=Ie({name:"SelectInputAccount",emits:["select-account","update:modelValue"],props:["modelValue","selectDefault","initiateBy"],setup(i){const e=I(!1),t=Ce().appContext.config.globalProperties.emitter;let n=new Ge("ThemeStyleConfig");n.init();let r=n.jdenticonConfig;const o=J(()=>{if(U.currentLoggedInWallet){var A=[];return U.currentLoggedInWallet.accounts.concat(U.currentLoggedInWallet.others).forEach(O=>{A.push({value:O.address,label:U.currentLoggedInWallet.convertAddressToName(O.address,!0),isMultiSig:!!O.getDirectParentMultisig().length})}),A.filter(O=>O.isMultiSig==!1)}else return[]}),s=J(()=>{i.selectDefault&&o.value.length&&o.value.find(A=>A.value==i.selectDefault).label}),c=I(i.selectDefault),f={label:s.value,value:c.value},p=I(Oe(i.selectDefault,25,r)),d=(A,b)=>{t.emit("select-account",b),s.value,f.label=A,c.value,f.value=b,p.value=Oe(b,25,r),e.value=!e.value},C=I(""),w=J(()=>{const A=C.value.toLowerCase();return C.value==""?o.value:o.value.filter(b=>Object.values(b).some(O=>String(O).toLowerCase().includes(A)))});return{selectAccount:d,selectedAddress:c,selectedAccountInfo:f,selectedImg:p,accounts:o,toggleSelection:e,selectedAccount:s,jdenticonConfig:r,toSvg:Oe,filterQuery:C,filteredAccounts:w}}}),kt={class:"w-full"},Tt={key:0,class:"account-item-value account-item"},Ct={class:"flex"},Dt=["innerHTML"],Lt={class:"flex flex-col ml-2 text-left"},Et={key:0,class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}},Bt={key:1,class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}},$t={class:"mt-2 text-base font-bold"},Mt={class:"flex"},Rt=["innerHTML"],Ft={class:"text-xs ml-2 font-semibold"};function Pt(i,e,l,t,n,r){const o=we("Dropdown");return T(),D("div",kt,[X(o,{modelValue:i.selectedAccountInfo,"onUpdate:modelValue":e[0]||(e[0]=s=>i.selectedAccountInfo=s),style:{width:"100%"},options:i.filteredAccounts,filter:!0,optionLabel:"label",emptyFilterMessage:" ",onChange:e[1]||(e[1]=s=>{i.selectAccount(s.value.label,s.value.value),i.$emit("update:modelValue",s.value.value),i.$emit("select-account",s.value.value)}),class:"h-16 mt-0"},{value:ye(s=>[s.value?(T(),D("div",Tt,[a("div",Ct,[a("div",{innerHTML:i.selectedImg},null,8,Dt),a("div",Lt,[i.initiateBy?(T(),D("div",Et,R(i.$t("general.initiateBy")),1)):(T(),D("div",Bt,R(i.$t("transfer.transferFrom"))+" OR Select Signing Account to initiate Multisig",1)),a("div",$t,R(s.value.label),1)])])])):j("",!0)]),option:ye(s=>[a("div",Mt,[a("div",{innerHTML:i.toSvg(s.option.value,20,i.jdenticonConfig)},null,8,Rt),a("div",Ft,R(s.option.label),1)])]),_:1},8,["modelValue","options"])])}const Vt=Xe(Ot,[["render",Pt]]);var qt=at();const Ze=function(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)};class N extends Error{constructor(e,l,t,...n){Array.isArray(l)&&(l=l.join(" ").trim()),super(l),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,N),this.code=e;for(const r of n)for(const o in r){const s=r[o];this[o]=g.Buffer.isBuffer(s)?s.toString(t.encoding):s==null?s:JSON.parse(JSON.stringify(s))}}}const Ye=function(i){const e=[];for(let l=0,t=i.length;l<t;l++){const n=i[l];if(n==null||n===!1)e[l]={disabled:!0};else if(typeof n=="string")e[l]={name:n};else if(Ze(n)){if(typeof n.name!="string")throw new N("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${l}`,"when column is an object literal"]);e[l]=n}else throw new N("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(n)} at position ${l}`])}return e};class Je{constructor(e=100){this.size=e,this.length=0,this.buf=g.Buffer.allocUnsafe(e)}prepend(e){if(g.Buffer.isBuffer(e)){const l=this.length+e.length;if(l>=this.size&&(this.resize(),l>=this.size))throw Error("INVALID_BUFFER_STATE");const t=this.buf;this.buf=g.Buffer.allocUnsafe(this.size),e.copy(this.buf,0),t.copy(this.buf,e.length),this.length+=e.length}else{const l=this.length++;l===this.size&&this.resize();const t=this.clone();this.buf[0]=e,t.copy(this.buf,1,0,l)}}append(e){const l=this.length++;l===this.size&&this.resize(),this.buf[l]=e}clone(){return g.Buffer.from(this.buf.slice(0,this.length))}resize(){const e=this.length;this.size=this.size*2;const l=g.Buffer.allocUnsafe(this.size);this.buf.copy(l,0,0,e),this.buf=l}toString(e){return e?this.buf.slice(0,this.length).toString(e):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}}const Ut=12,Ht=13,jt=10,Jt=32,Kt=9,zt=function(i){return{bomSkipped:!1,bufBytesStart:0,castField:i.cast_function,commenting:!1,error:void 0,enabled:i.from_line===1,escaping:!1,escapeIsQuote:g.Buffer.isBuffer(i.escape)&&g.Buffer.isBuffer(i.quote)&&g.Buffer.compare(i.escape,i.quote)===0,expectedRecordLength:Array.isArray(i.columns)?i.columns.length:void 0,field:new Je(20),firstLineToHeaders:i.cast_first_line_to_header,needMoreDataSize:Math.max(i.comment!==null?i.comment.length:0,...i.delimiter.map(e=>e.length),i.quote!==null?i.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new Je(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:i.record_delimiter.length===0?0:Math.max(...i.record_delimiter.map(e=>e.length)),trimChars:[g.Buffer.from(" ",i.encoding)[0],g.Buffer.from("	",i.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[g.Buffer.from(g.Buffer.from([Ht],"utf8").toString(),i.encoding),g.Buffer.from(g.Buffer.from([jt],"utf8").toString(),i.encoding),g.Buffer.from(g.Buffer.from([Ut],"utf8").toString(),i.encoding),g.Buffer.from(g.Buffer.from([Jt],"utf8").toString(),i.encoding),g.Buffer.from(g.Buffer.from([Kt],"utf8").toString(),i.encoding)]}},Qt=function(i){return i.replace(/([A-Z])/g,function(e,l){return"_"+l.toLowerCase()})},Ke=function(i){const e={};for(const t in i)e[Qt(t)]=i[t];if(e.encoding===void 0||e.encoding===!0)e.encoding="utf8";else if(e.encoding===null||e.encoding===!1)e.encoding=null;else if(typeof e.encoding!="string"&&e.encoding!==null)throw new N("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(e.encoding)}`],e);if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)throw new N("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,",`got ${JSON.stringify(e.bom)}`],e);if(e.cast_function=null,e.cast===void 0||e.cast===null||e.cast===!1||e.cast==="")e.cast=void 0;else if(typeof e.cast=="function")e.cast_function=e.cast,e.cast=!0;else if(e.cast!==!0)throw new N("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(e.cast)}`],e);if(e.cast_date===void 0||e.cast_date===null||e.cast_date===!1||e.cast_date==="")e.cast_date=!1;else if(e.cast_date===!0)e.cast_date=function(t){const n=Date.parse(t);return isNaN(n)?t:new Date(n)};else if(typeof e.cast_date!="function")throw new N("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(e.cast_date)}`],e);if(e.cast_first_line_to_header=null,e.columns===!0)e.cast_first_line_to_header=void 0;else if(typeof e.columns=="function")e.cast_first_line_to_header=e.columns,e.columns=!0;else if(Array.isArray(e.columns))e.columns=Ye(e.columns);else if(e.columns===void 0||e.columns===null||e.columns===!1)e.columns=!1;else throw new N("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(e.columns)}`],e);if(e.group_columns_by_name===void 0||e.group_columns_by_name===null||e.group_columns_by_name===!1)e.group_columns_by_name=!1;else{if(e.group_columns_by_name!==!0)throw new N("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",`got ${JSON.stringify(e.group_columns_by_name)}`],e);if(e.columns===!1)throw new N("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],e)}if(e.comment===void 0||e.comment===null||e.comment===!1||e.comment==="")e.comment=null;else if(typeof e.comment=="string"&&(e.comment=g.Buffer.from(e.comment,e.encoding)),!g.Buffer.isBuffer(e.comment))throw new N("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(e.comment)}`],e);const l=JSON.stringify(e.delimiter);if(Array.isArray(e.delimiter)||(e.delimiter=[e.delimiter]),e.delimiter.length===0)throw new N("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${l}`],e);if(e.delimiter=e.delimiter.map(function(t){if(t==null||t===!1)return g.Buffer.from(",",e.encoding);if(typeof t=="string"&&(t=g.Buffer.from(t,e.encoding)),!g.Buffer.isBuffer(t)||t.length===0)throw new N("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${l}`],e);return t}),e.escape===void 0||e.escape===!0?e.escape=g.Buffer.from('"',e.encoding):typeof e.escape=="string"?e.escape=g.Buffer.from(e.escape,e.encoding):(e.escape===null||e.escape===!1)&&(e.escape=null),e.escape!==null&&!g.Buffer.isBuffer(e.escape))throw new Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(e.escape)}`);if(e.from===void 0||e.from===null)e.from=1;else if(typeof e.from=="string"&&/\d+/.test(e.from)&&(e.from=parseInt(e.from)),Number.isInteger(e.from)){if(e.from<0)throw new Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(i.from)}`)}else throw new Error(`Invalid Option: from must be an integer, got ${JSON.stringify(e.from)}`);if(e.from_line===void 0||e.from_line===null)e.from_line=1;else if(typeof e.from_line=="string"&&/\d+/.test(e.from_line)&&(e.from_line=parseInt(e.from_line)),Number.isInteger(e.from_line)){if(e.from_line<=0)throw new Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(i.from_line)}`)}else throw new Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(i.from_line)}`);if(e.ignore_last_delimiters===void 0||e.ignore_last_delimiters===null)e.ignore_last_delimiters=!1;else if(typeof e.ignore_last_delimiters=="number")e.ignore_last_delimiters=Math.floor(e.ignore_last_delimiters),e.ignore_last_delimiters===0&&(e.ignore_last_delimiters=!1);else if(typeof e.ignore_last_delimiters!="boolean")throw new N("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(e.ignore_last_delimiters)}`],e);if(e.ignore_last_delimiters===!0&&e.columns===!1)throw new N("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],e);if(e.info===void 0||e.info===null||e.info===!1)e.info=!1;else if(e.info!==!0)throw new Error(`Invalid Option: info must be true, got ${JSON.stringify(e.info)}`);if(e.max_record_size===void 0||e.max_record_size===null||e.max_record_size===!1)e.max_record_size=0;else if(!(Number.isInteger(e.max_record_size)&&e.max_record_size>=0))if(typeof e.max_record_size=="string"&&/\d+/.test(e.max_record_size))e.max_record_size=parseInt(e.max_record_size);else throw new Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(e.max_record_size)}`);if(e.objname===void 0||e.objname===null||e.objname===!1)e.objname=void 0;else if(g.Buffer.isBuffer(e.objname)){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty buffer");e.encoding===null||(e.objname=e.objname.toString(e.encoding))}else if(typeof e.objname=="string"){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty string")}else if(typeof e.objname!="number")throw new Error(`Invalid Option: objname must be a string or a buffer, got ${e.objname}`);if(e.objname!==void 0){if(typeof e.objname=="number"){if(e.columns!==!1)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(e.columns===!1)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index")}if(e.on_record===void 0||e.on_record===null)e.on_record=void 0;else if(typeof e.on_record!="function")throw new N("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(e.on_record)}`],e);if(e.quote===null||e.quote===!1||e.quote==="")e.quote=null;else if(e.quote===void 0||e.quote===!0?e.quote=g.Buffer.from('"',e.encoding):typeof e.quote=="string"&&(e.quote=g.Buffer.from(e.quote,e.encoding)),!g.Buffer.isBuffer(e.quote))throw new Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(e.quote)}`);if(e.raw===void 0||e.raw===null||e.raw===!1)e.raw=!1;else if(e.raw!==!0)throw new Error(`Invalid Option: raw must be true, got ${JSON.stringify(e.raw)}`);if(e.record_delimiter===void 0)e.record_delimiter=[];else if(typeof e.record_delimiter=="string"||g.Buffer.isBuffer(e.record_delimiter)){if(e.record_delimiter.length===0)throw new N("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);e.record_delimiter=[e.record_delimiter]}else if(!Array.isArray(e.record_delimiter))throw new N("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);if(e.record_delimiter=e.record_delimiter.map(function(t,n){if(typeof t!="string"&&!g.Buffer.isBuffer(t))throw new N("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${n},`,`got ${JSON.stringify(t)}`],e);if(t.length===0)throw new N("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${n},`,`got ${JSON.stringify(t)}`],e);return typeof t=="string"&&(t=g.Buffer.from(t,e.encoding)),t}),typeof e.relax_column_count!="boolean")if(e.relax_column_count===void 0||e.relax_column_count===null)e.relax_column_count=!1;else throw new Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(e.relax_column_count)}`);if(typeof e.relax_column_count_less!="boolean")if(e.relax_column_count_less===void 0||e.relax_column_count_less===null)e.relax_column_count_less=!1;else throw new Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(e.relax_column_count_less)}`);if(typeof e.relax_column_count_more!="boolean")if(e.relax_column_count_more===void 0||e.relax_column_count_more===null)e.relax_column_count_more=!1;else throw new Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(e.relax_column_count_more)}`);if(typeof e.relax_quotes!="boolean")if(e.relax_quotes===void 0||e.relax_quotes===null)e.relax_quotes=!1;else throw new Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(e.relax_quotes)}`);if(typeof e.skip_empty_lines!="boolean")if(e.skip_empty_lines===void 0||e.skip_empty_lines===null)e.skip_empty_lines=!1;else throw new Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(e.skip_empty_lines)}`);if(typeof e.skip_records_with_empty_values!="boolean")if(e.skip_records_with_empty_values===void 0||e.skip_records_with_empty_values===null)e.skip_records_with_empty_values=!1;else throw new Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(e.skip_records_with_empty_values)}`);if(typeof e.skip_records_with_error!="boolean")if(e.skip_records_with_error===void 0||e.skip_records_with_error===null)e.skip_records_with_error=!1;else throw new Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(e.skip_records_with_error)}`);if(e.rtrim===void 0||e.rtrim===null||e.rtrim===!1)e.rtrim=!1;else if(e.rtrim!==!0)throw new Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(e.rtrim)}`);if(e.ltrim===void 0||e.ltrim===null||e.ltrim===!1)e.ltrim=!1;else if(e.ltrim!==!0)throw new Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(e.ltrim)}`);if(e.trim===void 0||e.trim===null||e.trim===!1)e.trim=!1;else if(e.trim!==!0)throw new Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(e.trim)}`);if(e.trim===!0&&i.ltrim!==!1?e.ltrim=!0:e.ltrim!==!0&&(e.ltrim=!1),e.trim===!0&&i.rtrim!==!1?e.rtrim=!0:e.rtrim!==!0&&(e.rtrim=!1),e.to===void 0||e.to===null)e.to=-1;else if(typeof e.to=="string"&&/\d+/.test(e.to)&&(e.to=parseInt(e.to)),Number.isInteger(e.to)){if(e.to<=0)throw new Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(i.to)}`)}else throw new Error(`Invalid Option: to must be an integer, got ${JSON.stringify(i.to)}`);if(e.to_line===void 0||e.to_line===null)e.to_line=-1;else if(typeof e.to_line=="string"&&/\d+/.test(e.to_line)&&(e.to_line=parseInt(e.to_line)),Number.isInteger(e.to_line)){if(e.to_line<=0)throw new Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(i.to_line)}`)}else throw new Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(i.to_line)}`);return e},ze=function(i){return i.every(e=>e==null||e.toString&&e.toString().trim()==="")},Wt=13,Gt=10,_e={utf8:g.Buffer.from([239,187,191]),utf16le:g.Buffer.from([255,254])},Xt=function(i={}){const e={bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},l=Ke(i);return{info:e,original_options:i,options:l,state:zt(l),__needMoreData:function(t,n,r){if(r)return!1;const{encoding:o,escape:s,quote:c}=this.options,{quoting:f,needMoreDataSize:p,recordDelimiterMaxLength:d}=this.state,C=n-t-1,w=Math.max(p,d===0?g.Buffer.from(`\r
`,o).length:d,f?(s===null?0:s.length)+c.length:0,f?c.length+d:0);return C<w},parse:function(t,n,r,o){const{bom:s,encoding:c,from_line:f,ltrim:p,max_record_size:d,raw:C,relax_quotes:w,rtrim:A,skip_empty_lines:b,to:O,to_line:k}=this.options;let{comment:v,escape:y,quote:E,record_delimiter:se}=this.options;const{bomSkipped:le,previousBuf:re,rawBuffer:he,escapeIsQuote:ce}=this.state;let x;if(re===void 0)if(t===void 0){o();return}else x=t;else re!==void 0&&t===void 0?x=re:x=g.Buffer.concat([re,t]);if(le===!1)if(s===!1)this.state.bomSkipped=!0;else if(x.length<3){if(n===!1){this.state.previousBuf=x;return}}else{for(const B in _e)if(_e[B].compare(x,0,_e[B].length)===0){const Q=_e[B].length;this.state.bufBytesStart+=Q,x=x.slice(Q),this.options=Ke({...this.original_options,encoding:B}),{comment:v,escape:y,quote:E}=this.options;break}this.state.bomSkipped=!0}const Z=x.length;let h;for(h=0;h<Z&&!this.__needMoreData(h,Z,n);h++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1),k!==-1&&this.info.lines>k){this.state.stop=!0,o();return}this.state.quoting===!1&&se.length===0&&this.__autoDiscoverRecordDelimiter(x,h)&&(se=this.options.record_delimiter);const B=x[h];if(C===!0&&he.append(B),(B===Wt||B===Gt)&&this.state.wasRowDelimiter===!1&&(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(y!==null&&this.state.quoting===!0&&this.__isEscape(x,h,B)&&h+y.length<Z)if(ce){if(this.__isQuote(x,h+y.length)){this.state.escaping=!0,h+=y.length-1;continue}}else{this.state.escaping=!0,h+=y.length-1;continue}if(this.state.commenting===!1&&this.__isQuote(x,h))if(this.state.quoting===!0){const F=x[h+E.length],Y=A&&this.__isCharTrimable(x,h+E.length),ne=v!==null&&this.__compareBytes(v,x,h+E.length,F),ee=this.__isDelimiter(x,h+E.length,F),fe=se.length===0?this.__autoDiscoverRecordDelimiter(x,h+E.length):this.__isRecordDelimiter(F,x,h+E.length);if(y!==null&&this.__isEscape(x,h,B)&&this.__isQuote(x,h+y.length))h+=y.length-1;else if(!F||ee||fe||ne||Y){this.state.quoting=!1,this.state.wasQuoting=!0,h+=E.length-1;continue}else if(w===!1){const oe=this.__error(new N("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(F)}"`,`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(oe!==void 0)return oe}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(E),h+=E.length-1}else if(this.state.field.length!==0){if(w===!1){const F=this.__infoField(),Y=Object.keys(_e).map(ee=>_e[ee].equals(this.state.field.toString())?ee:!1).filter(Boolean)[0],ne=this.__error(new N("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(F.column)} at line ${F.lines}, value is ${JSON.stringify(this.state.field.toString(c))}`,Y?`(${Y} bom)`:void 0],this.options,F,{field:this.state.field}));if(ne!==void 0)return ne}}else{this.state.quoting=!0,h+=E.length-1;continue}if(this.state.quoting===!1){const F=this.__isRecordDelimiter(B,x,h);if(F!==0){if(this.state.commenting&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0)this.info.comment_lines++;else{if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=f){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),h+=F-1;continue}if(b===!0&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0){this.info.empty_lines++,h+=F-1;continue}this.info.bytes=this.state.bufBytesStart+h;const fe=this.__onField();if(fe!==void 0)return fe;this.info.bytes=this.state.bufBytesStart+h+F;const oe=this.__onRecord(r);if(oe!==void 0)return oe;if(O!==-1&&this.info.records>=O){this.state.stop=!0,o();return}}this.state.commenting=!1,h+=F-1;continue}if(this.state.commenting)continue;if((v===null?0:this.__compareBytes(v,x,h,B))!==0){this.state.commenting=!0;continue}const ne=this.__isDelimiter(x,h,B);if(ne!==0){this.info.bytes=this.state.bufBytesStart+h;const ee=this.__onField();if(ee!==void 0)return ee;h+=ne-1;continue}}}if(this.state.commenting===!1&&d!==0&&this.state.record_length+this.state.field.length>d)return this.__error(new N("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${d}`,`at line ${this.info.lines}`],this.options,this.__infoField()));const Q=p===!1||this.state.quoting===!0||this.state.field.length!==0||!this.__isCharTrimable(x,h),ae=A===!1||this.state.wasQuoting===!1;if(Q===!0&&ae===!0)this.state.field.append(B);else{if(A===!0&&!this.__isCharTrimable(x,h))return this.__error(new N("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()));Q===!1&&(h+=this.__isCharTrimable(x,h)-1);continue}}if(n===!0)if(this.state.quoting===!0){const B=this.__error(new N("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField()));if(B!==void 0)return B}else if(this.state.wasQuoting===!0||this.state.record.length!==0||this.state.field.length!==0){this.info.bytes=this.state.bufBytesStart+h;const B=this.__onField();if(B!==void 0)return B;const Q=this.__onRecord(r);if(Q!==void 0)return Q}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.bufBytesStart+=h,this.state.previousBuf=x.slice(h);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(t){const{columns:n,group_columns_by_name:r,encoding:o,info:s,from:c,relax_column_count:f,relax_column_count_less:p,relax_column_count_more:d,raw:C,skip_records_with_empty_values:w}=this.options,{enabled:A,record:b}=this.state;if(A===!1)return this.__resetRecord();const O=b.length;if(n===!0){if(w===!0&&ze(b)){this.__resetRecord();return}return this.__firstLineToColumns(b)}if(n===!1&&this.info.records===0&&(this.state.expectedRecordLength=O),O!==this.state.expectedRecordLength){const k=n===!1?new N("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${O} on line ${this.info.lines}`],this.options,this.__infoField(),{record:b}):new N("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${n.length},`,`got ${O} on line ${this.info.lines}`],this.options,this.__infoField(),{record:b});if(f===!0||p===!0&&O<this.state.expectedRecordLength||d===!0&&O>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=k;else{const v=this.__error(k);if(v)return v}}if(w===!0&&ze(b)){this.__resetRecord();return}if(this.state.recordHasError===!0){this.__resetRecord(),this.state.recordHasError=!1;return}if(this.info.records++,c===1||this.info.records>=c){const{objname:k}=this.options;if(n!==!1){const v={};for(let y=0,E=b.length;y<E;y++)n[y]===void 0||n[y].disabled||(r===!0&&v[n[y].name]!==void 0?Array.isArray(v[n[y].name])?v[n[y].name]=v[n[y].name].concat(b[y]):v[n[y].name]=[v[n[y].name],b[y]]:v[n[y].name]=b[y]);if(C===!0||s===!0){const y=Object.assign({record:v},C===!0?{raw:this.state.rawBuffer.toString(o)}:{},s===!0?{info:this.__infoRecord()}:{}),E=this.__push(k===void 0?y:[v[k],y],t);if(E)return E}else{const y=this.__push(k===void 0?v:[v[k],v],t);if(y)return y}}else if(C===!0||s===!0){const v=Object.assign({record:b},C===!0?{raw:this.state.rawBuffer.toString(o)}:{},s===!0?{info:this.__infoRecord()}:{}),y=this.__push(k===void 0?v:[b[k],v],t);if(y)return y}else{const v=this.__push(k===void 0?b:[b[k],b],t);if(v)return v}}this.__resetRecord()},__firstLineToColumns:function(t){const{firstLineToHeaders:n}=this.state;try{const r=n===void 0?t:n.call(null,t);if(!Array.isArray(r))return this.__error(new N("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(r)}`],this.options,this.__infoField(),{headers:r}));const o=Ye(r);this.state.expectedRecordLength=o.length,this.options.columns=o,this.__resetRecord();return}catch(r){return r}},__resetRecord:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){const{cast:t,encoding:n,rtrim:r,max_record_size:o}=this.options,{enabled:s,wasQuoting:c}=this.state;if(s===!1)return this.__resetField();let f=this.state.field.toString(n);if(r===!0&&c===!1&&(f=f.trimRight()),t===!0){const[p,d]=this.__cast(f);if(p!==void 0)return p;f=d}this.state.record.push(f),o!==0&&typeof f=="string"&&(this.state.record_length+=f.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(t,n){const{on_record:r}=this.options;if(r!==void 0){const o=this.__infoRecord();try{t=r.call(null,t,o)}catch(s){return s}if(t==null)return}n(t)},__cast:function(t){const{columns:n,relax_column_count:r}=this.options;if(Array.isArray(n)===!0&&r&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(this.state.castField!==null)try{const s=this.__infoField();return[void 0,this.state.castField.call(null,t,s)]}catch(s){return[s]}if(this.__isFloat(t))return[void 0,parseFloat(t)];if(this.options.cast_date!==!1){const s=this.__infoField();return[void 0,this.options.cast_date.call(null,t,s)]}return[void 0,t]},__isCharTrimable:function(t,n){return((o,s)=>{const{timchars:c}=this.state;e:for(let f=0;f<c.length;f++){const p=c[f];for(let d=0;d<p.length;d++)if(p[d]!==o[s+d])continue e;return p.length}return 0})(t,n)},__isFloat:function(t){return t-parseFloat(t)+1>=0},__compareBytes:function(t,n,r,o){if(t[0]!==o)return 0;const s=t.length;for(let c=1;c<s;c++)if(t[c]!==n[r+c])return 0;return s},__isDelimiter:function(t,n,r){const{delimiter:o,ignore_last_delimiters:s}=this.options;if(s===!0&&this.state.record.length===this.options.columns.length-1)return 0;if(s!==!1&&typeof s=="number"&&this.state.record.length===s-1)return 0;e:for(let c=0;c<o.length;c++){const f=o[c];if(f[0]===r){for(let p=1;p<f.length;p++)if(f[p]!==t[n+p])continue e;return f.length}}return 0},__isRecordDelimiter:function(t,n,r){const{record_delimiter:o}=this.options,s=o.length;e:for(let c=0;c<s;c++){const f=o[c],p=f.length;if(f[0]===t){for(let d=1;d<p;d++)if(f[d]!==n[r+d])continue e;return f.length}}return 0},__isEscape:function(t,n,r){const{escape:o}=this.options;if(o===null)return!1;const s=o.length;if(o[0]===r){for(let c=0;c<s;c++)if(o[c]!==t[n+c])return!1;return!0}return!1},__isQuote:function(t,n){const{quote:r}=this.options;if(r===null)return!1;const o=r.length;for(let s=0;s<o;s++)if(r[s]!==t[n+s])return!1;return!0},__autoDiscoverRecordDelimiter:function(t,n){const{encoding:r}=this.options,o=[g.Buffer.from(`\r
`,r),g.Buffer.from(`
`,r),g.Buffer.from("\r",r)];e:for(let s=0;s<o.length;s++){const c=o[s].length;for(let f=0;f<c;f++)if(o[s][f]!==t[n+f])continue e;return this.options.record_delimiter.push(o[s]),this.state.recordDelimiterMaxLength=o[s].length,o[s].length}return 0},__error:function(t){const{encoding:n,raw:r,skip_records_with_error:o}=this.options,s=typeof t=="string"?new Error(t):t;if(o){this.state.recordHasError=!0,this.options.on_skip!==void 0&&this.options.on_skip(s,r?this.state.rawBuffer.toString(n):void 0);return}else return s},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){const{columns:t,raw:n,encoding:r}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:t===!0,index:this.state.record.length,raw:n?this.state.rawBuffer.toString(r):void 0}},__infoField:function(){const{columns:t}=this.options,n=Array.isArray(t);return{...this.__infoRecord(),column:n===!0?t.length>this.state.record.length?t[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}};class Zt extends qt.Transform{constructor(e={}){super({readableObjectMode:!0,...e,encoding:null}),this.api=Xt(e),this.api.options.on_skip=(l,t)=>{this.emit("skip",l,t)},this.state=this.api.state,this.options=this.api.options,this.info=this.api.info}_transform(e,l,t){if(this.state.stop===!0)return;const n=this.api.parse(e,!1,r=>{this.push(r)},()=>{this.push(null),this.on("end",this.destroy)});n!==void 0&&(this.state.stop=!0),t(n)}_flush(e){if(this.state.stop===!0)return;const l=this.api.parse(void 0,!0,t=>{this.push(t)},()=>{this.push(null),this.on("end",this.destroy)});e(l)}}const Yt=function(){let i,e,l;for(const n in arguments){const r=arguments[n],o=typeof r;if(i===void 0&&(typeof r=="string"||g.Buffer.isBuffer(r)))i=r;else if(e===void 0&&Ze(r))e=r;else if(l===void 0&&o==="function")l=r;else throw new N("CSV_INVALID_ARGUMENT",["Invalid argument:",`got ${JSON.stringify(r)} at index ${n}`],e||{})}const t=new Zt(e);if(l){const n=e===void 0||e.objname===void 0?[]:{};t.on("readable",function(){let r;for(;(r=this.read())!==null;)e===void 0||e.objname===void 0?n.push(r):n[r[0]]=r[1]}),t.on("error",function(r){l(r,void 0,t.api.__infoDataSet())}),t.on("end",function(){l(void 0,n,t.api.__infoDataSet())})}if(i!==void 0){const n=function(){t.write(i),t.end()};typeof setImmediate=="function"?setImmediate(n):setTimeout(n,0)}return t},xe=i=>(mt("data-v-708da0df"),i=i(),_t(),i),en={class:"container"},tn={class:"p-2"},nn={class:"flex gap-1"},sn={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},rn={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},on={key:0,class:"error error_box",role:"alert"},ln={key:1,class:"mt-3"},an={class:"p-2"},un={class:"flex flex-col-reverse"},cn={key:0,class:"error error_box"},fn={key:0},dn={style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},mn={class:"text-tsm text-gray-400"},_n={key:1},hn={style:{display:"flex","justify-content":"space-between"}},gn={class:"text-sm"},pn={class:"text-tsm text-gray-500"},bn=xe(()=>a("label",{class:"font-medium text-gray-400",for:"floatingSelect"},"Sirius Digital Asset",-1)),vn={class:"p-2"},yn={class:"flex flex-col-reverse"},wn=xe(()=>a("label",{class:"font-medium text-gray-400",for:"floatingSelect"},"Transactions per aggregate",-1)),In={class:"p-2"},xn={class:"border rounded-md border-gray-200 mb-3 w-full"},Sn={key:0,class:"error error_box"},An={class:"p-2"},Nn={key:0,class:"error error_box",role:"alert"},On={key:1,class:"error error_box",role:"alert"},kn={key:2,class:"error error_box",role:"alert"},Tn={key:0,class:"p-2 overflow-auto"},Cn={class:"table table-auto w-full"},Dn=dt('<div class="table-header-group" data-v-708da0df><div class="table-row" data-v-708da0df><div class="table-cell border-b-2 font-semibold p-4 pt-0 pb-3" data-v-708da0df>Recipient (Public Key or Address)</div><div class="table-cell border-b-2 font-semibold p-4 pt-0 pb-3" data-v-708da0df>Amount</div><div class="table-cell border-b-2 font-semibold p-4 pt-0 pb-3" data-v-708da0df>Message</div></div></div>',1),Ln={class:"table-row-group"},En={class:"table-cell border-b p-4 pt-0 pb-3"},Bn={class:"table-cell border-b p-4 pt-0 pb-3"},$n={class:"table-cell border-b p-4 pt-0 pb-3"},Mn={class:"p-2"},Rn={class:"mb-3 w-full px-2 py-1"},Fn=xe(()=>a("div",{class:"font-semibold"},"Enter your password to continue",-1)),Pn={key:0,class:"error error_box"},Vn=["disabled"],qn={key:2,class:"blue-btn px-3 py-3 text-md flex items-center",type:"button",disabled:""},Un=xe(()=>a("svg",{class:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),Hn={key:3,class:"font-semibold text-red-600 mt-2",role:"alert"},jn={key:4,class:"font-semibold text-red-600 mt-2",role:"alert"},Jn={key:1,class:"p-2 overflow-auto"},Kn={class:"table w-full"},zn=xe(()=>a("div",{class:"table-header-group"},[a("div",{class:"table-row"},[a("div",{class:"table-cell border-b-2 p-4 pt-0 pb-3"},"Transaction Hash")])],-1)),Qn={class:"table-row-group"},Wn={class:"table-cell border-b p-4 pt-0 pb-3"},Gn=["href"],Xn=Ie({__name:"SiriusDistributionForm",setup(i){const l=Ce().appContext.config.globalProperties.emitter;J(()=>L.nativeToken.label);const t=I(!1),n=I(""),r=I(""),o=I(""),s=I(!1),c=I({}),f=I(!1),p=I(""),d=I(!1),C=J(()=>f.value),w=I(""),{t:A}=ut(),b=I(""),O=J(()=>!!n.value);let k=I([]),v=I(null),y=I(10),E=I([]),se=I(0),le=I(0),re=I([]),he=I(!1),ce=I(!1),x=I(!1),Z=I(""),h=I(!1),B=I(""),Q=I(""),ae=I(""),F=I(!1),Y=async()=>{he.value=!1,v.value=null;let m=await me.scanAsset(o.value?o.value:W.value?W.value.publicKey:"");k.value=m,m.length===0&&(he.value=!0)},ne=[{label:"5",value:5},{label:"10",value:10},{label:"15",value:15},{label:"20",value:20}],ee=async()=>{var Me;if(ae.value="",h.value=!1,F.value||x.value||Z.value)return;if(v.value===null){B.value="Please select SDA";return}else if(se.value===0){Q.value="No recipient to distribute";return}else if(w.value&&!ue.verifyWalletPassword(U.currentLoggedInWallet.name,te.chainNetworkName,w.value)){b.value=A("general.walletPasswordInvalid",{name:U.currentLoggedInWallet.name});return}let m=Math.ceil(se.value/y.value),_=m*me.getLockFundTransactionFee(),H=m*te.currentNetworkProfileConfig.lockedFundsPerAggregate,$=k.value.find(z=>z.id===v.value.id),u=me.createDistributeAggregateTransactions(o.value?o.value:W.value.publicKey,E.value,y.value,$),P=Te(u.map(z=>z.maxFee.compact())),G=Te(_,H,P)/Math.pow(10,L.nativeToken.divisibility);const pe=ue.createPassword(w.value);let q;if(Ee.value){let z=$e.value.cosignerList;if(z.length>1)q=p.value;else{let Re=(Me=U.currentLoggedInWallet)==null?void 0:Me.accounts.find(ot=>ot.publicKey==z[0].publicKey);q=Re?Re.address:""}}let K;q?K=U.currentLoggedInWallet.accounts.find(z=>z.address===q):K=U.currentLoggedInWallet.accounts.find(z=>z.address===W.value.address);let de=ue.decryptPrivateKey(pe,K.encrypted,K.iv).toUpperCase(),Ae=me.createAccount(de),be=(await me.scanAsset(Ae.publicKey)).find(z=>z.namespaceName===L.nativeToken.fullNamespace.trim());if(be){if(G>be.amount){ae.value=`Initiator do not have enough XPX (${be.amount}), need ${G}`;return}}else{ae.value="Initiator do not have any XPX";return}F.value=!0;let Ne=await me.signAllAbtAndAnnounce(u,Ae);F.value=!1,h.value=!0,re.value=Ne};const fe=async m=>await(()=>new Promise(($,u)=>{const P=[],V=Yt(m,{trim:!0,skip_empty_lines:!0});V.on("readable",function(){let G;for(;(G=V.read())!==null;)P.push(G)}),V.on("end",function(){$(P)})}))();let oe=m=>{ce.value=!1;const _=m.target.files[0],H=new FileReader;H.onload=async $=>{const u=$.target.result;try{let P=[],V=u.split(/\r?\n/);for(let q=1;q<V.length;q++){let K=V[q].trim();if(K==="")break;const ie=await fe(K);P.push({publicKeyOrAddress:ie[0][0],amount:ie[0][1],message:ie[0][2]?ie[0][2]:""})}let G=!1;E.value=[];let pe=[];if(P&&P.length)for(let q=0;q<P.length;++q){let K=P[q].publicKeyOrAddress.trim().replaceAll("-",""),ie=P[q].amount.trim(),de=parseFloat(P[q].amount.trim()),Ae=P[q].message;if(K.length===64){if(!M.Convert.isHexString(K)){G=!0;break}}else if(K.length===40){if(M.Address.createFromRawAddress(K).networkType!==L.networkType){G=!0;break}}else{G=!0;break}let ke=de.toString().length;if(isNaN(de)){G=!0;break}else if(ke!==ie.length){let Ne=ie.length-ke;if(de.toString()+"0".repeat(Ne)!==ie){G=!0;break}}let be={publicKeyOrAddress:K,amount:de,message:Ae};pe.push(be)}G?(ce.value=!0,E.value=[],se.value=0,le.value=0):(se.value=P.length,le.value=Te(pe.map(q=>q.amount)),E.value=pe)}catch{ce.value=!0}},H.readAsText(_)},et=m=>{let _=te.currentNetworkProfile.chainExplorer;return _.url+"/"+_.hashRoute+"/"+m};I(!1);let De=m=>{if(m){let _=k.value.find(H=>H.id===m.id);le.value>_.amount?x.value=!0:x.value=!1}else x.value=!1},Le=m=>{if(m){let _=k.value.find($=>$.id===m.id);E.value.find($=>{let u=We($.amount),P=Qe(u,Math.pow(10,_.divisibility)),V=Number(P.toString());return Math.trunc(V)!==V})?Z.value="Invalid distribution amount, maximum decimal place is "+_.divisibility:Z.value=""}else Z.value=""};const W=I(),ge=J(()=>{if(!U.currentLoggedInWallet)return[];if(U.currentLoggedInWallet.others){const m=U.currentLoggedInWallet.accounts.map($=>$),H=U.currentLoggedInWallet.others.filter($=>$.type!="DELEGATE").map($=>$);return m.concat(H)}else return U.currentLoggedInWallet.accounts.map(_=>_)});W.value=ge.value[0],Y();const Se=I(W.value.address),Ee=J(()=>ct(W.value.address)),Be=J(()=>{const m=U.currentLoggedInWallet;if(!m)return[];let _=m.accounts.find(u=>u.address==W.value.address);if(!_)return[];var $=_.multisigInfo.filter(u=>u.level<0).map((u,P)=>({key:P.toString(),label:m.contacts.find(V=>V.address==ue.createAddressFromPublicKey(u.publicKey,L.networkType).plain())?m.contacts.find(V=>V.address==ue.createAddressFromPublicKey(u.publicKey,L.networkType).plain()).name:m.accounts.find(V=>V.publicKey==u.publicKey)?m.accounts.find(V=>V.publicKey==u.publicKey).name:"MULTISIG-"+ue.createAddressFromPublicKey(u.publicKey,L.networkType).plain().slice(-4),data:u.publicKey,selectable:!0}));return $}),tt=J(()=>Be.value.length!=0),nt=m=>{s.value=!1,n.value=ue.createAddressFromPublicKey(m.data,L.networkType).plain(),r.value=m.label,o.value=m.data,p.value=W.value.address,c.value[m.key]=!0,Y()},it=m=>U.currentLoggedInWallet.accounts.find(_=>_.publicKey==m),$e=J(()=>{const m=ge.value.find($=>{var u;return $.address==((u=W.value)==null?void 0:u.address)});let _=ht.getCosignerInWallet(m.publicKey),H={hasCosigner:_.hasCosigner,cosignerList:[]};return _.cosignerList.forEach($=>{const u=it($);u&&H.cosignerList.push({publicKey:$,name:u.name,balance:u.balance,address:u.address})}),H}),st=J(()=>ve.convertToExact(te.currentNetworkProfileConfig.lockedFundsPerAggregate,L.nativeToken.divisibility));J(()=>ve.convertToCurrency(te.currentNetworkProfileConfig.lockedFundsPerAggregate,L.nativeToken.divisibility));const rt=J(()=>te.currentNetworkProfile?ve.convertToExact(ft.getLockFundFee(),L.nativeToken.divisibility):0);if(J(()=>st.value+rt.value),Ee.value){let m=$e.value.cosignerList;m.length>0?(p.value=U.currentLoggedInWallet.accounts.find(_=>_.publicKey==m[0].publicKey).address,f.value=!1,t.value=!1):f.value=!0}return Pe(v,m=>{De(m),Le(m)}),Pe(le,m=>{De(v.value),Le(v.value)}),l.on("CLOSE_MULTISIG",()=>{n.value="",r.value="",o.value="",Y()}),l.on("select-account",m=>{for(let _=0;_<ge.value.length;_++)ge.value[_].address==m&&(W.value=ge.value[_],Y(),Se.value=W.value.address)}),(m,_)=>{const H=we("font-awesome-icon"),$=we("Sidebar");return T(),D("div",en,[a("div",tn,[a("div",nn,[X(Vt,{modelValue:Se.value,"onUpdate:modelValue":_[0]||(_[0]=u=>Se.value=u),initiateBy:O.value,selectDefault:Se.value},null,8,["modelValue","initiateBy","selectDefault"]),tt.value?(T(),D("div",{key:0,onClick:_[1]||(_[1]=u=>s.value=!s.value),class:"border rounded-md cursor-pointer flex flex-col justify-around p-2 h-16 w-18 mt-auto"},[X(H,{icon:"id-card-alt",class:"text-blue-primary ml-auto mr-auto"}),a("div",sn,R(m.$t("general.select")),1),a("div",rn,R(m.$t("general.multisig")),1)])):j("",!0)]),X($,{visible:s.value,"onUpdate:visible":_[3]||(_[3]=u=>s.value=u),baseZIndex:1e4,position:"full"},{default:ye(()=>[X(bt,{account:Be.value,selectedMultisig:c.value,onSelect:_[2]||(_[2]=u=>nt(u))},null,8,["account","selectedMultisig"])]),_:1},8,["visible"]),S(he)?(T(),D("div",on," No SDA found ")):j("",!0),n.value?(T(),D("div",ln,[X(Nt,{"select-default-address":n.value,"select-default-name":r.value},null,8,["select-default-address","select-default-name"])])):j("",!0)]),a("div",an,[a("div",null,[a("div",un,[S(B)!=""?(T(),D("div",cn,R(S(B)),1)):j("",!0),X(S(Ue),{modelValue:S(v),"onUpdate:modelValue":_[4]||(_[4]=u=>qe(v)?v.value=u:v=u),options:S(k),placeholder:"Select SDA to distribute",style:{width:"100%"},filter:!0,filterFields:["label"],optionLabel:"text","option-disabled":"disabled",showClear:!0},{value:ye(u=>[u.value?(T(),D("div",fn,[a("div",dn,[Ve(R(u.value.label)+" ",1),a("span",mn," ("+R(S(ve).toCurrencyFormat(u.value.amount,u.value.divisibility))+")",1)])])):(T(),D("span",_n,R(u.placeholder),1))]),option:ye(u=>[a("div",hn,[a("span",gn,R(u.option.label),1),a("span",pn,"Balance:"+R(S(ve).toCurrencyFormat(u.option.amount,u.option.divisibility)),1)])]),_:1},8,["modelValue","options"]),bn])])]),a("div",vn,[a("div",null,[a("div",yn,[X(S(Ue),{modelValue:S(y),"onUpdate:modelValue":_[5]||(_[5]=u=>qe(y)?y.value=u:y=u),options:S(ne),style:{width:"100%"},optionLabel:"label",optionValue:"value"},null,8,["modelValue","options"]),wn])])]),a("div",In,[a("div",null,[a("div",xn,[a("input",{type:"file",class:"form-control",onChange:_[6]||(_[6]=(...u)=>S(oe)&&S(oe)(...u)),id:"inputGroupFile04","aria-describedby":"inputGroupFileAddon04","aria-label":"Upload"},null,32)]),S(Q)!=""?(T(),D("div",Sn,R(S(Q)),1)):j("",!0)])]),a("div",An,[a("div",null,[S(ce)?(T(),D("div",Nn," Invalid file ")):j("",!0),S(x)?(T(),D("div",On," Total distribution amount exceed selected asset amount (need "+R(S(le))+") ",1)):j("",!0),S(Z)?(T(),D("div",kn,R(S(Z)),1)):j("",!0)])]),S(E).length?(T(),D("div",Tn,[a("div",null,[a("div",Cn,[Dn,a("div",Ln,[(T(!0),D(He,null,je(S(E),(u,P)=>(T(),D("div",{class:"table-row",key:P},[a("div",En,R(u.publicKeyOrAddress),1),a("div",Bn,R(u.amount),1),a("div",$n,R(u.message),1)]))),128))])])])])):j("",!0),a("div",Mn,[a("div",Rn,[Fn,X(gt,{placeholder:m.$t("general.enterPassword"),errorMessage:m.$t("general.passwordRequired"),showError:d.value,modelValue:w.value,"onUpdate:modelValue":_[7]||(_[7]=u=>w.value=u),icon:"lock",class:"mt-5 mb-3",disabled:C.value},null,8,["placeholder","errorMessage","showError","modelValue","disabled"]),b.value!=""?(T(),D("div",Pn,R(b.value),1)):j("",!0),S(F)?j("",!0):(T(),D("button",{key:1,type:"button",onClick:_[8]||(_[8]=u=>S(ee)()),disabled:S(F)&&!S(h),class:"blue-btn px-3 py-3 text-md"},"Distribute",8,Vn)),S(F)?(T(),D("button",qn,[Un,Ve(" Distributing... ")])):j("",!0),S(ae)?(T(),D("div",Hn,R(S(ae)),1)):j("",!0),S(h)?(T(),D("div",jn," Distribution Done ")):j("",!0)])]),S(re).length?(T(),D("div",Jn,[a("div",null,[a("div",Kn,[zn,a("div",Qn,[(T(!0),D(He,null,je(S(re),(u,P)=>(T(),D("div",{class:"table-row",key:P},[a("div",Wn,[a("a",{href:S(et)(u),target:"_blank"},R(u),9,Gn)])]))),128))])])])])):j("",!0)])}}});const Zn=Xe(Xn,[["__scopeId","data-v-708da0df"]]),Yn={class:"lg:ml-60 mt-10 lg:mt-16 flex-grow px-5 pt-5"},ei=a("div",{class:"w-11/12 ml-auto mr-auto"},[a("div",{class:"flex"},[a("div",{class:"py-3 px-6 lg:flex items-center"},[a("div",{class:"text-xl mr-2 mb-2"},"Airdrop Token Utility")])])],-1),ti={class:"mt-2 py-3"},ni={class:"w-11/12 ml-auto mr-auto border-2"},ii=a("div",{class:"mb-36"},null,-1),ai=Ie({__name:"ViewServicesAirdropToken",setup(i){return(e,l)=>(T(),D("div",Yn,[ei,a("div",ti,[a("div",ni,[X(Zn)])]),ii]))}});export{ai as default};
