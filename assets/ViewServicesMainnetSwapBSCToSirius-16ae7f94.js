import{_ as kt,g as i,j as _t,c as S,A as je,a7 as De,G as Ct,n as pe,D as be,w as I,x as se,a1 as St,bc as Tt,y as Mt,H as y,r as q,Q as It,o as r,f as d,e as t,t as s,s as p,h as m,O as ge,ak as At,F as He,K as Fe,i as f,l as w,a as E,b as qe,R as Et}from"./index-ec24e299.js";import{S as Nt}from"./SupplyInputClean-30b62cf4.js";import{S as Bt,_ as Lt}from"./icon-dots-9d1c2e3f.js";import{a as Pt,c as Rt}from"./functions-b5bd9b3c.js";import{_ as Ut}from"./AddressInputClean.vue_vue_type_style_index_0_lang-97e6d1db.js";import{S as A,a as We}from"./swapUtils-0778d6cb.js";import{N as Vt}from"./namespaceUtils-dc05c193.js";import{_ as jt}from"./bsc-e621c678.js";import{_ as Dt}from"./address-ae442d6a.js";import{_ as Oe,B as ae,C as Qe}from"./icon-connected-ee5fed8f.js";import{_ as Ke}from"./metx-logo-27f23eae.js";import{_ as Ge}from"./icon-xpx-072deeab.js";import{p as Ht}from"./units-e271ba93.js";import"./icon-info-8b4f1351.js";import"./icon-red-x-a5511f99.js";import"./icon-green-tick-1b766454.js";import"./jspdf.es.min-c1592565.js";import"./qrcode-baef81f2.js";const Ft={name:"ViewServicesMainnetSwapBSCToSirius",components:{AddressInputClean:Ut,SupplyInputClean:Nt,SwapCertificateComponent:Bt},setup(){const l=i(0),{t:h}=_t(),e=S(()=>je.nativeToken.label),he=De(!1),U=i(!0),v=i(""),k=De(!0),ne=S(()=>Ct.buildAPIEndpoint(pe.selectedAPIEndpoint,pe.currentNetworkProfile.httpPort));be(v,n=>{n.length==40||n.length==46?O():k.value=!0});const W=async n=>await Vt.getLinkedAddress(n,ne.value),O=()=>{if(I.currentLoggedInWallet)try{let n=y.createAddress(v.value);y.checkAddressNetwork(n,je.networkType)?k.value=!1:k.value=!0}catch{try{let o=y.createNamespaceId(v.value);W(o).then(c=>{v.value=c.plain(),k.value=!1}).catch(c=>{k.value=!0})}catch{k.value=!0}}},le=S(()=>{if(!I.currentLoggedInWallet)return[];let n=I.currentLoggedInWallet.accounts.map(c=>({name:c.name,balance:c.balance,address:c.address,publicKey:c.publicKey,isMultisig:!!c.getDirectParentMultisig().length})),o=I.currentLoggedInWallet.others.filter(c=>c.type==="MULTISIG").map(c=>({name:c.name,balance:c.balance,address:c.address,publicKey:c.publicKey,isMultisig:!0}));return n.concat(o)}),u=S(()=>{if(!I.currentLoggedInWallet)return[];const n=I.currentLoggedInWallet;var o=[],c=[];return le.value.forEach(g=>{o.push({value:se.Address.createFromRawAddress(g.address).pretty(),label:g.name+" - "+h("general.ownerAcc")})}),n.contacts!=null&&n.contacts.forEach(g=>{o.push({value:se.Address.createFromRawAddress(g.address).pretty(),label:g.name+" - "+h("general.contact")})}),c=o.reduce((g,R)=>{let Ve=g.find(xt=>xt.value===R.value),yt={...R};return Ve?Ve.label=R.label:g.push(yt),g},[]),c});St(()=>{});let b=new Tt(pe.chainNetworkName);b.init();const N=i(0),B=i(0),T=i(0),we=i(""),oe=i(""),_=i(null),re=i([]),ze=async()=>{let n=await A.getSwapTokenList(b.swap_XPX_BSC_URL);n&&(re.value=n.map(o=>({name:o.name,assetId:o.assetId,contractAddress:o.contractAddress,namespace:o.namespace})),_.value=re.value[0])};let Xe=b.BSCNetworkName,Ye=b.BSCChainId;const ye=i(!1),Q=i(!1),M=i(null),L=i(0),ie=i(0),xe=i(""),de=i(!1),K=i(!1),V=i(!1),G=i(!1),z=i(h("swap.retry")),Ze=b.BSCScanUrl,ce=i(!1),Je=S(()=>K.value?h("swap.rejectMetamask"):h("swap.signTx"));ze();const $e=S(()=>_.value!=null?(console.log(A.getIncoming_BSCSwapTransfer_URL(b.swap_IN_SERVICE_URL,_.value.name)),A.getIncoming_BSCSwapTransfer_URL(b.swap_IN_SERVICE_URL,_.value.name)):"");be(_,n=>{A.fetchTokenServiceInfo(b.swap_IN_SERVICE_URL,n.name).then(async o=>{if(o.status==200){if(oe.value=o.data.bscInfo.scAddress,we.value=o.data.bscInfo.sinkAddress,D.value="",T.value=o.data.siriusInfo.divisibility,l.value=y.safeMultiply(321+o.data.feeInfo.cosigners*96,o.data.feeInfo.feePerByte),B.value=o.data.feeInfo.multiplier?y.safeMultiply(l.value,o.data.feeInfo.multiplier):l.value,n.name!==o.data.feeInfo.tokenName.toLowerCase()){let c=await Pt(A.checkSwapPrice(b.priceConsultURL)),g=y.safeMultiply(c[o.data.feeInfo.tokenName.toLowerCase()],l.value);B.value=y.safeDivideCeilDecimals(g,c[n.name],T.value)}N.value=y.safeMultiplyCeilDecimals(B.value,1.2,o.data.feeInfo.decimals)}else D.value=h("swap.serviceDown")})});let C,j;(()=>{typeof window.ethereum<"u"?(C=new ae(window.ethereum),j=C.getSigner(),ye.value=!0,Q.value=!!ethereum.isConnected(),ethereum.request({method:"eth_accounts"}).then(ke).catch(n=>{console.error(n)}),ethereum.request({method:"eth_chainId"}).then(n=>{_e(n,!1)}).catch(n=>{console.error(n)}),ethereum.on("accountsChanged",st),ethereum.on("chainChanged",n=>{_e(n,!0)})):console.log("MetaMask not installed")})(),window.ethereum&&(window.ethereum.isMetaMask||(U.value=!1));const et=()=>{window.location.reload()};function tt(){ethereum.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}).then(n=>{const o=n.find(c=>c.parentCapability==="eth_accounts");console.log(o),o&&console.log("eth_accounts permission successfully requested!")}).catch(n=>{n.code===4001?console.log("Permissions needed to continue."):console.error(n)})}function ke(n){n.length===0?(ie.value=0,M.value=""):n[0]!==M.value&&(M.value=n[0],ue()),Q.value=!!ethereum.isConnected()}function st(n){window.ethereum.isMetaMask&&(n.length===0?(ie.value=0,M.value=""):n[0]!==M.value&&(M.value=n[0],D.value="",ue())),Q.value=!!ethereum.isConnected()}function _e(n,o=!1){xe.value=n,Ye===parseInt(n)?(P.value="",o&&ue()):P.value=h("swap.selectNetworkToSwap",{network:Xe})}function ue(){ethereum.request({method:"eth_getBalance",params:[M.value,"latest"]}).then(n=>{ie.value=parseInt(n)/Math.pow(10,18)}).catch(n=>{console.error(n)})}const at=()=>{window.ethereum.isMetaMask?(U.value=!0,ethereum.request({method:"eth_requestAccounts"}).then(ke).catch(n=>{n.code===4001?console.log("Please connect to MetaMask."):n.code=="-32002"&&(D.value=h("swap.approveConnection"))})):U.value=!1};be([xe,M,oe],([n,o,c])=>{c!=null&&c!=""&&(async()=>{try{C=new ae(window.ethereum,"any");const R=await new Qe(c,We,C).balanceOf(o);L.value=nt(R.toString(),T.value)}catch{L.value=0}})()});const nt=(n,o)=>{const c=n.length;return c>o?+(n.substring(0,c-o)+"."+n.substring(c-o)):+("0."+n.padStart(o,"0"))},Ce=i(!1),Se=i(!1),Te=i(!1),Me=i(!1),Ie=i(!1),Ae=i(!1),Ee=i(!1),X=i(""),Y=i(""),Ne=i(""),Z=i(""),J=i(""),$=i(""),ee=i(""),lt=()=>{A.generateIncomingPdfCert("BSC",Z.value,v.value,J.value,$.value,ee.value)},ot=Mt(),rt=n=>{let o=document.getElementById(n).getAttribute("copyValue"),c=document.getElementById(n).getAttribute("copySubject");Rt(o),ot.add({severity:"info",summary:c+" "+h("general.copied"),detail:o,group:"br-custom",life:3e3})},me=i(1),it=i(!1),ve=i(!0),dt=S(()=>!(x.value<=L.value&&x.value>=N.value)),ct=i(!1),P=i(""),D=i(""),ut=S(()=>!(x.value>0&&k.value==!1&&!P.value&&L.value>=x.value&&x.value>=N.value)),x=i("0"),mt=S(()=>{let n=I.currentLoggedInWallet.accounts.find(o=>o.address==v.value)||I.currentLoggedInWallet.others.find(o=>o.address==v.value);return n?n.name:"ACCOUNT-"+v.value.substring(v.value.length-4,v.value.length)}),vt=S(()=>Math.round((x.value-B.value)*Math.pow(10,T.value))/Math.pow(10,T.value)>0?Math.round((x.value-B.value)*Math.pow(10,T.value))/Math.pow(10,T.value):0),ft=()=>{me.value=2,setTimeout(()=>Ce.value=!0,1e3),setTimeout(()=>{Se.value=!0,(async()=>await Be())()},2e3)},Be=async()=>{try{P.value="",de.value=!1,C=new ae(window.ethereum,"any"),j=await C.getSigner();const o=new Qe(oe.value,We,j);var n={gasLimit:(await A.getBSC_GasLimit(b.gasPriceConsultURL)).standardGasLimit};const g=await o.transfer(we.value,Ht(x.value,T.value),n);X.value=g.hash,Y.value=Ze+g.hash,(await C.getTransaction(g.hash)).hash===g.hash&&pt()}catch(o){de.value=!0,o.code=="-32000"&&(P.value=o.message)}},pt=()=>{Te.value=!0},fe=i(!1),te=i(!1),H=i(!1),bt=()=>{fe.value=!0,te.value=!0,H.value=!1,setTimeout(async()=>{await Le()},2e3)},Le=async()=>{const n=await gt();fe.value=!1,n?ce.value?(te.value=!1,H.value=!0):(H.value=!1,setTimeout(()=>Me.value=!0,1e3),setTimeout(()=>{Ie.value=!0,(async()=>await Re())()},2e3)):(te.value=!1,H.value=!0)},Pe=i(""),Re=async()=>{try{K.value=!1,C=new ae(window.ethereum,"any"),j=await C.getSigner();const n=await j.signMessage(se.Address.createFromRawAddress(v.value).pretty());Ne.value=n;const o={recipient:se.Address.createFromRawAddress(v.value).pretty(),signature:n,txnInfo:{network:"BSC",txnHash:X.value}};Pe.value=o,await Ue()}catch{K.value=!0}},gt=async()=>{try{let n=await C.getTransactionReceipt(X.value);return n&&n.status===1?!0:n&&n.status===0?(ce.value=!0,!0):!1}catch(n){return console.log(n),!1}},F=i(0),Ue=async()=>{Ae.value=!0,Ee.value=!0,z.value=h("swap.initiatingSwap"),G.value=!0;let n=JSON.stringify(Pe.value);try{const o=await fetch($e.value,{method:"POST",headers:{"Content-Type":"application/json"},body:n});if(o.status==200||o.status==201){const c=await o.json();V.value=!1,$.value=c.transactionId,Z.value=y.IsoTimeRemoveFormat(c.timestamp),J.value=y.toUppercase(_.value.name),ee.value=A.generateQRCode(Y.value),setTimeout(()=>ve.value=!1,1e3),F.value=0}else if(o.status==202){const c=await o.json();V.value=!1,$.value=c.transactionId,Z.value=y.IsoTimeRemoveFormat(c.timestamp),J.value=y.toUppercase(_.value.name),ee.value=A.generateQRCode(Y.value),setTimeout(()=>ve.value=!1,1e3),F.value=0}else o.status==208?console.log("208"):(V.value=!0,++F.value,z.value=h("swap.retry"),G.value=!1)}catch{V.value=!0,++F.value,z.value=h("swap.retry"),G.value=!1}},ht=()=>{me.value=3},wt=i(!1);return{checkTokenAmount:()=>_.value?x.value?x.value<=N.value?`Min. amount is ${N.value}(${B.value} ${_.value.name.toUpperCase()} will deducted for transaction fee)`:L.value<x.value?h("swap.insufficientTokenBalance"):"":"Required Field":"",recheckMetamask:et,contacts:u,err:P,balance:L,isInstallMetamask:ye,connectMetamask:at,isMetamaskConnected:Q,currentAccount:M,copy:rt,currentPage:me,isDisabledValidate:ve,siriusAddress:v,disableSiriusAddress:it,showAmountErr:dt,sendRequest:ft,validated:ht,amount:x,disableAmount:ct,isDisabledSwap:ut,savedCheck:wt,toggleContact:he,step1:Ce,step2:Se,step3:Te,step4:Me,step5:Ie,step6:Ae,step7:Ee,validationLink:Y,validationHash:X,messageHash:Ne,transactionHash:$,swapTimestamp:Z,swapToken:J,swapQr:ee,saveCertificate:lt,isInvalidConfirmedMeta:de,isInvalidSignedMeta:K,isInvalidSwapService:V,getValidation:Be,getSigned:Re,serviceErr:D,swapServerErrIndex:F,afterSigned:Ue,disableRetrySwap:G,retrySwapButtonText:z,signatureMessage:Je,checkTxnConfirmation:Le,triggerTxnConfirmation:bt,isCheckingTxnConfirmation:fe,isDisabledCheckTxnConfirmed:te,isTxnNotConfirmed:H,transactionFailed:ce,verifyMetaMaskPlugin:U,currentNativeTokenName:e,walletState:I,amountReceived:vt,Helper:y,siriusName:mt,minAmount:N,feeAmount:B,tokenDivisibility:T,tokenList:re,selectedToken:_,checkRecipient:O,showAddressError:k,changeMetamask:tt}}},qt={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},Wt={class:"mt-6 p-6 border filter shadow-lg text-center"},Ot={class:"text-md"},Qt={class:"text-xs my-3 mb-5 sm:mb-10"},Kt={class:"flex my-10"},Gt={class:"flex-none"},zt={class:"flex border border-gray-300 rounded-md filter shadow-md"},Xt={class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},Yt={class:"flex-none"},Zt={class:"flex border border-gray-300 rounded-md filter shadow-md"},Jt={class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},$t={class:"flex-none"},es={class:"flex border border-gray-300 rounded-md filter shadow-md"},ts={class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},ss={key:0},as=["value"],ns={class:"text-lg my-7 font-bold"},ls={key:0,class:"error error_box mb-5"},os={key:2,class:"bg-yellow-200 text-yellow-900 text-tsm p-3 mb-5 rounded-2xl"},rs={class:"my-2"},is={href:"https://bit.ly/3mVayCu",target:"_new",class:"text-blue-primary"},ds={key:3,class:"error error_box mb-5"},cs={key:4,class:"error error_box mb-5"},us={class:"mb-5"},ms={class:"md:flex md:justify-between border border-gray-200 rounded"},vs={class:"flex justify-left"},fs={class:"text-left flex items-center"},ps={class:"text-xxs uppercase text-blue-primary font-bold mb-1"},bs={class:"font-bold text-black text-tsm break-all mr-2"},gs={key:0,class:"border-l border-gray-200 text-green-500 font-semibold text-xxs w-16 lg:w-20 flex items-center justify-center uppercase"},hs={class:"border-l border-gray-200 text-blue-primary text-tsm font-bold w-16 lg:w-20 flex justify-center items-center"},ws={key:0},ys={key:1},xs={href:"https://metamask.io/",target:"_new"},ks={class:"md:hidden"},_s={key:0,class:"border-t border-gray-200 text-green-500 font-semibold text-xxs uppercase p-2"},Cs={class:"flex items-center justify-center"},Ss={class:"border-t border-gray-200 text-blue-primary text-tsm font-bold p-3"},Ts={key:0},Ms={key:1},Is={href:"https://metamask.io/",target:"_new"},As={class:"flex"},Es={class:"text-xxs text-blue-primary font-semibold uppercase"},Ns={key:5,class:"border"},Bs={class:"text-xxs text-left text-gray-300 font-semibold py-2 px-2 uppercase"},Ls=["onClick"],Ps={key:0,class:"text-xs py-2 bg-gray-100 pl-2 w-full text-left"},Rs={key:1,class:"text-xs py-2 pl-2 w-full text-left"},Us={key:2,class:"ml-auto pr-2 text-xxs py-2 font-semibold text-blue-primary bg-gray-100 uppercase"},Vs={key:3,class:"ml-auto mr-2 text-xxs py-2 font-semibold text-blue-primary uppercase"},js={class:"bg-blue-50 border border-blue-primary h-20 mt-5 rounded flex items-center justify-center"},Ds={key:0,src:Ke,class:"w-5 h-5 ml-4"},Hs={key:1,src:Ge,class:"w-5 h-5 ml-4"},Fs={class:"my-4 text-xs"},qs={class:"mt-10 text-center"},Ws=["disabled"],Os={key:1},Qs={class:"text-lg my-7"},Ks={key:0,class:"error error_box mb-5"},Gs={class:"flex border-b border-gray-300 p-3"},zs={class:"flex-none"},Xs={class:"flex h-full justify-center"},Ys={class:"flex border-b border-gray-300 p-3"},Zs={class:"flex-none"},Js={class:"flex h-full justify-center"},$s={key:0,class:"mt-5"},ea={class:"flex border-b border-gray-300 p-3"},ta={class:"flex-none"},sa={class:"flex h-full justify-center"},aa={key:0,class:"bg-yellow-100 py-2 px-5 mt-3 rounded flex"},na=["href","copyValue","copySubject"],la={class:"flex-none mr-3"},oa={class:"sm:flex"},ra=["disabled"],ia={key:1,class:"py-2 sm:flex-grow text-xs mt-3"},da={class:"mb-1"},ca={class:"mb-1"},ua={class:"mb-1"},ma={class:"mb-1"},va={class:"mb-1"},fa=["href"],pa={key:1,class:"text-tsm mt-2 bg-blue-100 px-4 py-2 rounded-xl inline-block text-blue-900"},ba={key:2,class:"text-tsm mt-2 bg-red-100 px-4 py-2 rounded-xl inline-block text-red-primary"},ga={class:"flex border-b border-gray-300 p-3"},ha={class:"flex-none"},wa={class:"flex h-full justify-center"},ya={class:"flex border-b border-gray-300 p-3"},xa={class:"flex-none"},ka={class:"flex h-full justify-center"},_a={key:0,class:"mt-5"},Ca={class:"flex border-b border-gray-300 p-3"},Sa={class:"flex-none"},Ta={class:"flex h-full justify-center"},Ma={key:0,class:"bg-yellow-100 py-2 px-5 mt-2 rounded flex"},Ia=["copyValue","copySubject"],Aa={class:"flex-none mr-3"},Ea={class:"flex border-b border-gray-300 p-3"},Na={class:"flex-none"},Ba={class:"flex h-full justify-center"},La={key:0,class:"mt-5"},Pa=["disabled"],Ra={key:1,class:"mt-5 text-tsm sm:text-sm"},Ua={href:"https://t.me/proximaxhelpdesk",target:"_new",class:"text-blue-primary font-bold underline"},Va={class:"mt-10 text-center"},ja=["disabled"],Da={key:2},Ha={class:"default-title font-bold mt-5 mb-2"},Fa={class:"text-tsm mb-7"},qa={class:"mt-3"},Wa=["href"],Oa={class:"md:mx-20 lg:mx-40 font-bold text-center text-tsm py-5 sm:py-10 mt-5 sm:mt-10 border-t border-gray-200"},Qa={class:"md:mx-20 lg:mx-10 xl:mx-40 border-2 border-gray-200 mt-4 p-5 text-xs font-bold filter shadow-lg"},Ka={class:"text-blue-primary mb-1"},Ga={class:"break-all"},za={class:"mt-1"},Xa={class:"text-blue-primary mb-1"},Ya={class:"mt-1"},Za={key:0,src:Ke,class:"w-3 h-3 ml-2 inline relative",style:{top:"-2px"}},Ja={key:1,src:Ge,class:"w-3 h-3 ml-2 inline relative",style:{top:"-2px"}},$a={class:"my-5 sm:my-7 text-gray-500 text-xs md:mx-20 lg:mx-10 xl:mx-40"},en={class:"inline-flex items-center mb-5"},tn={class:"ml-2 cursor-pointer text-xs font-bold"},sn={class:"sm:mt-3 text-center"},an=["disabled"];function nn(a,l,h,e,he,U){const v=q("font-awesome-icon"),k=q("SupplyInputClean"),ne=q("AddressInputClean"),W=q("router-link"),O=q("swap-certificate-component"),le=It("debounce");return r(),d("div",null,[t("div",qt,[t("div",Wt,[t("div",Ot,s(a.$t("swap.mainNetworkSwap")),1),t("div",Qt,[l[20]||(l[20]=t("img",{src:jt,class:"mr-2 h-5 inline-block"},null,-1)),p(s(a.$t("swap.swapBscToSirius")),1)]),t("div",Kt,[t("div",Gt,[t("div",zt,[t("div",{class:m(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage>=1?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:m(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=1?"text-white":"text-gray-400"}`])},"1",2)],2),t("div",Xt,s(a.$t("general.transaction")),1)])]),l[21]||(l[21]=t("div",{class:"flex-grow self-center md:mx-4 h-0.5 bg-gray-100"},null,-1)),t("div",Yt,[t("div",Zt,[t("div",{class:m(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage>=2?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:m(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=2?"text-white":"text-gray-400"}`])},"2",2)],2),t("div",Jt,s(a.$t("swap.validation")),1)])]),l[22]||(l[22]=t("div",{class:"flex-grow self-center md:mx-4 h-0.5 bg-gray-100"},null,-1)),t("div",$t,[t("div",es,[t("div",{class:m(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage==3?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:m(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=3?"text-white":"text-gray-400"}`])},"3",2)],2),t("div",ts,s(a.$t("general.certificate")),1)])])]),e.currentPage==1?(r(),d("div",ss,[l[28]||(l[28]=t("div",{class:"text-sm my-5 font-bold"},"Select Asset",-1)),ge(t("select",{class:"","onUpdate:modelValue":l[0]||(l[0]=u=>e.selectedToken=u)},[(r(!0),d(He,null,Fe(e.tokenList,(u,b)=>(r(),d("option",{value:u,key:b},s(u.name.toUpperCase()),9,as))),128))],512),[[At,e.selectedToken]]),t("div",ns,s(a.$t("general.transactionDetails")),1),e.isInstallMetamask?f("",!0):(r(),d("div",ls,s(a.$t("swap.noMetamask")),1)),e.isInstallMetamask?f("",!0):(r(),d("button",{key:1,onClick:l[1]||(l[1]=u=>e.recheckMetamask()),class:"text-xs blue-btn p-2 mb-3"},"Recheck MetaMask")),e.verifyMetaMaskPlugin?f("",!0):(r(),d("div",os,[p(s(a.$t("swap.noOtherExtension"))+" ",1),t("b",null,s(a.$t("swap.metamask")),1),l[23]||(l[23]=p(".")),t("div",rs,[p(s(a.$t("swap.referTo")),1),t("a",is,[p(s(a.$t("swap.walkthrough")),1),w(v,{icon:"external-link-alt",class:"text-blue-primary w-3 h-3 self-center inline-block ml-1"})]),p(s(a.$t("swap.forMoreDetails")),1)]),p(s(a.$t("swap.refreshMsg")),1)])),e.serviceErr!=""?(r(),d("div",ds,s(e.serviceErr),1)):f("",!0),e.err!=""?(r(),d("div",cs,s(e.err),1)):f("",!0),t("div",us,[t("div",ms,[t("div",vs,[l[24]||(l[24]=t("div",{class:"w-18 flex items-center justify-center py-5 sm:h-20"},[t("img",{src:Dt,class:"w-8 h-8 inline-block"})],-1)),t("div",fs,[t("div",null,[t("div",ps,s(a.$t("swap.fromMetamaskAddress")),1),t("div",bs,s(e.isMetamaskConnected&&e.currentAccount?e.currentAccount:a.$t("swap.notConnected")),1)])])]),t("div",{class:m(["md:grid hidden",e.currentAccount?"grid-cols-2":"grid-cols-1"])},[e.currentAccount?(r(),d("div",gs,[t("div",null,[l[25]||(l[25]=t("img",{src:Oe,class:"inline-block"},null,-1)),t("div",null,s(a.$t("swap.connected")),1)])])):f("",!0),t("div",hs,[e.isInstallMetamask?(r(),d("div",ws,[e.currentAccount?(r(),d("div",{key:1,class:"cursor-pointer",onClick:l[3]||(l[3]=u=>e.changeMetamask())},s(a.$t("general.change")),1)):(r(),d("div",{key:0,class:"cursor-pointer",onClick:l[2]||(l[2]=u=>e.connectMetamask())},s(a.$t("swap.connect")),1))])):(r(),d("div",ys,[t("a",xs,s(a.$t("general.download")),1)]))])],2),t("div",ks,[e.currentAccount?(r(),d("div",_s,[t("div",Cs,[l[26]||(l[26]=t("img",{src:Oe,class:"inline-block mr-2 w-4 h-4"},null,-1)),p(" "+s(a.$t("swap.connected")),1)])])):f("",!0),t("div",Ss,[e.isInstallMetamask?(r(),d("div",Ts,[e.currentAccount?(r(),d("div",{key:1,class:"cursor-pointer",onClick:l[5]||(l[5]=u=>e.changeMetamask())},s(a.$t("general.change")),1)):(r(),d("div",{key:0,class:"cursor-pointer",onClick:l[4]||(l[4]=u=>e.connectMetamask())},s(a.$t("swap.connect")),1))])):(r(),d("div",Ms,[t("a",Is,s(a.$t("general.download")),1)]))])])]),l[27]||(l[27]=t("div",{class:"mt-1 text-xs"},"Please connect your account and switch to it in MetaMask",-1))]),w(k,{disabled:e.disableAmount,modelValue:e.amount,"onUpdate:modelValue":l[6]||(l[6]=u=>e.amount=u),balance:e.balance,placeholder:`BEP20 ${e.selectedToken?e.selectedToken.name:""}`,type:"text",showError:e.showAmountErr,errorMessage:e.checkTokenAmount(),decimal:e.tokenDivisibility},null,8,["disabled","modelValue","balance","placeholder","showError","errorMessage","decimal"]),t("div",As,[ge(w(ne,{placeholder:a.$t("transfer.transferPlaceholder"),modelValue:e.siriusAddress,"onUpdate:modelValue":l[7]||(l[7]=u=>e.siriusAddress=u),showError:e.showAddressError},null,8,["placeholder","modelValue","showError"]),[[le,e.checkRecipient,"1000"]]),t("div",{onClick:l[8]||(l[8]=u=>e.toggleContact=!e.toggleContact),class:"border rounded-md cursor-pointer flex flex-col justify-around p-2"},[w(v,{icon:"id-card-alt",class:"text-blue-primary ml-auto mr-auto"}),t("div",Es,s(a.$t("general.select")),1)])]),e.toggleContact?(r(),d("div",Ns,[t("div",Bs,s(a.$t("general.importFromAB")),1),(r(!0),d(He,null,Fe(e.contacts,(u,b)=>(r(),d("div",{key:b,class:"cursor-pointer"},[t("div",{onClick:N=>{e.siriusAddress=u.value,e.toggleContact=!1},class:"flex justify-between"},[b%2==0?(r(),d("div",Ps,s(u.label),1)):f("",!0),b%2==1?(r(),d("div",Rs,s(u.label),1)):f("",!0),b%2==0?(r(),d("div",Us,s(a.$t("general.select")),1)):f("",!0),b%2==1?(r(),d("div",Vs,s(a.$t("general.select")),1)):f("",!0)],8,Ls)]))),128))])):f("",!0),t("div",js,[p(s(e.amountReceived)+" "+s(e.selectedToken?e.selectedToken.name.toUpperCase():"")+" ",1),e.selectedToken&&e.selectedToken.name=="metx"?(r(),d("img",Ds)):f("",!0),e.selectedToken&&e.selectedToken.name=="xpx"?(r(),d("img",Hs)):f("",!0)]),t("div",Fs,s(e.selectedToken&&e.selectedToken.name.toUpperCase()!==e.currentNativeTokenName?"Estimated":"")+" Total Amount of "+s(e.selectedToken?e.selectedToken.name.toUpperCase():"")+" received after deducting transaction fee",1),t("div",qs,[t("button",{onClick:l[9]||(l[9]=u=>a.$router.push({name:"ViewServicesMainnetSwap"})),class:"text-black font-bold text-xs mr-5 focus:outline-none disabled:opacity-50"},s(a.$t("general.cancel")),1),t("button",{type:"submit",class:"default-btn focus:outline-none disabled:opacity-50",disabled:e.isDisabledSwap,onClick:l[10]||(l[10]=u=>e.sendRequest())},s(a.$t("swap.sendRequest")),9,Ws)])])):f("",!0),e.currentPage==2?(r(),d("div",Os,[t("div",Qs,[e.err!=""?(r(),d("div",Ks,s(e.err),1)):f("",!0),t("div",{class:m(["font-bold text-left text-xs md:text-sm",e.step1?"text-gray-700":"text-gray-300"])},s(a.$t("swap.step1",{tokenName:e.selectedToken.name.toUpperCase()})),3),t("div",Gs,[t("div",zs,[t("div",{class:m(["rounded-full border w-6 h-6 transition-all duration-500",e.step1?"border-blue-primary":"border-gray-300"])},[t("div",Xs,[w(v,{icon:"check",class:m([e.step1?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block transition-all duration-500"])},null,8,["class"])])],2)]),t("div",{class:m(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step1?"text-gray-700":"text-gray-300"])},s(a.$t("swap.sendingTx")),3)]),t("div",Ys,[t("div",Zs,[t("div",{class:m(["rounded-full border w-6 h-6 transition-all duration-500",e.isInvalidConfirmedMeta?"border-red-primary":e.step2?"border-blue-primary":"border-gray-300"])},[t("div",Js,[e.isInvalidConfirmedMeta?(r(),E(v,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block transition-all duration-500"})):(r(),E(v,{key:1,icon:"check",class:m([e.step2?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block transition-all duration-500"])},null,8,["class"]))])],2)]),t("div",{class:m(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step2?"text-gray-700":"text-gray-300"])},[p(s(e.isInvalidConfirmedMeta?a.$t("swap.rejectMetamask"):a.$t("swap.waitingConfirmMetamask"))+" ",1),e.isInvalidConfirmedMeta?(r(),d("div",$s,[t("button",{type:"button",class:"bg-blue-primary rounded mr-5 focus:outline-none text-tsm font-bold py-2 border-blue-primary px-8 text-white hover:shadow-lg",onClick:l[11]||(l[11]=(...u)=>e.getValidation&&e.getValidation(...u))},s(a.$t("swap.retry")),1),w(W,{to:{name:"ViewServicesMainnetSwap"},class:"px-6 py-2 text-gray-500 outline-none focus:outline-none mr-4 w-32 text-tsm",tag:"button"},{default:qe(()=>[p(s(a.$t("swap.cancelSwap")),1)]),_:1})])):f("",!0)],2)]),t("div",ea,[t("div",ta,[t("div",{class:m(["rounded-full border w-6 h-6",e.step3?"border-blue-primary":"border-gray-300"])},[t("div",sa,[w(v,{icon:"check",class:m([e.step3?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"])])],2)]),t("div",{class:m(["text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step3?"text-gray-700":"text-gray-300"])},[p(s(a.$t("swap.transactionHash"))+": ",1),e.validationHash?(r(),d("div",aa,[t("a",{href:e.validationLink,target:"_new",class:m([e.isInvalidConfirmedMeta?"text-gray-300":"text-blue-primary","flex-grow break-all text-tsm self-center hover:underline"]),id:"validateTransfer",copyValue:e.validationHash,copySubject:a.$t("swap.transactionHash")},[w(v,{icon:"external-link-alt",class:"text-blue-primary w-3 h-3 self-center inline-block mr-2"}),p(s(e.validationHash),1)],10,na),t("div",la,[e.step3?(r(),E(v,{key:0,icon:"copy",onClick:l[12]||(l[12]=u=>e.copy("validateTransfer")),class:"w-5 h-5 text-blue-primary cursor-pointer self-center mx-3 absolute top-2 hover:opacity-90 duration-800 transition-all"})):f("",!0)])])):f("",!0),t("div",oa,[e.validationHash?(r(),d("button",{key:0,class:"sm:flex-none justify-start sm:justify-end bg-blue-primary h-15 w-60 rounded mr-5 focus:outline-none text-xs font-bold py-2 border border-blue-primary px-8 text-white hover:shadow-lg mt-3 sm:mt-0 disabled:opacity-50 self-center",type:"button",disabled:e.isDisabledCheckTxnConfirmed||e.transactionFailed,onClick:l[13]||(l[13]=(...u)=>e.triggerTxnConfirmation&&e.triggerTxnConfirmation(...u))},s(e.isCheckingTxnConfirmation?a.$t("swap.checkTransaction"):a.$t("swap.checkingTransaction")),9,ra)):f("",!0),e.validationHash?(r(),d("div",ia,[t("div",da,s(a.$t("swap.validationWarning")),1),t("div",ca,[t("b",null,s(a.$t("swap.validationWarning2")),1)]),t("div",ua,s(a.$t("swap.validationWarning3")),1),t("div",ma,[t("b",null,s(a.$t("swap.validationWarning4")),1),p(" "+s(a.$t("swap.validationWarning5")),1)]),t("div",va,[p(s(a.$t("swap.validationWarning6"))+" ",1),t("a",{href:e.validationLink,target:"_new",class:"text-blue-primary inline-block hover:text-blue-900 hover:underline"},[p(s(a.$t("swap.bscScan")),1),w(v,{icon:"external-link-alt",class:"ml-1 text-blue-primary w-3 h-3 self-center inline-block"})],8,fa),l[29]||(l[29]=p("."))])])):f("",!0)]),e.isTxnNotConfirmed&&!e.transactionFailed?(r(),d("div",pa,s(a.$t("swap.notConfirmed")),1)):f("",!0),e.transactionFailed?(r(),d("div",ba,s(a.$t("swap.txFailed")),1)):f("",!0)],2)]),t("div",{class:m(["font-bold text-left text-xs md:text-sm mt-4",e.step4?"text-gray-700":"text-gray-300"])},s(a.$t("swap.step2")),3),t("div",ga,[t("div",ha,[t("div",{class:m(["rounded-full border w-6 h-6",e.step4?"border-blue-primary":"border-gray-300"])},[t("div",wa,[w(v,{icon:"check",class:m([e.step4?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"])])],2)]),t("div",{class:m(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step4?"text-gray-700":"text-gray-300"])},s(a.$t("swap.sendingMsg")),3)]),t("div",ya,[t("div",xa,[t("div",{class:m(["rounded-full border w-6 h-6",e.isInvalidSignedMeta?"border-red-primary":e.step5?"border-blue-primary":"border-gray-300"])},[t("div",ka,[e.isInvalidSignedMeta?(r(),E(v,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block"})):(r(),E(v,{key:1,icon:"check",class:m([e.step5?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"]))])],2)]),t("div",{class:m(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step5?"text-gray-700":"text-gray-300"])},[p(s(e.signatureMessage)+" ",1),e.isInvalidSignedMeta?(r(),d("div",_a,[t("button",{type:"button",class:"bg-blue-primary rounded mr-5 focus:outline-none text-tsm py-2 px-4 text-white hover:shadow-lg w-24",onClick:l[14]||(l[14]=(...u)=>e.getSigned&&e.getSigned(...u))},s(a.$t("swap.retry")),1)])):f("",!0)],2)]),t("div",Ca,[t("div",Sa,[t("div",{class:m(["rounded-full border w-6 h-6",e.step6?"border-blue-primary":"border-gray-300"])},[t("div",Ta,[w(v,{icon:"check",class:m([e.step6?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"])])],2)]),t("div",{class:m(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step6?"text-gray-700":"text-gray-300"])},[p(s(a.$t("swap.messageSigned")),1),e.messageHash&&e.step6?(r(),d("div",Ma,[t("div",{class:m([e.step6?"text-gray-500":"text-gray-300","text-tsm break-all flex-grow"]),id:"validateMessage",copyValue:e.messageHash,copySubject:a.$t("swap.signatureHash")},s(e.messageHash),11,Ia),t("div",Aa,[e.step6?(r(),E(v,{key:0,icon:"copy",onClick:l[15]||(l[15]=u=>e.copy("validateMessage")),class:"w-5 h-5 text-blue-primary cursor-pointer self-center ml-3 absolute top-2 hover:opacity-90 duration-800 transition-all"})):f("",!0)])])):f("",!0)],2)]),t("div",{class:m(["font-bold text-left text-xs md:text-sm mt-4",e.step7?"text-gray-700":"text-gray-300"])},s(a.$t("swap.step3")),3),t("div",Ea,[t("div",Na,[t("div",{class:m(["rounded-full border w-6 h-6",e.isInvalidSwapService?"border-red-primary":e.step7?"border-blue-primary":"border-gray-300"])},[t("div",Ba,[e.isInvalidSwapService?(r(),E(v,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block"})):(r(),E(v,{key:1,icon:"check",class:m([e.step7?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"]))])],2)]),t("div",{class:m(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step7?"text-gray-700":"text-gray-300"])},[p(s(e.isInvalidSwapService?a.$t("swap.sendMsgFail"):a.$t("swap.messageSent"))+" ",1),e.isInvalidSwapService&&e.swapServerErrIndex<=3?(r(),d("div",La,[t("button",{type:"button",class:"bg-blue-primary rounded mr-5 focus:outline-none text-tmd py-2 px-4 text-white hover:shadow-lg disabled:opacity-50",onClick:l[16]||(l[16]=(...u)=>e.afterSigned&&e.afterSigned(...u)),disabled:e.disableRetrySwap},s(e.retrySwapButtonText),9,Pa)])):f("",!0),e.swapServerErrIndex>3?(r(),d("div",Ra,[p(s(a.$t("swap.serverErrMsg1"))+" ",1),t("b",null,s(a.$t("swap.transactionHash")),1),l[30]||(l[30]=p(", ")),t("b",null,s(a.$t("swap.signature")),1),p(" "+s(a.$t("swap.serverErrMsg2"))+" ",1),t("a",Ua,s(a.$t("home.helpdesk")),1),l[31]||(l[31]=p(". "))])):f("",!0)],2)])]),t("div",Va,[t("button",{type:"submit",class:"default-btn focus:outline-none disabled:opacity-50",disabled:e.isDisabledValidate,onClick:l[17]||(l[17]=u=>e.validated())},s(a.$t("general.continue")),9,ja)])])):f("",!0),e.currentPage==3?(r(),d("div",Da,[t("div",null,[t("h1",Ha,s(a.$t("general.congratz")),1),t("div",Fa,s(a.$t("swap.swapStarted")),1),w(O,{networkTerm:a.$t("swap.bsc"),swapType:"In",swapToken:e.swapToken,swapTimestamp:e.swapTimestamp,transactionHash:e.transactionHash,siriusName:e.siriusName,swappedAmount:e.amount,siriusAddress:e.Helper.createAddress(e.siriusAddress).pretty(),swapQr:e.swapQr,swapLink:e.validationLink},null,8,["networkTerm","swapToken","swapTimestamp","transactionHash","siriusName","swappedAmount","siriusAddress","swapQr","swapLink"]),t("button",{type:"button",class:"w-40 hover:shadow-lg bg-blue-primary text-white text-xs hover:opacity-50 rounded font-bold px-4 py-3 border border-blue-primary outline-none mr-4 mt-6",onClick:l[18]||(l[18]=(...u)=>e.saveCertificate&&e.saveCertificate(...u))},s(a.$t("general.certificate")),1),t("div",qa,[t("a",{href:e.validationLink,target:"_new",class:"underline self-center text-xs font-bold text-blue-primary"},[p(s(a.$t("swap.viewTxInExplorer")),1),w(v,{icon:"external-link-alt",class:"ml-2 text-blue-500 w-3 h-3 self-center inline-block"})],8,Wa)]),t("div",Oa,s(a.$t("swap.swapDetails")),1),t("div",Qa,[t("div",Ka,s(a.$t("general.from"))+": "+s(a.$t("swap.metamaskAcc")),1),t("div",Ga,s(e.currentAccount),1),t("div",za,s(a.$t("swap.swapAmount"))+": "+s(e.amount)+" BEP20 "+s(e.selectedToken.name.toUpperCase()),1),l[32]||(l[32]=t("div",null,[t("img",{src:Lt,class:"inline-block h-8 my-2"})],-1)),t("div",Xa,s(a.$t("general.to"))+": "+s(e.siriusName),1),t("div",null,s(e.Helper.createAddress(e.siriusAddress).pretty()),1),t("div",Ya,[p(s(a.$t("swap.equivalentTo"))+" "+s(e.amountReceived)+" "+s(e.selectedToken.name.toUpperCase())+" ",1),e.selectedToken.name=="metx"?(r(),d("img",Za)):e.selectedToken.name=="xpx"?(r(),d("img",Ja)):f("",!0)])]),t("div",$a,s(a.$t("swap.swapMsg2")),1),t("label",en,[ge(t("input",{type:"checkbox",class:"h-5 w-5 bg-blue-primary","onUpdate:modelValue":l[19]||(l[19]=u=>e.savedCheck=u)},null,512),[[Et,e.savedCheck]]),t("span",tn,s(a.$t("swap.confirmDownloaded")),1)]),t("div",sn,[w(W,{to:{name:"ViewServicesMainnetSwap"}},{default:qe(()=>[t("button",{type:"submit",class:"default-btn mr-5 focus:outline-none w-40 inline-block disabled:opacity-50",disabled:!e.savedCheck},s(a.$t("general.done")),9,an)]),_:1})])])])):f("",!0)])])])}const Tn=kt(Ft,[["render",nn]]);export{Tn as default};
