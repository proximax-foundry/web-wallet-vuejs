import{d as le,L as Be,g as k,c as S,r as ee,o as I,f as $,l as F,b as O,e as s,t as M,i as B,v as ie,x as l,A as r,D as q,h as be,_ as he,s as xe,F as ve,M as Ue,u as Le,O as ue,P as Ke,W as te,w as R,n as X,B as G,T as Re,E as we,j as De,H as D,y as qe,k as Oe,Q as We,K as ze,a as fe,R as je}from"./index-aa0744c5.js";import{_ as He}from"./SelectInputAccount.vue_vue_type_script_setup_true_lang-55946ca2.js";import{_ as Ze}from"./SelectInputMultisigAccount.vue_vue_type_script_setup_true_lang-01166af2.js";import{_ as Xe}from"./MultisigInput.vue_vue_type_script_setup_true_lang-a1235a66.js";import{T as Ge}from"./TransactionLayout-9e9b336b.js";import{_ as Qe}from"./SelectAccountAndContact.vue_vue_type_style_index_0_lang-8de0294e.js";import{_ as Je}from"./proximax-logo-ecfc3767.js";import{_ as Ye}from"./PasswordInput.vue_vue_type_script_setup_true_lang-f3bc4e31.js";import{_ as et}from"./icon-red-x-a5511f99.js";import{_ as tt}from"./icon-green-tick-1b766454.js";import{_ as at}from"./TxnSummary.vue_vue_type_script_setup_true_lang-4dd9569b.js";import{T as de}from"./transactionState-8ad9374f.js";import"./jdenticon-module-cb5aedf5.js";import"./TransactionFeeLayout.vue_vue_type_script_setup_true_lang-fe55d3fa.js";const lt={key:0},st={class:"flex justify-between"},nt={class:"flex flex-col ml-2 text-left"},ot={class:"mt-1 text-tsm font-bold"},rt={class:"mt-1 text-tsm font-bold"},it={class:"account-item"},ut={class:"flex justify-between"},ct={class:"mt-1 text-tsm font-bold"},dt={class:"mt-1 text-tsm font-bold"},mt=le({__name:"SelectInputAsset",props:{index:{type:Number,required:!0},assetOptions:{type:Object,required:!0},selectedAssets:{type:Object,required:!1}},emits:["select-asset","update:modelValue"],setup(i){const p=i,c=[{namespace:"prx.xpx",name:"XPX"},{namespace:"prx.metx",name:"METX"},{namespace:"xarcade.xar",name:"XAR"}],d=y=>{const g=c.find(t=>t.namespace==y);return g?g.name:y},{assetOptions:o,selectedAssets:f,index:v}=Be(p),w=k(!1),L=S(()=>{const y=new Set(f.value.map(g=>g.id));return o.value.filter(g=>!y.has(g.id))}),V=async y=>{if(w.value)return;w.value=!0;const{first:g,last:t}=y,n=[];for(let h=g;h<t;h++)o.value[h].hasUpdated||n.push(new l.MosaicId(o.value[h].id));if(!n.length){w.value=!1;return}const u=await r.chainAPI.assetAPI.getMosaicsNames(n),b=await r.chainAPI.assetAPI.getMosaics(n);let x=0,P=0;const E=new Map;u.forEach((h,m)=>{E.set(h.mosaicId.toHex(),m)}),b.sort((h,m)=>{const U=E.get(h.mosaicId.toHex()),W=E.get(m.mosaicId.toHex());return U-W});for(let h=g;h<t;h++){if(!u[x])continue;const m=o.value.find(U=>U.id==u[x].mosaicId.toHex());m&&(m.namespace=u[x].names.length?u[x].names[0].name:"",m.balance=m.balance/Math.pow(10,b[P].divisibility),m.divisibility=b[P].divisibility,m.hasUpdated=!0,x++,P++)}w.value=!1},T=y=>{if(y==null){f.value.splice(v.value,1);return}f.value[v.value].balance=y.balance,f.value[v.value].id=y.id,f.value[v.value].namespace=y.namespace,f.value[v.value].divisibility=y.divisibility,f.value[v.value].amount="0"};return(y,g)=>{const t=ee("Dropdown");return I(),$("div",null,[F(t,{showClear:!0,modelValue:ie(f)[ie(v)],"onUpdate:modelValue":g[0]||(g[0]=n=>ie(f)[ie(v)]=n),style:{width:"100%"},options:L.value,filter:!0,filterFields:["id","namespace"],emptyFilterMessage:" ",placeholder:"Select Asset",virtualScrollerOptions:{lazy:!0,onLazyLoad:V,showLoader:!0,loading:w.value,delay:0,itemSize:38},onChange:g[1]||(g[1]=n=>{var u;T(n.value),y.$emit("update:modelValue",(u=n.value)==null?void 0:u.value)})},{value:O(n=>[n.value.id?(I(),$("div",lt,[s("div",st,[s("div",nt,[g[2]||(g[2]=s("div",{class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}}," Selected Asset",-1)),s("div",ot,M(d(n.value.namespace==""?n.value.id:n.value.namespace)),1)]),s("div",rt,"Balance: "+M(n.value.balance),1)])])):B("",!0)]),option:O(n=>[s("div",it,[s("div",ut,[s("div",ct,M(d(n.option.namespace==""?n.option.id:n.option.namespace)),1),s("div",dt,"Balance: "+M(n.option.balance),1)])])]),_:1},8,["modelValue","options","virtualScrollerOptions"])])}}}),vt={class:"border border-gray-200 px-2 py-1 rounded-md"},pt={class:"flex justify-between"},ft={class:"flex flex-col"},gt={class:"uppercase font-light text-gray-500 text-txs text-left mb-2"},yt={class:"flex w-full"},bt={key:0,src:Je,class:"h-5 w-5 mt-0.5"},ht=["value","placeholder","maxlength"],xt=["disabled"],me=16,wt=le({__name:"TransferInputClean",props:{modelValue:{type:String,required:!0},decimal:{type:Number,required:!0},placeholder:{type:String,required:!0},toolTip:{type:String,required:!1},disabled:{type:Boolean,required:!1},showError:{type:Boolean,required:!1},logo:{type:Boolean,required:!1},balance:{type:Number,required:!1}},emits:["update:modelValue","show-error","clickedMaxAvailable"],setup(i,{emit:p}){const c=i,d=p,o=k(c.modelValue),f=k(0),v=k(!1),w=k(!1),L=(t,n)=>{const u=t.key;return u>="0"&&u<="9"||u==="."||u==="Backspace"||u==="Delete"||u==="ArrowLeft"||u==="ArrowRight"?(u==="."&&n.includes(".")&&t.preventDefault(),!0):(t.preventDefault(),!1)},V=t=>t.split(",").length-1,T=t=>{t.includes(".")?(t.includes(".0")&&(w.value=!0),v.value=!0):(v.value=!1,w.value=!1),isNaN(parseFloat(t))?o.value="0":o.value=t},y=S(()=>{let t=Intl.NumberFormat("en-US",{maximumFractionDigits:f.value}).format(parseFloat(o.value));return v.value&&!t.includes(".")&&(t=t+"."),w.value&&o.value!==t&&(t=t+"0"),t}),g=S(()=>{let t=0;return y.value.includes(",")&&(t=t+V(y.value)),v.value&&(t=t+1),me+t});return q(o,(t,n)=>{if(t.includes(".")){const[u,b]=t.split(".");f.value=me-u.length,b&&b.length>f.value&&(o.value=n)}else t.length>me&&(o.value=n);d("update:modelValue",parseFloat(o.value).toString())}),q(()=>c.modelValue,(t,n)=>{t!==n&&T(t)}),(t,n)=>(I(),$("div",{class:be(i.disabled?"opacity-50":"")},[s("div",vt,[s("div",pt,[s("div",ft,[s("div",gt,M(i.placeholder),1),s("div",yt,[i.logo?(I(),$("img",bt)):B("",!0),s("input",{value:y.value,class:"supply_input",placeholder:i.placeholder,maxlength:g.value,onInput:n[0]||(n[0]=u=>T(u.target.value.replace(/,/g,""))),onKeypress:n[1]||(n[1]=u=>L(u,u.target.value))},null,40,ht)])]),i.logo?(I(),$("button",{key:0,disabled:i.disabled==!0,class:"w-24 cursor-pointer focus:outline-none text-blue-primary text-xs font-bold",onClick:n[2]||(n[2]=u=>t.$emit("clickedMaxAvailable",!0))},M(t.$t("swap.maxAmount")),9,xt)):B("",!0)])])],2))}});const ge=he(wt,[["__scopeId","data-v-08db0b78"]]),_t={class:"rounded-md bg-white flex border mt-3"},At=["value","placeholder"],kt={class:"text-gray-800"},It=le({__name:"TextAreaInput",props:{modelValue:{type:String,required:!1},currentBytes:{type:Number,required:!0},limit:{type:Number,required:!0},placeholder:{type:String,required:!0}},emits:["update:modelValue"],setup(i){return(p,c)=>(I(),$(ve,null,[s("div",_t,[s("textarea",{value:i.modelValue,onInput:c[0]||(c[0]=d=>p.$emit("update:modelValue",d.target.value)),rows:"2",class:"w-full text-gray-500 px-2 py-1 outline-none bg-white text-xs",placeholder:i.placeholder.toUpperCase()},null,40,At),c[1]||(c[1]=s("div",{class:"w-1 flex-none"},null,-1))]),s("div",{class:be(["float-right mt-1 text-tsm",i.currentBytes>i.limit?"text-red-500":"text-gray-800"])},[xe(M(i.currentBytes)+" ",1),s("span",kt,"/"+M(i.limit),1)],2)],64))}}),Mt={class:"border border-gray-200 px-2 py-2 rounded-md w-full"},Tt={class:"flex gap-2"},$t={class:"flex flex-col w-full"},Pt={class:"uppercase text-gray-500 font-light text-xxs text-left"},Ft={key:0,class:"flex flex-col ml-auto justify-center mt-1"},Vt={class:"text-xxs text-red-400 font-bold uppercase"},Ct={key:1,class:"flex flex-col ml-auto justify-center mt-1"},Nt={class:"text-xxs text-green-400 font-bold uppercase"},ye=le({__name:"FieldValidationInput",props:Ue({placeholder:{},showError:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const p=Le(i,"modelValue");return(c,d)=>(I(),$("div",Mt,[s("div",Tt,[s("div",$t,[s("div",Pt,M(c.placeholder),1),ue(s("input",{type:"text","onUpdate:modelValue":d[0]||(d[0]=o=>p.value=o),class:"w-full font-semibold text-tsm outline-none mt-1"},null,512),[[Ke,p.value]])]),c.showError&&p.value.length!=0?(I(),$("div",Ft,[d[1]||(d[1]=s("img",{src:et,class:"h-5 w-5 mr-auto ml-auto"},null,-1)),s("div",Vt,M(c.$t("general.invalid")),1)])):c.showError?B("",!0):(I(),$("div",Ct,[d[2]||(d[2]=s("img",{src:tt,class:"h-5 w-5 mr-auto ml-auto"},null,-1)),s("div",Nt,M(c.$t("general.valid")),1)]))])]))}});const _e="0".repeat(64),Ae=l.PublicAccount.createFromPublicKey(_e,r.networkType).address.plain(),ke=(i,p)=>{let c=[];return parseInt(i)>0&&c.push(new l.Mosaic(new l.MosaicId(r.nativeToken.assetId),l.UInt64.fromUint(Number(i)))),p.length>0&&p.forEach(d=>{parseInt(d.amount)>0&&c.push(new l.Mosaic(new l.MosaicId(d.id),l.UInt64.fromUint(Number(d.amount))))}),c};class ae{}ae.createTransaction=async(i,p,c,d,o,f,v,w,L)=>{if(!te.verifyWalletPassword(R.currentLoggedInWallet.name,X.chainNetworkName,o))return!1;const T=X.currentNetworkProfile.generationHash;let y=r.networkType,g=parseFloat(p)*Math.pow(10,r.nativeToken.divisibility),t=[];g>0&&t.push(new l.Mosaic(new l.MosaicId(r.nativeToken.assetId),l.UInt64.fromUint(Number(g)))),d.length>0&&d.forEach(m=>{m.amount>0&&t.push(new l.Mosaic(new l.MosaicId(m.id),l.UInt64.fromUint(Number(m.amount*Math.pow(10,m.divisibility)))))});let n=r.buildTxn,u,b;if(!v)u=R.currentLoggedInWallet.accounts.find(m=>m.address===f);else{u=R.currentLoggedInWallet.accounts.find(U=>U.address===f);const m=await r.chainAPI.accountAPI.getAccountInfo(l.Address.createFromRawAddress(v));b=l.PublicAccount.createFromPublicKey(m.publicKey,y)}let x=te.decryptPrivateKey(new l.Password(o),u.encrypted,u.iv),P;if(w&&c.length>0)try{const m=await r.chainAPI.accountAPI.getAccountInfo(l.Address.createFromRawAddress(i));P=l.EncryptedMessage.create(c,m.publicAccount,x)}catch{P=l.EncryptedMessage.create(c,l.PublicAccount.createFromPublicKey(L,r.networkType),x)}else P=l.PlainMessage.create(c);let E=n.transferBuilder().recipient(l.Address.createFromRawAddress(i)).mosaics(t).message(P).build();const h=l.Account.createFromPrivateKey(x,y,1);if(v){let m=R.currentLoggedInWallet.accounts.find(J=>J.address==f),U=te.decryptPrivateKey(new l.Password(o),m.encrypted,m.iv),W=l.Account.createFromPrivateKey(U,y,1);const se=[E.toAggregateV1(b)],z=await r.chainAPI.nodeAPI.getNodeTime(),ne=n.aggregateBonded(se,new l.UInt64(z.sendTimeStamp)),j=W.preV2Sign(ne,T),Q=G.lockFundTx(j),oe=W.preV2Sign(Q,T);G.announceLF_AND_addAutoAnnounceABT(oe,j)}else{const m=h.preV2Sign(E,T);G.announceTransaction(m)}return!0};ae.calculateAggregateFee=(i,p,c,d)=>{let o=r.buildTxn,f=ke(p,c),w=[o.transferBuilder().recipient(l.Address.createFromRawAddress(Ae)).mosaics(f).message(d&&i.length>0?l.EncryptedMessage.create(i,l.PublicAccount.createFromPublicKey("0".repeat(64),r.networkType),"0".repeat(64)):l.PlainMessage.create(i)).build().toAggregateV1(l.PublicAccount.createFromPublicKey(_e,r.networkType))];return o.aggregateBondedBuilder().innerTransactions(w).build().maxFee.compact()/Math.pow(10,r.nativeToken.divisibility)};ae.calculateFee=(i,p,c,d)=>{let o=r.buildTxn,f=ke(p,c);return o.transferBuilder().recipient(l.Address.createFromRawAddress(Ae)).mosaics(f).message(d&&i.length>0?l.EncryptedMessage.create(i,l.PublicAccount.createFromPublicKey("0".repeat(64),r.networkType),"0".repeat(64)):l.PlainMessage.create(i)).build().maxFee.compact()/Math.pow(10,r.nativeToken.divisibility)};const St={name:"ConfirmSendModal",props:["toggleModal"],setup(){const p=we().appContext.config.globalProperties.emitter;return{closeConfirmModal:()=>{p.emit("CLOSE_CONFIRM_SEND_MODAL",!1)},proceedSend:()=>{p.emit("CONFIRM_PROCEED_SEND",!0)}}}},Et={key:0,class:"popup-outer fixed flex z-50"},Bt={class:"modal-popup-box"},Ut={class:"delete-position"},Lt={class:"w-92"},Kt={class:"text-center"},Rt={class:"mt-3"};function Dt(i,p,c,d,o,f){const v=ee("font-awesome-icon");return I(),$("div",null,[F(Re,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:O(()=>[c.toggleModal?(I(),$("div",Et,[s("div",Bt,[s("div",Ut,[F(v,{icon:"times",class:"delete-icon-style",onClick:p[0]||(p[0]=w=>{d.closeConfirmModal()})})]),s("div",Lt,[s("div",Kt,M(i.$t("transfer.proceedWithZero")),1),s("div",Rt,[s("div",{onClick:p[1]||(p[1]=w=>d.proceedSend()),class:"blue-btn py-2 font-semibold cursor-pointer text-center ml-auto mr-auto w-7/12"},M(i.$t("general.confirm")),1),s("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:p[2]||(p[2]=w=>d.closeConfirmModal())},M(i.$t("general.cancel")),1)])])])])):B("",!0)]),_:1}),c.toggleModal?(I(),$("div",{key:0,onClick:p[3]||(p[3]=w=>{d.closeConfirmModal()}),class:"fixed inset-0 bg-opacity-90 bg-gray-100 z-20"})):B("",!0)])}const qt=he(St,[["render",Dt]]),Ot={key:0,class:"mb-3 rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},Wt={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},zt={class:"inline-block text-xs"},jt={class:"text-sm font-semibold"},Ht={class:"flex gap-1 mt-3 items-center"},Zt={key:1,class:"mt-3"},Xt={class:"flex mt-1 gap-1"},Gt={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},Qt={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},Jt={key:3,class:"h-3"},Yt={key:4,class:"mb-5"},ea={for:"encryptedMsg",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},ta={key:5},aa={class:"text-xs font-semibold my-3"},la=["disabled"],sa={class:"text-center"},na="^[0-9A-Za-z]{40}$",oa="^[0-9A-Za-z-]{46}$",ra="^[^ ]{8,}$",_a=le({__name:"ViewTransfer",setup(i){const p=we(),{t:c}=De(),d=p.appContext.config.globalProperties.emitter,o=k(null),f=k(null),v=k(null),w=k(!1),L=k(!1),V=k(""),T=k(!1),y=k(!1),g=k(""),t=k(!0),n=k(!0),u=k([]),b=k([]),x=k("0"),P=k(0),E=k(""),h=k(""),m=k(0),U=S(()=>{let e=!0;return T.value?g.value.match(ra)?e=!0:e=!1:e=!0,!(e&&!t.value&&!se.value&&z.value<=ne.value&&W.value)}),W=S(()=>!(y.value&&T.value&&z.value>0&&n.value));q(b,e=>{for(let a=0;a<e.length;a++)isNaN(parseFloat(e[a].amount))&&(e[a].amount="0")},{deep:!0}),q(x,e=>{isNaN(parseFloat(e))&&(x.value="0")});const se=S(()=>v.value?o.value?parseFloat(x.value)>P.value||!b.value.every(e=>parseFloat(e.amount)<=e.balance)?!0:J.value>m.value:J.value>P.value||!b.value.every(e=>parseFloat(e.amount)<=e.balance):!1),z=S(()=>h.value.length==0?0:T.value?G.getFakeEncryptedMessageSize(h.value):G.getPlainMessageSize(h.value)),ne=S(()=>{var e;return((e=X)==null?void 0:e.currentNetworkProfileConfig.maxMessageSize)-1}),j=S(()=>{var e;return D.convertToExact((e=X)==null?void 0:e.currentNetworkProfileConfig.lockedFundsPerAggregate,r.nativeToken.divisibility)}),Q=S(()=>X.currentNetworkProfile?D.convertToExact(G.getLockFundFee(),r.nativeToken.divisibility):0),oe=S(()=>{if(!v.value)return 0;let e=r.nativeToken.divisibility;return o.value?D.convertNumberMinimumFormat(P.value,e):D.convertNumberMinimumFormat(P.value-H.value,e)}),J=S(()=>{let e=r.nativeToken.divisibility;return o.value?e==0?Math.trunc(H.value+Q.value+j.value):Math.round((H.value+Q.value+j.value)*Math.pow(10,e))/Math.pow(10,e):e==0?Math.trunc(parseFloat(x.value.replace(/,/g,""))+H.value):Math.round((parseFloat(x.value.replace(/,/g,""))+H.value)*Math.pow(10,e))/Math.pow(10,e)}),H=S(()=>{const e=b.value.map(a=>({id:a.id,amount:a.amount}));return e.push({id:r.nativeToken.assetId,amount:x.value}),o.value?ae.calculateAggregateFee(h.value,x.value,e,T.value):v.value?ae.calculateFee(h.value,x.value,e,T.value):0}),Ie=()=>{x.value=oe.value.toString(),x.value=oe.value.toString()},Me=()=>{v.value=null,g.value="",V.value="",T.value=!1,h.value="",x.value="0",d.emit("CLEAR_SELECT",0),b.value=[],o.value=null,E.value=""},Te=qe(),$e=Oe(),Pe=()=>T.value?te.verifyWalletPassword(R.currentLoggedInWallet.name,X.chainNetworkName,g.value)?!0:(Te.add({severity:"error",summary:"Error",detail:"Password is incorrect",group:"br-custom",life:1e3}),!1):!0,Fe=async()=>{if(Pe()){let a=parseFloat(x.value)*Math.pow(10,r.nativeToken.divisibility),_=[],C=b.value.map(N=>({id:N.id,amount:parseFloat(N.amount),divisibility:N.divisibility}));a>0&&_.push(new l.Mosaic(new l.MosaicId(r.nativeToken.assetId),l.UInt64.fromUint(Number(a)))),C.length>0&&C.forEach(N=>{N.amount>0&&_.push(new l.Mosaic(new l.MosaicId(N.id),l.UInt64.fromUint(Number(N.amount*Math.pow(10,N.divisibility)))))});let Z=r.buildTxn,Y=R.currentLoggedInWallet.accounts.find(N=>N.address===v.value),A;if(T.value&&h.value.length>0){let N=te.decryptPrivateKey(new l.Password(g.value),Y.encrypted,Y.iv);try{const re=await r.chainAPI.accountAPI.getAccountInfo(l.Address.createFromRawAddress(V.value));A=l.EncryptedMessage.create(h.value,re.publicAccount,N)}catch{A=l.EncryptedMessage.create(h.value,l.PublicAccount.createFromPublicKey(E.value,r.networkType),N)}}else A=l.PlainMessage.create(h.value);let K=Z.transferBuilder().recipient(l.Address.createFromRawAddress(V.value)).mosaics(_).message(A).build().serialize();de.unsignedTransactionPayload=K,de.selectedAddress=v.value,de.selectedMultisigAddress=o.value,$e.push({name:"ViewConfirmTransaction"}),Me()}else return},Ve=async()=>{if(r.chainAPI)try{const e=await r.chainAPI.accountAPI.getAccountInfo(l.Address.createFromRawAddress(v.value)),a=e.mosaics.findIndex(_=>_.id.toHex()==r.nativeToken.assetId);a!=-1?(m.value=e.mosaics[a].amount.compact()/Math.pow(10,r.nativeToken.divisibility),e.mosaics.splice(a,1)):m.value=0}catch{m.value=0}},ce=async e=>{if(r.chainAPI&&e){u.value=[];try{const a=await r.chainAPI.accountAPI.getAccountInfo(l.Address.createFromRawAddress(e)),_=a.mosaics.findIndex(C=>C.id.toHex()==r.nativeToken.assetId);_!=-1?(P.value=a.mosaics[_].amount.compact()/Math.pow(10,r.nativeToken.divisibility),a.mosaics.splice(_,1)):P.value=0;for(let C=0;C<a.mosaics.length;C++){const Z=a.mosaics[C];u.value.push({id:Z.id.toHex(),balance:Z.amount.compact(),divisibility:0,namespace:"",hasUpdated:!1})}}catch{u.value=[],P.value=0}}};q(v,async(e,a)=>{u.value=[],b.value=[],e==null?(P.value=0,f.value=null,o.value=null):e!=a&&(f.value=null,o.value=null,await ce(e))}),q(o,async(e,a)=>{u.value=[],b.value=[],e==null&&(m.value=0,f.value=null,o.value=null,await ce(v.value)),e!=a&&(await Ve(),await ce(e))}),d.on("select-account",e=>{v.value=e}),d.on("select-multisig-account",e=>{f.value=e.label,o.value=e.value}),d.on("CLOSE_MULTISIG",()=>{f.value=null,o.value=null});const Ce=e=>{w.value=!1,V.value=e.data},Ne=S(()=>{const e=R.currentLoggedInWallet;if(!e)return[];const a=[...e.accounts,...e.others];return e.contacts.length?[{key:"0",label:c("general.ownerAcc"),selectable:!1,children:a.map((_,C)=>({key:"0-"+C.toString(),label:_.name,data:l.Address.createFromRawAddress(_.address).pretty(),selectable:!0}))},{key:"1",label:c("general.contact"),selectable:!1,children:e.contacts.map((_,C)=>({key:"1-"+C.toString(),label:_.name,data:l.Address.createFromRawAddress(_.address).pretty(),selectable:!0}))}]:[{key:"0",label:c("general.ownerAcc"),selectable:!1,children:a.map((_,C)=>({key:"0-"+C.toString(),label:_.name,data:l.Address.createFromRawAddress(_.address).pretty(),selectable:!0}))}]});q([V,t],e=>{if(e[0].match(oa)||e[0].match(na)){if(!e[1]){Se();return}pe()}else t.value=!0});const Se=()=>{r.chainAPI.accountAPI.getAccountInfo(l.Address.createFromRawAddress(V.value)).then(e=>{y.value=e.publicKey=="0".repeat(64)}).catch(e=>y.value=!0)},Ee=()=>{try{l.PublicAccount.createFromPublicKey(E.value,r.networkType).address.plain()==l.Address.createFromRawAddress(V.value).plain()&&(n.value=!1)}catch{n.value=!0}},pe=()=>{if(R.currentLoggedInWallet)try{let e=D.createAddress(V.value);D.checkAddressNetwork(e,r.networkType)?t.value=!1:t.value=!0}catch{try{let a=D.createNamespaceId(V.value);r.chainAPI.namespaceAPI.getLinkedAddress(a).then(_=>{V.value=_.plain(),t.value=!1}).catch(_=>{t.value=!0})}catch{t.value=!0}}};return(e,a)=>{const _=ee("Sidebar"),C=ee("font-awesome-icon"),Z=ee("router-link"),Y=We("debounce");return I(),$(ve,null,[F(_,{visible:w.value,"onUpdate:visible":a[0]||(a[0]=A=>w.value=A),baseZIndex:1e4,position:"full"},{default:O(()=>[F(Qe,{contacts:Ne.value,onNodeSelect:Ce},null,8,["contacts"])]),_:1},8,["visible"]),F(qt,{toggleModal:L.value},null,8,["toggleModal"]),F(Ge,{class:"mt-8"},{white:O(()=>[se.value?(I(),$("div",Ot,[s("div",Wt,[F(C,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),s("div",zt,M(e.$t("general.insufficientBalance")),1)])):B("",!0),s("div",jt,M(e.$t("transfer.newTransfer")),1),s("div",Ht,[F(He,{type:"transfer"}),F(Ze,{"selected-address":v.value},null,8,["selected-address"])]),o.value?(I(),$("div",Zt,[F(Xe,{"select-default-address":o.value,"select-default-name":f.value,type:"transfer"},null,8,["select-default-address","select-default-name"])])):B("",!0),a[11]||(a[11]=s("div",{class:"text-blue-primary font-semibold uppercase mt-3 text-xxs"}," Transfer to ",-1)),s("div",Xt,[ue(F(ye,{placeholder:e.$t("transfer.transferPlaceholder"),modelValue:V.value,"onUpdate:modelValue":a[1]||(a[1]=A=>V.value=A),showError:t.value},null,8,["placeholder","modelValue","showError"]),[[Y,pe,"1000"]]),s("div",{onClick:a[2]||(a[2]=A=>w.value=!w.value),class:"border rounded-md cursor-pointer flex flex-col justify-center p-1.5"},[F(C,{icon:"id-card-alt",class:"text-blue-primary ml-auto mr-auto"}),s("div",Gt,M(e.$t("general.select")),1),s("div",Qt,M(e.$t("general.contact")),1)])]),(I(!0),$(ve,null,ze(b.value,(A,K)=>{var N;return I(),$("div",{key:K},[F(mt,{class:"mt-3","asset-options":u.value,index:K,"selected-assets":b.value},null,8,["asset-options","index","selected-assets"]),((N=b.value[K].id)==null?void 0:N.length)==16?(I(),fe(ge,{key:0,class:"mt-3",modelValue:b.value[K].amount,"onUpdate:modelValue":re=>b.value[K].amount=re,placeholder:e.$t("transfer.assetAmount"),type:"text",decimal:b.value[K].divisibility},null,8,["modelValue","onUpdate:modelValue","placeholder","decimal"])):B("",!0)])}),128)),b.value.length!=u.value.length?(I(),$("button",{key:2,class:"my-2 font-semibold text-xs text-blue-primary outline-none focus:outline-none disabled:opacity-50",onClick:a[3]||(a[3]=A=>b.value.push({id:null,balance:0,amount:"0",namespace:"",divisibility:0}))}," + "+M(e.$t("transfer.addAssets")),1)):(I(),$("div",Jt)),F(ge,{modelValue:x.value,"onUpdate:modelValue":a[4]||(a[4]=A=>x.value=A),balance:P.value,placeholder:e.$t("transfer.transferAmount"),logo:!0,type:"text",onClickedMaxAvailable:a[5]||(a[5]=A=>Ie()),decimal:6},null,8,["modelValue","balance","placeholder"]),F(It,{modelValue:h.value,"onUpdate:modelValue":a[6]||(a[6]=A=>h.value=A),limit:ne.value,placeholder:e.$t("general.message"),"current-bytes":z.value},null,8,["modelValue","limit","placeholder","current-bytes"]),t.value?B("",!0):(I(),$("div",Yt,[ue(s("input",{id:"encryptedMsg",type:"checkbox","onUpdate:modelValue":a[7]||(a[7]=A=>T.value=A)},null,512),[[je,T.value]]),s("label",ea,M(e.$t("transfer.enableEncryption")),1)])),T.value?(I(),$("div",ta,[s("div",aa,M(e.$t("general.enterPasswordContinue")),1),F(Ye,{placeholder:e.$t("general.enterPassword"),errorMessage:e.$t("general.passwordRequired"),modelValue:g.value,"onUpdate:modelValue":a[8]||(a[8]=A=>g.value=A),icon:"lock",class:"mt-5 mb-3"},null,8,["placeholder","errorMessage","modelValue"])])):B("",!0),!t.value&&y.value&&T.value&&z.value>0?ue((I(),fe(ye,{key:6,placeholder:"Recipient Public Key",modelValue:E.value,"onUpdate:modelValue":a[9]||(a[9]=A=>E.value=A),showError:n.value},null,8,["modelValue","showError"])),[[Y,Ee,"1000"]]):B("",!0)]),navy:O(()=>[F(at,{"signer-native-token-balance":m.value,"native-amount":x.value,"native-token-balance":P.value,"lock-fund":j.value,"lock-fund-tx-fee":Q.value,"selected-multisig-address":o.value,"txn-fee":H.value,"total-fee":J.value,"selected-assets":b.value},null,8,["signer-native-token-balance","native-amount","native-token-balance","lock-fund","lock-fund-tx-fee","selected-multisig-address","txn-fee","total-fee","selected-assets"]),s("button",{type:"submit",class:"w-full blue-btn px-3 py-3 disabled:opacity-50 disabled:cursor-auto",disabled:U.value,onClick:a[10]||(a[10]=A=>Fe())},M(e.$t("general.transfer")),9,la),s("div",sa,[F(Z,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white underline"},{default:O(()=>[xe(M(e.$t("general.cancel")),1)]),_:1})])]),_:1})],64)}}});export{_a as default};
