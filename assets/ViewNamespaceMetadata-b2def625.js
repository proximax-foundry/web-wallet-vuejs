import{d as H,r as v,E as m,a as T,k as V,o as b,b as w,e as t,s as c,z as r,t as i,B as P,C as x,f as S,p as R,j as L,A as n,_ as $}from"./index-4955abbe.js";import{_ as B}from"./chevron_left-0423cb29.js";import{A as D,_ as F,a as Q}from"./AccountTabs.vue_vue_type_script_setup_true_lang-763063ce.js";import{_ as z}from"./icon-plus-7207f329.js";import{s as M,a as Z}from"./column.esm-a34b2728.js";import{U as W}from"./UTF8-fe306907.js";import"./jdenticon-module-48612ad9.js";import"./functions-8cea86e2.js";import"./TextInput-571567e7.js";import"./TextInputClean-eb033f57.js";import"./icon-key-5b3f7dda.js";const p=o=>(R("data-v-94e3cc79"),o=o(),L(),o),j={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},O={class:"border-2 border-t-0"},q={class:"flex cursor-pointer items-center pt-3 px-3"},G=p(()=>t("img",{src:B},null,-1)),J={class:"text-blue-primary text-xs"},X={class:"border border-blue-primary p-4 bg-blue-100 flex flex-col rounded mt-5 mx-6 mb-5"},Y=p(()=>t("div",{class:"uppercase text-blue-primary font-semibold text-xxs"},"NAMESPACE ID",-1)),ee={class:"text-black text-sm font-bold"},ae=p(()=>t("div",{class:"uppercase text-blue-primary font-semibold text-xxs mt-3"},"Name",-1)),te={class:"text-black text-sm font-bold"},se={class:"flex"},oe={key:0,class:"ml-3 text-gray-400 font-semibold"},de={key:0,class:"flex"},ce=p(()=>t("div",{class:"ml-3 text-gray-400 font-semibold"},"utf-8",-1)),re={class:"text-xs"},ne=p(()=>t("img",{src:Q,title:"Update Metadata",class:"inline-block w-3 h-3 text-black cursor-pointer ml-1"},null,-1)),ie=p(()=>t("button",{class:"mx-6 my-4 blue-btn py-3 px-3 flex items-center"},[t("img",{src:z,class:"inline-block w-4 h-4 mr-2"}),P("Create New Namespace Metadata")],-1)),le=H({__name:"ViewNamespaceMetadata",props:{namespaceId:String,address:String},setup(o){const _=o,I=v("-"),U=async()=>{let e=await m.chainAPI.namespaceAPI.getNamespace(new n.NamespaceId(_.namespaceId));I.value=e.id.toHex()},h=v([]),g=v(""),C=async()=>{let e=await m.chainAPI.accountAPI.getAccountInfo(n.Address.createFromRawAddress(_.address));g.value=e.publicKey},N=e=>new Promise(d=>setTimeout(d,e)),A=e=>(e.endsWith("00")&&(e=e.substring(0,e.length-2),e=A(e)),e),f=e=>{e=A(e);let d=n.Convert.hexToUint8(e);return W.isNotUTF8(d)||(e=n.Convert.decodeHexToUtf8(e)),e},E=async()=>{let e=new n.MetadataQueryParams;e.metadataType=n.MetadataType.NAMESPACE,e.pageSize=100,e.pageNumber=1,e.targetId=new n.NamespaceId(_.namespaceId),e.targetKey=g.value;let d=await m.chainAPI.metadataAPI.searchMetadatas(e);for(let a=0;a<d.metadataEntries.length;a++){let s=d.metadataEntries;h.value.push({scopedMetadataKeyUtf8:s[a].scopedMetadataKey.toHex()==f(s[a].scopedMetadataKey.toHex())?null:f(s[a].scopedMetadataKey.toHex()),scopedMetadataKeyHex:s[a].scopedMetadataKey.toHex(),value:s[a].value})}let u=d.pagination.totalPages;await N(250);for(let a=2;a<=u;a++){let s=new n.MetadataQueryParams;s.metadataType=n.MetadataType.NAMESPACE,s.pageSize=100,s.pageNumber=a,s.targetId=_.namespaceId,s.targetKey=g.value;let k=await m.chainAPI.metadataAPI.searchMetadatas(s);for(let l=0;l<k.metadataEntries.length;l++){let y=k.metadataEntries;h.value.push({scopedMetadataKeyUtf8:y[l].scopedMetadataKey.toHex()==f(y[l].scopedMetadataKey.toHex())?null:f(y[l].scopedMetadataKey.toHex()),scopedMetadataKeyHex:y[l].scopedMetadataKey.toHex(),value:y[l].value}),await N(250)}}},K=async()=>{await C(),await U(),E()};if(m.isReady)K();else{let e=T(m,d=>{d.isReady&&(K(),e())})}return(e,d)=>{const u=V("router-link");return b(),w("div",null,[t("div",j,[c(D,{address:o.address,class:"mb-6"},null,8,["address"]),c(F,{address:o.address,selected:"namespaces"},null,8,["address"]),t("div",O,[c(u,{to:{name:"ViewAccountNamespaces",params:{address:o.address}}},{default:r(()=>[t("div",q,[G,t("div",J,i(e.$t("general.back")),1)])]),_:1},8,["to"]),t("div",X,[t("div",null,[Y,t("div",ee,i(I.value),1)]),t("div",null,[ae,t("div",te,i(o.namespaceId),1)])]),c(x(Z),{value:h.value,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink  RowsPerPageDropdown",rowsPerPageOptions:[10,20,30,40,50],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",responsiveLayout:"scroll"},{empty:r(()=>[P(i(e.$t("general.noRecord")),1)]),loading:r(()=>[P(i(e.$t("dashboard.fetchingTx")),1)]),default:r(()=>[c(x(M),{field:"scopedMetadataKey",header:"Scoped Metadata Key",style:{"`wideScreen?'min-width":"200px'?'width: 200px'  `"}},{body:r(({data:a})=>[t("div",se,[t("div",null,i(a.scopedMetadataKeyHex),1),a.scopedMetadataKeyUtf8?(b(),w("div",oe,"hex")):S("",!0)]),a.scopedMetadataKeyUtf8?(b(),w("div",de,[t("div",null,i(a.scopedMetadataKeyUtf8),1),ce])):S("",!0)]),_:1}),c(x(M),{field:"currentValue",header:"Current Value",style:{"`wideScreen?'min-width":"180px'?'width: 180px'`"}},{body:r(({data:a})=>[t("span",re,i(a.value),1)]),_:1}),c(x(M),{field:"action",header:"Action",style:{"`wideScreen?'min-width":"180px'?'width: 180px'`"}},{body:r(({data:a})=>[c(u,{to:{name:"ViewUpdateNamespaceMetadata",params:{targetId:o.namespaceId,scopedMetadataKey:a.scopedMetadataKeyUtf8?a.scopedMetadataKeyUtf8:a.scopedMetadataKeyHex}}},{default:r(()=>[ne]),_:2},1032,["to"])]),_:1})]),_:1},8,["value"]),c(u,{to:{name:"ViewUpdateNamespaceMetadata",params:{targetId:o.namespaceId}}},{default:r(()=>[ie]),_:1},8,["to"])])])])}}});const we=$(le,[["__scopeId","data-v-94e3cc79"]]);export{we as default};
