import"./vue-86063517.js";import{_ as B}from"./proximax-logo-ecfc3767.js";import{d as y}from"./tsjs-xpx-chain-sdk-84426b6a.js";import{u as U,d as z}from"./primevue-35724b2c.js";import{w as v,W as D,A as l,_ as G}from"./index-71c561bd.js";import{c as H}from"./functions-3b5b4af7.js";import{u as X}from"./vue-i18n-728f748b.js";import{d as Z,c as M,r as A,ao as q,w as J,B as O,o as d,z as p,A as i,g as n,bf as g,a as T,e as u,b as Q,m as V}from"./@vue-a9ecc9f1.js";import"./@js-joda-d98eb16f.js";import"./rxjs-1250b26d.js";import"./tslib-8dbab242.js";import"./@noble-f8eff84a.js";import"./js-sha3-d7d4f583.js";import"./node-stdlib-browser-23a8bc7f.js";import"./buffer-6d367910.js";import"./base64-js-50a5cdf9.js";import"./ieee754-44f7831e.js";import"./process-2209b2b3.js";import"./utf8-c941a4a0.js";import"./bip39-936aefa9.js";import"./axios-b48d2c29.js";import"./flatbuffers-edc4f8d7.js";import"./ws-0a714537.js";import"./vue-router-21fffbbf.js";import"./crypto-js-e64ac54c.js";import"./crypto-browserify-4fd8cccd.js";import"./randombytes-685e9383.js";import"./safe-buffer-c463177b.js";import"./create-hash-92c04a28.js";import"./inherits-804453d8.js";import"./md5.js-8d474739.js";import"./hash-base-bb85fc42.js";import"./readable-stream-2241ee9e.js";import"./events-86ccc6d8.js";import"./util-06f7ff32.js";import"./is-arguments-86164331.js";import"./has-tostringtag-7c6352d6.js";import"./has-symbols-cd7870b9.js";import"./call-bind-9e7f09da.js";import"./get-intrinsic-f35014ba.js";import"./has-proto-8ede3a55.js";import"./function-bind-68631a08.js";import"./has-ab8e2922.js";import"./is-generator-function-06dfaf9d.js";import"./which-typed-array-cf6b6a29.js";import"./for-each-f57c5052.js";import"./is-callable-7492318c.js";import"./available-typed-arrays-61974ec7.js";import"./gopd-bab4d6bd.js";import"./is-typed-array-037eef20.js";import"./util-deprecate-c3aabb3c.js";import"./string_decoder-ef7b01fe.js";import"./ripemd160-58dcfa02.js";import"./sha.js-cea3da2e.js";import"./cipher-base-aee0e03d.js";import"./stream-browserify-7496a08f.js";import"./create-hmac-e8b5ea4a.js";import"./browserify-sign-a708a95f.js";import"./browserify-rsa-bfbdcbb6.js";import"./bn.js-1ae23332.js";import"./elliptic-75e883ee.js";import"./minimalistic-assert-4cc49674.js";import"./minimalistic-crypto-utils-6f869a51.js";import"./brorand-03f0f79d.js";import"./hash.js-4f5dfe73.js";import"./hmac-drbg-87799258.js";import"./parse-asn1-465c125b.js";import"./asn1.js-405e93e4.js";import"./safer-buffer-2ac6237e.js";import"./evp_bytestokey-e91543fa.js";import"./browserify-aes-ce20a0e6.js";import"./buffer-xor-87a7236a.js";import"./pbkdf2-e2ae8643.js";import"./browserify-cipher-c4c37ca3.js";import"./browserify-des-3f7e64d9.js";import"./des.js-d262604a.js";import"./diffie-hellman-c8260aab.js";import"./miller-rabin-de27bf02.js";import"./create-ecdh-ffe720e9.js";import"./public-encrypt-fc0568a2.js";import"./randomfill-2874e5f1.js";import"./mathjs-2a513dae.js";import"./@babel-484168fe.js";import"./typed-function-4896e4f1.js";import"./decimal.js-d133ee8e.js";import"./complex.js-cf2520e8.js";import"./fraction.js-39e7906a.js";import"./javascript-natural-sort-c4dd0c27.js";import"./escape-latex-c8a96e7a.js";import"./seedrandom-c8f991ad.js";import"./tiny-emitter-56d49cfd.js";import"./crypto-random-string-d158262e.js";import"./jose-92e5544c.js";import"./vue-loading-overlay-b89251b1.js";import"./jspdf-30014160.js";import"./fflate-8981c52c.js";import"./vue-debounce-3bbbf8c6.js";import"./mitt-f7ef348c.js";/* empty css                   */import"./maska-6f10db43.js";import"./@fortawesome-014b81f2.js";import"./vue3-blocks-tree-e53499e3.js";import"./@intlify-16888cd3.js";const Y={class:"md:px-40 xl:px-64"},P={class:"border rounded-md p-3 flex flex-col shadow-lg filter mb-2 w-full"},tt={class:"text-blue-primary font-semibold text-xs"},et={class:"flex items-center my-1"},ot=["id","copyValue","copySubject"],it={class:"flex items-center"},st={class:"text-xs font-bold"},rt={key:0,class:"text-xs font-bold"},nt={class:"text-xxs mt-0.5"},lt={class:"ml-1 text-xs font-bold"},at=i("img",{src:B,class:"h-4 w-4"},null,-1),ct={key:0,class:"text-blue-primary"},dt={key:1,class:"text-blue-primary text-sm font-semibold my-4"},mt={class:"border rounded-md p-3 flex flex-col shadow-lg filter mb-2 w-full"},pt={class:"text-blue-primary font-semibold text-xs"},ut={class:"flex items-center my-1"},ft=["id","copyValue","copySubject"],vt={key:0,class:"flex items-center"},gt={class:"text-xs font-bold"},bt={key:0,class:"text-xs font-bold"},yt={class:"text-xxs mt-0.5"},ht={class:"ml-1 text-xs font-bold"},_t=i("img",{src:B,class:"h-4 w-4"},null,-1),xt=Z({__name:"ViewMultisigAccounts",props:{address:String},setup(f){const I=f,C=U(),{t:j}=X(),k=o=>{let t=document.getElementById(o).getAttribute("copyValue"),s=document.getElementById(o).getAttribute("copySubject");H(t),C.add({severity:"info",detail:s+" "+j("general.copied"),group:"br-custom",life:3e3})},h=y.Address.createFromRawAddress(I.address).plain(),_=M(()=>v.currentLoggedInWallet?(v.currentLoggedInWallet.accounts.find(t=>t.address==h)||v.currentLoggedInWallet.others.find(t=>t.address==h)).balance:0),m=o=>{if(o==null)return{left:null,right:null};let t=o.toString().split(".");return t[1]!=null?{left:t[0],right:t[1]}:{left:t[0],right:null}},S=A([]),L=async()=>{const o=[];try{const t=await l.chainAPI.accountAPI.getMultisigAccountGraphInfo(y.Address.createFromRawAddress(I.address));for(const[s,e]of t.multisigAccounts){const c=s;for(const r of e){const{account:x,cosignatories:$,multisigAccounts:F,minApproval:N,minRemoval:R}=r,E={publicKey:x.publicKey,level:c,cosignatories:$.map(w=>w.publicKey),multisigAccounts:F.map(w=>w.publicKey),minApproval:N,minRemoval:R,balance:0};o.push(E)}}return o}catch{return o}},a=A(null),W=async()=>{const o=a.value.map(t=>y.PublicAccount.createFromPublicKey(t.publicKey,l.networkType).address);try{const t=await l.chainAPI.accountAPI.getAccountsInfo(o);for(let s=0;s<a.value.length;s++){const e=t.findIndex(r=>r.publicKey==a.value[s].publicKey);if(e==-1)continue;const c=t[e].mosaics.find(r=>r.id.toHex()==l.nativeToken.assetId);c&&(a.value[s].balance=c.amount.compact()/Math.pow(10,l.nativeToken.divisibility))}}catch{}},b=M(()=>{let o=[];if(!a.value)return o;const t=[...a.value.filter(e=>e.level<0)],s=Math.min(...t.map(e=>e.level));if(s==1/0)return o;for(let e=0;e<Math.abs(s);e++){const c=t.filter(r=>r.level==-Math.abs(e+1)).map(r=>({address:D.createAddressFromPublicKey(r.publicKey,l.networkType).pretty(),balance:r.balance}));o.push({key:(e+1).toString(),label:"Level "+(e+1).toString(),selectable:!1,children:c.map((r,x)=>({type:"child",key:"0-"+x.toString(),balance:r.balance,label:v.currentLoggedInWallet.convertAddressToName(y.Address.createFromRawAddress(r.address).plain(),!0),address:r.address,selectable:!0}))})}return o}),K=q();return K.run(()=>{const o=A(!1),t=J(l,async s=>{s.isReady&&!o.value&&(o.value=!0,a.value=await L(),await W(),t(),K.stop())},{immediate:!0})}),(o,t)=>{const s=O("font-awesome-icon");return d(),p("div",Y,[i("div",P,[i("div",tt,n(g(v).currentLoggedInWallet.convertAddressToName(g(h))),1),i("div",et,[i("div",{id:f.address.substring(-4),copyValue:f.address,copySubject:o.$t("general.address"),class:"truncate font-semibold text-xs mt-1"},n(f.address),9,ot),T(s,{icon:"copy",title:o.$t("general.copy"),onClick:t[0]||(t[0]=e=>k(f.address.substring(-4))),class:"ml-2 w-5 h-5 text-blue-link cursor-pointer"},null,8,["title"])]),i("div",it,[i("div",st,n(m(_.value).left),1),m(_.value).right!=null?(d(),p("div",rt,".")):u("v-if",!0),i("div",nt,n(m(_.value).right),1),i("div",lt,n(g(l).nativeToken.label),1),at])]),b.value.length?u("v-if",!0):(d(),p("div",ct,"This account is not cosignatory of any accounts.")),b.value.length?(d(),p("div",dt,"Cosignatories of")):u("v-if",!0),b.value.length?(d(),Q(g(z),{key:2,expandedKeys:S.value,"onUpdate:expandedKeys":t[1]||(t[1]=e=>S.value=e),value:b.value,filter:!0,filterMode:"strict",selectionMode:"single",class:"w-full"},{default:V(e=>[i("div",null,n(e.node.label),1)]),child:V(e=>[i("div",mt,[i("div",pt,n(e.node.label),1),i("div",ut,[i("div",{id:e.node.address.substring(-4),copyValue:e.node.address,copySubject:o.$t("general.address"),class:"truncate font-semibold text-xs mt-1"},n(e.node.address),9,ft),T(s,{icon:"copy",title:o.$t("general.copy"),onClick:c=>k(e.node.address.substring(-4)),class:"ml-2 w-5 h-5 text-blue-link cursor-pointer"},null,8,["title","onClick"])]),e.node.balance?(d(),p("div",vt,[i("div",gt,n(m(e.node.balance).left),1),m(e.node.balance).right!=null?(d(),p("div",bt,".")):u("v-if",!0),i("div",yt,n(m(e.node.balance).right),1),i("div",ht,n(g(l).nativeToken.label),1),_t])):u("v-if",!0)])]),_:1},8,["expandedKeys","value"])):u("v-if",!0)])}}});const yo=G(xt,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/submodule/multisig/views/ViewMultisigAccounts.vue"]]);export{yo as default};
