import{d as R,r as h,u as F,c as _,w as s,o,b as u,e as c,t as f,f as p,s as k,F as P,A as $,b2 as U,E as K,_ as H,D as z,I as q,H as G,k as j,Q,U as J,i as X,z as W,l as N,m as T,B as V}from"./index-a63143aa.js";import{t as Y}from"./jdenticon-module-b1f729db.js";import{c as Z}from"./functions-3cce50a4.js";import{T as ee}from"./TextInput-26768024.js";import{T as B}from"./TextInputClean-04c443a8.js";import{_ as te,a as ae}from"./icon-key-5b3f7dda.js";const se="/web-wallet-vuejs/assets/edit-icon-026aae3d.svg",le={key:0,class:"popup-outer-lang fixed flex z-50"},re={class:"modal-popup-box"},ne={key:0},oe={key:0,class:"error error_box mb-3"},de=c("div",{class:"text-center mt-2 text-xs font-semibold"},"Change Name",-1),ce={class:"flex justify-center mt-3"},ie=["disabled"],ue={key:1},me={key:0,class:"error error_box mb-3"},ge=c("div",{class:"text-center mt-2 text-xs font-semibold"},"Add to Address Book",-1),fe={class:"flex justify-center"},ve=["disabled"],pe={key:2},be={key:0,class:"error error_box mb-3"},ye=c("div",{class:"text-center mt-2 text-xs font-semibold"},"Edit Address Book",-1),xe={class:"flex justify-center"},we=["disabled"],he=R({__name:"ChangeNameModal",props:{isOther:Boolean,address:String},setup(l){const n=l,b=h(n.address),{t}=F(),L=_(()=>y.value.trim()==""),m=_(()=>i.value.trim()==""),v=h(!1),i=h(""),y=h(""),d=h(""),E=()=>{if(y.value.trim()){const r=s.currentLoggedInWallet.accounts.find(a=>a.name==y.value.trim()),e=s.currentLoggedInWallet.others.find(a=>a.name==y.value.trim());if(!r&&!e){const a=s.currentLoggedInWallet.accounts.findIndex(g=>g.address===n.address);if(a==-1){const g=s.currentLoggedInWallet.others.findIndex(I=>I.address===n.address);s.currentLoggedInWallet.others[g].name=y.value}else s.currentLoggedInWallet.accounts[a].name=y.value;s.wallets.saveMyWalletOnlytoLocalStorage(s.currentLoggedInWallet),d.value="",y.value="",v.value=!1}else r||e?d.value=t("account.nameTaken"):d.value=t("account.failChangeName")}else d.value=t("account.nameEmpty")},x=h(!1);n.isOther&&s.currentLoggedInWallet.contacts.find(e=>e.address==n.address)&&(x.value=!0);const S=()=>{if(i.value==" "){d.value=t("general.nameRequired");return}const r=$.Address.createFromRawAddress(n.address);let e=new U(i.value.trim(),r.plain(),"-none-");const a=s.currentLoggedInWallet,g=a.accounts.findIndex(A=>A.name.toLowerCase()==i.value.toLowerCase().trim()),I=a.contacts!=null?a.contacts.findIndex(A=>$.Address.createFromRawAddress(A.address).plain()==r.plain()):-1,M=a.contacts!=null?a.contacts.findIndex(A=>A.name.toLowerCase()==i.value.toLowerCase().trim()):-1;I>=0?d.value=t("addressBook.addressExist"):M>=0||g>=0?d.value=t("addressBook.nameExist"):(s.currentLoggedInWallet.addAddressBook(e),s.wallets.saveMyWalletOnlytoLocalStorage(s.currentLoggedInWallet),d.value="",i.value="",v.value=!1)},C=h("");(async r=>{try{let e=await K.chainAPI.accountAPI.getAccountInfo($.Address.createFromRawAddress(r));e.publicKey=="0000000000000000000000000000000000000000000000000000000000000000"?C.value=null:C.value=e.publicKey}catch{C.value=null}})(n.address);const O=()=>{const r=s.currentLoggedInWallet;if(!r)return;const e=s.currentLoggedInWallet.contacts.find(w=>w.address==n.address),a=s.currentLoggedInWallet.contacts.findIndex(w=>w.address==n.address);let g=r.contacts.filter(w=>w.name.toLowerCase()!=e.name.toLowerCase().trim()),I=g.find(w=>w.name.toLowerCase()==i.value.toLowerCase().trim()),M=r.accounts.find(w=>w.name.toLowerCase()==i.value.toLowerCase().trim()),A=g.find(w=>$.Address.createFromRawAddress(w.address).plain()==$.Address.createFromRawAddress(n.address).plain());I!=null||M!=null?d.value=t("addressBook.nameExist"):A!=null?d.value=t("addressBook.addressExist"):(s.currentLoggedInWallet.updateAddressBook(a,{name:i.value.trim(),address:$.Address.createFromRawAddress(n.address).plain(),group:"-none-",publicKey:C.value}),s.wallets.saveMyWalletOnlytoLocalStorage(s.currentLoggedInWallet),d.value="",i.value="",v.value=!1)};return(r,e)=>(o(),u(P,null,[c("img",{src:se,class:"w-4 h-4 text-black cursor-pointer mt-1 ml-1",onClick:e[0]||(e[0]=a=>v.value=!v.value)}),v.value?(o(),u("div",le,[c("div",re,[l.isOther?l.isOther&&!x.value?(o(),u("div",ue,[d.value!=""?(o(),u("div",me,f(d.value),1)):p("",!0),ge,k(B,{placeholder:r.$t("general.name"),errorMessage:r.$t("general.nameRequired"),modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=a=>i.value=a),icon:"id-card-alt",class:"w-full md:w-96 inline-block mt-3 mr-2"},null,8,["placeholder","errorMessage","modelValue"]),k(B,{placeholder:r.$t("general.address"),modelValue:b.value,"onUpdate:modelValue":e[4]||(e[4]=a=>b.value=a),disabled:!0,icon:"wallet",class:"w-full md:w-96 inline-block mr-2"},null,8,["placeholder","modelValue"]),c("div",fe,[c("button",{onClick:e[5]||(e[5]=a=>S()),class:"blue-btn font-semibold py-2 cursor-pointer text-center w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:m.value},f(r.$t("general.add")),9,ve)])])):(o(),u("div",pe,[d.value!=""?(o(),u("div",be,f(d.value),1)):p("",!0),ye,k(B,{placeholder:r.$t("general.name"),errorMessage:r.$t("general.nameRequired"),modelValue:i.value,"onUpdate:modelValue":e[6]||(e[6]=a=>i.value=a),icon:"id-card-alt",class:"w-full md:w-96 inline-block mt-3 mr-2"},null,8,["placeholder","errorMessage","modelValue"]),k(B,{placeholder:r.$t("general.address"),modelValue:b.value,"onUpdate:modelValue":e[7]||(e[7]=a=>b.value=a),disabled:!0,icon:"wallet",class:"w-full md:w-96 inline-block mr-2"},null,8,["placeholder","modelValue"]),c("div",xe,[c("button",{onClick:e[8]||(e[8]=a=>O()),class:"blue-btn font-semibold py-2 cursor-pointer text-center w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:m.value},f(r.$t("general.add")),9,we)])])):(o(),u("div",ne,[d.value!=""?(o(),u("div",oe,f(d.value),1)):p("",!0),de,k(ee,{class:"mt-3",placeholder:r.$t("account.namePlaceholder"),errorMessage:r.$t("account.enterAccountName"),modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=a=>y.value=a),icon:"wallet"},null,8,["placeholder","errorMessage","modelValue"]),c("div",ce,[c("button",{onClick:e[2]||(e[2]=a=>E()),class:"blue-btn font-semibold py-2 cursor-pointer text-center w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:L.value},f(r.$t("general.confirm")),9,ie)])])),c("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:e[9]||(e[9]=a=>{v.value=!v.value,d.value=""})},f(r.$t("general.cancel")),1)])])):p("",!0),v.value?(o(),u("div",{key:1,onClick:e[10]||(e[10]=a=>{v.value=!v.value,d.value=""}),class:"fixed inset-0 bg-opacity-60 bg-gray-100 z-20"})):p("",!0)],64))}}),Ie={name:"AccountComponent",props:{address:String},components:{changeNameModal:he},setup(l){const{t:n}=F(),b=z(),t=_(()=>{if(!s.currentLoggedInWallet)return null;let e=s.currentLoggedInWallet.accounts.find(a=>a.address==l.address)||s.currentLoggedInWallet.others.find(a=>a.address==l.address);return e||null}),L=_(()=>s.currentLoggedInWallet?s.currentLoggedInWallet.others.find(e=>e.address==l.address):null);let m=h(""),v=new q("ThemeStyleConfig");const i=_(()=>{if(l.address)try{return G.createAddress(l.address).pretty()}catch{}return""});v.init(),X().appContext.config.globalProperties.emitter;const d=_(()=>t.value?!!t.value.default:!1),E=_(()=>t.value?!!t.value.getDirectParentMultisig().length:!1),x=h("");x.value=t.value?t.value.name:"";const S=_(()=>s.currentLoggedInWallet?s.currentLoggedInWallet.convertAddressToName(l.address,!0):""),C=h(Y(l.address,75,v.jdenticonConfig)),D=h(!0);return{accountName:x,accountNameDisplay:S,showName:D,svgString:C,isDefault:d,isMultiSig:E,prettyAddress:i,changeName:()=>{if(x.value.trim()){const e=s.currentLoggedInWallet.accounts.find(g=>g.name==x.value.trim()),a=s.currentLoggedInWallet.others.find(g=>g.name==x.value.trim());if(!e&&!a){const g=s.currentLoggedInWallet.accounts.findIndex(I=>I.address===l.address);if(g==-1){const I=s.currentLoggedInWallet.others.findIndex(M=>M.address===l.address);s.currentLoggedInWallet.others[I].name=x.value}else s.currentLoggedInWallet.accounts[g].name=x.value;s.wallets.saveMyWalletOnlytoLocalStorage(s.currentLoggedInWallet),D.value=!0,S.value=x.value,m.value="",m.value=""}else e||a?m.value=n("account.nameTaken"):m.value=n("account.failChangeName")}else m.value=n("account.nameEmpty")},copy:e=>{let a=document.getElementById(e).getAttribute("copyValue"),g=document.getElementById(e).getAttribute("copySubject");Z(a),b.add({severity:"info",detail:g+" "+n("general.copied"),group:"br-custom",life:3e3})},err:m,other_acc:L}}},ke={class:"border-2 py-3 px-6"},_e={class:"flex"},Le=["innerHTML"],Ae={class:"flex flex-col justify-center ml-4"},Ce={key:0,class:"text-red-500 text-xs"},$e={class:"flex"},We={key:0,class:"font-semibold text-md"},Ne={class:"flex gap-2"},Ve=["copyValue","title","copySubject"],Me={class:"flex gap-2"},Se=["title"],Te=c("img",{src:te,class:"h-4 w-4"},null,-1),Be={class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"},Ee=["title"],De={key:0,src:ae,class:"h-4 w-4 mr-1"},je={key:1,class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"};function Oe(l,n,b,t,L,m){const v=j("changeNameModal"),i=j("font-awesome-icon");return o(),u("div",ke,[c("div",_e,[c("div",{innerHTML:t.svgString},null,8,Le),c("div",Ae,[t.err!=""?(o(),u("div",Ce,f(t.err),1)):p("",!0),c("div",$e,[t.showName?(o(),u("div",We,f(t.accountNameDisplay),1)):p("",!0),t.showName?p("",!0):Q((o(),u("input",{key:1,class:"outline-none ml-4 font-semibold text-md","onUpdate:modelValue":n[0]||(n[0]=y=>t.accountName=y)},null,512)),[[J,t.accountName]]),k(v,{address:b.address,isOther:t.other_acc!=null},null,8,["address","isOther"])]),c("div",Ne,[c("div",{id:"address",copyValue:t.prettyAddress,title:t.prettyAddress,copySubject:l.$t("general.address"),class:"truncate md:text-clip w-44 md:w-full text-xs font-semibold mt-1"},f(t.prettyAddress),9,Ve),k(i,{icon:"copy",title:l.$t("general.copy"),onClick:n[1]||(n[1]=y=>t.copy("address")),class:"w-5 h-5 text-blue-link cursor-pointer"},null,8,["title"])]),c("div",Me,[t.isDefault?(o(),u("div",{key:0,class:"px-1 py-0.5 flex mt-0.5 bg-blue-primary rounded-sm",title:l.$t("general.defaultTitle")},[Te,c("p",Be,f(l.$t("general.default")),1)],8,Se)):p("",!0),t.isMultiSig?(o(),u("div",{key:1,class:"px-1 py-0.5 flex mt-0.5 bg-orange-primary rounded-sm",title:l.$t("general.multisigTitle")},[t.isMultiSig?(o(),u("img",De)):p("",!0),t.isMultiSig?(o(),u("p",je,f(l.$t("general.multisig")),1)):p("",!0)],8,Ee)):p("",!0)])])])])}const Ge=H(Ie,[["render",Oe]]),Re={class:"flex text-xs flex-wrap font-semibold border-b-2 menu_title_div"},Fe={name:"AccountTabs"},Qe=R({...Fe,props:{address:String,selected:String},setup(l){const n=l,b=()=>{if(!s.currentLoggedInWallet)return!1;let t=s.currentLoggedInWallet.others.find(L=>L.address==n.address);return t?t.type=="DELEGATE":!1};return(t,L)=>{const m=j("router-link");return o(),u("div",Re,[k(m,{class:N([`${l.selected=="details"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-32 text-center py-3 word-break"]),to:{name:"ViewAccountDetails",params:{address:l.address}}},{default:W(()=>[V(f(t.$t("account.accountDetails")),1)]),_:1},8,["class","to"]),b()?p("",!0):(o(),T(m,{key:0,class:N([`${l.selected=="assets"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-18 py-3 text-center word-break"]),to:{name:"ViewAccountAssets",params:{address:l.address}}},{default:W(()=>[V(f(t.$t("general.asset",2)),1)]),_:1},8,["class","to"])),b()?p("",!0):(o(),T(m,{key:1,class:N([`${l.selected=="namespaces"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-24 py-3 text-center word-break"]),to:{name:"ViewAccountNamespaces",params:{address:l.address}}},{default:W(()=>[V(f(t.$t("general.namespace",2)),1)]),_:1},8,["class","to"])),b()?p("",!0):(o(),T(m,{key:2,class:N([`${l.selected=="metadata"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-18 text-center py-3 word-break"]),to:{name:"ViewAccountMetadata",params:{address:l.address}}},{default:W(()=>[V("Metadata")]),_:1},8,["class","to"])),b()?p("",!0):(o(),T(m,{key:3,class:N([`${l.selected=="multisig"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-18 py-3 text-center word-break"]),to:{name:"ViewMultisigHome",params:{address:l.address}}},{default:W(()=>[V(f(t.$t("general.multisig")),1)]),_:1},8,["class","to"])),k(m,{class:N([`${l.selected=="txn"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-18 py-3 text-center word-break"]),to:{name:"ViewAccountConfirmedTransactions",params:{address:l.address}}},{default:W(()=>[V(f(t.$t("general.transaction",2)),1)]),_:1},8,["class","to"])])}}});export{Ge as A,Qe as _,se as a};
