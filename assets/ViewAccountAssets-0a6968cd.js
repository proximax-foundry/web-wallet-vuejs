import{d as V,u as F,r as w,l as H,o as l,b as c,e as d,m as i,y as _,$ as E,F as j,a4 as z,a as D,i as K,v as m,x as k,t as g,n as N,B as A,z as S,H as O}from"./index-444bbe0f.js";import{_ as U}from"./proximax-logo-ecfc3767.js";import{_ as W}from"./xarcade-logo-c4d3fd5c.js";import{_ as q}from"./metx-logo-27f23eae.js";import{_ as G}from"./icon-proximax-logo-gray-c2486ce1.js";import{_ as J}from"./icon-green-tick-1b766454.js";import{_ as Q}from"./icon-red-x-a5511f99.js";import{_ as Y}from"./icon-plus-7207f329.js";import{A as Z,_ as ee}from"./AccountTabs.vue_vue_type_script_setup_true_lang-f9968907.js";import{s as v,a as se}from"./column.esm-4874d0e2.js";import{_ as te}from"./icon-more-options-3f3cfda9.js";import"./jdenticon-module-87ca5004.js";import"./functions-c713a458.js";import"./TextInput-19c58869.js";import"./TextInputClean-b8343bb7.js";import"./icon-key-5b3f7dda.js";const re="/web-wallet-vuejs/assets/icon-transfer-white-08654b1d.svg",ae="/web-wallet-vuejs/assets/icon-swap-2df39ab1.svg",oe=V({__name:"AssetAction",props:{address:{},id:{},isCreator:{type:Boolean}},setup(o){const{t:x}=F(),p=w(),f=H(),P=w([{visible:o.isCreator,label:x("general.modifySupply"),command:()=>{f.push({name:"ViewServicesAssetsModifySupplyChange",params:{assetId:o.id,address:o.address}})}},{visible:o.isCreator,label:x("general.linkToNamespace"),command:()=>{f.push({name:"ViewServicesAssetsLinkToNamespace",params:{assetId:o.id,address:o.address}})}},{visible:!0,label:"View Metadata",command:()=>{f.push({name:"ViewAssetMetadata",params:{assetId:o.id,address:o.address}})}}]),I=u=>{p.value.toggle(u)};return(u,L)=>(l(),c(j,null,[d("img",{src:te,class:"w-4 h-4 cursor-pointer ml-2 mt-0.5",onClick:I}),i(_(E),{ref_key:"menu",ref:p,model:P.value,popup:!0},null,8,["model"])],64))}}),ne={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},ie={class:"border-2 border-t-0"},le=["href"],ce={class:"text-blue-primary uppercase w-min-max text-xs mt-1.5 cursor-pointertext-blue-primary pr-7"},de={class:"flex items-center pr-7"},me={key:0,src:U,class:"inline-block h-7 w-7 mr-2 border-2 rounded-3xl"},ue={key:1,src:W,class:"inline-block h-7 w-7 mr-2 border-2 rounded-3xl"},pe={key:2,src:q,class:"inline-block h-7 w-7 mr-2 border-2 rounded-3xl"},fe={key:3},ge={key:4,src:G,class:"inline-block h-6 w-6 mr-2"},_e={key:5,class:"inline-block text-xs ml-2 mt-1"},we={key:6,class:"inline-block text-xs ml-2 cursor-pointer mt-1"},he={key:0,src:J,class:"h-5 w-5"},xe={key:1,src:Q,class:"h-5 w-5"},ye={class:"flex my-3 px-6 flex-col w-full ml-auto mr-auto gap-2 sm:flex-row sm:items-center"},ve=d("img",{src:re,class:"inline-block w-4 h-4 mt-0.5 cursor-pointer mr-1"},null,-1),be=d("img",{src:ae,class:"w-4 h-4 inline-block relative mr-1"},null,-1),ke=d("img",{src:Y,class:"inline-block w-4 h-4 mr-2"},null,-1),Ee=V({__name:"ViewAccountAssets",props:{address:String},setup(o){const x=o,p=s=>s=="prx.xpx"?{name:"XPX",registered:!0}:s=="prx.metx"?{name:"METX",registered:!0}:s=="xarcade.xar"?{name:"XAR",registered:!0}:{name:s,registered:!1},f=w({page:0,rows:10}),P=w(),I=s=>{f.value.rows=s},u=w([]),L=s=>N.currentNetworkProfile?N.currentNetworkProfile.chainExplorer.url+"/"+N.currentNetworkProfile.chainExplorer.assetInfoRoute+"/"+s:"",$=async()=>{try{return(await A.chainAPI.accountAPI.getAccountInfo(S.Address.createFromRawAddress(x.address))).mosaics.map((a,t)=>({i:t,id:a.id.toHex(),amount:a.amount.compact().toString(),name:"",isCreator:!1,isLoaded:!1}))}catch{return[]}},R=z(),h=w(!1);R.run(()=>{const s=w(!1),a=D(A,async t=>{t.isReady&&!s.value&&(h.value=!0,u.value=await $(),s.value=!0,M(),h.value=!1,a(),R.stop())},{immediate:!0})});const X=s=>{const{page:a,rows:t}=s;f.value={page:a,rows:t},M()},M=async()=>{var T;h.value=!0;const{page:s,rows:a}=f.value,t=[];for(let r=0;r<a;r++){const n=s*a+r;if(!u.value[n]||u.value[n].isLoaded)continue;const y=u.value[n];t.push(new S.MosaicId(y.id))}if(!t.length){h.value=!1;return}const e=await A.chainAPI.assetAPI.getMosaicsNames(t),b=await A.chainAPI.assetAPI.getMosaics(t),C={};t.forEach((r,n)=>{C[r.toHex()]=n}),b.sort((r,n)=>{const y=C[r.mosaicId.toHex()],B=C[n.mosaicId.toHex()];return y-B});for(let r=0;r<t.length;r++){const n=u.value.find(y=>y.id==t[r].toHex());n.name=((T=e[r].names[0])==null?void 0:T.name)??"-",n.amount=O.toCurrencyFormat(parseFloat(n.amount)/Math.pow(10,b[r].divisibility),b[r].divisibility),n.isCreator=b[r].owner.address.plain()==S.Address.createFromRawAddress(x.address).plain(),n.isLoaded=!0}h.value=!1};return(s,a)=>{const t=K("router-link");return l(),c("div",null,[d("div",ne,[i(Z,{address:o.address,class:"mb-6"},null,8,["address"]),i(ee,{address:o.address,selected:"assets"},null,8,["address"]),d("div",ie,[i(_(se),{value:u.value,paginator:!0,rows:10,dataKey:"id",ref_key:"dt",ref:P,onPage:a[0]||(a[0]=e=>X(e)),"onUpdate:rows":a[1]||(a[1]=e=>I(e)),loading:h.value,rowsPerPageOptions:[10,20,30,40,50],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink  RowsPerPageDropdown",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",responsiveLayout:"scroll"},{empty:m(()=>[k(" No assets found. ")]),default:m(()=>[i(_(v),{field:"id",header:"Asset ID"},{body:m(({data:e})=>[d("a",{href:L(e.id),target:"_new",class:"col-span-2"},[d("div",ce,g(e.id),1)],8,le)]),_:1}),i(_(v),{field:"name",header:"Namespace"},{body:m(({data:e})=>[d("div",de,[p(e.name).name=="XPX"?(l(),c("img",me)):p(e.name).name=="XAR"?(l(),c("img",ue)):p(e.name).name=="METX"?(l(),c("img",pe)):e.name=="-"?(l(),c("div",fe)):(l(),c("img",ge)),p(e.name).registered?(l(),c("div",_e,g(p(e.name).name),1)):(l(),c("div",we,g(e.name),1))])]),_:1}),i(_(v),{field:"amount",header:"Balance"},{body:m(({data:e})=>[d("div",null,g(e.amount),1)]),_:1}),i(_(v),{field:"creator",header:"Creator"},{body:m(({data:e})=>[e.isCreator?(l(),c("img",he)):(l(),c("img",xe))]),_:1}),i(_(v),{header:"Actions "},{body:m(({data:e})=>[i(oe,{address:o.address,id:e.id,"is-creator":e.isCreator},null,8,["address","id","is-creator"])]),_:1})]),_:1},8,["value","loading"]),d("div",ye,[i(t,{to:{name:"ViewTransferCreate"},class:"bg-blue-primary px-5 py-2 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center"},{default:m(()=>[ve,k(g(s.$t("general.transfer")),1)]),_:1}),i(t,{to:{name:"ViewServicesMainnetSwap"},class:"bg-blue-primary px-5 py-2 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center"},{default:m(()=>[be,k(g(s.$t("general.swap")),1)]),_:1}),i(t,{to:{name:"ViewServicesAssetsCreate"},class:"bg-blue-primary px-5 py-2 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center"},{default:m(()=>[ke,k(g(s.$t("asset.createNewAsset")),1)]),_:1})])])])])}}});export{Ee as default};
