import{_ as I,r as S,I as k,u as A,E as y,a as L,M as _,H as V,w as u,k as H,b as r,e as n,t as o,F as M,h as W,i as E,o as i,s as T,z as C,B as v,f as N}from"./index-66465054.js";import{t as F}from"./jdenticon-module-c04e1b21.js";const B={name:"ViewNotification",setup(){const l=S([]),f=E().appContext.config.globalProperties.emitter;let t=new k("ThemeStyleConfig");t.init();const p=S(t.jdenticonConfig),{t:m}=A(),g=c=>{let a=new Date,d=new Date(c),e={years:d.getFullYear()-a.getFullYear(),months:d.getMonth()-a.getMonth(),days:d.getDate()-a.getDate(),hours:d.getHours()-a.getHours(),mins:d.getMinutes()-a.getMinutes()};if(e.mins<0&&(e.hours--,e.mins+=60),e.hours<0&&(e.days--,e.hours+=24),e.days<0){e.months--;const b=new Date(a.getTime());b.setDate(32),e.days=32-a.getDate()-b.getDate()+d.getDate()}return e.months<0&&(e.years--,e.months+=12),e.years>0?e.years+" "+m("general.year",e.years.toString()):e.months>0?e.months+" "+m("general.month",e.months.toString()):e.days>0?e.days+" "+m("general.day",e.days.toString()):e.hours>0?e.hours+" "+m("general.hour",e.hours.toString()):e.mins+" "+m("general.minute",e.mins.toString())},s=()=>{if(!y.isReady){setTimeout(s,100);return}l.value=_.getNotificationFromStorage(),_.saveVisitedNotification(),f.emit("VIEW_NOTIFICATION")},h=c=>{if(u.currentLoggedInWallet){u.currentLoggedInWallet.setDefaultAccountByAddress(c);var a=u.currentLoggedInWallet.accounts.find(d=>d.address==c);a||(a=""),f.emit("DEFAULT_ACCOUNT_SWITCHED",a)}},w=()=>new Date().getTime(),x=async()=>{s()};if(y.isReady)x();else{let c=L(y.isReady,a=>{a&&(x(),c())})}return{notifications:l,NotificationUtils:_,updateDefaultAccount:h,Helper:V,themeStyleConfig:p,toSvg:F,walletState:u,currentTimestamp:w,relativeTime:g}}},P={class:"ml-2 mr-2 w-full lg:ml-auto lg:mr-auto mt-5"},j={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},O={class:"flex justify-between text-sm mb-5"},R={class:"text-gray-700"},U={key:0},Y={key:0},z=["innerHTML"],q={class:"text-gray-600 text-xs"},G={class:"mb-1 text-sm text-gray-700 font-bold"},J={key:1},K=["innerHTML"],Q={class:"text-gray-600 text-xs"},X={class:"mb-1 text-sm text-gray-700 font-bold"},Z={key:0},$={key:1},ee={key:1,class:"text-xs text-gray-500"};function te(l,D,f,t,p,m){const g=H("router-link");return i(),r("div",null,[n("div",P,[n("div",j,[n("div",O,[n("div",null,[n("span",R,o(l.$t("general.notification",2)),1)])]),t.notifications!=null&&t.notifications.length>0?(i(),r("div",U,[(i(!0),r(M,null,W(t.notifications,(s,h)=>(i(),r("div",{key:h},[s.type=="Partial"?(i(),r("div",Y,[T(g,{to:{name:"ViewAccountPendingTransactions",params:{address:s.address}},onClick:w=>t.updateDefaultAccount(s.address),class:"flex items-center border border-gray-100 w-full p-5 mb-3 text-tsm hover:bg-blue-50 transition-all duration-300"},{default:C(()=>[n("div",{innerHTML:t.toSvg(s.address,40,t.themeStyleConfig),class:"mr-2"},null,8,z),n("div",q,[n("div",G,o(t.walletState.currentLoggedInWallet?t.walletState.currentLoggedInWallet.convertAddressToNamePretty(s.address,!0):""),1),v(" "+o(s.label)+" "+o(l.$t("notification.pendingSignature",{time:t.relativeTime(s.timestamp)})),1)])]),_:2},1032,["to","onClick"])])):N("v-if",!0),s.type=="Namespace"?(i(),r("div",J,[T(g,{to:{name:"ViewServicesNamespaceExtend",params:{address:t.Helper.createAddress(s.address).pretty(),namespaceId:s.id}},class:"flex items-center border border-gray-100 w-full p-5 mb-3 text-tsm hover:bg-blue-50 transition-all duration-300"},{default:C(()=>[n("div",{innerHTML:t.toSvg(s.address,40,t.themeStyleConfig),class:"mr-2"},null,8,K),n("div",Q,[n("div",X,o(t.walletState.currentLoggedInWallet.convertAddressToNamePretty(s.address,!0)),1),v(" "+o(l.$t("general.namespace"))+" ",1),n("b",null,o(s.label),1),v(),t.currentTimestamp()>s.timestamp?(i(),r("span",Z,"has expired")):(i(),r("span",$,o(l.$t("notification.isExpiring",{time:t.relativeTime(s.timestamp)})),1))])]),_:2},1032,["to"])])):N("v-if",!0)]))),128))])):(i(),r("div",ee,o(l.$t("notification.noNotification")),1))])])])}const ne=I(B,[["render",te],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/dashboard/views/ViewNotification.vue"]]);export{ne as default};
