import{_ as be,c as p,A as ke,g as r,bc as pe,n as A,y as we,r as N,o,f as a,e as t,s as d,h as i,t as m,i as c,l as x,a as w,b as G}from"./index-2c45a7ef.js";import{T as ge}from"./TextInputClean-d9b842de.js";import{c as Te}from"./functions-edc91899.js";import{S as Z}from"./swapUtils-5d1d181a.js";import{_ as _e}from"./eth-aa063e38.js";import{_ as Se}from"./address-ae442d6a.js";import{B as Ce,_ as J}from"./icon-connected-2828e2ba.js";import"./jspdf.es.min-59d0d4fd.js";import"./qrcode-c87bed80.js";const He={name:"ViewServicesMainnetSwapCheckSiriusToETH",components:{TextInputClean:ge},setup(){const y=p(()=>ke.nativeToken.label),s=r(!0);window.ethereum&&(window.ethereum.isMetaMask||(s.value=!1));let f=new pe(A.chainNetworkName);f.init();const e=r(""),M=r("");(async()=>{try{const n=await Z.fetchTokenServiceInfo(f.swap_IN_SERVICE_URL,"xpx");n.status==200?(M.value=n.data.ethInfo.scAddress,e.value=n.data.ethInfo.sinkAddress,b.value=""):b.value="Swapping service is temporary not available. Please try again later"}catch{b.value="Swapping service is temporary not available. Please try again later"}})();const V="^[0-9A-Za-z]{64}$",l=r(""),_=p(()=>!l.value.match(V)&&l.value.length>0);let S=f.ETHChainId,u=f.ETHNetworkName;const R=r(!1),C=r(!1),v=r(null),K=r(""),Q=Z.getOutgoing_ETHCheckStatus_URL(f.swap_IN_SERVICE_URL),W=f.ETHScanUrl,X=p(()=>W+k.value);let g;typeof window.ethereum<"u"?(g=new Ce(window.ethereum),g.getSigner(),R.value=!0,C.value=!!ethereum.isConnected(),ethereum.request({method:"eth_accounts"}).then(j).catch(n=>{console.error(n)}),ethereum.request({method:"eth_chainId"}).then(n=>{D(n)}).catch(n=>{console.error(n)}),ethereum.on("accountsChanged",Y),ethereum.on("chainChanged",n=>{D(n)})):console.log("MetaMask not installed");function j(n){n.length===0?v.value="":n[0]!==v.value&&(v.value=n[0]),C.value=!!ethereum.isConnected()}function Y(n){window.ethereum.isMetaMask&&(n.length===0?v.value="":n[0]!==v.value&&(v.value=n[0],b.value="")),C.value=!!ethereum.isConnected()}function D(n){K.value=n,S===parseInt(n)?H.value="":H.value="Please select "+u+" on MetaMask to swap"}const $=()=>{window.ethereum.isMetaMask==null?s.value=!1:(s.value=!0,ethereum.request({method:"eth_requestAccounts"}).then(j).catch(n=>{n.code===4001?console.log("Please connect to MetaMask."):n.code=="-32002"&&(b.value="Please click on MetaMask extension to approve connection")}))},L=r(!1),U=r(!1),B=r(!1),q=r(!1),ee=r(!1),te=r(!1),se=r(!1),ne=we(),re=n=>{let h=document.getElementById(n).getAttribute("copyValue"),T=document.getElementById(n).getAttribute("copySubject");Te(h),ne.add({severity:"info",summary:T+" copied",detail:h,group:"br-custom",life:3e3})},F=r(1),oe=r(!1),ae=r(!1),ie=r(!0),le=r(""),H=r(""),b=r(""),de=p(()=>!(!H.value&&!(_.value&&l.value.length>0)&&l.value.length>0)),E=r(!1),ce=()=>{F.value=2,setTimeout(()=>L.value=!0,1e3),setTimeout(()=>{(async()=>await fe())()},2e3)};let ue=A.currentNetworkProfile.chainExplorer.url+"/"+A.currentNetworkProfile.chainExplorer.hashRoute+"/";const me=p(()=>ue+l.value),xe=r(!1),I=r(!1),P=r(!1),k=r(!1),O=r(!1),z=r(!0),fe=async()=>{l.value;try{const n=await fetch(Q+l.value,{method:"GET",headers:{"Content-Type":"application/json"}});if(U.value=!0,n.status==200){const h=await n.json();k.value=h.fulfillTransaction,setTimeout(async()=>{B.value=!0,await ve()||(P.value=!0),setTimeout(async()=>{setTimeout(()=>q.value=!0,1e3),setTimeout(()=>z.value=!1,1e3)},1e3)},1e3)}else E.value=!0}catch{E.value=!0}},ve=async()=>{try{let n=await g.getTransactionReceipt(k.value),h=await g.getTransaction(k.value),T=!1;return g.on("pending",ye=>{ye===k.value&&(T=!0)}),T?(O.value=!0,!0):n&&n.status===1&&h.to.toLowerCase()==M.value.toLowerCase()?!0:!n&&!h?(I.value=!0,!1):(xe.value=!0,!1)}catch{return I.value=!0,!1}},he=p(()=>P.value?I.value?"Transaction is not found":"Transaction has failed":O.value?"ETH transaction is still pending. Please wait a few more moment":"ETH transaction is successful");return{err:H,isInstallMetamask:R,connectMetamask:$,isMetamaskConnected:C,currentAccount:v,copy:re,currentPage:F,isDisabledValidate:ie,siriusAddress:le,showSiriusAddressErr:oe,disableSiriusAddress:ae,sendRequest:ce,isDisabledCheck:de,step1:L,step2:U,step3:B,step4:q,step5:ee,step6:te,step7:se,siriusTxnLink:me,serviceErr:b,verifyMetaMaskPlugin:s,showTxnHashError:_,siriusTxnHash:l,isInvalidSiriusTxnHash:E,isInvalidRemoteTxnHash:P,remoteTxnLink:X,remoteTxnHash:k,txtRemoteTxnSummary:he,isDisabled:z,currentNativeTokenName:y}}},Me={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},Ee={class:"mt-6 p-6 border filter shadow-lg text-center"},Ie={class:"flex my-10"},Pe={class:"flex-none"},Ae={class:"flex border border-gray-300 rounded-md filter shadow-md"},Ne={class:"flex-none"},Ve={class:"flex border border-gray-300 rounded-md filter shadow-md"},Re={class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},je={key:0},De={key:0,class:"error error_box mb-5"},Le={key:1,class:"bg-yellow-200 text-yellow-900 text-tsm p-3 mb-5 rounded-2xl"},Ue={class:"my-2"},Be={href:"https://bit.ly/3mVayCu",target:"_new",class:"text-blue-primary"},qe={key:2,class:"error error_box mb-5"},Fe={key:3,class:"error error_box mb-5"},Oe={class:"mb-5 mt-3 text-left"},ze={class:"mb-5 md:flex md:justify-between border border-gray-200 rounded"},Ge={class:"flex justify-left"},Ze={class:"text-left flex items-center"},Je={class:"font-bold text-black text-tsm break-all mr-2"},Ke={key:0,class:"border-l border-gray-200 text-green-500 font-semibold text-xxs w-16 lg:w-20 flex items-center justify-center uppercase"},Qe={class:"border-l border-gray-200 text-blue-primary text-tsm font-bold w-16 lg:w-20 flex justify-center items-center"},We={key:0},Xe={key:1},Ye={class:"md:hidden"},$e={key:0,class:"border-t border-gray-200 text-green-500 font-semibold text-xxs uppercase p-2"},et={class:"border-t border-gray-200 text-blue-primary text-tsm font-bold p-3"},tt={key:0},st={key:1},nt={class:"mt-10 text-center"},rt=["disabled"],ot={key:1},at={class:"text-lg my-7"},it={class:"flex border-b border-gray-300 p-3"},lt={class:"flex-none"},dt={class:"flex h-full justify-center"},ct={class:"flex border-b border-gray-300 p-3"},ut={class:"flex-none"},mt={class:"flex h-full justify-center"},xt={key:0,class:"mt-2"},ft={key:0,class:"bg-yellow-100 py-2 px-5 mt-1 rounded-xl flex"},vt=["href","copyValue"],ht={class:"flex-none"},yt={key:1,class:"mt-2 text-sm text-gray-700"},bt={class:"flex border-b border-gray-300 p-3"},kt={class:"flex-none"},pt={class:"flex h-full justify-center"},wt={class:"flex border-b border-gray-300 p-3"},gt={class:"flex-none"},Tt={class:"flex h-full justify-center"},_t={key:0,class:"mt-2"},St={key:0,class:"bg-yellow-100 py-2 px-5 mt-1 rounded-xl flex"},Ct=["href","copyValue"],Ht={class:"flex-none"},Mt={key:1,class:"mt-2 text-xs md:text-sm text-gray-700"},Et={class:"mt-10 text-center"};function It(y,s,f,e,M,V){const l=N("font-awesome-icon"),_=N("TextInputClean"),S=N("router-link");return o(),a("div",null,[t("div",Me,[t("div",Ee,[s[33]||(s[33]=t("div",{class:"text-md"},"Main Network Swap",-1)),s[34]||(s[34]=t("div",{class:"text-xs my-3 mb-5 sm:mb-10"},[t("img",{src:_e,class:"mr-2 h-5 inline-block"}),d("Check swap from Proximax Sirius Chain to ETH")],-1)),t("div",Ie,[t("div",Pe,[t("div",Ae,[t("div",{class:i(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage>=1?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:i(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=1?"text-white":"text-gray-400"}`])},"1",2)],2),s[10]||(s[10]=t("div",{class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},"Input Information",-1))])]),s[11]||(s[11]=t("div",{class:"flex-grow self-center md:mx-4 h-0.5 bg-gray-100"},null,-1)),t("div",Ne,[t("div",Ve,[t("div",{class:i(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage>=2?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:i(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=2?"text-white":"text-gray-400"}`])},"2",2)],2),t("div",Re,m(y.$t("swap.validation")),1)])])]),e.currentPage==1?(o(),a("div",je,[s[28]||(s[28]=t("div",{class:"text-lg my-7 font-bold"},"Check Swap Status",-1)),e.isInstallMetamask?c("",!0):(o(),a("div",De,m(y.$t("swap.noMetamask")),1)),e.verifyMetaMaskPlugin?c("",!0):(o(),a("div",Le,[s[15]||(s[15]=d("Please make sure there is no other crypto wallet extension currently being enabled except ")),s[16]||(s[16]=t("b",null,"MetaMask",-1)),s[17]||(s[17]=d(".")),t("div",Ue,[s[13]||(s[13]=d("Refer to the ")),t("a",Be,[s[12]||(s[12]=d("walkthrough")),x(l,{icon:"external-link-alt",class:"text-blue-primary w-3 h-3 self-center inline-block ml-1"})]),s[14]||(s[14]=d(" for more details."))]),s[18]||(s[18]=d("Please refresh this page after disabling other wallet extensions."))])),e.serviceErr!=""?(o(),a("div",qe,m(e.serviceErr),1)):c("",!0),e.err!=""?(o(),a("div",Fe,m(e.err),1)):c("",!0),s[29]||(s[29]=t("p",{class:"font-bold text-xs text-left mb-1"},"Type",-1)),t("div",Oe,[t("button",{class:"border px-3 py-2 w-20 text-blue-primary font-bold rounded-l cursor-pointer hover:border-blue-primary hover:bg-blue-50 transition-all duration-200",onClick:s[0]||(s[0]=u=>y.$router.push({name:"ViewServicesMainnetSwapCheckETHToSirius"}))},"In"),s[19]||(s[19]=t("button",{class:"bg-blue-primary px-3 py-2 w-20 text-white font-bold rounded-r border border-blue-primary cursor-auto"},"Out",-1)),s[20]||(s[20]=d()),s[21]||(s[21]=t("span",{class:"text-gray-500 ml-3 text-tsm"},"From Sirius to ETH",-1))]),t("div",ze,[t("div",Ge,[s[23]||(s[23]=t("div",{class:"w-18 flex items-center justify-center py-5 sm:h-20"},[t("img",{src:Se,class:"w-8 h-8 inline-block"})],-1)),t("div",Ze,[t("div",null,[s[22]||(s[22]=t("div",{class:"text-xxs uppercase text-blue-primary font-bold mb-1"},"From MetaMask Address",-1)),t("div",Je,m(e.isMetamaskConnected&&e.currentAccount?e.currentAccount:"Not connected"),1)])])]),t("div",{class:i(["md:grid hidden",e.currentAccount?"grid-cols-2":"grid-cols-1"])},[e.currentAccount?(o(),a("div",Ke,s[24]||(s[24]=[t("div",null,[t("img",{src:J,class:"inline-block"}),t("div",null,"Connected")],-1)]))):c("",!0),t("div",Qe,[e.isInstallMetamask?(o(),a("div",We,[e.currentAccount?(o(),a("div",{key:1,class:"cursor-pointer",onClick:s[2]||(s[2]=u=>e.connectMetamask())},"Change")):(o(),a("div",{key:0,class:"cursor-pointer",onClick:s[1]||(s[1]=u=>e.connectMetamask())},"Connect"))])):(o(),a("div",Xe,s[25]||(s[25]=[t("a",{href:"https://metamask.io/",target:"_new"},"Download",-1)])))])],2),t("div",Ye,[e.currentAccount?(o(),a("div",$e,s[26]||(s[26]=[t("div",{class:"flex items-center justify-center"},[t("img",{src:J,class:"inline-block mr-2 w-4 h-4"}),d(" Connected ")],-1)]))):c("",!0),t("div",et,[e.isInstallMetamask?(o(),a("div",tt,[e.currentAccount?(o(),a("div",{key:1,class:"cursor-pointer",onClick:s[4]||(s[4]=u=>e.connectMetamask())},"Change")):(o(),a("div",{key:0,class:"cursor-pointer",onClick:s[3]||(s[3]=u=>e.connectMetamask())},"Connect"))])):(o(),a("div",st,s[27]||(s[27]=[t("a",{href:"https://metamask.io/",target:"_new"},"Download",-1)])))])])]),x(_,{placeholder:"Sirius Transaction Hash",errorMessage:"Please key in valid transaction hash",modelValue:e.siriusTxnHash,"onUpdate:modelValue":s[5]||(s[5]=u=>e.siriusTxnHash=u),showError:e.showTxnHashError,class:"w-full inline-block mr-2"},null,8,["modelValue","showError"]),t("div",nt,[t("button",{onClick:s[6]||(s[6]=u=>y.$router.push({name:"ViewServicesMainnetSwap"})),class:"text-black font-bold text-xs mr-5 focus:outline-none disabled:opacity-50"},"Cancel"),t("button",{type:"submit",class:"default-btn focus:outline-none disabled:opacity-50",disabled:e.isDisabledCheck,onClick:s[7]||(s[7]=u=>e.sendRequest())},"Check Status",8,rt)])])):c("",!0),e.currentPage==2?(o(),a("div",ot,[t("div",at,[t("div",{class:i(["font-bold text-left text-xs md:text-sm",e.step1?"text-gray-700":"text-gray-300"])},"Step 1: Check Sirius transaction status",2),t("div",it,[t("div",lt,[t("div",{class:i(["rounded-full border w-6 h-6 transition-all duration-500",e.step1?"border-blue-primary":"border-gray-300"])},[t("div",dt,[x(l,{icon:"check",class:i([e.step1?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block transition-all duration-500"])},null,8,["class"])])],2)]),t("div",{class:i(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step1?"text-gray-700":"text-gray-300"])},"Checking transaction status",2)]),t("div",ct,[t("div",ut,[t("div",{class:i(["rounded-full border w-6 h-6 transition-all duration-500",e.isInvalidSiriusTxnHash?"border-red-primary":e.step2?"border-blue-primary":"border-gray-300"])},[t("div",mt,[e.isInvalidSiriusTxnHash?(o(),w(l,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block transition-all duration-500"})):(o(),w(l,{key:1,icon:"check",class:i([e.step2?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block transition-all duration-500"])},null,8,["class"]))])],2)]),t("div",{class:i(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step2?"text-gray-700":"text-gray-300"])},[d(m(e.isInvalidSiriusTxnHash?"Transaction is not found.":"Sirius transaction is successful:")+" ",1),!e.isInvalidSiriusTxnHash&&e.step2?(o(),a("div",xt,[e.siriusTxnHash?(o(),a("div",ft,[t("a",{href:e.siriusTxnLink,target:"_new",class:i([e.isInvalidSiriusTxnHash?"text-gray-300":"text-blue-primary","flex-grow break-all text-tsm self-center hover:underline"]),id:"siriusTx",copyValue:e.siriusTxnHash,copySubject:"Sirius transaction hash"},[x(l,{icon:"external-link-alt",class:"text-blue-primary w-3 h-3 self-center inline-block mr-2"}),d(m(e.siriusTxnHash),1)],10,vt),t("div",ht,[e.step2?(o(),w(l,{key:0,icon:"copy",onClick:s[8]||(s[8]=u=>e.copy("siriusTx")),class:"w-5 h-5 text-blue-primary cursor-pointer self-center ml-3 absoltue top-2 hover:opacity-90 duration-800 transition-all"})):c("",!0)])])):c("",!0)])):c("",!0),e.isInvalidSiriusTxnHash&&e.step2?(o(),a("div",yt,[d(" Sirius transaction hash is not found in swap service. Please initiate new swap from "+m(e.currentNativeTokenName)+" to ETH ",1),x(S,{to:{name:"ViewServicesMainnetSwapEthOptions"},class:"bg-blue-primary text-white py-2 px-5 rounded-2xl w-24 block text-center my-3 font-bold"},{default:G(()=>s[30]||(s[30]=[d("Swap")])),_:1})])):c("",!0)],2)]),t("div",{class:i(["font-bold text-left text-xs md:text-sm mt-4",e.step3?"text-gray-700":"text-gray-300"])},"Step 2: Check ETH transaction status",2),t("div",bt,[t("div",kt,[t("div",{class:i(["rounded-full border w-6 h-6",e.step3?"border-blue-primary":"border-gray-300"])},[t("div",pt,[x(l,{icon:"check",class:i([e.step3?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"])])],2)]),t("div",{class:i(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step3?"text-gray-700":"text-gray-300"])},"Checking transaction status",2)]),t("div",wt,[t("div",gt,[t("div",{class:i(["rounded-full border w-6 h-6 transition-all duration-500",e.isInvalidRemoteTxnHash&&e.step4?"border-red-primary":e.step4?"border-blue-primary":"border-gray-300"])},[t("div",Tt,[e.isInvalidRemoteTxnHash&&e.step4?(o(),w(l,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block transition-all duration-500"})):(o(),w(l,{key:1,icon:"check",class:i([e.step4?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block transition-all duration-500"])},null,8,["class"]))])],2)]),t("div",{class:i(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step4?"text-gray-700":"text-gray-300"])},[d(m(e.txtRemoteTxnSummary)+" ",1),!e.isInvalidRemoteTxnHash&&e.step4?(o(),a("div",_t,[e.remoteTxnHash?(o(),a("div",St,[t("a",{href:e.remoteTxnLink,target:"_new",class:i([e.isInvalidRemoteTxnHash?"text-gray-300":"text-blue-primary","flex-grow break-all text-tsm self-center hover:underline"]),id:"remoteTx",copyValue:e.remoteTxnHash,copySubject:"ETH transaction hash"},[x(l,{icon:"external-link-alt",class:"text-blue-primary w-3 h-3 self-center inline-block mr-2"}),d(m(e.remoteTxnHash),1)],10,Ct),t("div",Ht,[e.step4?(o(),w(l,{key:0,icon:"copy",onClick:s[9]||(s[9]=u=>e.copy("remoteTx")),class:"w-5 h-5 text-blue-primary cursor-pointer self-center ml-3 absoltue top-2 hover:opacity-90 duration-800 transition-all"})):c("",!0)])])):c("",!0)])):c("",!0),e.isInvalidRemoteTxnHash&&e.step4?(o(),a("div",Mt,s[31]||(s[31]=[d(" ETH transaction hash is not found. Please contact our "),t("a",{href:"https://t.me/proximaxhelpdesk",target:"_new",class:"text-blue-primary font-bold underline"},"helpdesk",-1),d(". ")]))):c("",!0)],2)])]),t("div",Et,[x(S,{to:{name:"ViewServicesMainnetSwap"},class:i(["default-btn focus:outline-none w-40 inline-block",e.isDisabled?"opacity-50":""]),is:e.isDisabled?"span":"router-link",tag:"button"},{default:G(()=>s[32]||(s[32]=[d("Done")])),_:1},8,["class","is"])])])):c("",!0)])])])}const Bt=be(He,[["render",It]]);export{Bt as default};
