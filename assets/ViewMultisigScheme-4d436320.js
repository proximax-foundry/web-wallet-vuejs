import{w as h,A as L,H as re,s as ie,n as M,_ as le}from"./index-5f2b4e3e.js";import"./vue-86063517.js";import{d}from"./tsjs-xpx-chain-sdk-84426b6a.js";import{A as se,a as ne}from"./AccountTabs-d53ed538.js";import{c as ae}from"./functions-3b5b4af7.js";import{u as ce}from"./primevue-e09f7e84.js";import{u as me}from"./vue-i18n-728f748b.js";import{u as pe}from"./vue-router-21fffbbf.js";import{r as C,c as x,w as de,B as A,o as u,z as v,A as r,a as _,m as W,l as P,g as c,aG as H,e as f,p as S,bp as V}from"./@vue-a9ecc9f1.js";import{_ as ue}from"./chevron_left-0423cb29.js";import{_ as ve}from"./proximax-logo-ecfc3767.js";import{_ as fe}from"./icon-multisig-2a7c5e5f.js";import{a as ge}from"./icon-key-5b3f7dda.js";import"./rxjs-1250b26d.js";import"./@js-joda-d98eb16f.js";import"./tslib-8dbab242.js";import"./crypto-js-e64ac54c.js";import"./crypto-browserify-4fd8cccd.js";import"./randombytes-685e9383.js";import"./node-stdlib-browser-23a8bc7f.js";import"./buffer-6d367910.js";import"./base64-js-50a5cdf9.js";import"./ieee754-44f7831e.js";import"./process-2209b2b3.js";import"./safe-buffer-c463177b.js";import"./create-hash-92c04a28.js";import"./inherits-804453d8.js";import"./md5.js-8d474739.js";import"./hash-base-bb85fc42.js";import"./readable-stream-2241ee9e.js";import"./events-86ccc6d8.js";import"./util-06f7ff32.js";import"./is-arguments-86164331.js";import"./has-tostringtag-7c6352d6.js";import"./has-symbols-cd7870b9.js";import"./call-bind-9e7f09da.js";import"./get-intrinsic-f35014ba.js";import"./has-proto-8ede3a55.js";import"./function-bind-68631a08.js";import"./has-ab8e2922.js";import"./is-generator-function-06dfaf9d.js";import"./which-typed-array-cf6b6a29.js";import"./for-each-f57c5052.js";import"./is-callable-7492318c.js";import"./available-typed-arrays-61974ec7.js";import"./gopd-bab4d6bd.js";import"./is-typed-array-037eef20.js";import"./util-deprecate-c3aabb3c.js";import"./string_decoder-ef7b01fe.js";import"./ripemd160-58dcfa02.js";import"./sha.js-cea3da2e.js";import"./cipher-base-aee0e03d.js";import"./stream-browserify-7496a08f.js";import"./create-hmac-e8b5ea4a.js";import"./browserify-sign-a708a95f.js";import"./browserify-rsa-bfbdcbb6.js";import"./bn.js-1ae23332.js";import"./elliptic-75e883ee.js";import"./minimalistic-assert-4cc49674.js";import"./minimalistic-crypto-utils-6f869a51.js";import"./brorand-03f0f79d.js";import"./hash.js-4f5dfe73.js";import"./hmac-drbg-87799258.js";import"./parse-asn1-465c125b.js";import"./asn1.js-405e93e4.js";import"./safer-buffer-2ac6237e.js";import"./evp_bytestokey-e91543fa.js";import"./browserify-aes-ce20a0e6.js";import"./buffer-xor-87a7236a.js";import"./pbkdf2-e2ae8643.js";import"./browserify-cipher-c4c37ca3.js";import"./browserify-des-3f7e64d9.js";import"./des.js-d262604a.js";import"./diffie-hellman-c8260aab.js";import"./miller-rabin-de27bf02.js";import"./create-ecdh-ffe720e9.js";import"./public-encrypt-fc0568a2.js";import"./randomfill-2874e5f1.js";import"./mathjs-2a513dae.js";import"./@babel-484168fe.js";import"./typed-function-4896e4f1.js";import"./decimal.js-d133ee8e.js";import"./complex.js-cf2520e8.js";import"./fraction.js-39e7906a.js";import"./javascript-natural-sort-c4dd0c27.js";import"./escape-latex-c8a96e7a.js";import"./seedrandom-c8f991ad.js";import"./tiny-emitter-56d49cfd.js";import"./js-sha3-d7d4f583.js";import"./crypto-random-string-d158262e.js";import"./jose-92e5544c.js";import"./vue-loading-overlay-b89251b1.js";import"./jspdf-30014160.js";import"./fflate-8981c52c.js";import"./vue-debounce-3bbbf8c6.js";import"./mitt-f7ef348c.js";/* empty css                   */import"./maska-6f10db43.js";import"./@fortawesome-014b81f2.js";import"./vue3-blocks-tree-e53499e3.js";import"./@noble-f8eff84a.js";import"./utf8-c941a4a0.js";import"./bip39-936aefa9.js";import"./axios-b48d2c29.js";import"./flatbuffers-edc4f8d7.js";import"./ws-0a714537.js";import"./@intlify-16888cd3.js";import"./jdenticon-e4458e79.js";import"./TextInput-0d73475f.js";import"./TextInputClean-8dbf8109.js";const be={name:"ViewMultisigScheme",components:{AccountComponent:se,AccountTabs:ne},props:{address:String},setup(n){const m=ce(),{t:g}=me(),o=C(!1),p=h.currentLoggedInWallet,b=x(()=>{if(!p)return null;let e=p.accounts.find(t=>t.address==n.address)||p.others.filter(t=>t.type==="MULTISIG").find(t=>t.address==n.address);return e||null}),s=x(()=>b.value?b.value.multisigInfo.filter(e=>e.level>=0):[]),T=L.networkType,y=e=>{let t=d.Address.createFromPublicKey(e,T);try{return t}catch{}},B=e=>e>0?g("general.multisig").toUpperCase()+"-":g("general.cosigner")+"-",k=e=>p.accounts.find(t=>t.address==y(e).plain()),i=(e,t)=>{const l=d.PublicAccount.createFromPublicKey(e,T).address.plain(),a=h.currentLoggedInWallet.contacts.find(oe=>oe.address==l);return a?a.name:k(e)?k(e).name:B(t)+y(e).plain().substr(-4)},w=e=>s.value.find(t=>t.publicKey==e).cosignaturies.length,R=(e,t)=>{let l=d.Address.createFromRawAddress(e).plain();return t?p.accounts.find(a=>a.address==l)||p.others.find(a=>a.address==l):p.accounts.find(a=>a.address==l)},U=e=>{let t=d.Address.createFromRawAddress(e).plain();return!!h.currentLoggedInWallet.others.find(l=>l.address==t)},z=e=>s.value.find(t=>t.publicKey==e).cosignaturies,N=e=>s.value.find(t=>t.publicKey==e).minApproval,I=e=>s.value.find(t=>t.publicKey==e).minRemoval,K=e=>{let t=p.accounts.find(l=>l.publicKey==e)?p.accounts.find(l=>l.publicKey==e):p.others.find(l=>l.publicKey==e);return t?t.balance:-1},D=e=>{let t=[],l=[];for(let a=0;a<e.length;a++)l=z(e[a]),t.push({label:y(e[a]).pretty(),name:i(e[a],w(e[a])),balance:K(e[a]),numApproveTx:N(e[a]),numRemoval:I(e[a]),children:D(l)});return t};let F={label:"",name:"",balance:0,numApproveTx:0,numRemoval:0,children:[]};s.value[0]&&(F={label:y(s.value[0].publicKey).pretty(),name:i(s.value[0].publicKey,s.value[0].cosignaturies.length),balance:K(s.value[0].publicKey),numApproveTx:N(s.value[0].publicKey),numRemoval:I(s.value[0].publicKey),children:D(s.value[0].cosignaturies)}),de(()=>b,e=>{s.value[0]&&(F={label:y(s.value[0].publicKey).pretty(),name:i(s.value[0].publicKey,s.value[0].cosignaturies.length),balance:K(s.value[0].publicKey),numApproveTx:N(s.value[0].publicKey),numRemoval:I(s.value[0].publicKey),children:D(s.value[0].cosignaturies)})},{deep:!0});let E=x(()=>b.value?b.value.getDirectParentMultisig().length>0:!1),G=e=>{let t=e.slice(0,13),l=e.slice(35,46);return t+"..."+l};const O=x(()=>L.nativeToken.label),Y=x(()=>L.nativeToken.divisibility),q=e=>{let l=re.toCurrencyFormat(e,Y.value).split(".");return l[1]!=null?{left:l[0],right:l[1]}:{left:l[0],right:null}},J=e=>{let t=document.getElementById(e).getAttribute("copyValue"),l=document.getElementById(e).getAttribute("copySubject");ae(t),m.add({severity:"info",detail:l+" "+g("general.copied"),group:"br-custom",life:3e3})},Q=e=>{try{return d.Address.createFromRawAddress(e).pretty()}catch{}},X=C(0),Z=C(1),$=C(!1),j=pe(),ee=e=>{h.currentLoggedInWallet.accounts.find(t=>t.name==e)&&h.currentLoggedInWallet.setDefaultAccountByName(e)},te=e=>(h.currentLoggedInWallet.accounts.find(l=>l.address==e)||h.currentLoggedInWallet.others.find(l=>l.address==e)).name;return{isHover:o,navigate:e=>{if(R(e,!0)&&!o.value&&!U(e)?(ee(te(d.Address.createFromRawAddress(e).plain())),ie(d.Address.createFromRawAddress(e).plain()),j.push({name:"ViewAccountDetails",params:{address:d.Address.createFromRawAddress(e).plain()}})):R(e,!0)&&j.push({name:"ViewAccountDetails",params:{address:d.Address.createFromRawAddress(e).plain()}}),!M.currentNetworkProfile)return"";R(e,!0)||window.open(M.currentNetworkProfile.chainExplorer.url+"/"+M.currentNetworkProfile.chainExplorer.addressRoute+"/"+e)},viewType:X,viewType2:Z,collapsable:$,findAccountWithAddress:R,splitBalance:q,currentNativeTokenName:O,displayAddress:G,isMultisig:E,currentAccount:b,graph:F,copy:J,prettyAddress:Q}}},ye={class:"flex cursor-pointer"},he=r("img",{src:ue},null,-1),_e={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},we={class:"p-6 border-2 border-t-0 filter shadow-lg mb-6"},xe={class:"flex cursor-pointer"},Ae={class:"border-2 border-blue-primary p-1 mb-3 w-16 text-white bg-blue-primary text-xs text-center font-semibold"},Te=["onClick"],ke={class:"text-xs text-left text-blue-500 font-bold"},Re={class:"flex gap-1"},Ce=["id","copyValue","copySubject"],Se={key:0,class:"flex"},Ve={class:"text-xs font-bold"},Be={key:0,class:"text-xs font-bold"},Ne={class:"text-xxs mt-0.5"},Ie={class:"ml-1 text-xs font-bold"},Ke=r("img",{src:ve,class:"h-4 w-4"},null,-1),De={class:"flex gap-3"},Fe={class:"text-xxs text-gray-500"},Le={class:"text-xxs text-gray-500"},Me={class:"flex gap-1 ml-auto"},We=["title"],je=r("img",{src:fe,class:"h-4 w-5 mr-1",style:{transform:"rotateY(180deg)"}},null,-1),Pe=[je],He=["title"],Ue=r("img",{src:ge,class:"h-3 w-3 mr-1"},null,-1),ze=[Ue],Ee={class:"font-semibold"},Ge={class:"text-left py-3 text-xs pl-4"},Oe={class:"text-left py-3 text-xs pl-4"},Ye={key:0,class:"text-left py-3 text-xs pl-4"},qe={key:1,class:"text-left py-3 text-xs pl-4"},Je={key:0,class:"text-left py-3 text-xs pl-4"},Qe={key:1,class:"text-left py-3 text-xs pl-4"},Xe={class:"text-left py-3 text-xs pl-4"};function Ze(n,m,g,o,p,b){const s=A("router-link"),T=A("AccountComponent"),y=A("AccountTabs"),B=A("font-awesome-icon"),k=A("blocks-tree");return u(),v("div",null,[r("div",ye,[he,_(s,{to:{name:"ViewDashboard"},class:"text-blue-primary text-xs mt-0.5"},{default:W(()=>[P(c(n.$t("general.back")),1)]),_:1})]),r("div",_e,[_(T,{address:g.address,class:"mb-6"},null,8,["address"]),_(y,{address:g.address,selected:"multisig"},null,8,["address"]),r("div",we,[r("div",xe,[_(s,{to:{name:"ViewMultisigHome",params:{address:g.address}},class:"border-2 border-blue-primary p-1 mb-3 w-16 text-blue-primary text-xs text-center font-semibold"},{default:W(()=>[P(c(n.$t("general.multisig")),1)]),_:1},8,["to"]),r("div",Ae,c(n.$t("general.scheme")),1)]),r("div",{class:"overflow-auto w-full border-2",style:H(`${o.viewType2==1?" transform: rotate(180deg);":""}`)},[_(k,{data:o.graph,horizontal:o.viewType==0,collapsable:o.collapsable,props:{label:"label",name:"name",balance:"balance",numApproveTx:"numApproveTx",numRemoval:"numRemoval",children:"children"}},{node:W(({data:i})=>[r("div",{class:"flex flex-col justify-center p-1.5 h-20 cursor-pointer",onClick:w=>o.navigate(o.prettyAddress(i.label)),style:H(`${o.viewType2==1?" transform: rotate(180deg);":""}width: 16.5rem`)},[r("div",ke,c(i.name),1),r("div",Re,[r("div",{id:i.label,copyValue:o.prettyAddress(i.label),copySubject:n.$t("general.address"),class:"font-bold text-left text-xs mt-0.5"},c(o.displayAddress(i.label)),9,Ce),_(B,{icon:"copy",title:n.$t("general.copy"),onMouseover:m[0]||(m[0]=w=>o.isHover=!0),onMouseout:m[1]||(m[1]=w=>o.isHover=!1),onClick:w=>o.copy(i.label),class:"w-5 h-5 text-blue-primary cursor-pointer"},null,8,["title","onClick"])]),i.balance!=-1?(u(),v("div",Se,[r("div",Ve,c(o.splitBalance(i.balance).left),1),o.splitBalance(i.balance).right!=null?(u(),v("div",Be,".")):f("v-if",!0),r("div",Ne,c(o.splitBalance(i.balance).right),1),r("div",Ie,c(o.currentNativeTokenName),1),Ke])):f("v-if",!0),r("div",De,[r("div",Fe,c(n.$t("multisig.approvalScheme",{approval:i.numApproveTx,maxApproval:i.children.length})),1),r("div",Le,c(n.$t("multisig.deletionScheme",{deletion:i.numRemoval,maxDeletion:i.children.length})),1),r("div",Me,[i.children.length>0?(u(),v("div",{key:0,class:"ml-auto bg-green-500 rounded-2xl",title:n.$t("general.multisigTitle")},Pe,8,We)):f("v-if",!0),i.children.length>0&&o.findAccountWithAddress(i.label)!=null?(u(),v("div",{key:1,class:"p-0.5 bg-purple-500 rounded-2xl",title:n.$t("general.ownerTitle")},ze,8,He)):f("v-if",!0)])])],12,Te)]),_:1},8,["data","horizontal","collapsable"])],4)]),r("div",Ee,c(n.$t("multisig.viewSettings")),1),r("div",null,[S(r("input",{name:"view-type",type:"radio",value:"0","onUpdate:modelValue":m[2]||(m[2]=i=>o.viewType=i),checked:!0},null,512),[[V,o.viewType]]),r("label",Ge,c(n.$t("multisig.horizontal")),1)]),S(r("input",{name:"view-type",type:"radio",value:"1","onUpdate:modelValue":m[3]||(m[3]=i=>o.viewType=i)},null,512),[[V,o.viewType]]),r("label",Oe,c(n.$t("multisig.vertical")),1),r("div",null,[S(r("input",{name:"view-type-2",type:"radio",value:"0","onUpdate:modelValue":m[4]||(m[4]=i=>o.viewType2=i),checked:!0},null,512),[[V,o.viewType2]]),o.viewType==0?(u(),v("label",Ye,c(n.$t("multisig.rightToLeft")),1)):f("v-if",!0),o.viewType==1?(u(),v("label",qe,c(n.$t("multisig.topToBottom")),1)):f("v-if",!0)]),S(r("input",{name:"view-type-2",type:"radio",value:"1","onUpdate:modelValue":m[5]||(m[5]=i=>o.viewType2=i)},null,512),[[V,o.viewType2]]),o.viewType==0?(u(),v("label",Je,c(n.$t("multisig.leftToRight")),1)):f("v-if",!0),o.viewType==1?(u(),v("label",Qe,c(n.$t("multisig.bottomToTop")),1)):f("v-if",!0),r("div",null,[r("input",{type:"checkbox",onClick:m[6]||(m[6]=i=>o.collapsable=!o.collapsable)}),r("label",Xe,c(n.$t("multisig.collapsible")),1)])])])}const rr=le(be,[["render",Ze],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/submodule/multisig/views/ViewMultisigScheme.vue"]]);export{rr as default};
