import{d as se,L as Ue,r as $,c as E,i as ee,o as k,b as M,m as P,v as le,e as l,t as _,f as U,y as ce,z as a,B as o,M as _e,O as te,j as xe,_ as we,x as ke,F as Ae,P as Le,Q as Re,R as Ke,W as ae,w as K,n as j,S as D,T as Oe,h as Ie,u as De,a as Y,H as O,A as qe,l as We,g as ze,k as ye,U as He}from"./index-f7254215.js";import{_ as je,a as Xe,b as Ze,c as Ge}from"./TxnSummary.vue_vue_type_script_setup_true_lang-18c8f207.js";import{_ as Qe}from"./SelectAccountAndContact.vue_vue_type_script_setup_true_lang-62f83858.js";import{_ as Je}from"./proximax-logo-ecfc3767.js";import{_ as Ye}from"./PasswordInput.vue_vue_type_script_setup_true_lang-6ec709bc.js";import{_ as et}from"./icon-red-x-a5511f99.js";import{_ as tt}from"./icon-green-tick-1b766454.js";import{T as me}from"./transactionState-aaca31bf.js";import"./jdenticon-module-93d43574.js";const at={key:0},lt={class:"flex justify-between"},st={class:"flex flex-col ml-2 text-left"},nt=l("div",{class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}}," Selected Asset",-1),ot={class:"mt-1 text-tsm font-bold"},rt={class:"mt-1 text-tsm font-bold"},it={class:"account-item"},ct={class:"flex justify-between"},ut={class:"mt-1 text-tsm font-bold"},dt={class:"mt-1 text-tsm font-bold"},mt=se({__name:"SelectInputAsset",props:{index:{type:Number,required:!0},assetOptions:{type:Object,required:!0},selectedAssets:{type:Object,required:!1}},emits:["select-asset","update:modelValue"],setup(n){const r=n,u=[{namespace:"prx.xpx",name:"XPX"},{namespace:"prx.metx",name:"METX"},{namespace:"xarcade.xar",name:"XAR"}],d=b=>{const f=u.find(w=>w.namespace==b);return f?f.name:b},{assetOptions:s,selectedAssets:i,index:m}=Ue(r),x=$(!1),R=E(()=>{const b=new Set(i.value.map(f=>f.id));return s.value.filter(f=>!b.has(f.id))}),V=async b=>{if(x.value)return;x.value=!0;const{first:f,last:w}=b,v=[];for(let p=f;p<w;p++)s.value[p].hasUpdated||v.push(new a.MosaicId(s.value[p].id));if(!v.length){x.value=!1;return}const A=await o.chainAPI.assetAPI.getMosaicsNames(v),y=await o.chainAPI.assetAPI.getMosaics(v);let g=0,T=0;const S=new Map;A.forEach((p,c)=>{S.set(p.mosaicId.toHex(),c)}),y.sort((p,c)=>{const L=S.get(p.mosaicId.toHex()),q=S.get(c.mosaicId.toHex());return L-q});for(let p=f;p<w;p++){if(!A[g])continue;const c=s.value.find(L=>L.id==A[g].mosaicId.toHex());c&&(c.namespace=A[g].names.length?A[g].names[0].name:"",c.balance=c.balance/Math.pow(10,y[T].divisibility),c.divisibility=y[T].divisibility,c.hasUpdated=!0,g++,T++)}x.value=!1},C=b=>{if(b==null){i.value.splice(m.value,1);return}i.value[m.value].balance=b.balance,i.value[m.value].id=b.id,i.value[m.value].namespace=b.namespace,i.value[m.value].divisibility=b.divisibility,i.value[m.value].amount="0"};return(b,f)=>{const w=ee("Dropdown");return k(),M("div",null,[P(w,{showClear:!0,modelValue:ce(i)[ce(m)],"onUpdate:modelValue":f[0]||(f[0]=v=>ce(i)[ce(m)]=v),style:{width:"100%"},options:R.value,filter:!0,filterFields:["id","namespace"],emptyFilterMessage:" ",placeholder:"Select Asset",virtualScrollerOptions:{lazy:!0,onLazyLoad:V,showLoader:!0,loading:x.value,delay:0,itemSize:38},onChange:f[1]||(f[1]=v=>{var A;C(v.value),b.$emit("update:modelValue",(A=v.value)==null?void 0:A.value)})},{value:le(v=>[v.value.id?(k(),M("div",at,[l("div",lt,[l("div",st,[nt,l("div",ot,_(d(v.value.namespace==""?v.value.id:v.value.namespace)),1)]),l("div",rt,"Balance: "+_(v.value.balance),1)])])):U("",!0)]),option:le(v=>[l("div",it,[l("div",ct,[l("div",ut,_(d(v.option.namespace==""?v.option.id:v.option.namespace)),1),l("div",dt,"Balance: "+_(v.option.balance),1)])])]),_:1},8,["modelValue","options","virtualScrollerOptions"])])}}}),vt={class:"border border-gray-200 px-2 py-1 rounded-md"},pt={class:"flex justify-between"},ft={class:"flex flex-col"},gt={class:"uppercase font-light text-gray-500 text-txs text-left mb-2"},yt={class:"flex w-full"},bt={key:0,src:Je,class:"h-5 w-5 mt-0.5"},ht=["value","data-maska","placeholder"],_t=["disabled"],xt=se({__name:"TransferInputClean",props:{modelValue:{type:String,required:!0},decimal:{type:Number,required:!0},placeholder:{type:String,required:!0},toolTip:{type:String,required:!1},disabled:{type:Boolean,required:!1},showError:{type:Boolean,required:!1},logo:{type:Boolean,required:!1},balance:{type:Number,required:!1}},emits:["update:modelValue","show-error","clickedMaxAvailable"],setup(n){const r=n,u=()=>{let s="0";return r.decimal>0&&(s=s+"."+"9".repeat(r.decimal)),s},d={preProcess:s=>s.replace(/,/g,""),postProcess:s=>{if(!s)return"";let i=0;return r.decimal>0&&(i=1+r.decimal-(s.includes(".")?s.length-s.indexOf("."):0)),Intl.NumberFormat("en-US",{minimumFractionDigits:r.decimal}).format(parseFloat(s)).slice(0,i?-i:void 0)}};return(s,i)=>{const m=_e("maska");return k(),M("div",{class:xe(n.disabled?"opacity-50":"")},[l("div",vt,[l("div",pt,[l("div",ft,[l("div",gt,_(n.placeholder),1),l("div",yt,[n.logo?(k(),M("img",bt)):U("",!0),te(l("input",{value:n.modelValue,class:"supply_input","data-maska":u(),"data-maska-tokens":"0:\\d:multiple|9:\\d:optional",placeholder:n.placeholder,onInput:i[0]||(i[0]=x=>s.$emit("update:modelValue",parseFloat(x.target.value.replace(/,/g,"")).toString()))},null,40,ht),[[m,void 0,d]])])]),n.logo?(k(),M("button",{key:0,disabled:n.disabled==!0,class:"w-24 cursor-pointer focus:outline-none text-blue-primary text-xs font-bold",onClick:i[1]||(i[1]=x=>s.$emit("clickedMaxAvailable",!0))},_(s.$t("swap.maxAmount")),9,_t)):U("",!0)])])],2)}}});const be=we(xt,[["__scopeId","data-v-ac217733"]]),wt={class:"rounded-md bg-white flex border mt-3"},kt=["value","placeholder"],At=l("div",{class:"w-1 flex-none"},null,-1),It={class:"text-gray-800"},Mt=se({__name:"TextAreaInput",props:{modelValue:{type:String,required:!1},currentBytes:{type:Number,required:!0},limit:{type:Number,required:!0},placeholder:{type:String,required:!0}},emits:["update:modelValue"],setup(n){return(r,u)=>(k(),M(Ae,null,[l("div",wt,[l("textarea",{value:n.modelValue,onInput:u[0]||(u[0]=d=>r.$emit("update:modelValue",d.target.value)),rows:"2",class:"w-full text-gray-500 px-2 py-1 outline-none bg-white text-xs",placeholder:n.placeholder.toUpperCase()},null,40,kt),At]),l("div",{class:xe(["float-right mt-1 text-tsm",n.currentBytes>n.limit?"text-red-500":"text-gray-800"])},[ke(_(n.currentBytes)+" ",1),l("span",It,"/"+_(n.limit),1)],2)],64))}}),Tt={class:"border border-gray-200 px-2 py-2 rounded-md w-full"},$t={class:"flex gap-2"},Pt={class:"flex flex-col w-full"},Ft={class:"uppercase text-gray-500 font-light text-xxs text-left"},Vt={key:0,class:"flex flex-col ml-auto justify-center mt-1"},Ct=l("img",{src:et,class:"h-5 w-5 mr-auto ml-auto"},null,-1),St={class:"text-xxs text-red-400 font-bold uppercase"},Nt={key:1,class:"flex flex-col ml-auto justify-center mt-1"},Et=l("img",{src:tt,class:"h-5 w-5 mr-auto ml-auto"},null,-1),Bt={class:"text-xxs text-green-400 font-bold uppercase"},he=se({__name:"FieldValidationInput",props:Le({placeholder:{},showError:{}},{modelValue:{}}),emits:["update:modelValue"],setup(n){const r=Re(n,"modelValue");return(u,d)=>(k(),M("div",Tt,[l("div",$t,[l("div",Pt,[l("div",Ft,_(u.placeholder),1),te(l("input",{type:"text","onUpdate:modelValue":d[0]||(d[0]=s=>r.value=s),class:"w-full font-semibold text-tsm outline-none mt-1"},null,512),[[Ke,r.value]])]),u.showError&&r.value.length!=0?(k(),M("div",Vt,[Ct,l("div",St,_(u.$t("general.invalid")),1)])):u.showError?U("",!0):(k(),M("div",Nt,[Et,l("div",Bt,_(u.$t("general.valid")),1)]))])]))}});const Me="0".repeat(64),Te=a.PublicAccount.createFromPublicKey(Me,o.networkType).address.plain(),$e=(n,r)=>{let u=[];return parseInt(n)>0&&u.push(new a.Mosaic(new a.MosaicId(o.nativeToken.assetId),a.UInt64.fromUint(Number(n)))),r.length>0&&r.forEach(d=>{parseInt(d.amount)>0&&u.push(new a.Mosaic(new a.MosaicId(d.id),a.UInt64.fromUint(Number(d.amount))))}),u};class X{}X.createTransaction=async(n,r,u,d,s,i,m,x,R)=>{if(!ae.verifyWalletPassword(K.currentLoggedInWallet.name,j.chainNetworkName,s))return!1;const C=j.currentNetworkProfile.generationHash;let b=o.networkType,f=parseFloat(r)*Math.pow(10,o.nativeToken.divisibility),w=[];f>0&&w.push(new a.Mosaic(new a.MosaicId(o.nativeToken.assetId),a.UInt64.fromUint(Number(f)))),d.length>0&&d.forEach(c=>{c.amount>0&&w.push(new a.Mosaic(new a.MosaicId(c.id),a.UInt64.fromUint(Number(c.amount*Math.pow(10,c.divisibility)))))});let v=o.buildTxn,A,y;if(!m)A=K.currentLoggedInWallet.accounts.find(c=>c.address===i);else{A=K.currentLoggedInWallet.accounts.find(L=>L.address===i);const c=await o.chainAPI.accountAPI.getAccountInfo(a.Address.createFromRawAddress(m));y=a.PublicAccount.createFromPublicKey(c.publicKey,b)}let g=ae.decryptPrivateKey(new a.Password(s),A.encrypted,A.iv),T;if(x&&u.length>0)try{const c=await o.chainAPI.accountAPI.getAccountInfo(a.Address.createFromRawAddress(n));T=a.EncryptedMessage.create(u,c.publicAccount,g)}catch{T=a.EncryptedMessage.create(u,a.PublicAccount.createFromPublicKey(R,o.networkType),g)}else T=a.PlainMessage.create(u);let S=v.transferBuilder().recipient(a.Address.createFromRawAddress(n)).mosaics(w).message(T).build();const p=a.Account.createFromPrivateKey(g,b,1);if(m){let c=K.currentLoggedInWallet.accounts.find(oe=>oe.address==i),L=ae.decryptPrivateKey(new a.Password(s),c.encrypted,c.iv),q=a.Account.createFromPrivateKey(L,b,1);const ne=[S.toAggregateV1(y)],W=v.aggregateBonded(ne),Z=q.preV2Sign(W,C),G=D.lockFundTx(Z),Q=q.preV2Sign(G,C);D.announceLF_AND_addAutoAnnounceABT(Q,Z)}else{const c=p.preV2Sign(S,C);D.announceTransaction(c)}return!0};X.calculateAggregateFee=(n,r,u,d)=>{let s=o.buildTxn,i=$e(r,u),x=[s.transferBuilder().recipient(a.Address.createFromRawAddress(Te)).mosaics(i).message(d&&n.length>0?a.EncryptedMessage.create(n,a.PublicAccount.createFromPublicKey("0".repeat(64),o.networkType),"0".repeat(64)):a.PlainMessage.create(n)).build().toAggregateV1(a.PublicAccount.createFromPublicKey(Me,o.networkType))];return s.aggregateBondedBuilder().innerTransactions(x).build().maxFee.compact()/Math.pow(10,o.nativeToken.divisibility)};X.calculateFee=(n,r,u,d)=>{let s=o.buildTxn,i=$e(r,u);return s.transferBuilder().recipient(a.Address.createFromRawAddress(Te)).mosaics(i).message(d&&n.length>0?a.EncryptedMessage.create(n,a.PublicAccount.createFromPublicKey("0".repeat(64),o.networkType),"0".repeat(64)):a.PlainMessage.create(n)).build().maxFee.compact()/Math.pow(10,o.nativeToken.divisibility)};const Ut={name:"ConfirmSendModal",props:["toggleModal"],setup(){const r=Ie().appContext.config.globalProperties.emitter;return{closeConfirmModal:()=>{r.emit("CLOSE_CONFIRM_SEND_MODAL",!1)},proceedSend:()=>{r.emit("CONFIRM_PROCEED_SEND",!0)}}}},Lt={key:0,class:"popup-outer fixed flex z-50"},Rt={class:"modal-popup-box"},Kt={class:"delete-position"},Ot={class:"w-92"},Dt={class:"text-center"},qt={class:"mt-3"};function Wt(n,r,u,d,s,i){const m=ee("font-awesome-icon");return k(),M("div",null,[P(Oe,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:le(()=>[u.toggleModal?(k(),M("div",Lt,[l("div",Rt,[l("div",Kt,[P(m,{icon:"times",class:"delete-icon-style",onClick:r[0]||(r[0]=x=>{d.closeConfirmModal()})})]),l("div",Ot,[l("div",Dt,_(n.$t("transfer.proceedWithZero")),1),l("div",qt,[l("div",{onClick:r[1]||(r[1]=x=>d.proceedSend()),class:"blue-btn py-2 font-semibold cursor-pointer text-center ml-auto mr-auto w-7/12"},_(n.$t("general.confirm")),1),l("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:r[2]||(r[2]=x=>d.closeConfirmModal())},_(n.$t("general.cancel")),1)])])])])):U("",!0)]),_:1}),u.toggleModal?(k(),M("div",{key:0,onClick:r[3]||(r[3]=x=>{d.closeConfirmModal()}),class:"fixed inset-0 bg-opacity-90 bg-gray-100 z-20"})):U("",!0)])}const zt=we(Ut,[["render",Wt]]),Ht={class:"w-10/12 ml-auto mr-auto mt-5"},jt={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},Xt={class:"xl:col-span-2 p-12"},Zt={key:0,class:"mb-3 rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},Gt={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},Qt={class:"inline-block text-xs"},Jt={class:"text-sm font-semibold"},Yt={class:"flex gap-1 mt-3 items-center"},ea={key:1,class:"mt-3"},ta=l("div",{class:"text-blue-primary font-semibold uppercase mt-3 text-xxs"},"Transfer to",-1),aa={class:"flex mt-1 gap-1"},la={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},sa={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},na={key:3,class:"h-3"},oa={key:4,class:"mb-5"},ra={for:"encryptedMsg",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},ia={class:"bg-navy-primary py-6 px-6 xl:col-span-1"},ca={class:"font-semibold text-xs text-white mb-1.5"},ua=["disabled"],da={class:"text-center"},ma="^[0-9A-Za-z]{40}$",va="^[0-9A-Za-z-]{46}$",pa="^[^ ]{8,}$",Aa=se({__name:"ViewTransfer",setup(n){const r=Ie(),{t:u}=De(),d=r.appContext.config.globalProperties.emitter,s=$(null),i=$(null),m=$(null),x=$(!1),R=$(!1),V=$(""),C=$(!1),b=$(!1),f=$(""),w=$(!0),v=$(!0),A=$([]),y=$([]),g=$("0"),T=$(0),S=$(""),p=$(""),c=$(0),L=E(()=>!(f.value.match(pa)&&!w.value&&!ne.value&&W.value<Z.value&&q.value)),q=E(()=>!(b.value&&C.value&&W.value>0&&v.value));Y(y,e=>{for(let t=0;t<e.length;t++)isNaN(parseFloat(e[t].amount))&&(e[t].amount="0")},{deep:!0}),Y(g,e=>{isNaN(parseFloat(e))&&(g.value="0")});const ne=E(()=>m.value?s.value?parseFloat(g.value)>T.value||!y.value.every(e=>parseFloat(e.amount)<=e.balance)?!0:ue.value>c.value:ue.value>T.value||!y.value.every(e=>parseFloat(e.amount)<=e.balance):!1),W=E(()=>p.value.length==0?0:C.value?D.getFakeEncryptedMessageSize(p.value):D.getPlainMessageSize(p.value)),Z=E(()=>{var e;return((e=j)==null?void 0:e.currentNetworkProfileConfig.maxMessageSize)-1}),G=E(()=>{var e;return O.convertToExact((e=j)==null?void 0:e.currentNetworkProfileConfig.lockedFundsPerAggregate,o.nativeToken.divisibility)}),Q=E(()=>j.currentNetworkProfile?O.convertToExact(D.getLockFundFee(),o.nativeToken.divisibility):0),oe=E(()=>{if(!m.value)return 0;let e=o.nativeToken.divisibility;return s.value?O.convertNumberMinimumFormat(T.value,e):O.convertNumberMinimumFormat(T.value-z.value,e)}),ue=E(()=>{let e=o.nativeToken.divisibility;return s.value?e==0?Math.trunc(z.value+Q.value+G.value):Math.round((z.value+Q.value+G.value)*Math.pow(10,e))/Math.pow(10,e):e==0?Math.trunc(parseFloat(g.value.replace(/,/g,""))+z.value):Math.round((parseFloat(g.value.replace(/,/g,""))+z.value)*Math.pow(10,e))/Math.pow(10,e)}),z=E(()=>{const e=y.value.map(t=>({id:t.id,amount:t.amount}));return e.push({id:o.nativeToken.assetId,amount:g.value}),s.value?X.calculateAggregateFee(p.value,g.value,e,C.value):m.value?X.calculateFee(p.value,g.value,e,C.value):0}),Pe=()=>{g.value=oe.value.toString(),g.value=oe.value.toString()},ve=()=>{m.value=null,f.value="",V.value="",C.value=!1,p.value="",g.value="0",d.emit("CLEAR_SELECT",0),y.value=[],s.value=null,S.value=""},pe=qe(),fe=We(),Fe=async()=>{if(!await X.createTransaction(V.value,g.value,p.value,y.value.map(t=>({id:t.id,amount:parseFloat(t.amount),divisibility:t.divisibility})),f.value,m.value,s.value,C.value,S.value)){pe.add({severity:"error",summary:"Error",detail:"Password is incorrect",group:"br-custom",life:1e3});return}fe.push({name:"ViewAccountPendingTransactions",params:{address:m.value}}),ve()},Ve=async()=>{if(ae.verifyWalletPassword(K.currentLoggedInWallet.name,j.chainNetworkName,f.value)){let t=parseFloat(g.value)*Math.pow(10,o.nativeToken.divisibility),h=[],F=y.value.map(N=>({id:N.id,amount:parseFloat(N.amount),divisibility:N.divisibility}));t>0&&h.push(new a.Mosaic(new a.MosaicId(o.nativeToken.assetId),a.UInt64.fromUint(Number(t)))),F.length>0&&F.forEach(N=>{N.amount>0&&h.push(new a.Mosaic(new a.MosaicId(N.id),a.UInt64.fromUint(Number(N.amount*Math.pow(10,N.divisibility)))))});let H=o.buildTxn,J=K.currentLoggedInWallet.accounts.find(N=>N.address===m.value),I=ae.decryptPrivateKey(new a.Password(f.value),J.encrypted,J.iv),B;if(C.value&&p.value.length>0)try{const N=await o.chainAPI.accountAPI.getAccountInfo(a.Address.createFromRawAddress(V.value));B=a.EncryptedMessage.create(p.value,N.publicAccount,I)}catch{B=a.EncryptedMessage.create(p.value,a.PublicAccount.createFromPublicKey(S.value,o.networkType),I)}else B=a.PlainMessage.create(p.value);let re=H.transferBuilder().recipient(a.Address.createFromRawAddress(V.value)).mosaics(h).message(B).build(),ie=D.signTxnWithPassword(m.value,s.value,f.value,re);me.lockHashPayload=ie.hashLockTxnPayload,me.transactionPayload=ie.txnPayload,me.selectedAddress=m.value,fe.push({name:"ViewConfirmTransaction"}),ve()}else{pe.add({severity:"error",summary:"Error",detail:"Password is incorrect",group:"br-custom",life:1e3});return}},Ce=async()=>{if(o.chainAPI)try{const e=await o.chainAPI.accountAPI.getAccountInfo(a.Address.createFromRawAddress(m.value)),t=e.mosaics.findIndex(h=>h.id.toHex()==o.nativeToken.assetId);t!=-1?(c.value=e.mosaics[t].amount.compact()/Math.pow(10,o.nativeToken.divisibility),e.mosaics.splice(t,1)):c.value=0}catch{c.value=0}},de=async e=>{if(o.chainAPI&&e){A.value=[];try{const t=await o.chainAPI.accountAPI.getAccountInfo(a.Address.createFromRawAddress(e)),h=t.mosaics.findIndex(F=>F.id.toHex()==o.nativeToken.assetId);h!=-1?(T.value=t.mosaics[h].amount.compact()/Math.pow(10,o.nativeToken.divisibility),t.mosaics.splice(h,1)):T.value=0;for(let F=0;F<t.mosaics.length;F++){const H=t.mosaics[F];A.value.push({id:H.id.toHex(),balance:H.amount.compact(),divisibility:0,namespace:"",hasUpdated:!1})}}catch{A.value=[],T.value=0}}};Y(m,async(e,t)=>{A.value=[],y.value=[],e==null?(T.value=0,i.value=null,s.value=null):e!=t&&(i.value=null,s.value=null,await de(e))}),Y(s,async(e,t)=>{A.value=[],y.value=[],e==null&&(c.value=0,i.value=null,s.value=null,await de(m.value)),e!=t&&(await Ce(),await de(e))}),d.on("select-account",e=>{m.value=e}),d.on("select-multisig-account",e=>{i.value=e.label,s.value=e.value}),d.on("CLOSE_MULTISIG",()=>{i.value=null,s.value=null}),d.on("CLOSE_CONFIRM_SEND_MODAL",e=>{R.value=e}),d.on("CONFIRM_PROCEED_SEND",e=>{e&&(R.value=!1,Fe())});const Se=e=>{x.value=!1,V.value=e.data},Ne=E(()=>{const e=K.currentLoggedInWallet;if(!e)return[];const t=[...e.accounts,...e.others];return e.contacts.length?[{key:"0",label:u("general.ownerAcc"),selectable:!1,children:t.map((h,F)=>({key:"0-"+F.toString(),label:h.name,data:a.Address.createFromRawAddress(h.address).pretty(),selectable:!0}))},{key:"1",label:u("general.contact"),selectable:!1,children:e.contacts.map((h,F)=>({key:"1-"+F.toString(),label:h.name,data:a.Address.createFromRawAddress(h.address).pretty(),selectable:!0}))}]:[{key:"0",label:u("general.ownerAcc"),selectable:!1,children:t.map((h,F)=>({key:"0-"+F.toString(),label:h.name,data:a.Address.createFromRawAddress(h.address).pretty(),selectable:!0}))}]});Y([V,w],e=>{if(e[0].match(va)||e[0].match(ma)){if(!e[1]){Ee();return}ge()}else w.value=!0});const Ee=()=>{o.chainAPI.accountAPI.getAccountInfo(a.Address.createFromRawAddress(V.value)).then(e=>{b.value=e.publicKey=="0".repeat(64)}).catch(e=>b.value=!0)},Be=()=>{try{a.PublicAccount.createFromPublicKey(S.value,o.networkType).address.plain()==a.Address.createFromRawAddress(V.value).plain()&&(v.value=!1)}catch{v.value=!0}},ge=()=>{if(K.currentLoggedInWallet)try{let e=O.createAddress(V.value);O.checkAddressNetwork(e,o.networkType)?w.value=!1:w.value=!0}catch{try{let t=O.createNamespaceId(V.value);o.chainAPI.namespaceAPI.getLinkedAddress(t).then(h=>{V.value=h.plain(),w.value=!1}).catch(h=>{w.value=!0})}catch{w.value=!0}}};return(e,t)=>{const h=ee("Sidebar"),F=ee("font-awesome-icon"),H=ee("router-link"),J=_e("debounce");return k(),M("div",null,[P(h,{visible:x.value,"onUpdate:visible":t[0]||(t[0]=I=>x.value=I),baseZIndex:1e4,position:"full"},{default:le(()=>[P(Qe,{contacts:Ne.value,onNodeSelect:Se},null,8,["contacts"])]),_:1},8,["visible"]),P(zt,{toggleModal:R.value},null,8,["toggleModal"]),l("div",Ht,[l("div",jt,[l("div",Xt,[ne.value?(k(),M("div",Zt,[l("div",Gt,[P(F,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),l("div",Qt,_(e.$t("general.insufficientBalance")),1)])):U("",!0),l("div",Jt,_(e.$t("transfer.newTransfer")),1),l("div",Yt,[P(je,{type:"transfer"}),P(Xe,{"selected-address":m.value},null,8,["selected-address"])]),s.value?(k(),M("div",ea,[P(Ze,{"select-default-address":s.value,"select-default-name":i.value,type:"transfer"},null,8,["select-default-address","select-default-name"])])):U("",!0),ta,l("div",aa,[te(P(he,{placeholder:e.$t("transfer.transferPlaceholder"),modelValue:V.value,"onUpdate:modelValue":t[1]||(t[1]=I=>V.value=I),showError:w.value},null,8,["placeholder","modelValue","showError"]),[[J,ge,"1000"]]),l("div",{onClick:t[2]||(t[2]=I=>x.value=!x.value),class:"border rounded-md cursor-pointer flex flex-col justify-center p-1.5"},[P(F,{icon:"id-card-alt",class:"text-blue-primary ml-auto mr-auto"}),l("div",la,_(e.$t("general.select")),1),l("div",sa,_(e.$t("general.contact")),1)])]),(k(!0),M(Ae,null,ze(y.value,(I,B)=>{var re;return k(),M("div",{key:B},[P(mt,{class:"mt-3","asset-options":A.value,index:B,"selected-assets":y.value},null,8,["asset-options","index","selected-assets"]),((re=y.value[B].id)==null?void 0:re.length)==16?(k(),ye(be,{key:0,class:"mt-3",modelValue:y.value[B].amount,"onUpdate:modelValue":ie=>y.value[B].amount=ie,placeholder:e.$t("transfer.assetAmount"),type:"text",decimal:y.value[B].divisibility},null,8,["modelValue","onUpdate:modelValue","placeholder","decimal"])):U("",!0)])}),128)),y.value.length!=A.value.length?(k(),M("button",{key:2,class:"my-2 font-semibold text-xs text-blue-primary outline-none focus:outline-none disabled:opacity-50",onClick:t[3]||(t[3]=I=>y.value.push({id:null,balance:0,amount:"0",namespace:"",divisibility:0}))}," + "+_(e.$t("transfer.addAssets")),1)):(k(),M("div",na)),P(be,{modelValue:g.value,"onUpdate:modelValue":t[4]||(t[4]=I=>g.value=I),balance:T.value,placeholder:e.$t("transfer.transferAmount"),logo:!0,type:"text",onClickedMaxAvailable:t[5]||(t[5]=I=>Pe()),decimal:6},null,8,["modelValue","balance","placeholder"]),P(Mt,{modelValue:p.value,"onUpdate:modelValue":t[6]||(t[6]=I=>p.value=I),limit:Z.value,placeholder:e.$t("general.message"),"current-bytes":W.value},null,8,["modelValue","limit","placeholder","current-bytes"]),w.value?U("",!0):(k(),M("div",oa,[te(l("input",{id:"encryptedMsg",type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=I=>C.value=I)},null,512),[[He,C.value]]),l("label",ra,_(e.$t("transfer.enableEncryption")),1)])),!w.value&&b.value&&C.value&&W.value>0?te((k(),ye(he,{key:5,placeholder:"Recipient Public Key",modelValue:S.value,"onUpdate:modelValue":t[8]||(t[8]=I=>S.value=I),showError:v.value},null,8,["modelValue","showError"])),[[J,Be,"1000"]]):U("",!0)]),l("div",ia,[P(Ge,{"signer-native-token-balance":c.value,"native-amount":g.value,"native-token-balance":T.value,"lock-fund":G.value,"lock-fund-tx-fee":Q.value,"selected-multisig-address":s.value,"txn-fee":z.value,"total-fee":ue.value,"selected-assets":y.value},null,8,["signer-native-token-balance","native-amount","native-token-balance","lock-fund","lock-fund-tx-fee","selected-multisig-address","txn-fee","total-fee","selected-assets"]),l("div",ca,_(e.$t("general.enterPasswordContinue")),1),P(Ye,{placeholder:e.$t("general.enterPassword"),errorMessage:e.$t("general.passwordRequired"),modelValue:f.value,"onUpdate:modelValue":t[9]||(t[9]=I=>f.value=I),icon:"lock",class:"mt-5 mb-3"},null,8,["placeholder","errorMessage","modelValue"]),l("button",{type:"submit",class:"w-full blue-btn px-3 py-3 disabled:opacity-50 disabled:cursor-auto",disabled:L.value,onClick:t[10]||(t[10]=I=>Ve())},_(e.$t("general.transfer")),9,ua),l("div",da,[P(H,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white underline"},{default:le(()=>[ke(_(e.$t("general.cancel")),1)]),_:1})])])])])])}}});export{Aa as default};
