import{_ as O,a5 as le,M as se,o as v,b as m,e as t,j as H,t as u,O as ae,f as V,x as oe,d as _e,l as he,r as s,u as ye,c as b,W,w as J,B as o,H as S,n as E,S as xe,a as Y,i as ee,m as p,v as Te,h as ke,z as D}from"./index-efcc60c9.js";import{_ as we,a as Ce,b as Ie,c as Ae}from"./TxnSummary.vue_vue_type_script_setup_true_lang-4a04b69c.js";import{S as Se}from"./SupplyInputClean-01ca3e7a.js";import{_ as re}from"./icon-info-8b4f1351.js";import{A as K}from"./assetsUtils-bdee78a4.js";import{T as R}from"./transactionState-1ce1f11e.js";import"./jdenticon-module-a541b61b.js";import"./proximax-logo-ecfc3767.js";const Ee="/web-wallet-vuejs/assets/icon-done-a0410eac.svg",$e="/web-wallet-vuejs/assets/icon-undone-5c4de078.svg",Ne={directives:{tooltip:le},props:{title:String,disabled:Boolean,modelValue:Boolean,toolTip:String},emits:["update:modelValue"],name:"CheckInput",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},methods:{clickInputText:function(){!this.showError&&!this.disabled&&(this.borderColor="border-2 border-blue-primary")},getIcon(){return require(`@/${this.icon}`)},blurInputText:function(){this.disabled||(this.modelValue==""?(this.borderColor="border-2 border-red-primary",this.textErr=!0):(this.borderColor="border-2 border-gray-300",this.textErr=!1))},focusInputText:function(){this.borderColor="border-2 border-blue-primary",this.textErr=!1}},mounted(){this.emitter.on("CLEAR_TEXT",n=>{this.inputText=n,this.textErr=!1,this.borderColor="border border-gray-300"})}},Ve={class:"border border-gray-200 px-2 py-1 h-14 flex items-center justify-between rounded-md"},Me={key:0,src:re,class:"inline-block ml-2 relative",style:{top:"-1px"}},Fe={key:0,src:Ee,class:"inline-block"},Pe={key:1,src:$e,class:"inline-block"};function De(n,c,a,$,M,f){const r=se("tooltip");return v(),m("div",{class:H(`${a.disabled?"opacity-50":"cursor-pointer"}`)},[t("div",Ve,[t("div",null,[t("div",{class:H(["inline-block font-bold text-tsm",`${a.disabled?"text-gray-500":"text-black"}`])},u(a.title),3),a.toolTip?ae((v(),m("img",Me,null,512)),[[r,{value:"<tiptext>"+a.toolTip+"</tiptext>",escape:!1},void 0,{bottom:!0}]]):V("",!0)]),a.modelValue?(v(),m("img",Fe)):(v(),m("img",Pe))])],2)}const te=O(Ne,[["render",De]]);const Ue={directives:{tooltip:le},props:{placeholder:String,errorMessage:String,icon:String,showError:Boolean,modelValue:String,title:String,disabled:Boolean,max:Number,toolTip:String},emits:["update:modelValue"],name:"NumberInputClean",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},methods:{clickInputText:function(){this.pswdErr||(this.borderColor="border-2 border-blue-primary")},validateKey:function(n){if(n.charCode<48||n.charCode>54)n.preventDefault();else return n.key},validate:function(n){this.$emit("update:modelValue",n.data)}},mounted(){this.emitter.on("CLEAR_TEXT",n=>{this.inputText=n,this.textErr=!1,this.borderColor="border border-gray-300"})}},Be={class:"border border-gray-200 px-2 py-1 h-14 rounded-md"},Le={class:"uppercase text-gray-500 text-txs text-left mb-2"},Ke={key:0,src:re,class:"inline-block ml-1 relative cursor-pointer",style:{top:"-1px"}},Re=["disabled","value","max","placeholder"],je={class:"h-3 mb-2"},ze={key:0,class:"error error-text text-left"};function We(n,c,a,$,M,f){const r=se("tooltip");return v(),m("div",{class:H(a.disabled?"opacity-50":"")},[t("div",Be,[t("div",Le,[oe(u(a.placeholder)+" ",1),a.toolTip?ae((v(),m("img",Ke,null,512)),[[r,{value:"<tiptext>"+a.toolTip+"</tiptext>",escape:!0},void 0,{bottom:!0}]]):V("",!0)]),t("input",{disabled:a.disabled,value:a.modelValue,onInput:c[0]||(c[0]=(...h)=>f.validate&&f.validate(...h)),onKeypress:c[1]||(c[1]=(...h)=>f.validateKey&&f.validateKey(...h)),type:"number",maxlength:"1",min:"0",max:a.max,placeholder:a.placeholder,class:"number_input",onClick:c[2]||(c[2]=h=>f.clickInputText()),onFocus:c[3]||(c[3]=h=>h.target.select())},null,40,Re)]),t("div",je,[M.textErr||a.showError?(v(),m("div",ze,u(a.errorMessage),1)):V("",!0)])],2)}const He=O(Ue,[["render",We]]),Oe={class:"w-10/12 ml-auto mr-auto"},Xe={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},Ze={class:"xl:col-span-2 p-12"},qe={class:"font-semibold mb-4"},Ge={key:0,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},Qe={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},Je={class:"inline-block text-xs"},Ye={key:1,class:"error error_box"},et={class:"mt-4"},tt={class:"flex gap-1 mt-3"},lt={key:0,class:"mt-3"},st={class:"lg:grid lg:grid-cols-2 mt-5"},at={class:"lg:mr-2"},ot={class:"lg:ml-2"},rt={class:"lg:grid lg:grid-cols-2"},it={class:"mb-5 lg:mb-0 lg:mr-2"},nt={class:"mb-5 lg:mb-0 lg:ml-2"},ut={class:"bg-navy-primary py-6 px-6 xl:col-span-1"},ct=["disabled"],dt={class:"text-center"},vt={class:"sm:grid sm:grid-cols-2 mt-10 lg:mt-16"},mt={class:"mb-8"},bt={href:"https://bcdocs.xpxsirius.io/docs/built-in-features/mosaic/",target:"_new",class:"sm:h-9 lg:h-5 text-blue-primary font-bold text-tsm flex items-start"},pt={class:"text-gray-400 text-xs lg:text-tsm my-3 sm:pr-2"},ft={class:"mb-8"},gt={href:"https://t.me/proximaxhelpdesk",target:"_new",class:"sm:h-9 lg:h-5 text-blue-primary font-bold text-tsm items-start flex"},_t={class:"text-gray-400 text-tsm my-3"},ht=_e({__name:"ViewServicesAssetsCreate",setup(n){const c=he(),$=ke().appContext.config.globalProperties.emitter,M=s(!1);ye();const f=s(""),r=s("0"),h=s(!1),g=s(!1),_=s(!1),U=b(()=>ce.value),X=s(!1),j=s(!1),ie=s("month"),ne=s("1"),ue=s(!1),Z=s(!1),y=s("0"),ce=s(!1),w=s(),F=s();try{w.value=W.createPublicAccount(J.currentLoggedInWallet?J.currentLoggedInWallet.selectDefaultAccount().publicKey:"",o.networkType)}catch(e){console.log(e)}const de=s("0"),C=s(0);try{de.value=S.amountFormatterSimple(K.createAssetTransactionFee(w.value,Number(y.value),_.value,g.value,Number(r.value)),o.nativeToken.divisibility),C.value=S.convertToExact(K.createAssetTransactionFee(w.value,Number(y.value),_.value,g.value,Number(r.value)),o.nativeToken.divisibility)}catch(e){console.log(e)}const B=b(()=>E.currentNetworkProfileConfig?S.convertToExact(E.currentNetworkProfileConfig.mosaicRentalFee,o.nativeToken.divisibility):0),ve=b(()=>E.currentNetworkProfileConfig?S.convertToCurrency(E.currentNetworkProfileConfig.mosaicRentalFee,o.nativeToken.divisibility):"0"),q=b(()=>E.currentNetworkProfileConfig?S.convertToExact(E.currentNetworkProfileConfig.lockedFundsPerAggregate,o.nativeToken.divisibility):0),G=b(()=>E.currentNetworkProfile?S.convertToExact(xe.getLockFundFee(),o.nativeToken.divisibility):0),Q=b(()=>q.value+G.value),me=b(()=>!(I.value!=null&&r.value!=null&&Number(y.value)>0&&!M.value&&!ue.value&&!T.value)),i=s(null),N=s(null),I=s(null),x=s(0),L=s(0),z=async e=>{if(o.chainAPI&&e)try{const l=await o.chainAPI.accountAPI.getAccountInfo(D.Address.createFromRawAddress(e)),k=l.mosaics.findIndex(A=>A.id.toHex()==o.nativeToken.assetId);return k!=-1?l.mosaics[k].amount.compact()/Math.pow(10,o.nativeToken.divisibility):0}catch{return 0}},T=b(()=>{if(I.value)return i.value?L.value<B.value?!0:x.value<C.value+Q.value:x.value<B.value+C.value});x.value<B.value+C.value?(X.value=!0,j.value=!0,Z.value=!0):(X.value=!1,j.value=!1,Z.value=!1);const P=()=>{r.value="0",y.value="0",ne.value="1",ie.value="month",j.value=!1,g.value=!1,_.value=!1};Y(I,async(e,l)=>{e==null?(x.value=0,P(),N.value=null,i.value=null,F.value=null):e!=l&&(P(),N.value=null,i.value=null,F.value=null,x.value=await z(e))}),Y(i,async(e,l)=>{e==null?(L.value=0,P(),N.value=null,i.value=null,F.value=null,x.value=await z(I.value)):e!=l&&(P(),L.value=await z(e))});const be=b(()=>i?Q.value+C.value:B.value+C.value),pe=b(()=>S.amountFormatterSimple(be.value,0)),fe=e=>{M.value=e},ge=()=>{if(i.value){const e=o.buildTxn.mosaicDefinition(F.value,_.value,g.value,Number(r.value));let l=D.MosaicSupplyType.Increase;const k=o.buildTxn.buildMosaicSupplyChange(e.mosaicId,l,D.UInt64.fromUint(K.addZeros(Number(r.value),Number(y.value)))),A=[e.serialize(),k.serialize()];R.unsignedTransactionPayload=A}else{const e=o.buildTxn.mosaicDefinition(w.value,_.value,g.value,Number(r.value)),l=e.toAggregateV1(w.value);let k=D.MosaicSupplyType.Increase;const A=o.buildTxn.buildMosaicSupplyChange(e.mosaicId,k,D.UInt64.fromUint(K.addZeros(Number(r.value),Number(y.value)))).toAggregateV1(w.value);let d=o.buildTxn.aggregateComplete([l,A]).serialize();R.unsignedTransactionPayload=d}P(),R.selectedAddress=I.value,R.selectedMultisigAddress=i.value,c.push({name:"ViewConfirmTransaction"})};return $.on("select-account",e=>{I.value=e}),$.on("select-account-public-key",e=>{w.value=W.createPublicAccount(e,o.networkType)}),$.on("select-multisig-account",e=>{N.value=e.label,i.value=e.value,F.value=W.createPublicAccount(e.publicKey,o.networkType)}),$.on("CLOSE_MULTISIG",()=>{N.value=null,i.value=null}),(e,l)=>{const k=ee("font-awesome-icon"),A=ee("router-link");return v(),m("div",null,[t("div",Oe,[t("div",Xe,[t("div",Ze,[t("div",qe,u(e.$t("asset.createAssets")),1),T.value?(v(),m("div",Ge,[t("div",Qe,[p(k,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),t("div",Je,u(e.$t("general.insufficientBalance")),1)])):V("",!0),f.value!=""?(v(),m("div",Ye,u(f.value),1)):V("",!0),t("div",et,[t("div",tt,[p(we,{type:"asset"}),p(Ce,{"selected-address":I.value},null,8,["selected-address"])]),i.value?(v(),m("div",lt,[p(Ie,{"select-default-address":i.value,"select-default-name":N.value,type:"asset"},null,8,["select-default-address","select-default-name"])])):V("",!0),t("div",st,[t("div",at,[p(Se,{disabled:T.value||U.value,modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=d=>y.value=d),balance:Number.MAX_VALUE,placeholder:e.$t("general.supply"),type:"text",onShowError:fe,decimal:Number(r.value),toolTip:e.$t("asset.supplyMsg1")+" <br><br>"+e.$t("asset.supplyMsg2")+"<br>"+e.$t("asset.supplyMsg3")},null,8,["disabled","modelValue","balance","placeholder","decimal","toolTip"])]),t("div",ot,[p(He,{disabled:T.value||U.value,modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=d=>r.value=d),max:6,placeholder:e.$t("general.divisibility"),showError:h.value,toolTip:e.$t("asset.divisibilityMsg1")+" <br><br>"+e.$t("asset.divisibilityMsg2")+"<br>"+e.$t("asset.divisibilityMsg3")},null,8,["disabled","modelValue","placeholder","showError","toolTip"])])]),t("div",rt,[t("div",it,[p(te,{disabled:T.value||U.value,modelValue:g.value,"onUpdate:modelValue":l[2]||(l[2]=d=>g.value=d),title:e.$t("general.transferable"),toolTip:e.$t("asset.transferableMsg"),onClick:l[3]||(l[3]=d=>T.value?"":g.value=!g.value)},null,8,["disabled","modelValue","title","toolTip"])]),t("div",nt,[p(te,{disabled:T.value||U.value,modelValue:_.value,"onUpdate:modelValue":l[4]||(l[4]=d=>_.value=d),title:e.$t("general.supplyMutable"),toolTip:e.$t("asset.supplyMutableMsg"),onClick:l[5]||(l[5]=d=>T.value?"":_.value=!_.value)},null,8,["disabled","modelValue","title","toolTip"])])])])]),t("div",ut,[p(Ae,{"signer-native-token-balance":x.value,"asset-rental-fee-currency":ve.value,"native-token-balance":i.value?L.value:x.value,"lock-fund":q.value,"lock-fund-tx-fee":G.value,"selected-multisig-address":i.value,"txn-fee":C.value,"total-fee":Number(pe.value)},null,8,["signer-native-token-balance","asset-rental-fee-currency","native-token-balance","lock-fund","lock-fund-tx-fee","selected-multisig-address","txn-fee","total-fee"]),t("button",{type:"submit",class:"mt-3 w-full blue-btn py-4 disabled:opacity-50 disabled:cursor-auto text-white",disabled:me.value,onClick:ge},u(e.$t("asset.createAssets")),9,ct),t("div",dt,[p(A,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white border-b-2 border-white"},{default:Te(()=>[oe(u(e.$t("general.cancel")),1)]),_:1})])])]),t("div",vt,[t("div",mt,[t("a",bt,u(e.$t("general.assetQues")),1),t("div",pt,u(e.$t("asset.assetAns")),1)]),t("div",ft,[t("a",gt,u(e.$t("general.feedback")),1),t("div",_t,u(e.$t("general.feedbackDescription")),1)])])])])}}});const St=O(ht,[["__scopeId","data-v-788b923f"]]);export{St as default};
