import{d as B,y as P,g as x,o as d,f,e,O as q,P as J,t as b,h as X,F as T,E as D,w as a,c as w,r as S,a as Y,b as E,l as C,i as W,v as Z,U as oe,j as re,x as ie,A as R,H as z,I as ue,k as ce,K as U,aa as de,ab as me,_ as ee,D as G,ac as fe}from"./index-aa0744c5.js";import{_ as ve}from"./proximax-logo-ecfc3767.js";import{_ as ge,a as pe}from"./icon-key-5b3f7dda.js";import{_ as be}from"./icon-multisig-2a7c5e5f.js";import{c as ye}from"./functions-340feb99.js";import{t as xe}from"./jdenticon-module-cb5aedf5.js";import{_ as te}from"./icon-arrow-down-83b4f5a8.js";import{T as Le}from"./TextInputClean-324ee3f2.js";const _e="/web-wallet-vuejs/assets/icon-default-account-drop-down-03c40c1e.svg",he={class:"w-full mt-3 border border-gray-200 px-2 py-2 rounded-md"},we={class:"flex flex-col w-full"},$e=["disabled"],Ie=B({__name:"InputLabelNameModal",props:{selectLabel:{type:String,required:!0}},emits:["cancel-change-label","update-select"],setup(u){const L=u,c=D().appContext.config.globalProperties.emitter,v=P(),m=x(null),g=()=>{if(!a.currentLoggedInWallet||!m.value)return;let s=a.currentLoggedInWallet.labels.find(t=>t.name==L.selectLabel);s?(s.name=m.value,a.wallets.saveMyWalletOnlytoLocalStorage(a.currentLoggedInWallet),v.add({severity:"info",summary:"Label",detail:L.selectLabel+" is changed to "+m.value,group:"br-custom",life:5e3}),c.emit("cancel-change-label",!1),c.emit("update-select",m.value)):v.add({severity:"error",summary:"Error",detail:"Invalid",group:"br-custom",life:5e3})},o=()=>{c.emit("cancel-change-label",!1)};return(s,t)=>(d(),f(T,null,[e("div",he,[e("div",we,[t[3]||(t[3]=e("div",{class:"uppercase text-gray-500 font-light text-xxs text-left"},"New Label Name",-1)),q(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=i=>m.value=i),disabled:u.selectLabel=="",class:"w-full font-semibold text-tsm outline-none mt-1"},null,8,$e),[[J,m.value]])])]),e("div",{class:X(["blue-btn font-semibold py-2 text-center mt-3 ml-auto mr-auto w-7/12",`${m.value?"cursor-pointer":"opacity-50"}`]),onClick:t[1]||(t[1]=i=>g())},b(s.$t("general.confirm")),3),e("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:t[2]||(t[2]=i=>o())},b(s.$t("general.cancel")),1)],64))}}),Ce={key:0,class:"account-item-value account-item"},ke={class:"flex"},Ae={class:"flex flex-col ml-2 text-left"},We={class:"mt-2 text-tsm font-bold"},Me={class:"account-item"},Se={class:"flex"},Te={class:"text-xs ml-2 font-semibold"},Ve=B({__name:"EditLabelModal",props:{toggleModal:{type:Boolean,required:!0}},setup(u){const _=D().appContext.config.globalProperties.emitter,c=x(""),v=w(()=>a.currentLoggedInWallet?a.currentLoggedInWallet.labels.map(o=>o.name):[]),m=g=>{g!=null&&(c.value=g)};return _.on("update-select",g=>{c.value=g}),(g,o)=>{const s=S("Dropdown");return d(),Y(Z(oe),{visible:u.toggleModal,modal:"",header:"Change Label Name",draggable:!1,dismissableMask:!0,closable:!1,class:"w-96"},{default:E(()=>[e("div",null,[C(s,{modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=t=>c.value=t),style:{width:"100%"},options:v.value,filter:!0,emptyFilterMessage:" ",placeholder:"Select Label",onChange:o[1]||(o[1]=t=>{m(t.value)})},{value:E(t=>[t.value?(d(),f("div",Ce,[e("div",ke,[e("div",Ae,[o[2]||(o[2]=e("div",{class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}}," Selected Label",-1)),e("div",We,b(t.value),1)])])])):W("",!0)]),option:E(t=>[e("div",Me,[e("div",Se,[e("div",Te,b(t.option),1)])])]),_:1},8,["modelValue","options"]),C(Ie,{selectLabel:c.value},null,8,["selectLabel"])])]),_:1},8,["visible"])}}});const Ne={class:"flex gap-2"},De=["innerHTML"],Ee={class:"flex flex-col"},Be={class:"text-blue-primary font-bold text-xs mb-0.5"},je={class:"flex justify-around"},He=["id","title","copyValue","copySubject"],Oe={class:"flex"},Pe={class:"text-xs font-bold"},Ue={key:0,class:"text-xs font-bold"},Fe={class:"text-xxs mt-0.5"},Ke={class:"ml-1 text-xs font-bold"},Qe={class:"flex gap-2"},Re=["title"],ze={class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"},Ge=["title"],qe={class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"},Je=["title"],Xe={class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"},Ye={class:"absolute flex invisible 2xl:visible pt-4 explicitLeft"},Ze={key:0,class:"text-xs mr-3 border bg-gray-300 rounded-md p-1"},et=B({__name:"AccountTile",props:{account:{}},setup(u){const _=D().appContext.config.globalProperties.emitter,c=x(),v=x(!1),m=P(),{t:g}=re(),o=x(""),s=w(()=>{if(a.currentLoggedInWallet){let l=[];return a.currentLoggedInWallet.labels.forEach(n=>{let k=!1;n.addresses.includes(u.account.address)&&(k=!0),l.push({name:n.name,isLabeled:k})}),l}else return[]}),t=l=>{c.value.toggle(l)},i=w(()=>[{label:"Change Labels",command:()=>{v.value=!0}}].concat(s.value.map(l=>({label:l.name,command:()=>{y(l.name)}})))),y=async l=>{if(!a.currentLoggedInWallet)return;let n=a.currentLoggedInWallet.labels.find(I=>I.name==l),k=ie.Address.createFromRawAddress(u.account.address).plain();if(!n)return;let N=n.addresses.findIndex(I=>I==k);if(N>=0){n.removeAddress(N),a.wallets.saveMyWalletOnlytoLocalStorage(a.currentLoggedInWallet),m.add({severity:"info",summary:"Label",detail:A.value+" is removed as "+l,group:"br-custom",life:5e3});return}n.addresses.push(k),a.wallets.saveMyWalletOnlytoLocalStorage(a.currentLoggedInWallet),m.add({severity:"info",summary:"Label",detail:A.value+" is added as "+l,group:"br-custom",life:5e3})},A=w(()=>{const l=a.currentLoggedInWallet.contacts.find(n=>n.address==u.account.address);return l?l.name:u.account.name}),p=w(()=>R.nativeToken.label),r=w(()=>R.nativeToken.divisibility),$=w(()=>z.toCurrencyFormat(u.account.balance,r.value)),h=w(()=>{let l=$.value.split(".");return l[1]!=null?{left:l[0],right:l[1]}:{left:l[0],right:null}});let M=new ue("ThemeStyleConfig");M.init();const V=x(xe(u.account.address,50,M.jdenticonConfig)),le=l=>{let n=document.getElementById(l).getAttribute("copyValue"),k=document.getElementById(l).getAttribute("copySubject");ye(n),m.add({severity:"info",detail:k+" "+g("general.copied"),group:"br-custom",life:3e3})},F=w(()=>!!u.account.getDirectParentMultisig().length),K=l=>{const n=a.currentLoggedInWallet.others.find(k=>k.address==l);return n!=null&&n.type=="MULTISIG"&&(o.value=n.address),n},j=l=>z.createAddress(l).pretty(),H=x(!1),O=x(!1),Q=ce(),se=()=>{if(K(u.account.address)==null)a.currentLoggedInWallet.setDefaultAccountByName(u.account.name);else return},ne=()=>{var l;H.value||O.value||((l=u.account)!=null&&l.type?Q.push({name:"ViewAccountDetails",params:{address:u.account.address}}):(se(),me(u.account.address),Q.push({name:"ViewAccountDetails",params:{address:u.account.address}})))};return _.on("cancel-change-label",l=>{v.value=l}),(l,n)=>{var N;const k=S("font-awesome-icon");return d(),f(T,null,[e("div",{class:"border rounded-lg border-gray-200 p-3 filter shadow-lg cursor-pointer",onClick:n[5]||(n[5]=I=>ne())},[e("div",Ne,[e("div",{class:"mt-auto mb-auto",innerHTML:V.value},null,8,De),e("div",Ee,[e("div",Be,b(A.value),1),e("div",je,[e("div",{id:l.account.address,title:j(l.account.address),class:"text-xs font-bold mt-0.5 mr-2 truncate md:text-clip w-44 md:w-full",copyValue:j(l.account.address),copySubject:l.$t("general.address")},b(j(l.account.address)),9,He),C(k,{onMouseover:n[0]||(n[0]=I=>O.value=!0),onMouseout:n[1]||(n[1]=I=>O.value=!1),icon:"copy",onClick:n[2]||(n[2]=I=>le(l.account.address)),class:"w-5 h-5 text-blue-primary cursor-pointer inline-block"})]),e("div",Oe,[e("div",Pe,b(h.value.left),1),h.value.right!=null?(d(),f("div",Ue," . ")):W("",!0),e("div",Fe,b(h.value.right),1),e("div",Ke,b(p.value),1),n[6]||(n[6]=e("img",{src:ve,class:"h-4 w-4"},null,-1))]),e("div",Qe,[(N=l.account)!=null&&N.default?(d(),f("div",{key:0,class:"px-1 py-0.5 flex items-center bg-blue-primary rounded-sm",title:l.$t("general.defaultTitle")},[n[7]||(n[7]=e("img",{src:ge,class:"h-4 w-4"},null,-1)),e("p",ze,b(l.$t("general.default")),1)],8,Re)):W("",!0),F.value?(d(),f("div",{key:1,class:"px-1 py-0.5 flex items-center bg-green-500 rounded-sm",title:l.$t("general.multisigTitle")},[n[8]||(n[8]=e("img",{src:be,class:"h-3 w-3 mr-1"},null,-1)),e("p",qe,b(l.$t("general.multisig")),1)],8,Ge)):W("",!0),F.value&&!K(l.account.address)?(d(),f("div",{key:2,class:"px-1 py-0.5 flex items-center bg-purple-500 rounded-sm",title:l.$t("general.ownerTitle")},[n[9]||(n[9]=e("img",{src:pe,class:"h-4 w-4 mr-1"},null,-1)),e("p",Xe,b(l.$t("general.owner")),1)],8,Je)):W("",!0)])]),e("div",Ye,[(d(!0),f(T,null,U(s.value,(I,ae)=>(d(),f("div",{key:ae},[I.isLabeled?(d(),f("div",Ze,b(I.name),1)):W("",!0)]))),128))]),e("img",{src:_e,class:"h-6 w-6 cursor-pointer my-auto ml-auto",onMouseover:n[3]||(n[3]=I=>H.value=!0),onMouseout:n[4]||(n[4]=I=>H.value=!1),onClick:t},null,32),C(Z(de),{ref_key:"menu",ref:c,model:i.value,popup:!0},null,8,["model"])])]),C(Ve,{toggleModal:v.value},null,8,["toggleModal"])],64)}}});const tt=ee(et,[["__scopeId","data-v-87defd13"]]),lt={class:"flex flex-col"},st={key:0,src:te,class:"w-3 ml-2 h-3",style:{"margin-top":"0.12em"}},nt={key:1,src:te,class:"w-3 ml-2 h-3",style:{"margin-top":"0.12em",transform:"rotate(180deg)"}},at={key:0,class:"relative"},ot={class:"absolute border-t-0 w-52 border bg-white"},rt={class:"flex flex-col max-h-44 overflow-auto"},it=["onClick"],ut={class:"text-xs mt-0.5"},ct={key:0,class:"popup-outer fixed flex z-50"},dt={class:"modal-popup-box"},mt={key:0,class:"error error_box mb-3"},ft={name:"LabelComponent"},vt=B({...ft,setup(u){const _=D().appContext.config.globalProperties.emitter,c=P(),v=x(!1),m=x(!1),g=x(!1),o=x(""),s=x(""),t=x([]),i=w(()=>a.currentLoggedInWallet?a.currentLoggedInWallet.labels:[]);for(let p=0;p<i.value.length;p++)t.value.push(!1);G(i,(p,r)=>{t.value=[];for(let $=0;$<p.length;$++)t.value.push(!1)},{deep:!0}),G(t,p=>{let r=[];p.length==i.value.length&&(p.forEach(($,h)=>{$&&r.push(i.value[h].name)}),_.emit("filterByLabel",r))},{deep:!0});const y=async()=>{if(!a.currentLoggedInWallet)return;if(s.value=s.value.trim(),s.value==""){o.value="Label name cannot be empty.";return}if(a.currentLoggedInWallet.labels.find($=>$.name==s.value)){o.value="Label is already existed in wallet.";return}let r=new fe(s.value,[]);a.currentLoggedInWallet.addLabel(r),await a.wallets.saveMyWalletOnlytoLocalStorage(a.currentLoggedInWallet),o.value="",s.value="",c.add({severity:"info",summary:"Label",detail:"New Label is Created",group:"br-custom",life:5e3}),m.value=!1},A=async p=>{a.currentLoggedInWallet&&(a.currentLoggedInWallet.removeLabel(p),await a.wallets.saveMyWalletOnlytoLocalStorage(a.currentLoggedInWallet),c.add({severity:"info",summary:"Label",detail:"Label is removed",group:"br-custom",life:5e3}),g.value=!1)};return(p,r)=>{const $=S("font-awesome-icon");return d(),f(T,null,[e("div",lt,[e("div",{onClick:r[0]||(r[0]=h=>v.value=!v.value),class:"border p-2 cursor-pointer w-52 bg-white text-xs justify-between flex"},[r[7]||(r[7]=e("div",null,"Labels",-1)),v.value?(d(),f("img",nt)):(d(),f("img",st))]),v.value?(d(),f("div",at,[e("div",ot,[e("div",rt,[(d(!0),f(T,null,U(i.value,(h,M)=>(d(),f("div",{key:M},[e("div",{onClick:V=>g.value?"":t.value[M]=!t.value[M],class:X(`${t.value[M]?"bg-blue-300 flex cursor-pointer p-2 hover:bg-blue-300 ":"flex cursor-pointer p-2 hover:bg-blue-300 "}`)},[C($,{icon:"tag",class:"w-4 h-4 mr-3 thin"}),e("div",ut,b(h.name),1),C($,{icon:"trash",onMouseover:r[1]||(r[1]=V=>g.value=!0),onMouseout:r[2]||(r[2]=V=>g.value=!1),onClick:V=>A(M),title:"Remove label",class:"ml-auto w-3 h-3 cursor-pointer mt-0.5"},null,8,["onClick"])],10,it)]))),128)),e("div",{onClick:r[3]||(r[3]=h=>{m.value=!0,v.value=!1}),class:"text-xs cursor-pointer flex gap-3 p-2 hover:bg-blue-300"},[C($,{icon:"plus",class:"w-3 h-3 mr-1"}),r[8]||(r[8]=e("div",null,"Create Label",-1))])])])])):W("",!0)]),m.value?(d(),f("div",ct,[e("div",dt,[e("div",null,[o.value!=""?(d(),f("div",mt,b(o.value),1)):W("",!0),r[9]||(r[9]=e("div",{class:"text-center my-2 text-xs font-semibold"},"Create Label",-1)),C(Le,{placeholder:"Label Name",modelValue:s.value,"onUpdate:modelValue":r[4]||(r[4]=h=>s.value=h)},null,8,["modelValue"]),e("div",{onClick:r[5]||(r[5]=h=>y()),class:"blue-btn font-semibold py-2 cursor-pointer text-center ml-auto mr-auto w-7/12 disabled:opacity-50 disabled:cursor-auto"},b(p.$t("general.confirm")),1),e("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:r[6]||(r[6]=h=>m.value=!1)},b(p.$t("general.cancel")),1)])])])):W("",!0)],64)}}});const gt={name:"ViewAccountDisplayAll",components:{AccountTile:tt,LabelComponent:vt},setup(){const L=D().appContext.config.globalProperties.emitter;w(()=>{if(!a.currentLoggedInWallet)return[];let o=a.currentLoggedInWallet.accounts.map(t=>({name:t.name,balance:t.balance,address:t.address,publicKey:t.publicKey,isMultisig:!!t.getDirectParentMultisig().length,multisigInfo:t.multisigInfo})),s=a.currentLoggedInWallet.others.filter(t=>t.type==="MULTISIG").map(t=>({name:t.name,balance:t.balance,address:t.address,publicKey:t.publicKey,isMultisig:!0,multisigInfo:t.multisigInfo}));return o.concat(s)});const _=x([]),c=w(()=>{if(a.currentLoggedInWallet)if(a.currentLoggedInWallet.others){const o=a.currentLoggedInWallet.accounts.concat(a.currentLoggedInWallet.others);let s=[];return _.value.forEach(t=>{let i=a.currentLoggedInWallet.labels.find(y=>y.name==t);i&&i.addresses.forEach(y=>{let A=o.find(p=>p.address==y);s.push(A)})}),s=Array.from(new Set(s)),_.value.length?s:o}else{const o=a.currentLoggedInWallet.accounts;let s=[];return _.value.forEach(t=>{let i=a.currentLoggedInWallet.labels.find(y=>y.name==t);i&&i.addresses.forEach(y=>{let A=o.find(p=>p.address==y);s.push(A)})}),s=Array.from(new Set(s)),_.value.length?s:o}else return null});L.on("filterByLabel",o=>{_.value=o});const v=x(""),m=w(()=>{const o=v.value.toLowerCase();return v.value==""?g(c.value):c.value.filter(s=>s.name.toLowerCase().includes(o)||s.address.toLowerCase().includes(o.replace(/-/g,"")))});function g(o){if(o!==null){var s=o.reduce((t,i)=>(t.some(y=>y.address===i.address&&y.name===i.name)||t.push(i),t),[]);return s}}return{accounts:c,filterQuery:v,filteredAccounts:m}}},pt={class:"relative"},bt={class:"my-4 w-11/12 ml-auto mr-auto flex flex-col sm:flex-row justify-between"},yt={class:"mt-3 sm:mt-0 text-center w-44 text-white bg-blue-primary rounded-md font-semibold text-xs p-2"},xt={class:"mt-2 py-3"},Lt={class:"w-11/12 ml-auto mr-auto flex flex-col gap-3"},_t={class:"flex items-center"},ht=["placeholder"];function wt(u,L,_,c,v,m){const g=S("LabelComponent"),o=S("router-link"),s=S("font-awesome-icon"),t=S("AccountTile");return d(),f("div",pt,[e("div",bt,[C(g),L[1]||(L[1]=e("div",{class:"absolute invisible 2xl:visible text-gray-500 mt-1 explicitLeft"},"Labels",-1)),C(o,{to:{name:"ViewAccountCreateSelectType"}},{default:E(()=>[e("div",yt,"+ "+b(u.$t("general.createNewAcc")),1)]),_:1})]),e("div",xt,[e("div",Lt,[e("div",_t,[C(s,{icon:"search",class:"text-blue-link mr-1"}),q(e("input",{"onUpdate:modelValue":L[0]||(L[0]=i=>c.filterQuery=i),type:"text",class:"py-2 px-2 outline-none text-xs text-black",placeholder:u.$t("general.search")},null,8,ht),[[J,c.filterQuery]])]),(d(!0),f(T,null,U(c.filteredAccounts,(i,y)=>(d(),Y(t,{key:y,account:i},null,8,["account"]))),128))])]),L[2]||(L[2]=e("div",{class:"mb-36"},null,-1))])}const Tt=ee(gt,[["render",wt],["__scopeId","data-v-eadf76db"]]);export{Tt as default};
