import{d as C,g as b,A as m,D as E,r as T,o as w,f as M,e as s,l as o,b as r,t as i,s as _,v as f,i as k,x as n,_ as V}from"./index-aa0744c5.js";import{_ as R}from"./chevron_left-0423cb29.js";import{A as L,_ as D,a as $}from"./AccountTabs.vue_vue_type_script_setup_true_lang-5a23aeb0.js";import{_ as F}from"./icon-plus-7207f329.js";import{s as h,a as Q}from"./column.esm-fd96ff3a.js";import{U as B}from"./UTF8-f9b1e520.js";import"./jdenticon-module-cb5aedf5.js";import"./functions-340feb99.js";import"./TextInput-9b2d1c8a.js";import"./TextInputClean-324ee3f2.js";import"./icon-key-5b3f7dda.js";const Z={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},z={class:"border-2 border-t-0"},W={class:"flex cursor-pointer items-center pt-3 px-3"},O={class:"text-blue-primary text-xs"},j={class:"border border-blue-primary p-4 bg-blue-100 flex flex-col rounded mt-5 mx-6 mb-5"},q={class:"text-black text-sm font-bold"},G={class:"text-black text-sm font-bold"},J={class:"flex"},X={key:0,class:"ml-3 text-gray-400 font-semibold"},Y={key:0,class:"flex"},ee={class:"text-xs"},ae=C({__name:"ViewNamespaceMetadata",props:{namespaceId:String,address:String},setup(l){const y=l,P=b("-"),U=async()=>{let e=await m.chainAPI.namespaceAPI.getNamespace(new n.NamespaceId(y.namespaceId));P.value=e.id.toHex()},g=b([]),v=b(""),H=async()=>{let e=await m.chainAPI.accountAPI.getAccountInfo(n.Address.createFromRawAddress(y.address));v.value=e.publicKey},N=e=>new Promise(a=>setTimeout(a,e)),I=e=>(e.endsWith("00")&&(e=e.substring(0,e.length-2),e=I(e)),e),x=e=>{e=I(e);let a=n.Convert.hexToUint8(e);return B.isNotUTF8(a)||(e=n.Convert.decodeHexToUtf8(e)),e},S=async()=>{let e=new n.MetadataQueryParams;e.metadataType=n.MetadataType.NAMESPACE,e.pageSize=100,e.pageNumber=1,e.targetId=new n.NamespaceId(y.namespaceId),e.targetKey=v.value;let a=await m.chainAPI.metadataAPI.searchMetadatas(e);for(let t=0;t<a.metadataEntries.length;t++){let d=a.metadataEntries;g.value.push({scopedMetadataKeyUtf8:d[t].scopedMetadataKey.toHex()==x(d[t].scopedMetadataKey.toHex())?null:x(d[t].scopedMetadataKey.toHex()),scopedMetadataKeyHex:d[t].scopedMetadataKey.toHex(),value:d[t].value})}let p=a.pagination.totalPages;await N(250);for(let t=2;t<=p;t++){let d=new n.MetadataQueryParams;d.metadataType=n.MetadataType.NAMESPACE,d.pageSize=100,d.pageNumber=t,d.targetId=y.namespaceId,d.targetKey=v.value;let K=await m.chainAPI.metadataAPI.searchMetadatas(d);for(let c=0;c<K.metadataEntries.length;c++){let u=K.metadataEntries;g.value.push({scopedMetadataKeyUtf8:u[c].scopedMetadataKey.toHex()==x(u[c].scopedMetadataKey.toHex())?null:x(u[c].scopedMetadataKey.toHex()),scopedMetadataKeyHex:u[c].scopedMetadataKey.toHex(),value:u[c].value}),await N(250)}}},A=async()=>{await H(),await U(),S()};if(m.isReady)A();else{let e=E(m,a=>{a.isReady&&(A(),e())})}return(e,a)=>{const p=T("router-link");return w(),M("div",null,[s("div",Z,[o(L,{address:l.address,class:"mb-6"},null,8,["address"]),o(D,{address:l.address,selected:"namespaces"},null,8,["address"]),s("div",z,[o(p,{to:{name:"ViewAccountNamespaces",params:{address:l.address}}},{default:r(()=>[s("div",W,[a[0]||(a[0]=s("img",{src:R},null,-1)),s("div",O,i(e.$t("general.back")),1)])]),_:1},8,["to"]),s("div",j,[s("div",null,[a[1]||(a[1]=s("div",{class:"uppercase text-blue-primary font-semibold text-xxs"},"NAMESPACE ID",-1)),s("div",q,i(P.value),1)]),s("div",null,[a[2]||(a[2]=s("div",{class:"uppercase text-blue-primary font-semibold text-xxs mt-3"},"Name",-1)),s("div",G,i(l.namespaceId),1)])]),o(f(Q),{value:g.value,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink  RowsPerPageDropdown",rowsPerPageOptions:[10,20,30,40,50],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",responsiveLayout:"scroll"},{empty:r(()=>[_(i(e.$t("general.noRecord")),1)]),loading:r(()=>[_(i(e.$t("dashboard.fetchingTx")),1)]),default:r(()=>[o(f(h),{field:"scopedMetadataKey",header:"Scoped Metadata Key",style:{"`wideScreen?'min-width":"200px'?'width: 200px'  `"}},{body:r(({data:t})=>[s("div",J,[s("div",null,i(t.scopedMetadataKeyHex),1),t.scopedMetadataKeyUtf8?(w(),M("div",X,"hex")):k("",!0)]),t.scopedMetadataKeyUtf8?(w(),M("div",Y,[s("div",null,i(t.scopedMetadataKeyUtf8),1),a[3]||(a[3]=s("div",{class:"ml-3 text-gray-400 font-semibold"},"utf-8",-1))])):k("",!0)]),_:1}),o(f(h),{field:"currentValue",header:"Current Value",style:{"`wideScreen?'min-width":"180px'?'width: 180px'`"}},{body:r(({data:t})=>[s("span",ee,i(t.value),1)]),_:1}),o(f(h),{field:"action",header:"Action",style:{"`wideScreen?'min-width":"180px'?'width: 180px'`"}},{body:r(({data:t})=>[o(p,{to:{name:"ViewUpdateNamespaceMetadata",params:{targetId:l.namespaceId,scopedMetadataKey:t.scopedMetadataKeyUtf8?t.scopedMetadataKeyUtf8:t.scopedMetadataKeyHex}}},{default:r(()=>a[4]||(a[4]=[s("img",{src:$,title:"Update Metadata",class:"inline-block w-3 h-3 text-black cursor-pointer ml-1"},null,-1)])),_:2},1032,["to"])]),_:1})]),_:1},8,["value"]),o(p,{to:{name:"ViewUpdateNamespaceMetadata",params:{targetId:l.namespaceId}}},{default:r(()=>a[5]||(a[5]=[s("button",{class:"mx-6 my-4 blue-btn py-3 px-3 flex items-center"},[s("img",{src:F,class:"inline-block w-4 h-4 mr-2"}),_("Create New Namespace Metadata")],-1)])),_:1},8,["to"])])])])}}});const ue=V(ae,[["__scopeId","data-v-94e3cc79"]]);export{ue as default};
