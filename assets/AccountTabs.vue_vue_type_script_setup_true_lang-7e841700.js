import{d as K,g as y,j as U,c as L,w as n,o,f as i,e as c,t as u,i as f,l as C,F as q,E as H,x as A,b4 as z,A as P,_ as Q,y as G,K as J,H as X,r as F,Q as Y,R as Z,a1 as ee,b as M,s as V,h as T,a as E}from"./index-f4fa05bb.js";import{t as te}from"./jdenticon-module-14cc3de9.js";import{c as ae}from"./functions-19d5b840.js";import{T as se}from"./TextInput-ed30286c.js";import{T as j}from"./TextInputClean-800bfeae.js";import{_ as ne,a as le}from"./icon-key-5b3f7dda.js";const re="/web-wallet-vuejs/assets/edit-icon-026aae3d.svg",oe={key:0,class:"popup-outer-lang fixed flex z-50"},de={class:"modal-popup-box"},ce={key:0},ie={key:0,class:"error error_box mb-3"},ue=c("div",{class:"text-center mt-2 text-xs font-semibold"},"Change Name",-1),me={class:"flex justify-center mt-3"},ge=["disabled"],fe={key:1},ve={key:0,class:"error error_box mb-3"},pe=c("div",{class:"text-center mt-2 text-xs font-semibold"},"Add to Address Book",-1),be={class:"flex justify-center"},ye=["disabled"],xe={key:2},he={key:0,class:"error error_box mb-3"},we=c("div",{class:"text-center mt-2 text-xs font-semibold"},"Edit Address Book",-1),Ie={class:"flex justify-center"},ke=["disabled"],_e=K({__name:"ChangeNameModal",props:{isOther:Boolean,address:String},emits:["change-name"],setup(s){const r=s,a=H().appContext.config.globalProperties.emitter,p=y(r.address),{t:m}=U(),h=L(()=>w.value.trim()==""),N=L(()=>v.value.trim()==""),b=y(!1),v=y(""),w=y(""),d=y(""),k=()=>{if(w.value.trim()){const l=n.currentLoggedInWallet.accounts.find(t=>t.name==w.value.trim()),e=n.currentLoggedInWallet.others.find(t=>t.name==w.value.trim());if(!l&&!e){const t=n.currentLoggedInWallet.accounts.findIndex(g=>g.address===r.address);if(t==-1){const g=n.currentLoggedInWallet.others.findIndex(_=>_.address===r.address);n.currentLoggedInWallet.others[g].name=w.value,a.emit("change-name",w.value)}else n.currentLoggedInWallet.accounts[t].name=w.value,a.emit("change-name",w.value);n.wallets.saveMyWalletOnlytoLocalStorage(n.currentLoggedInWallet),d.value="",w.value="",b.value=!1}else l||e?d.value=m("account.nameTaken"):d.value=m("account.failChangeName")}else d.value=m("account.nameEmpty")},S=y(!1);r.isOther&&n.currentLoggedInWallet.contacts.find(e=>e.address==r.address)&&(S.value=!0);const R=()=>{if(v.value==" "){d.value=m("general.nameRequired");return}const l=A.Address.createFromRawAddress(r.address);let e=new z(v.value.trim(),l.plain(),"-none-");const t=n.currentLoggedInWallet,g=t.accounts.findIndex($=>$.name.toLowerCase()==v.value.toLowerCase().trim()),_=t.contacts!=null?t.contacts.findIndex($=>A.Address.createFromRawAddress($.address).plain()==l.plain()):-1,B=t.contacts!=null?t.contacts.findIndex($=>$.name.toLowerCase()==v.value.toLowerCase().trim()):-1;_>=0?d.value=m("addressBook.addressExist"):B>=0||g>=0?d.value=m("addressBook.nameExist"):(n.currentLoggedInWallet.addAddressBook(e),n.wallets.saveMyWalletOnlytoLocalStorage(n.currentLoggedInWallet),d.value="",v.value="",b.value=!1)},W=y("");(async l=>{try{let e=await P.chainAPI.accountAPI.getAccountInfo(A.Address.createFromRawAddress(l));e.publicKey=="0000000000000000000000000000000000000000000000000000000000000000"?W.value=null:W.value=e.publicKey}catch{W.value=null}})(r.address);const O=()=>{const l=n.currentLoggedInWallet;if(!l)return;const e=n.currentLoggedInWallet.contacts.find(I=>I.address==r.address),t=n.currentLoggedInWallet.contacts.findIndex(I=>I.address==r.address);let g=l.contacts.filter(I=>I.name.toLowerCase()!=e.name.toLowerCase().trim()),_=g.find(I=>I.name.toLowerCase()==v.value.toLowerCase().trim()),B=l.accounts.find(I=>I.name.toLowerCase()==v.value.toLowerCase().trim()),$=g.find(I=>A.Address.createFromRawAddress(I.address).plain()==A.Address.createFromRawAddress(r.address).plain());_!=null||B!=null?d.value=m("addressBook.nameExist"):$!=null?d.value=m("addressBook.addressExist"):(n.currentLoggedInWallet.updateAddressBook(t,{name:v.value.trim(),address:A.Address.createFromRawAddress(r.address).plain(),group:"-none-",publicKey:W.value}),n.wallets.saveMyWalletOnlytoLocalStorage(n.currentLoggedInWallet),d.value="",v.value="",b.value=!1)};return(l,e)=>(o(),i(q,null,[c("img",{src:re,class:"w-4 h-4 text-black cursor-pointer mt-1 ml-1",onClick:e[0]||(e[0]=t=>b.value=!b.value)}),b.value?(o(),i("div",oe,[c("div",de,[s.isOther?s.isOther&&!S.value?(o(),i("div",fe,[d.value!=""?(o(),i("div",ve,u(d.value),1)):f("",!0),pe,C(j,{placeholder:l.$t("general.name"),errorMessage:l.$t("general.nameRequired"),modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=t=>v.value=t),icon:"id-card-alt",class:"w-full md:w-96 inline-block mt-3 mr-2"},null,8,["placeholder","errorMessage","modelValue"]),C(j,{placeholder:l.$t("general.address"),modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=t=>p.value=t),disabled:!0,icon:"wallet",class:"w-full md:w-96 inline-block mr-2"},null,8,["placeholder","modelValue"]),c("div",be,[c("button",{onClick:e[5]||(e[5]=t=>R()),class:"blue-btn font-semibold py-2 cursor-pointer text-center w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:N.value},u(l.$t("general.add")),9,ye)])])):(o(),i("div",xe,[d.value!=""?(o(),i("div",he,u(d.value),1)):f("",!0),we,C(j,{placeholder:l.$t("general.name"),errorMessage:l.$t("general.nameRequired"),modelValue:v.value,"onUpdate:modelValue":e[6]||(e[6]=t=>v.value=t),icon:"id-card-alt",class:"w-full md:w-96 inline-block mt-3 mr-2"},null,8,["placeholder","errorMessage","modelValue"]),C(j,{placeholder:l.$t("general.address"),modelValue:p.value,"onUpdate:modelValue":e[7]||(e[7]=t=>p.value=t),disabled:!0,icon:"wallet",class:"w-full md:w-96 inline-block mr-2"},null,8,["placeholder","modelValue"]),c("div",Ie,[c("button",{onClick:e[8]||(e[8]=t=>O()),class:"blue-btn font-semibold py-2 cursor-pointer text-center w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:N.value},u(l.$t("general.add")),9,ke)])])):(o(),i("div",ce,[d.value!=""?(o(),i("div",ie,u(d.value),1)):f("",!0),ue,C(se,{class:"mt-3",placeholder:l.$t("account.namePlaceholder"),errorMessage:l.$t("account.enterAccountName"),modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=t=>w.value=t),icon:"wallet"},null,8,["placeholder","errorMessage","modelValue"]),c("div",me,[c("button",{onClick:e[2]||(e[2]=t=>k()),class:"blue-btn font-semibold py-2 cursor-pointer text-center w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:h.value},u(l.$t("general.confirm")),9,ge)])])),c("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:e[9]||(e[9]=t=>{b.value=!b.value,d.value=""})},u(l.$t("general.cancel")),1)])])):f("",!0),b.value?(o(),i("div",{key:1,onClick:e[10]||(e[10]=t=>{b.value=!b.value,d.value=""}),class:"fixed inset-0 bg-opacity-60 bg-gray-100 z-20"})):f("",!0)],64))}}),Ae={name:"AccountComponent",props:{address:String},components:{changeNameModal:_e},setup(s){const{t:r}=U(),x=G(),a=L(()=>{if(!n.currentLoggedInWallet)return null;let e=n.currentLoggedInWallet.accounts.find(t=>t.address==s.address)||n.currentLoggedInWallet.others.find(t=>t.address==s.address);return e||null}),p=L(()=>n.currentLoggedInWallet?n.currentLoggedInWallet.others.find(e=>e.address==s.address):null);let m=y(""),h=new J("ThemeStyleConfig");const N=L(()=>{if(s.address)try{return X.createAddress(s.address).pretty()}catch{}return""});h.init();const v=H().appContext.config.globalProperties.emitter,w=L(()=>a.value?!!a.value.default:!1),d=L(()=>a.value?!!a.value.getDirectParentMultisig().length:!1),k=y(""),S=y(a.value?a.value.name:"");k.value=a.value?a.value.name:"";const R=L(()=>n.currentLoggedInWallet?n.currentLoggedInWallet.convertAddressToName(s.address,!0):""),W=y(te(s.address,75,h.jdenticonConfig)),D=y(!0);y(!1);const O=()=>{if(k.value.trim()){const e=n.currentLoggedInWallet.accounts.find(g=>g.name==k.value.trim()),t=n.currentLoggedInWallet.others.find(g=>g.name==k.value.trim());if(!e&&!t){const g=n.currentLoggedInWallet.accounts.findIndex(_=>_.address===s.address);if(g==-1){const _=n.currentLoggedInWallet.others.findIndex(B=>B.address===s.address);n.currentLoggedInWallet.others[_].name=k.value}else n.currentLoggedInWallet.accounts[g].name=k.value;n.wallets.saveMyWalletOnlytoLocalStorage(n.currentLoggedInWallet),D.value=!0,R.value=k.value,m.value="",m.value=""}else e||t?m.value=r("account.nameTaken"):m.value=r("account.failChangeName")}else m.value=r("account.nameEmpty")},l=e=>{let t=document.getElementById(e).getAttribute("copyValue"),g=document.getElementById(e).getAttribute("copySubject");ae(t),x.add({severity:"info",detail:g+" "+r("general.copied"),group:"br-custom",life:3e3})};return v.on("change-name",e=>{S.value=e}),{accountName:k,accountNameDisplay:R,showName:D,svgString:W,isDefault:w,isMultiSig:d,prettyAddress:N,changeName:O,copy:l,err:m,other_acc:p,accountNameChange:S}}},Ce={class:"border-2 py-3 px-6"},Le={class:"flex"},$e=["innerHTML"],Ne={class:"flex flex-col justify-center ml-4"},We={key:0,class:"text-red-500 text-xs"},Me={class:"flex"},Ve={key:0,class:"font-semibold text-md"},Te={key:1,class:"font-semibold text-xs mt-1.5"},Se={class:"flex gap-2"},Be=["copyValue","title","copySubject"],Re={class:"flex gap-2"},Ee=["title"],je=c("img",{src:ne,class:"h-4 w-4"},null,-1),De={class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"},Oe=["title"],Pe={key:0,src:le,class:"h-4 w-4 mr-1"},Fe={key:1,class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"};function Ke(s,r,x,a,p,m){const h=F("changeNameModal"),N=F("font-awesome-icon");return o(),i("div",Ce,[c("div",Le,[c("div",{innerHTML:a.svgString},null,8,$e),c("div",Ne,[a.err!=""?(o(),i("div",We,u(a.err),1)):f("",!0),c("div",Me,[a.showName?(o(),i("div",Ve,u(a.accountNameDisplay),1)):f("",!0),a.accountNameChange!==a.accountNameDisplay?(o(),i("div",Te,"("+u(a.accountNameChange)+")",1)):f("",!0),a.showName?f("",!0):Y((o(),i("input",{key:2,class:"outline-none ml-4 font-semibold text-md","onUpdate:modelValue":r[0]||(r[0]=b=>a.accountName=b)},null,512)),[[Z,a.accountName]]),C(h,{address:x.address,isOther:a.other_acc!=null},null,8,["address","isOther"])]),c("div",Se,[c("div",{id:"address",copyValue:a.prettyAddress,title:a.prettyAddress,copySubject:s.$t("general.address"),class:"truncate md:text-clip w-44 md:w-full text-xs font-semibold mt-1"},u(a.prettyAddress),9,Be),C(N,{icon:"copy",title:s.$t("general.copy"),onClick:r[1]||(r[1]=b=>a.copy("address")),class:"w-5 h-5 text-blue-link cursor-pointer"},null,8,["title"])]),c("div",Re,[a.isDefault?(o(),i("div",{key:0,class:"px-1 py-0.5 flex mt-0.5 bg-blue-primary rounded-sm",title:s.$t("general.defaultTitle")},[je,c("p",De,u(s.$t("general.default")),1)],8,Ee)):f("",!0),a.isMultiSig?(o(),i("div",{key:1,class:"px-1 py-0.5 flex mt-0.5 bg-orange-primary rounded-sm",title:s.$t("general.multisigTitle")},[a.isMultiSig?(o(),i("img",Pe)):f("",!0),a.isMultiSig?(o(),i("p",Fe,u(s.$t("general.multisig")),1)):f("",!0)],8,Oe)):f("",!0)])])])])}const Ye=Q(Ae,[["render",Ke]]),Ue={class:"flex text-xs flex-wrap font-semibold border-b-2 menu_title_div"},He={name:"AccountTabs"},Ze=K({...He,props:{address:String,selected:String},setup(s){const r=s,x=y(!1);ee(()=>{a()});const a=async()=>{if(!P.isReady){setTimeout(a,1e3);return}try{switch((await P.chainAPI.accountAPI.getAccountInfo(A.Address.createFromRawAddress(r.address))).accountType){case A.AccountType.Remote:x.value=!1;break;case A.AccountType.Remote_Unlinked:x.value=!1;break;default:x.value=!0;break}}catch{console.log("Error retrieving account type"),x.value=!1}};return(p,m)=>{const h=F("router-link");return o(),i("div",Ue,[C(h,{class:T([`${s.selected=="details"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-32 text-center py-3 word-break"]),to:{name:"ViewAccountDetails",params:{address:s.address}}},{default:M(()=>[V(u(p.$t("account.accountDetails")),1)]),_:1},8,["class","to"]),x.value?(o(),E(h,{key:0,class:T([`${s.selected=="assets"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-18 py-3 text-center word-break"]),to:{name:"ViewAccountAssets",params:{address:s.address}}},{default:M(()=>[V(u(p.$t("general.asset",2)),1)]),_:1},8,["class","to"])):f("",!0),x.value?(o(),E(h,{key:1,class:T([`${s.selected=="namespaces"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-24 py-3 text-center word-break"]),to:{name:"ViewAccountNamespaces",params:{address:s.address}}},{default:M(()=>[V(u(p.$t("general.namespace",2)),1)]),_:1},8,["class","to"])):f("",!0),x.value?(o(),E(h,{key:2,class:T([`${s.selected=="metadata"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-18 text-center py-3 word-break"]),to:{name:"ViewAccountMetadata",params:{address:s.address}}},{default:M(()=>[V("Metadata")]),_:1},8,["class","to"])):f("",!0),x.value?(o(),E(h,{key:3,class:T([`${s.selected=="multisig"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-18 py-3 text-center word-break"]),to:{name:"ViewMultisigHome",params:{address:s.address}}},{default:M(()=>[V(u(p.$t("general.multisig")),1)]),_:1},8,["class","to"])):f("",!0),C(h,{class:T([`${s.selected=="txn"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-18 py-3 text-center word-break"]),to:{name:"ViewAccountConfirmedTransactions",params:{address:s.address}}},{default:M(()=>[V(u(p.$t("general.transaction",2)),1)]),_:1},8,["class","to"])])}}});export{Ye as A,Ze as _,re as a};
