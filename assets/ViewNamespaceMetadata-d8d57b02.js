import"./vue-86063517.js";import{_ as C}from"./chevron_left-0423cb29.js";import{A as E,a as V,_ as R}from"./AccountTabs-e4f24db8.js";import{_ as L}from"./icon-plus-7207f329.js";import{f as w,g as B}from"./primevue-e09f7e84.js";import{d as i}from"./tsjs-xpx-chain-sdk-84426b6a.js";import{A as n,_ as D}from"./index-913a8781.js";import{U as F}from"./utf-8-cb75ef47.js";import{d as Q,r as b,w as $,B as z,o as g,z as M,A as a,a as m,m as p,g as d,l as P,bf as x,e as S,aW as W,aT as Z}from"./@vue-a9ecc9f1.js";import"./@js-joda-d98eb16f.js";import"./jdenticon-e4458e79.js";import"./node-stdlib-browser-23a8bc7f.js";import"./buffer-6d367910.js";import"./base64-js-50a5cdf9.js";import"./ieee754-44f7831e.js";import"./process-2209b2b3.js";import"./vue-i18n-728f748b.js";import"./@intlify-16888cd3.js";import"./functions-3b5b4af7.js";import"./TextInput-2aa983aa.js";import"./TextInputClean-7117448a.js";import"./icon-key-5b3f7dda.js";import"./rxjs-1250b26d.js";import"./tslib-8dbab242.js";import"./@noble-f8eff84a.js";import"./js-sha3-d7d4f583.js";import"./utf8-c941a4a0.js";import"./bip39-936aefa9.js";import"./axios-b48d2c29.js";import"./flatbuffers-edc4f8d7.js";import"./ws-0a714537.js";import"./vue-router-21fffbbf.js";import"./crypto-js-e64ac54c.js";import"./crypto-browserify-4fd8cccd.js";import"./randombytes-685e9383.js";import"./safe-buffer-c463177b.js";import"./create-hash-92c04a28.js";import"./inherits-804453d8.js";import"./md5.js-8d474739.js";import"./hash-base-bb85fc42.js";import"./readable-stream-2241ee9e.js";import"./events-86ccc6d8.js";import"./util-06f7ff32.js";import"./is-arguments-86164331.js";import"./has-tostringtag-7c6352d6.js";import"./has-symbols-cd7870b9.js";import"./call-bind-9e7f09da.js";import"./get-intrinsic-f35014ba.js";import"./has-proto-8ede3a55.js";import"./function-bind-68631a08.js";import"./has-ab8e2922.js";import"./is-generator-function-06dfaf9d.js";import"./which-typed-array-cf6b6a29.js";import"./for-each-f57c5052.js";import"./is-callable-7492318c.js";import"./available-typed-arrays-61974ec7.js";import"./gopd-bab4d6bd.js";import"./is-typed-array-037eef20.js";import"./util-deprecate-c3aabb3c.js";import"./string_decoder-ef7b01fe.js";import"./ripemd160-58dcfa02.js";import"./sha.js-cea3da2e.js";import"./cipher-base-aee0e03d.js";import"./stream-browserify-7496a08f.js";import"./create-hmac-e8b5ea4a.js";import"./browserify-sign-a708a95f.js";import"./browserify-rsa-bfbdcbb6.js";import"./bn.js-1ae23332.js";import"./elliptic-75e883ee.js";import"./minimalistic-assert-4cc49674.js";import"./minimalistic-crypto-utils-6f869a51.js";import"./brorand-03f0f79d.js";import"./hash.js-4f5dfe73.js";import"./hmac-drbg-87799258.js";import"./parse-asn1-465c125b.js";import"./asn1.js-405e93e4.js";import"./safer-buffer-2ac6237e.js";import"./evp_bytestokey-e91543fa.js";import"./browserify-aes-ce20a0e6.js";import"./buffer-xor-87a7236a.js";import"./pbkdf2-e2ae8643.js";import"./browserify-cipher-c4c37ca3.js";import"./browserify-des-3f7e64d9.js";import"./des.js-d262604a.js";import"./diffie-hellman-c8260aab.js";import"./miller-rabin-de27bf02.js";import"./create-ecdh-ffe720e9.js";import"./public-encrypt-fc0568a2.js";import"./randomfill-2874e5f1.js";import"./mathjs-2a513dae.js";import"./@babel-484168fe.js";import"./typed-function-4896e4f1.js";import"./decimal.js-d133ee8e.js";import"./complex.js-cf2520e8.js";import"./fraction.js-39e7906a.js";import"./javascript-natural-sort-c4dd0c27.js";import"./escape-latex-c8a96e7a.js";import"./seedrandom-c8f991ad.js";import"./tiny-emitter-56d49cfd.js";import"./crypto-random-string-d158262e.js";import"./jose-92e5544c.js";import"./vue-loading-overlay-b89251b1.js";import"./jspdf-30014160.js";import"./fflate-8981c52c.js";import"./vue-debounce-3bbbf8c6.js";import"./mitt-f7ef348c.js";/* empty css                   */import"./maska-6f10db43.js";import"./@fortawesome-014b81f2.js";import"./vue3-blocks-tree-e53499e3.js";const l=r=>(W("data-v-332024b1"),r=r(),Z(),r),j={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},O={class:"border-2 border-t-0"},q={class:"flex cursor-pointer items-center pt-3 px-3"},G=l(()=>a("img",{src:C},null,-1)),J={class:"text-blue-primary text-xs"},X={class:"border border-blue-primary p-4 bg-blue-100 flex flex-col rounded mt-5 mx-6 mb-5"},Y=l(()=>a("div",{class:"uppercase text-blue-primary font-semibold text-xxs"},"NAMESPACE ID",-1)),ee={class:"text-black text-sm font-bold"},te=l(()=>a("div",{class:"uppercase text-blue-primary font-semibold text-xxs mt-3"},"Name",-1)),ae={class:"text-black text-sm font-bold"},oe={class:"flex"},re={key:0,class:"ml-3 text-gray-400 font-semibold"},se={key:0,class:"flex"},ie=l(()=>a("div",{class:"ml-3 text-gray-400 font-semibold"},"utf-8",-1)),me={class:"text-xs"},pe=l(()=>a("img",{src:R,title:"Update Metadata",class:"inline-block w-3 h-3 text-black cursor-pointer ml-1"},null,-1)),de=l(()=>a("button",{class:"mx-6 my-4 blue-btn py-3 px-3 flex items-center"},[a("img",{src:L,class:"inline-block w-4 h-4 mr-2"}),P("Create New Namespace Metadata")],-1)),ce=Q({__name:"ViewNamespaceMetadata",props:{namespaceId:String,address:String},setup(r){const f=r,I=b("-"),T=async()=>{let e=await n.chainAPI.namespaceAPI.getNamespace(new i.NamespaceId(f.namespaceId));I.value=e.id.toHex()},h=b([]),v=b(""),U=async()=>{let e=await n.chainAPI.accountAPI.getAccountInfo(i.Address.createFromRawAddress(f.address));v.value=e.publicKey},N=e=>new Promise(s=>setTimeout(s,e)),A=e=>(e.endsWith("00")&&(e=e.substring(0,e.length-2),e=A(e)),e),_=e=>{e=A(e);let s=i.Convert.hexToUint8(e);return F.isNotUTF8(s)||(e=i.Convert.decodeHexToUtf8(e)),e},H=async()=>{let e=new i.MetadataQueryParams;e.metadataType=i.MetadataType.NAMESPACE,e.pageSize=100,e.pageNumber=1,e.targetId=new i.NamespaceId(f.namespaceId),e.targetKey=v.value;let s=await n.chainAPI.metadataAPI.searchMetadatas(e);for(let t=0;t<s.metadataEntries.length;t++){let o=s.metadataEntries;h.value.push({scopedMetadataKeyUtf8:o[t].scopedMetadataKey.toHex()==_(o[t].scopedMetadataKey.toHex())?null:_(o[t].scopedMetadataKey.toHex()),scopedMetadataKeyHex:o[t].scopedMetadataKey.toHex(),value:o[t].value})}let u=s.pagination.totalPages;await N(250);for(let t=2;t<=u;t++){let o=new i.MetadataQueryParams;o.metadataType=i.MetadataType.NAMESPACE,o.pageSize=100,o.pageNumber=t,o.targetId=f.namespaceId,o.targetKey=v.value;let k=await n.chainAPI.metadataAPI.searchMetadatas(o);for(let c=0;c<k.metadataEntries.length;c++){let y=k.metadataEntries;h.value.push({scopedMetadataKeyUtf8:y[c].scopedMetadataKey.toHex()==_(y[c].scopedMetadataKey.toHex())?null:_(y[c].scopedMetadataKey.toHex()),scopedMetadataKeyHex:y[c].scopedMetadataKey.toHex(),value:y[c].value}),await N(250)}}},K=async()=>{await U(),await T(),H()};if(n.isReady)K();else{let e=$(n,s=>{s.isReady&&(K(),e())})}return(e,s)=>{const u=z("router-link");return g(),M("div",null,[a("div",j,[m(E,{address:r.address,class:"mb-6"},null,8,["address"]),m(V,{address:r.address,selected:"namespaces"},null,8,["address"]),a("div",O,[m(u,{to:{name:"ViewAccountNamespaces",params:{address:r.address}}},{default:p(()=>[a("div",q,[G,a("div",J,d(e.$t("general.back")),1)])]),_:1},8,["to"]),a("div",X,[a("div",null,[Y,a("div",ee,d(I.value),1)]),a("div",null,[te,a("div",ae,d(r.namespaceId),1)])]),m(x(B),{value:h.value,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink  RowsPerPageDropdown",rowsPerPageOptions:[10,20,30,40,50],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",responsiveLayout:"scroll"},{empty:p(()=>[P(d(e.$t("general.noRecord")),1)]),loading:p(()=>[P(d(e.$t("dashboard.fetchingTx")),1)]),default:p(()=>[m(x(w),{field:"scopedMetadataKey",header:"Scoped Metadata Key",style:{"`wideScreen?'min-width":"200px'?'width: 200px'  `"}},{body:p(({data:t})=>[a("div",oe,[a("div",null,d(t.scopedMetadataKeyHex),1),t.scopedMetadataKeyUtf8?(g(),M("div",re,"hex")):S("v-if",!0)]),t.scopedMetadataKeyUtf8?(g(),M("div",se,[a("div",null,d(t.scopedMetadataKeyUtf8),1),ie])):S("v-if",!0)]),_:1}),m(x(w),{field:"currentValue",header:"Current Value",style:{"`wideScreen?'min-width":"180px'?'width: 180px'`"}},{body:p(({data:t})=>[a("span",me,d(t.value),1)]),_:1}),m(x(w),{field:"action",header:"Action",style:{"`wideScreen?'min-width":"180px'?'width: 180px'`"}},{body:p(({data:t})=>[m(u,{to:{name:"ViewUpdateNamespaceMetadata",params:{targetId:r.namespaceId,scopedMetadataKey:t.scopedMetadataKeyUtf8?t.scopedMetadataKeyUtf8:t.scopedMetadataKeyHex}}},{default:p(()=>[pe]),_:2},1032,["to"])]),_:1})]),_:1},8,["value"]),m(u,{to:{name:"ViewUpdateNamespaceMetadata",params:{targetId:r.namespaceId}}},{default:p(()=>[de]),_:1},8,["to"])])])])}}});const ua=D(ce,[["__scopeId","data-v-332024b1"],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/metadataTxn/views/ViewNamespaceMetadata.vue"]]);export{ua as default};
