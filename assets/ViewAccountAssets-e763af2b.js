import{d as O,r as u,a7 as K,a as G,E as A,A as M,H as U,k as W,o as n,b as d,e as l,s as c,z as i,B as v,C as w,t as m,m as R,f as P,a8 as q,n as N,i as J,_ as Q}from"./index-9f44b159.js";import{_ as Y}from"./proximax-logo-ecfc3767.js";import{_ as Z}from"./xarcade-logo-c4d3fd5c.js";import{_ as ee}from"./metx-logo-27f23eae.js";import{_ as se}from"./icon-proximax-logo-gray-c2486ce1.js";import{_ as te}from"./icon-green-tick-1b766454.js";import{_ as re}from"./icon-red-x-a5511f99.js";import{_ as oe}from"./icon-more-options-3f3cfda9.js";import{_ as ae}from"./icon-plus-7207f329.js";import{A as ne,a as ie}from"./AccountTabs-632c69d6.js";import{s as b,a as le}from"./column.esm-fb895dbb.js";import"./jdenticon-module-342376c0.js";import"./functions-2ca43d8c.js";import"./TextInput-0dfdc0b7.js";import"./TextInputClean-02219e68.js";import"./icon-key-5b3f7dda.js";const ce="/web-wallet-vuejs/assets/icon-transfer-white-08654b1d.svg",de={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},me={class:"border-2 border-t-0"},ue=["href"],pe={class:"text-blue-primary uppercase w-min-max text-xs mt-1.5 cursor-pointertext-blue-primary pr-7"},fe={class:"flex items-center pr-7"},_e={key:0,src:Y,class:"inline-block h-7 w-7 mr-2 border-2 rounded-3xl"},ge={key:1,src:Z,class:"inline-block h-7 w-7 mr-2 border-2 rounded-3xl"},ve={key:2,src:ee,class:"inline-block h-7 w-7 mr-2 border-2 rounded-3xl"},we={key:3},he={key:4,src:se,class:"inline-block h-6 w-6 mr-2"},ye={key:5,class:"inline-block text-xs ml-2 mt-1"},xe={key:6,class:"inline-block text-xs ml-2 cursor-pointer mt-1"},be={key:0,src:te,class:"h-5 w-5"},ke={key:1,src:re,class:"h-5 w-5"},Ae=["onClick","onMouseover"],Pe={key:0,class:"mt-5 w-36 absolute rounded-sm shadow-lg bg-white focus:outline-none z-10 text-left"},Ie={class:"my-2"},Ce=l("div",{class:"block hover:bg-gray-100 transition duration-200 p-2 z-20 cursor-pointer"},"View Metadata",-1),Me={class:"flex my-3 px-6 flex-col w-full ml-auto mr-auto gap-2 sm:flex-row sm:items-center"},Ne=l("img",{src:ce,class:"inline-block w-4 h-4 mt-0.5 cursor-pointer mr-1"},null,-1),Se=l("img",{src:q,class:"w-4 h-4 inline-block relative mr-1"},null,-1),Le=l("img",{src:ae,class:"inline-block w-4 h-4 mr-2"},null,-1),Ve=O({__name:"ViewAccountAssets",props:{address:String},setup(p){const S=p,h=e=>e=="prx.xpx"?{name:"XPX",registered:!0}:e=="prx.metx"?{name:"METX",registered:!0}:e=="xarcade.xar"?{name:"XAR",registered:!0}:{name:e,registered:!1},I=u({page:0,rows:10}),$=u(),B=e=>{I.value.rows=e},f=u([]),E=e=>N.currentNetworkProfile?N.currentNetworkProfile.chainExplorer.url+"/"+N.currentNetworkProfile.chainExplorer.assetInfoRoute+"/"+e:"",y=u([]),k=u(0),X=e=>{k.value=e,y.value[e]=!y.value[e]};J().appContext.config.globalProperties.emitter.on("PAGE_CLICK",()=>{for(var e=0;e<y.value.length;)e!=k.value&&(y.value[e]=!1),e++});const z=e=>{k.value=e},H=()=>{k.value=-1},j=async()=>{try{return(await A.chainAPI.accountAPI.getAccountInfo(M.Address.createFromRawAddress(S.address))).mosaics.map((o,t)=>({i:t,id:o.id.toHex(),amount:o.amount.compact().toString(),name:"",creator:!1,isLoaded:!1}))}catch{return[]}},L=K(),_=u(!1);L.run(()=>{const e=u(!1),o=G(A,async t=>{t.isReady&&!e.value&&(_.value=!0,f.value=await j(),e.value=!0,V(),_.value=!1,o(),L.stop())},{immediate:!0})});const F=e=>{const{page:o,rows:t}=e;I.value={page:o,rows:t},V()},V=async()=>{var T;_.value=!0;const{page:e,rows:o}=I.value,t=[];for(let r=0;r<o;r++){const a=e*o+r;if(!f.value[a]||f.value[a].isLoaded)continue;const x=f.value[a];t.push(new M.MosaicId(x.id))}if(!t.length){_.value=!1;return}const s=await A.chainAPI.assetAPI.getMosaicsNames(t),g=await A.chainAPI.assetAPI.getMosaics(t),C={};t.forEach((r,a)=>{C[r.toHex()]=a}),g.sort((r,a)=>{const x=C[r.mosaicId.toHex()],D=C[a.mosaicId.toHex()];return x-D});for(let r=0;r<t.length;r++){const a=f.value.find(x=>x.id==t[r].toHex());a.name=((T=s[r].names[0])==null?void 0:T.name)??"-",a.amount=U.toCurrencyFormat(parseFloat(a.amount)/Math.pow(10,g[r].divisibility),g[r].divisibility),a.creator=g[r].owner.address.plain()==M.Address.createFromRawAddress(S.address).plain(),a.isLoaded=!0}_.value=!1};return(e,o)=>{const t=W("router-link");return n(),d("div",null,[l("div",de,[c(ne,{address:p.address,class:"mb-6"},null,8,["address"]),c(ie,{address:p.address,selected:"assets"},null,8,["address"]),l("div",me,[c(w(le),{value:f.value,paginator:!0,rows:10,dataKey:"id",ref_key:"dt",ref:$,onPage:o[0]||(o[0]=s=>F(s)),"onUpdate:rows":o[1]||(o[1]=s=>B(s)),loading:_.value,rowsPerPageOptions:[10,20,30,40,50],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink  RowsPerPageDropdown",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",responsiveLayout:"scroll"},{empty:i(()=>[v(" No assets found. ")]),default:i(()=>[c(w(b),{field:"id",header:"Asset ID"},{body:i(({data:s})=>[l("a",{href:E(s.id),target:"_new",class:"col-span-2"},[l("div",pe,m(s.id),1)],8,ue)]),_:1}),c(w(b),{field:"name",header:"Namespace"},{body:i(({data:s})=>[l("div",fe,[h(s.name).name=="XPX"?(n(),d("img",_e)):h(s.name).name=="XAR"?(n(),d("img",ge)):h(s.name).name=="METX"?(n(),d("img",ve)):s.name=="-"?(n(),d("div",we)):(n(),d("img",he)),h(s.name).registered?(n(),d("div",ye,m(h(s.name).name),1)):(n(),d("div",xe,m(s.name),1))])]),_:1}),c(w(b),{field:"amount",header:"Balance"},{body:i(({data:s})=>[l("div",null,m(s.amount),1)]),_:1}),c(w(b),{field:"creator",header:"Creator"},{body:i(({data:s})=>[s.creator?(n(),d("img",be)):(n(),d("img",ke))]),_:1}),c(w(b),{header:"Actions "},{body:i(({data:s})=>[l("img",{src:oe,class:"w-4 h-4 cursor-pointer ml-2 mt-0.5",onClick:g=>X(s.i),onMouseover:g=>z(s.i),onMouseout:H},null,40,Ae),y.value[s.i]?(n(),d("div",Pe,[l("div",Ie,[s.isCreator?(n(),R(t,{key:0,to:{name:"ViewServicesAssetsModifySupplyChange",params:{assetId:s.id,address:p.address,assetBalance:s.balance}},class:"block hover:bg-gray-100 transition duration-200 p-2 z-20"},{default:i(()=>[v(m(e.$t("general.modifySupply")),1)]),_:2},1032,["to"])):P("v-if",!0),s.isCreator?(n(),R(t,{key:1,to:{name:"ViewServicesAssetsLinkToNamespace",params:{assetId:s.id,address:p.address}},class:"block hover:bg-gray-100 transition duration-200 p-2 z-20"},{default:i(()=>[v(m(e.$t("general.linkToNamespace")),1)]),_:2},1032,["to"])):P("v-if",!0),c(t,{to:{name:"ViewAssetMetadata",params:{assetId:s.id,address:p.address}}},{default:i(()=>[Ce]),_:2},1032,["to"])])])):P("v-if",!0)]),_:1})]),_:1},8,["value","loading"]),P(' <AssetDataTable :assets="mosaics" :address="address" /> '),l("div",Me,[c(t,{to:{name:"ViewTransferCreate"},class:"bg-blue-primary px-5 py-2 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center"},{default:i(()=>[Ne,v(m(e.$t("general.transfer")),1)]),_:1}),c(t,{to:{name:"ViewServicesMainnetSwap"},class:"bg-blue-primary px-5 py-2 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center"},{default:i(()=>[Se,v(m(e.$t("general.swap")),1)]),_:1}),c(t,{to:{name:"ViewServicesAssetsCreate"},class:"bg-blue-primary px-5 py-2 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center"},{default:i(()=>[Le,v(m(e.$t("asset.createNewAsset")),1)]),_:1})])])])])}}}),Qe=Q(Ve,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/views/ViewAccountAssets.vue"]]);export{Qe as default};
