import{_ as Oe,c as N,B as Ge,r as a,b9 as ze,b6 as Je,n as Ke,a as ae,A as Ye,w as q,H as Ze,i as P,o,b as l,e as t,j as r,t as d,f as u,x as c,m as h,k as w,v as pe,P as $e,U as et}from"./index-077dd2ca.js";import{S as tt}from"./SupplyInputClean-a5eba4b3.js";import{S as st,_ as at}from"./icon-dots-8c69e496.js";import{S as nt}from"./SelectInputAccount-4bed0ba9.js";import{c as ot}from"./functions-8af7ec89.js";import{S as E,a as ke}from"./swapUtils-c3e27d7e.js";import{_ as rt}from"./eth-aa063e38.js";import{_ as it}from"./index-febff57f.js";import{W,_ as Ce}from"./icon-connected-9e1dacf0.js";import{_ as Me}from"./icon-xpx-072deeab.js";import{C as Se,p as lt}from"./index-60840640.js";import"./icon-info-8b4f1351.js";import"./jdenticon-module-f65f0bd0.js";import"./jspdf.es.min-b3b217b5.js";import"./qrcode-f4900cda.js";const ct={name:"ViewServicesMainnetSwapETHToSirius",components:{SupplyInputClean:tt,SwapCertificateComponent:st,SelectInputAccount:nt},setup(){const y=N(()=>Ge.nativeToken.label),n=a(!0);window.ethereum&&(window.ethereum.isMetaMask||(n.value=!1)),ze(()=>{});let g=new Je(Ke.chainNetworkName);g.init();const e=a(0),X=a(""),V=a("");(async()=>{try{const s=await E.fetchTokenServiceInfo(g.swap_IN_SERVICE_URL,"xpx");s.status==200?(V.value=s.data.ethInfo.scAddress,X.value=s.data.ethInfo.sinkAddress,e.value=parseInt(s.data.siriusInfo.feeAmount),C.value=""):C.value="Swapping service is temporary not available. Please try again later"}catch{C.value="Swapping service is temporary not available. Please try again later"}})();let f=g.ETHChainId,Q=g.ETHNetworkName;const H=a(!1),p=a(!1),v=a(null),i=a(0),O=a(0),ne=a(""),G=a(!1),R=a(!1),j=a(!1),D=a(!1),L=a("Retry"),Te=g.ETHScanUrl,Ie=E.getIncoming_ETHSwapTransfer_URL(g.swap_IN_SERVICE_URL,"xpx"),z=a(!1),Ae=N(()=>R.value?"Approval on MetaMask is rejected":"Please sign transaction confirmation in MetaMask");let x,k;typeof window.ethereum<"u"?(x=new W(window.ethereum),k=x.getSigner(),H.value=!0,p.value=!!ethereum.isConnected(),ethereum.request({method:"eth_accounts"}).then(oe).catch(s=>{console.error(s)}),ethereum.request({method:"eth_chainId"}).then(s=>{re(s,!1)}).catch(s=>{console.error(s)}),ethereum.on("accountsChanged",Ne),ethereum.on("chainChanged",s=>{re(s,!0)})):console.log("MetaMask not installed");function oe(s){s.length===0?(O.value=0,v.value=""):s[0]!==v.value&&(v.value=s[0],J()),p.value=!!ethereum.isConnected()}function Ne(s){window.ethereum.isMetaMask&&(s.length===0?(O.value=0,v.value=""):s[0]!==v.value&&(v.value=s[0],C.value="",J())),p.value=!!ethereum.isConnected()}function re(s,m=!1){ne.value=s,f===parseInt(s)?(I.value="",m&&J()):I.value="Please select "+Q+" on MetaMask to swap"}function J(){ethereum.request({method:"eth_getBalance",params:[v.value,"latest"]}).then(s=>{O.value=parseInt(s)/Math.pow(10,18)}).catch(s=>{console.error(s)})}const Pe=()=>{window.ethereum.isMetaMask==null?n.value=!1:(n.value=!0,ethereum.request({method:"eth_requestAccounts"}).then(oe).catch(s=>{s.code===4001?console.log("Please connect to MetaMask."):s.code=="-32002"&&(C.value="Please click on MetaMask extension to approve connection")}))};ae([ne,v,V],([s,m,b])=>{b!=null&&b!=""&&(async()=>{try{x=new W(window.ethereum,"any"),k=x.getSigner();const we=await new Se(b,ke,k).balanceOf(m);i.value=we.toNumber()/Math.pow(10,6)}catch{i.value=0}})()}),ae(i,s=>{s<=e.value?T.value=!0:T.value=!1});const ie=a(!1),le=a(!1),ce=a(!1),de=a(!1),me=a(!1),ue=a(!1),fe=a(!1),U=a(""),K=a(""),he=a(""),Y=a(""),Z=a(""),$=a(""),ee=a(""),Ee=()=>{E.generateIncomingPdfCert("ETH",Y.value,S.value,Z.value,$.value,ee.value)},Ve=Ye(),He=s=>{let m=document.getElementById(s).getAttribute("copyValue"),b=document.getElementById(s).getAttribute("copySubject");ot(m),Ve.add({severity:"info",summary:b+" copied",detail:m,group:"br-custom",life:3e3})},te=a(1),Re=a(!1),ve=a(!0),T=a(!1),je=a(!1),S=a(q.currentLoggedInWallet.selectDefaultAccount().address),I=a(""),C=a(""),De=N(()=>!(_.value>0&&S.value!=""&&!I.value&&i.value>=_.value&&_.value>e.value)),_=a("0"),Le=N(()=>{let s=q.currentLoggedInWallet.accounts.find(m=>m.address==S.value);return s||(s=q.currentLoggedInWallet.others.find(m=>m.address==S.value)),s.name}),Ue=N(()=>_.value-50>0?_.value-50:0);ae(_,s=>{s<=e.value?T.value=!0:T.value=!1});const Be=()=>{te.value=2,setTimeout(()=>ie.value=!0,1e3),setTimeout(()=>{le.value=!0,(async()=>await xe())()},2e3)},xe=async()=>{try{I.value="",G.value=!1,x=new W(window.ethereum,"any"),k=x.getSigner();const m=new Se(V.value,ke,k);var s={gasLimit:(await E.getETH_GasLimit(g.gasPriceConsultURL)).standardGasLimit};const M=await m.transfer(X.value,lt(_.value,6),s);U.value=M.hash,K.value=Te+M.hash,(await x.getTransaction(M.hash)).hash===M.hash&&Fe()}catch(m){G.value=!0,(m.code="-32000")&&(m.value=m.message)}},Fe=()=>{ce.value=!0},se=a(!1),B=a(!1),A=a(!1),qe=()=>{se.value=!0,B.value=!0,A.value=!1,setTimeout(async()=>{await be()},2e3)},be=async()=>{const s=await We();se.value=!1,s?z.value?(B.value=!1,A.value=!0):(A.value=!1,setTimeout(()=>de.value=!0,1e3),setTimeout(()=>{me.value=!0,(async()=>await ge())()},2e3)):(B.value=!1,A.value=!0)},ye=a(""),ge=async()=>{try{R.value=!1,x=new W(window.ethereum,"any"),k=x.getSigner();const s=await k.signMessage(S.value);he.value=s;const m={recipient:S.value,signature:s,txnInfo:{network:"ETH",txnHash:U.value}};ye.value=m,await _e()}catch{R.value=!0}},We=async()=>{try{let s=await x.getTransactionReceipt(U.value);return s&&s.status===1?!0:s&&s.status===0?(z.value=!0,!0):!1}catch(s){return console.log(s),!1}},F=a(0),_e=async()=>{ue.value=!0,fe.value=!0,L.value="Initiating swap...",D.value=!0;let s=JSON.stringify(ye.value);try{const m=await fetch(Ie,{method:"POST",headers:{"Content-Type":"application/json"},body:s});if(m.status==200||m.status==201){const b=await m.json();j.value=!1,$.value=b.remoteTxnHash,Y.value=b.timestamp,Z.value=b.ctxId,ee.value=E.generateQRCode(K.value),setTimeout(()=>ve.value=!1,1e3),F.value=0}else m.status==208?console.log("208"):(j.value=!0,++F.value,L.value="Retry",D.value=!1)}catch{j.value=!0,++F.value,L.value="Retry",D.value=!1}},Xe=()=>{te.value=3},Qe=a(!1);return{err:I,balance:i,isInstallMetamask:H,connectMetamask:Pe,isMetamaskConnected:p,currentAccount:v,copy:He,currentPage:te,isDisabledValidate:ve,siriusAddress:S,disableSiriusAddress:Re,showAmountErr:T,sendRequest:Be,validated:Xe,amount:_,disableAmount:je,isDisabledSwap:De,savedCheck:Qe,step1:ie,step2:le,step3:ce,step4:de,step5:me,step6:ue,step7:fe,validationLink:K,validationHash:U,messageHash:he,transactionHash:$,swapTimestamp:Y,swapId:Z,swapQr:ee,saveCertificate:Ee,isInvalidConfirmedMeta:G,isInvalidSignedMeta:R,isInvalidSwapService:j,getValidation:xe,getSigned:ge,defaultXPXTxFee:e,serviceErr:C,swapServerErrIndex:F,afterSigned:_e,disableRetrySwap:D,retrySwapButtonText:L,signatureMessage:Ae,checkTxnConfirmation:be,triggerTxnConfirmation:qe,isCheckingTxnConfirmation:se,isDisabledCheckTxnConfirmed:B,isTxnNotConfirmed:A,transactionFailed:z,verifyMetaMaskPlugin:n,currentNativeTokenName:y,walletState:q,amountReceived:Ue,Helper:Ze,siriusName:Le}}},dt={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},mt={class:"mt-6 p-6 border filter shadow-lg text-center"},ut=t("div",{class:"text-md"},"Main Network Swap",-1),ft=t("div",{class:"text-xs my-3 mb-5 sm:mb-10"},[t("img",{src:rt,class:"mr-2 h-5 inline-block"}),c("Swap from ETH to Proximax Sirius Chain")],-1),ht={class:"flex my-10"},vt={class:"flex-none"},xt={class:"flex border border-gray-300 rounded-md filter shadow-md"},bt={class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},yt=t("div",{class:"flex-grow self-center md:mx-4 h-0.5 bg-gray-100"},null,-1),gt={class:"flex-none"},_t={class:"flex border border-gray-300 rounded-md filter shadow-md"},wt={class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},pt=t("div",{class:"flex-grow self-center md:mx-4 h-0.5 bg-gray-100"},null,-1),kt={class:"flex-none"},St={class:"flex border border-gray-300 rounded-md filter shadow-md"},Ct={class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},Mt={key:0},Tt=t("div",{class:"text-lg my-7 font-bold"},"Transaction Details",-1),It={key:0,class:"error error_box mb-5"},At={key:1,class:"bg-yellow-200 text-yellow-900 text-tsm p-3 mb-5 rounded-2xl"},Nt=t("b",null,"MetaMask",-1),Pt={class:"my-2"},Et={href:"https://bit.ly/3mVayCu",target:"_new",class:"text-blue-primary"},Vt={key:2,class:"error error_box mb-5"},Ht={key:3,class:"error error_box mb-5"},Rt={class:"mb-5 md:flex md:justify-between border border-gray-200 rounded"},jt={class:"flex justify-left"},Dt=t("div",{class:"w-18 flex items-center justify-center py-5 sm:h-20"},[t("img",{src:it,class:"w-8 h-8 inline-block"})],-1),Lt={class:"text-left flex items-center"},Ut=t("div",{class:"text-xxs uppercase text-blue-primary font-bold mb-1"},"From MetaMask Address",-1),Bt={class:"font-bold text-black text-tsm break-all mr-2"},Ft={key:0,class:"border-l border-gray-200 text-green-500 font-semibold text-xxs w-16 lg:w-20 flex items-center justify-center uppercase"},qt=t("div",null,[t("img",{src:Ce,class:"inline-block"}),t("div",null,"Connected")],-1),Wt=[qt],Xt={class:"border-l border-gray-200 text-blue-primary text-tsm font-bold w-16 lg:w-20 flex justify-center items-center"},Qt={key:0},Ot={key:1},Gt=t("a",{href:"https://metamask.io/",target:"_new"},"Download",-1),zt=[Gt],Jt={class:"md:hidden"},Kt={key:0,class:"border-t border-gray-200 text-green-500 font-semibold text-xxs uppercase p-2"},Yt=t("div",{class:"flex items-center justify-center"},[t("img",{src:Ce,class:"inline-block mr-2 w-4 h-4"}),c(" Connected ")],-1),Zt=[Yt],$t={class:"border-t border-gray-200 text-blue-primary text-tsm font-bold p-3"},es={key:0},ts={key:1},ss=t("a",{href:"https://metamask.io/",target:"_new"},"Download",-1),as=[ss],ns={class:"text-left"},os={class:"bg-blue-50 border border-blue-primary h-20 mt-5 rounded flex items-center justify-center"},rs=t("img",{src:Me,class:"w-5 h-5 ml-4"},null,-1),is={class:"my-4 text-xs"},ls={class:"mt-10 text-center"},cs=["disabled"],ds={key:1},ms={class:"text-lg my-7"},us={key:0,class:"error error_box mb-5"},fs={class:"flex border-b border-gray-300 p-3"},hs={class:"flex-none"},vs={class:"flex h-full justify-center"},xs={class:"flex border-b border-gray-300 p-3"},bs={class:"flex-none"},ys={class:"flex h-full justify-center"},gs={key:0,class:"mt-5"},_s={class:"flex border-b border-gray-300 p-3"},ws={class:"flex-none"},ps={class:"flex h-full justify-center"},ks={key:0,class:"bg-yellow-100 py-2 px-5 mt-3 rounded flex"},Ss=["href","copyValue"],Cs={class:"flex-none mr-3"},Ms={class:"sm:flex"},Ts=["disabled"],Is={key:1,class:"py-2 sm:flex-grow text-xs mt-3"},As=t("div",{class:"mb-1"},"One block confirmation needed to proceed.",-1),Ns=t("div",{class:"mb-1"},[t("b",null,"Do not change Gas Limit, Max Piority Fee or Max Fee"),c(".")],-1),Ps=t("div",{class:"mb-1"},"Confirmation might take up to 30 minutes, 1 hour or more due to high transaction volumes.",-1),Es=t("div",{class:"mb-1"},[c("Please "),t("b",null,"do not close or refresh"),c(" this page until the swap process is complete and you have saved your certificate.")],-1),Vs={class:"mb-1"},Hs=["href"],Rs={key:1,class:"text-tsm mt-2 bg-blue-100 px-4 py-2 rounded-xl inline-block text-blue-900"},js={key:2,class:"text-tsm mt-2 bg-red-100 px-4 py-2 rounded-xl inline-block text-red-primary"},Ds={class:"flex border-b border-gray-300 p-3"},Ls={class:"flex-none"},Us={class:"flex h-full justify-center"},Bs={class:"flex border-b border-gray-300 p-3"},Fs={class:"flex-none"},qs={class:"flex h-full justify-center"},Ws={key:0,class:"mt-5"},Xs={class:"flex border-b border-gray-300 p-3"},Qs={class:"flex-none"},Os={class:"flex h-full justify-center"},Gs={key:0,class:"bg-yellow-100 py-2 px-5 mt-2 rounded flex"},zs=["copyValue"],Js={class:"flex-none mr-3"},Ks={class:"flex border-b border-gray-300 p-3"},Ys={class:"flex-none"},Zs={class:"flex h-full justify-center"},$s={key:0,class:"mt-5"},ea=["disabled"],ta={key:1,class:"mt-5 text-tsm sm:text-sm"},sa=t("b",null,"transaction hash",-1),aa=t("b",null,"signature",-1),na=t("a",{href:"https://t.me/proximaxhelpdesk",target:"_new",class:"text-blue-primary font-bold underline"},"helpdesk",-1),oa={class:"mt-10 text-center"},ra=["disabled"],ia={key:2},la=t("h1",{class:"default-title font-bold mt-5 mb-2"},"Congratulations!",-1),ca=t("div",{class:"text-tsm mb-7"},"The swap process has already started!",-1),da={class:"mt-3"},ma=["href"],ua=t("div",{class:"md:mx-20 lg:mx-40 font-bold text-center text-tsm py-5 sm:py-10 mt-5 sm:mt-10 border-t border-gray-200"},"Swap Details",-1),fa={class:"md:mx-20 lg:mx-10 xl:mx-40 border-2 border-gray-200 mt-4 p-5 text-xs font-bold filter shadow-lg"},ha=t("div",{class:"text-blue-primary mb-1"},"From: MetaMask Account",-1),va={class:"break-all"},xa={class:"mt-1"},ba=t("div",null,[t("img",{src:at,class:"inline-block h-8 my-2"})],-1),ya={class:"text-blue-primary mb-1"},ga={class:"mt-1"},_a=t("img",{src:Me,class:"w-3 h-3 ml-2 inline relative",style:{top:"-2px"}},null,-1),wa=t("div",{class:"my-5 sm:my-7 text-gray-500 text-xs md:mx-20 lg:mx-10 xl:mx-40"},"Swap process may take a few hours to complete. Please save a copy of your certificate. It is needed in the event of an error.",-1),pa={class:"inline-flex items-center mb-5"},ka=t("span",{class:"ml-2 cursor-pointer text-xs font-bold"},"I confirm that I have downloaded a copy of my certificate.",-1),Sa={class:"sm:mt-5 text-center"};function Ca(y,n,g,e,X,V){const f=P("font-awesome-icon"),Q=P("SupplyInputClean"),H=P("SelectInputAccount"),p=P("router-link"),v=P("swap-certificate-component");return o(),l("div",null,[t("div",dt,[t("div",mt,[ut,ft,t("div",ht,[t("div",vt,[t("div",xt,[t("div",{class:r(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage>=1?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:r(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=1?"text-white":"text-gray-400"}`])},"1",2)],2),t("div",bt,d(y.$t("swap.transaction")),1)])]),yt,t("div",gt,[t("div",_t,[t("div",{class:r(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage>=2?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:r(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=2?"text-white":"text-gray-400"}`])},"2",2)],2),t("div",wt,d(y.$t("swap.validation")),1)])]),pt,t("div",kt,[t("div",St,[t("div",{class:r(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage==3?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:r(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=3?"text-white":"text-gray-400"}`])},"3",2)],2),t("div",Ct,d(y.$t("swap.certificate")),1)])])]),e.currentPage==1?(o(),l("div",Mt,[Tt,e.isInstallMetamask?u("",!0):(o(),l("div",It,d(y.$t("swap.noMetamask")),1)),e.verifyMetaMaskPlugin?u("",!0):(o(),l("div",At,[c("Please make sure there is no other crypto wallet extension currently being enabled except "),Nt,c("."),t("div",Pt,[c("Refer to the "),t("a",Et,[c("walkthrough"),h(f,{icon:"external-link-alt",class:"text-blue-primary w-3 h-3 self-center inline-block ml-1"})]),c(" for more details.")]),c("Please refresh this page after disabling other wallet extensions.")])),e.serviceErr!=""?(o(),l("div",Vt,d(e.serviceErr),1)):u("",!0),e.err!=""?(o(),l("div",Ht,d(e.err),1)):u("",!0),t("div",Rt,[t("div",jt,[Dt,t("div",Lt,[t("div",null,[Ut,t("div",Bt,d(e.isMetamaskConnected&&e.currentAccount?e.currentAccount:"Not connected"),1)])])]),t("div",{class:r(["md:grid hidden",e.currentAccount?"grid-cols-2":"grid-cols-1"])},[e.currentAccount?(o(),l("div",Ft,Wt)):u("",!0),t("div",Xt,[e.isInstallMetamask?(o(),l("div",Qt,[e.currentAccount?(o(),l("div",{key:1,class:"cursor-pointer",onClick:n[1]||(n[1]=i=>e.connectMetamask())},"Change")):(o(),l("div",{key:0,class:"cursor-pointer",onClick:n[0]||(n[0]=i=>e.connectMetamask())},"Connect"))])):(o(),l("div",Ot,zt))])],2),t("div",Jt,[e.currentAccount?(o(),l("div",Kt,Zt)):u("",!0),t("div",$t,[e.isInstallMetamask?(o(),l("div",es,[e.currentAccount?(o(),l("div",{key:1,class:"cursor-pointer",onClick:n[3]||(n[3]=i=>e.connectMetamask())},"Change")):(o(),l("div",{key:0,class:"cursor-pointer",onClick:n[2]||(n[2]=i=>e.connectMetamask())},"Connect"))])):(o(),l("div",ts,as))])])]),h(Q,{disabled:e.disableAmount,modelValue:e.amount,"onUpdate:modelValue":n[4]||(n[4]=i=>e.amount=i),balance:e.balance,placeholder:"ERC20 "+e.currentNativeTokenName+" (MINIMUM = 51 )",type:"text",showError:e.showAmountErr,errorMessage:e.amount?parseFloat(e.amount)<=e.defaultXPXTxFee?"Insufficient amount":"Insufficient token balance.":"Required Field",decimal:6,toolTip:"BEP20 token amount to swap. Minimum 51 BEP20 amount is required as 50 will be deducted from the amount as transaction fee."},null,8,["disabled","modelValue","balance","placeholder","showError","errorMessage"]),t("div",ns,[h(H,{modelValue:e.siriusAddress,"onUpdate:modelValue":n[5]||(n[5]=i=>e.siriusAddress=i),placeholder:"To Sirius Chain Account",selectDefault:e.walletState.currentLoggedInWallet.selectDefaultAccount().address},null,8,["modelValue","selectDefault"])]),t("div",os,[c(d(e.amountReceived)+" "+d(e.currentNativeTokenName)+" ",1),rs]),t("div",is,"The fees for the transaction on Sirius Chain will be deducted from this amount, which is 50 "+d(e.currentNativeTokenName),1),t("div",ls,[t("button",{onClick:n[6]||(n[6]=i=>y.$router.push({name:"ViewServicesMainnetSwap"})),class:"text-black font-bold text-xs mr-5 focus:outline-none disabled:opacity-50"},"Cancel"),t("button",{type:"submit",class:"default-btn focus:outline-none disabled:opacity-50",disabled:e.isDisabledSwap,onClick:n[7]||(n[7]=i=>e.sendRequest())},"Send Request",8,cs)])])):u("",!0),e.currentPage==2?(o(),l("div",ds,[t("div",ms,[e.err!=""?(o(),l("div",us,d(e.err),1)):u("",!0),t("div",{class:r(["font-bold text-left text-xs md:text-sm",e.step1?"text-gray-700":"text-gray-300"])},"Step 1: Send ERC20 "+d(e.currentNativeTokenName)+" to the escrow account",3),t("div",fs,[t("div",hs,[t("div",{class:r(["rounded-full border w-6 h-6 transition-all duration-500",e.step1?"border-blue-primary":"border-gray-300"])},[t("div",vs,[h(f,{icon:"check",class:r([e.step1?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block transition-all duration-500"])},null,8,["class"])])],2)]),t("div",{class:r(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step1?"text-gray-700":"text-gray-300"])},"Sending transaction to MetaMask",2)]),t("div",xs,[t("div",bs,[t("div",{class:r(["rounded-full border w-6 h-6 transition-all duration-500",e.isInvalidConfirmedMeta?"border-red-primary":e.step2?"border-blue-primary":"border-gray-300"])},[t("div",ys,[e.isInvalidConfirmedMeta?(o(),w(f,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block transition-all duration-500"})):(o(),w(f,{key:1,icon:"check",class:r([e.step2?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block transition-all duration-500"])},null,8,["class"]))])],2)]),t("div",{class:r(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step2?"text-gray-700":"text-gray-300"])},[c(d(e.isInvalidConfirmedMeta?"Approval in MetaMask is rejected":"Waiting for confirmation in MetaMask")+" ",1),e.isInvalidConfirmedMeta?(o(),l("div",gs,[t("button",{type:"button",class:"bg-blue-primary rounded mr-5 focus:outline-none text-tsm font-bold py-2 border-blue-primary px-8 text-white hover:shadow-lg",onClick:n[8]||(n[8]=(...i)=>e.getValidation&&e.getValidation(...i))},"Retry"),h(p,{to:{name:"ViewServicesMainnetSwap"},class:"px-6 py-2 text-gray-500 outline-none focus:outline-none mr-4 w-32 text-tsm",tag:"button"},{default:pe(()=>[c("Cancel this swap")]),_:1})])):u("",!0)],2)]),t("div",_s,[t("div",ws,[t("div",{class:r(["rounded-full border w-6 h-6",e.step3?"border-blue-primary":"border-gray-300"])},[t("div",ps,[h(f,{icon:"check",class:r([e.step3?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"])])],2)]),t("div",{class:r(["text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step3?"text-gray-700":"text-gray-300"])},[c(" Transaction hash: "),e.validationHash?(o(),l("div",ks,[t("a",{href:e.validationLink,target:"_new",class:r([e.isInvalidConfirmedMeta?"text-gray-300":"text-blue-primary","flex-grow break-all text-tsm self-center hover:underline"]),id:"validateTransfer",copyValue:e.validationHash,copySubject:"Transfer hash"},[h(f,{icon:"external-link-alt",class:"text-blue-primary w-3 h-3 self-center inline-block mr-2"}),c(d(e.validationHash),1)],10,Ss),t("div",Cs,[e.step3?(o(),w(f,{key:0,icon:"copy",onClick:n[9]||(n[9]=i=>e.copy("validateTransfer")),class:"w-5 h-5 text-blue-primary cursor-pointer self-center mx-3 absolute top-2 hover:opacity-90 duration-800 transition-all"})):u("",!0)])])):u("",!0),t("div",Ms,[e.validationHash?(o(),l("button",{key:0,class:"sm:flex-none justify-start sm:justify-end bg-blue-primary h-15 w-60 rounded mr-5 focus:outline-none text-xs font-bold py-2 border border-blue-primary px-8 text-white hover:shadow-lg mt-3 sm:mt-0 disabled:opacity-50 self-center",type:"button",disabled:e.isDisabledCheckTxnConfirmed||e.transactionFailed,onClick:n[10]||(n[10]=(...i)=>e.triggerTxnConfirmation&&e.triggerTxnConfirmation(...i))},d(e.isCheckingTxnConfirmation?"Checking transaction confirmation...":"Check transaction confirmation to proceed"),9,Ts)):u("",!0),e.validationHash?(o(),l("div",Is,[As,Ns,Ps,Es,t("div",Vs,[c("View confirmation status on "),t("a",{href:e.validationLink,target:"_new",class:"text-blue-primary inline-block hover:text-blue-900 hover:underline"},[c("EtherScan"),h(f,{icon:"external-link-alt",class:"ml-1 text-blue-primary w-3 h-3 self-center inline-block"})],8,Hs),c(".")])])):u("",!0)]),e.isTxnNotConfirmed&&!e.transactionFailed?(o(),l("div",Rs,"Transaction is not confirmed yet. Please check again in a moment")):u("",!0),e.transactionFailed?(o(),l("div",js,"Transaction failed. Please try again with suggested gas price and gas limit")):u("",!0)],2)]),t("div",{class:r(["font-bold text-left text-xs md:text-sm mt-4",e.step4?"text-gray-700":"text-gray-300"])},"Step 2: Validate your Sirius address",2),t("div",Ds,[t("div",Ls,[t("div",{class:r(["rounded-full border w-6 h-6",e.step4?"border-blue-primary":"border-gray-300"])},[t("div",Us,[h(f,{icon:"check",class:r([e.step4?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"])])],2)]),t("div",{class:r(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step4?"text-gray-700":"text-gray-300"])},"Sending message to MetaMask",2)]),t("div",Bs,[t("div",Fs,[t("div",{class:r(["rounded-full border w-6 h-6",e.isInvalidSignedMeta?"border-red-primary":e.step5?"border-blue-primary":"border-gray-300"])},[t("div",qs,[e.isInvalidSignedMeta?(o(),w(f,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block"})):(o(),w(f,{key:1,icon:"check",class:r([e.step5?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"]))])],2)]),t("div",{class:r(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step5?"text-gray-700":"text-gray-300"])},[c(d(e.signatureMessage)+" ",1),e.isInvalidSignedMeta?(o(),l("div",Ws,[t("button",{type:"button",class:"bg-blue-primary rounded mr-5 focus:outline-none text-tsm py-2 px-4 text-white hover:shadow-lg w-24",onClick:n[11]||(n[11]=(...i)=>e.getSigned&&e.getSigned(...i))},"Retry")])):u("",!0)],2)]),t("div",Xs,[t("div",Qs,[t("div",{class:r(["rounded-full border w-6 h-6",e.step6?"border-blue-primary":"border-gray-300"])},[t("div",Os,[h(f,{icon:"check",class:r([e.step6?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"])])],2)]),t("div",{class:r(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step6?"text-gray-700":"text-gray-300"])},[c("Message signed with signature: "),e.messageHash&&e.step6?(o(),l("div",Gs,[t("div",{class:r([e.step6?"text-gray-500":"text-gray-300","text-tsm break-all flex-grow"]),id:"validateMessage",copyValue:e.messageHash,copySubject:"Signature hash"},d(e.messageHash),11,zs),t("div",Js,[e.step6?(o(),w(f,{key:0,icon:"copy",onClick:n[12]||(n[12]=i=>e.copy("validateMessage")),class:"w-5 h-5 text-blue-primary cursor-pointer self-center ml-3 absolute top-2 hover:opacity-90 duration-800 transition-all"})):u("",!0)])])):u("",!0)],2)]),t("div",{class:r(["font-bold text-left text-xs md:text-sm mt-4",e.step7?"text-gray-700":"text-gray-300"])},"Step 3: Initiate swap",2),t("div",Ks,[t("div",Ys,[t("div",{class:r(["rounded-full border w-6 h-6",e.isInvalidSwapService?"border-red-primary":e.step7?"border-blue-primary":"border-gray-300"])},[t("div",Zs,[e.isInvalidSwapService?(o(),w(f,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block"})):(o(),w(f,{key:1,icon:"check",class:r([e.step7?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"]))])],2)]),t("div",{class:r(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step7?"text-gray-700":"text-gray-300"])},[c(d(e.isInvalidSwapService?"Unable to send message to swap service":"Message sent to the swap service, swap initiated...")+" ",1),e.isInvalidSwapService&&e.swapServerErrIndex<=3?(o(),l("div",$s,[t("button",{type:"button",class:"bg-blue-primary rounded mr-5 focus:outline-none text-tmd py-2 px-4 text-white hover:shadow-lg disabled:opacity-50",onClick:n[13]||(n[13]=(...i)=>e.afterSigned&&e.afterSigned(...i)),disabled:e.disableRetrySwap},d(e.retrySwapButtonText),9,ea)])):u("",!0),e.swapServerErrIndex>3?(o(),l("div",ta,[c(" Sorry. Please save the "),sa,c(", the "),aa,c(" and contact our "),na,c(". ")])):u("",!0)],2)])]),t("div",oa,[t("button",{type:"submit",class:"default-btn focus:outline-none disabled:opacity-50",disabled:e.isDisabledValidate,onClick:n[14]||(n[14]=i=>e.validated())},d(y.$t("general.continue")),9,ra)])])):u("",!0),e.currentPage==3?(o(),l("div",ia,[t("div",null,[la,ca,h(v,{networkTerm:"ETH",swapType:"In",swapId:e.swapId,swapTimestamp:e.swapTimestamp,transactionHash:e.transactionHash,siriusName:e.siriusName,swappedAmount:e.amount,siriusAddress:e.Helper.createAddress(e.siriusAddress).pretty(),swapQr:e.swapQr,swapLink:e.validationLink},null,8,["swapId","swapTimestamp","transactionHash","siriusName","swappedAmount","siriusAddress","swapQr","swapLink"]),t("button",{type:"button",class:"w-40 hover:shadow-lg bg-blue-primary text-white text-xs hover:opacity-50 rounded font-bold px-4 py-3 border border-blue-primary outline-none mr-4 mt-6",onClick:n[15]||(n[15]=(...i)=>e.saveCertificate&&e.saveCertificate(...i))},"Download Certificate"),t("div",da,[t("a",{href:e.validationLink,target:"_new",class:"underline self-center text-xs font-bold text-blue-primary"},[c("View Transaction in Explorer"),h(f,{icon:"external-link-alt",class:"ml-2 text-blue-500 w-3 h-3 self-center inline-block"})],8,ma)]),ua,t("div",fa,[ha,t("div",va,d(e.currentAccount),1),t("div",xa,"Swap Amount "+d(e.amount)+" ERC20 XPX",1),ba,t("div",ya,"To: "+d(e.siriusName),1),t("div",null,d(e.Helper.createAddress(e.siriusAddress).pretty()),1),t("div",ga,[c("Equivalent to "+d(e.amountReceived)+" "+d(e.currentNativeTokenName)+" ",1),_a])]),wa,t("label",pa,[$e(t("input",{type:"checkbox",class:"h-5 w-5 bg-blue-primary",value:"true","onUpdate:modelValue":n[16]||(n[16]=i=>e.savedCheck=i)},null,512),[[et,e.savedCheck]]),ka]),t("div",Sa,[h(p,{to:{name:"ViewServicesMainnetSwap"},class:r(["default-btn mr-5 focus:outline-none w-40 inline-block mt-1",e.savedCheck?"":"opacity-50"]),is:e.savedCheck?"router-link":"span",tag:"button"},{default:pe(()=>[c("Done")]),_:1},8,["class","is"])])])])):u("",!0)])])])}const Fa=Oe(ct,[["render",Ca]]);export{Fa as default};
