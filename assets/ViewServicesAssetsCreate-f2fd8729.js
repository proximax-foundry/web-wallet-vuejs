import{_ as oe,ag as _e,Q as ne,o as b,f as y,e as l,h as G,t as d,O as re,i as V,d as ie,g as t,n as C,D as J,s as ue,E as ce,k as xe,j as Te,c as g,W as q,w as le,A as n,H as N,B as ke,r as se,a as Ce,b as W,l as h,x as U}from"./index-5ab99b99.js";import{_ as we}from"./SelectInputAccount.vue_vue_type_script_setup_true_lang-3fad3d1f.js";import{_ as Ie}from"./SelectInputMultisigAccount.vue_vue_type_script_setup_true_lang-5a92369c.js";import{_ as Ae}from"./MultisigInput.vue_vue_type_script_setup_true_lang-d33db91b.js";import{S as Se}from"./SupplyInputClean-2e95ba6b.js";import{_ as de}from"./icon-info-8b4f1351.js";import{_ as $e}from"./TxnSummary.vue_vue_type_script_setup_true_lang-e3826c5f.js";import{T as Ne}from"./TransactionLayout-bd837a1b.js";import{A as H}from"./assetsUtils-66885a5e.js";import{T as O}from"./transactionState-cfbbb012.js";import"./jdenticon-module-3d0ed466.js";import"./TransactionFeeLayout.vue_vue_type_script_setup_true_lang-42d5384c.js";import"./proximax-logo-ecfc3767.js";const Ee="/web-wallet-vuejs/assets/icon-done-a0410eac.svg",Me="/web-wallet-vuejs/assets/icon-undone-5c4de078.svg",Ve={directives:{tooltip:_e},props:{title:String,disabled:Boolean,modelValue:Boolean,toolTip:String},emits:["update:modelValue"],name:"CheckInput",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},methods:{clickInputText:function(){!this.showError&&!this.disabled&&(this.borderColor="border-2 border-blue-primary")},getIcon(){return require(`@/${this.icon}`)},blurInputText:function(){this.disabled||(this.modelValue==""?(this.borderColor="border-2 border-red-primary",this.textErr=!0):(this.borderColor="border-2 border-gray-300",this.textErr=!1))},focusInputText:function(){this.borderColor="border-2 border-blue-primary",this.textErr=!1}},mounted(){this.emitter.on("CLEAR_TEXT",u=>{this.inputText=u,this.textErr=!1,this.borderColor="border border-gray-300"})}},Fe={class:"border border-gray-200 px-2 py-1 h-14 flex items-center justify-between rounded-md"},Pe={key:0,src:de,class:"inline-block ml-2 relative",style:{top:"-1px"}},De={key:0,src:Ee,class:"inline-block"},Be={key:1,src:Me,class:"inline-block"};function Ue(u,L,_,w,R,F){const r=ne("tooltip");return b(),y("div",{class:G(`${_.disabled?"opacity-50":"cursor-pointer"}`)},[l("div",Fe,[l("div",null,[l("div",{class:G(["inline-block font-bold text-tsm",`${_.disabled?"text-gray-500":"text-black"}`])},d(_.title),3),_.toolTip?re((b(),y("img",Pe,null,512)),[[r,{value:"<tiptext>"+_.toolTip+"</tiptext>",escape:!1},void 0,{bottom:!0}]]):V("",!0)]),_.modelValue?(b(),y("img",De)):(b(),y("img",Be))])],2)}const ae=oe(Ve,[["render",Ue]]),Le={class:"border border-gray-200 px-2 py-1 h-14 rounded-md"},Re={class:"uppercase text-gray-500 text-txs text-left mb-2"},je={key:0,src:de,class:"inline-block ml-1 relative cursor-pointer",style:{top:"-1px"}},ze=["disabled","value","placeholder"],Ke={class:"h-3 mb-2"},We={key:0,class:"error error-text text-left"},He=ie({__name:"NumberInputClean",props:{placeholder:String,errorMessage:String,icon:String,showError:Boolean,modelValue:String,title:String,disabled:Boolean,max:Number,toolTip:String},emits:["update:modelValue"],setup(u,{emit:L}){const _=u,w=L,F=ce().appContext.config.globalProperties.emitter,r=t(""),X=t("border border-gray-300"),c=t(!1),a=t(_.modelValue),v=C.currentNetworkProfileConfig.maxMosaicDivisibility,E=t(!1),P=o=>{const m=o.key;return m>="0"&&m<="9"||m==="Backspace"||m==="Delete"||m==="ArrowLeft"||m==="ArrowRight"?!0:(o.preventDefault(),!1)},Q=o=>{o.selectionStart<v.toString().length?E.value=!0:E.value=!1,isNaN(parseInt(o.value))?a.value="0":a.value=o.value.toString()};return J(a,o=>{o.length>v.toString().length?E.value?a.value=parseInt(o.slice(0,v.toString().length)).toString():a.value=parseInt(o.slice(0,v.toString().length-1)+o.slice(-1)).toString():parseInt(o)>v?a.value=v.toString():a.value=parseInt(o).toString(),w("update:modelValue",a.value)}),F.on("CLEAR_TEXT",o=>{r.value=o,c.value=!1,X.value="border border-gray-300"}),(o,m)=>{const j=ne("tooltip");return b(),y("div",{class:G(u.disabled?"opacity-50":"")},[l("div",Le,[l("div",Re,[ue(d(u.placeholder)+" ",1),u.toolTip?re((b(),y("img",je,null,512)),[[j,{value:"<tiptext>"+u.toolTip+"</tiptext>",escape:!1},void 0,{bottom:!0}]]):V("",!0)]),l("input",{disabled:u.disabled,value:a.value,onInput:m[0]||(m[0]=f=>Q(f.target)),onKeypress:P,placeholder:u.placeholder,class:"number_input"},null,40,ze)]),l("div",Ke,[c.value||u.showError?(b(),y("div",We,d(u.errorMessage),1)):V("",!0)])],2)}}});const Oe={class:"font-semibold mb-4"},Xe={key:0,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},Qe={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},Ze={class:"inline-block text-xs"},qe={key:1,class:"error error_box"},Ge={class:"mt-4"},Je={class:"flex gap-1 mt-3"},Ye={key:0,class:"mt-3"},et={class:"lg:grid lg:grid-cols-2 mt-5"},tt={class:"lg:mr-2"},lt={class:"lg:ml-2"},st={class:"lg:grid lg:grid-cols-2"},at={class:"mb-5 lg:mb-0 lg:mr-2"},ot={class:"mb-5 lg:mb-0 lg:ml-2"},nt=["disabled"],rt={class:"text-center"},it={class:"mb-8"},ut={href:"https://bcdocs.xpxsirius.io/docs/built-in-features/mosaic/",target:"_new",class:"sm:h-9 lg:h-5 text-blue-primary font-bold text-tsm flex items-start"},ct={class:"text-gray-400 text-xs lg:text-tsm my-3 sm:pr-2"},dt={class:"mb-8"},vt={href:"https://t.me/proximaxhelpdesk",target:"_new",class:"sm:h-9 lg:h-5 text-blue-primary font-bold text-tsm items-start flex"},mt={class:"text-gray-400 text-tsm my-3"},pt=ie({__name:"ViewServicesAssetsCreate",setup(u){const L=xe(),w=ce().appContext.config.globalProperties.emitter,R=t(!1);Te();const F=t(""),r=t("0"),X=t(!1),c=t(!1),a=t(!1),v=g(()=>ve.value),E=t(!1),P=t(!1),Q=t("month"),o=t("1"),m=t(!1),j=t(!1),f=t("0"),ve=t(!1),I=t(),D=t();try{I.value=q.createPublicAccount(le.currentLoggedInWallet?le.currentLoggedInWallet.selectDefaultAccount().publicKey:"",n.networkType)}catch(e){console.log(e)}const me=t("0"),A=t(0);try{me.value=N.amountFormatterSimple(H.createAssetTransactionFee(I.value,Number(f.value),a.value,c.value,Number(r.value)),n.nativeToken.divisibility),A.value=N.convertToExact(H.createAssetTransactionFee(I.value,Number(f.value),a.value,c.value,Number(r.value)),n.nativeToken.divisibility)}catch(e){console.log(e)}const z=g(()=>C.currentNetworkProfileConfig?N.convertToExact(C.currentNetworkProfileConfig.mosaicRentalFee,n.nativeToken.divisibility):0),pe=g(()=>C.currentNetworkProfileConfig?N.convertToCurrency(C.currentNetworkProfileConfig.mosaicRentalFee,n.nativeToken.divisibility):"0"),Y=g(()=>C.currentNetworkProfileConfig?N.convertToExact(C.currentNetworkProfileConfig.lockedFundsPerAggregate,n.nativeToken.divisibility):0),ee=g(()=>C.currentNetworkProfile?N.convertToExact(ke.getLockFundFee(),n.nativeToken.divisibility):0),te=g(()=>Y.value+ee.value),be=g(()=>!(S.value!=null&&r.value!=null&&Number(f.value)>0&&!R.value&&!m.value&&!T.value)),i=t(null),M=t(null),S=t(null),x=t(0),K=t(0),Z=async e=>{if(n.chainAPI&&e)try{const s=await n.chainAPI.accountAPI.getAccountInfo(U.Address.createFromRawAddress(e)),k=s.mosaics.findIndex($=>$.id.toHex()==n.nativeToken.assetId);return k!=-1?s.mosaics[k].amount.compact()/Math.pow(10,n.nativeToken.divisibility):0}catch{return 0}},T=g(()=>{if(S.value)return i.value?K.value<z.value?!0:x.value<A.value+te.value:x.value<z.value+A.value});x.value<z.value+A.value?(E.value=!0,P.value=!0,j.value=!0):(E.value=!1,P.value=!1,j.value=!1);const B=()=>{r.value="0",f.value="0",o.value="1",Q.value="month",P.value=!1,c.value=!1,a.value=!1};J(S,async(e,s)=>{e==null?(x.value=0,B(),M.value=null,i.value=null,D.value=null):e!=s&&(B(),M.value=null,i.value=null,D.value=null,x.value=await Z(e))}),J(i,async(e,s)=>{e==null?(K.value=0,B(),M.value=null,i.value=null,D.value=null,x.value=await Z(S.value)):e!=s&&(B(),K.value=await Z(e))});const fe=g(()=>i?te.value+A.value:z.value+A.value),ge=g(()=>N.amountFormatterSimple(fe.value,0)),he=e=>{R.value=e},ye=()=>{if(i.value){const e=n.buildTxn.mosaicDefinition(D.value,a.value,c.value,Number(r.value));let s=U.MosaicSupplyType.Increase;const k=n.buildTxn.buildMosaicSupplyChange(e.mosaicId,s,U.UInt64.fromUint(H.addZeros(Number(r.value),Number(f.value)))),$=[e.serialize(),k.serialize()];O.unsignedTransactionPayload=$}else{const e=n.buildTxn.mosaicDefinition(I.value,a.value,c.value,Number(r.value)),s=e.toAggregateV1(I.value);let k=U.MosaicSupplyType.Increase;const $=n.buildTxn.buildMosaicSupplyChange(e.mosaicId,k,U.UInt64.fromUint(H.addZeros(Number(r.value),Number(f.value)))).toAggregateV1(I.value);let p=n.buildTxn.aggregateComplete([s,$]).serialize();O.unsignedTransactionPayload=p}B(),O.selectedAddress=S.value,O.selectedMultisigAddress=i.value,L.push({name:"ViewConfirmTransaction"})};return w.on("select-account",e=>{S.value=e}),w.on("select-account-public-key",e=>{I.value=q.createPublicAccount(e,n.networkType)}),w.on("select-multisig-account",e=>{M.value=e.label,i.value=e.value,D.value=q.createPublicAccount(e.publicKey,n.networkType)}),w.on("CLOSE_MULTISIG",()=>{M.value=null,i.value=null}),(e,s)=>{const k=se("font-awesome-icon"),$=se("router-link");return b(),Ce(Ne,{class:"mt-8"},{white:W(()=>[l("div",Oe,d(e.$t("asset.createAssets")),1),T.value?(b(),y("div",Xe,[l("div",Qe,[h(k,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),l("div",Ze,d(e.$t("general.insufficientBalance")),1)])):V("",!0),F.value!=""?(b(),y("div",qe,d(F.value),1)):V("",!0),l("div",Ge,[l("div",Je,[h(we,{type:"asset"}),h(Ie,{"selected-address":S.value},null,8,["selected-address"])]),i.value?(b(),y("div",Ye,[h(Ae,{"select-default-address":i.value,"select-default-name":M.value,type:"asset"},null,8,["select-default-address","select-default-name"])])):V("",!0),l("div",et,[l("div",tt,[h(Se,{disabled:T.value||v.value,modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=p=>f.value=p),balance:Number.MAX_VALUE,placeholder:e.$t("general.supply"),type:"text",onShowError:he,decimal:Number(r.value),toolTip:e.$t("asset.supplyMsg1")+" <br><br>"+e.$t("asset.supplyMsg2")+"<br>"+e.$t("asset.supplyMsg3")},null,8,["disabled","modelValue","balance","placeholder","decimal","toolTip"])]),l("div",lt,[h(He,{disabled:T.value||v.value,modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=p=>r.value=p),max:6,placeholder:e.$t("general.divisibility"),showError:X.value,toolTip:e.$t("asset.divisibilityMsg1")+" <br><br>"+e.$t("asset.divisibilityMsg2")+"<br>"+e.$t("asset.divisibilityMsg3")},null,8,["disabled","modelValue","placeholder","showError","toolTip"])])]),l("div",st,[l("div",at,[h(ae,{disabled:T.value||v.value,modelValue:c.value,"onUpdate:modelValue":s[2]||(s[2]=p=>c.value=p),title:e.$t("general.transferable"),toolTip:e.$t("asset.transferableMsg"),onClick:s[3]||(s[3]=p=>T.value?"":c.value=!c.value)},null,8,["disabled","modelValue","title","toolTip"])]),l("div",ot,[h(ae,{disabled:T.value||v.value,modelValue:a.value,"onUpdate:modelValue":s[4]||(s[4]=p=>a.value=p),title:e.$t("general.supplyMutable"),toolTip:e.$t("asset.supplyMutableMsg"),onClick:s[5]||(s[5]=p=>T.value?"":a.value=!a.value)},null,8,["disabled","modelValue","title","toolTip"])])])])]),navy:W(()=>[h($e,{"signer-native-token-balance":x.value,"asset-rental-fee-currency":pe.value,"native-token-balance":i.value?K.value:x.value,"lock-fund":Y.value,"lock-fund-tx-fee":ee.value,"selected-multisig-address":i.value,"txn-fee":A.value,"total-fee":Number(ge.value)},null,8,["signer-native-token-balance","asset-rental-fee-currency","native-token-balance","lock-fund","lock-fund-tx-fee","selected-multisig-address","txn-fee","total-fee"]),l("button",{type:"submit",class:"mt-3 w-full blue-btn py-4 disabled:opacity-50 disabled:cursor-auto text-white",disabled:be.value,onClick:ye},d(e.$t("asset.createAssets")),9,nt),l("div",rt,[h($,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white border-b-2 border-white"},{default:W(()=>[ue(d(e.$t("general.cancel")),1)]),_:1})])]),description:W(()=>[l("div",it,[l("a",ut,d(e.$t("general.assetQues")),1),l("div",ct,d(e.$t("asset.assetAns")),1)]),l("div",dt,[l("a",vt,d(e.$t("general.feedback")),1),l("div",mt,d(e.$t("general.feedbackDescription")),1)])]),_:1})}}});const St=oe(pt,[["__scopeId","data-v-4b93c60b"]]);export{St as default};
