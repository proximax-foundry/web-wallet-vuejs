import{d as $,j,g as _,k as B,o as l,f as d,e as c,l as n,v as w,aa as E,F as D,af as z,D as K,r as O,b as m,s as k,t as g,n as N,A,x as S,H as U}from"./index-5ab99b99.js";import{_ as W}from"./proximax-logo-ecfc3767.js";import{_ as q}from"./xarcade-logo-c4d3fd5c.js";import{_ as G}from"./metx-logo-27f23eae.js";import{_ as J}from"./icon-proximax-logo-gray-c2486ce1.js";import{_ as Q}from"./icon-green-tick-1b766454.js";import{_ as Y}from"./icon-red-x-a5511f99.js";import{_ as Z}from"./icon-plus-7207f329.js";import{A as ee,_ as se}from"./AccountTabs.vue_vue_type_script_setup_true_lang-60bd4ad1.js";import{s as h,a as te}from"./column.esm-097ca995.js";import{_ as re}from"./icon-more-options-3f3cfda9.js";import"./jdenticon-module-3d0ed466.js";import"./functions-bdc73ff4.js";import"./TextInput-42211d7d.js";import"./TextInputClean-2db3f025.js";import"./icon-key-5b3f7dda.js";const ae="/web-wallet-vuejs/assets/icon-transfer-white-08654b1d.svg",oe="/web-wallet-vuejs/assets/icon-swap-2df39ab1.svg",V=$({__name:"AssetAction",props:{address:{},id:{},isCreator:{type:Boolean}},setup(o){const{t:y}=j(),p=_(),f=B(),P=_([{visible:o.isCreator,label:y("general.modifySupply"),command:()=>{f.push({name:"ViewServicesAssetsModifySupplyChange",params:{assetId:o.id,address:o.address}})}},{visible:o.isCreator,label:y("general.linkToNamespace"),command:()=>{f.push({name:"ViewServicesAssetsLinkToNamespace",params:{assetId:o.id,address:o.address}})}},{visible:!0,label:"View Metadata",command:()=>{f.push({name:"ViewAssetMetadata",params:{assetId:o.id,address:o.address}})}}]),I=u=>{p.value.toggle(u)};return(u,L)=>(l(),d(D,null,[c("img",{src:re,class:"w-4 h-4 cursor-pointer ml-2 mt-0.5",onClick:I}),n(w(E),{ref_key:"menu",ref:p,model:P.value,popup:!0},null,8,["model"])],64))}}),ne={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},ie={class:"border-2 border-t-0"},le=["href"],de={class:"text-blue-primary uppercase w-min-max text-xs mt-1.5 cursor-pointer text-blue-primary pr-7"},ce={class:"flex items-center pr-7"},me={key:0,src:W,class:"inline-block h-7 w-7 mr-2 border-2 rounded-3xl"},ue={key:1,src:q,class:"inline-block h-7 w-7 mr-2 border-2 rounded-3xl"},pe={key:2,src:G,class:"inline-block h-7 w-7 mr-2 border-2 rounded-3xl"},fe={key:3},ge={key:4,src:J,class:"inline-block h-6 w-6 mr-2"},we={key:5,class:"inline-block text-xs ml-2 mt-1"},_e={key:6,class:"inline-block text-xs ml-2 cursor-pointer mt-1"},xe={key:0,src:Q,class:"h-5 w-5"},ye={key:1,src:Y,class:"h-5 w-5"},ve={key:0},he={key:1},be={class:"flex my-3 px-6 flex-col w-full ml-auto mr-auto gap-2 sm:flex-row sm:items-center"},je=$({__name:"ViewAccountAssets",props:{address:String},setup(o){const y=o,p=t=>t=="prx.xpx"?{name:"XPX",registered:!0}:t=="prx.metx"?{name:"METX",registered:!0}:t=="xarcade.xar"?{name:"XAR",registered:!0}:{name:t,registered:!1},f=_({page:0,rows:10}),P=_(),I=t=>{f.value.rows=t},u=_([]),L=t=>N.currentNetworkProfile?N.currentNetworkProfile.chainExplorer.url+"/"+N.currentNetworkProfile.chainExplorer.assetInfoRoute+"/"+t:"",X=async()=>{try{return(await A.chainAPI.accountAPI.getAccountInfo(S.Address.createFromRawAddress(y.address))).mosaics.map((s,r)=>({i:r,id:s.id.toHex(),amount:s.amount.compact().toString(),name:"",isCreator:!1,isLoaded:!1}))}catch{return[]}},R=z(),x=_(!1);R.run(()=>{const t=_(!1),s=K(A,async r=>{r.isReady&&!t.value&&(x.value=!0,u.value=await X(),t.value=!0,M(),x.value=!1,s(),R.stop())},{immediate:!0})});const F=t=>{const{page:s,rows:r}=t;f.value={page:s,rows:r},M()},M=async()=>{var T;x.value=!0;const{page:t,rows:s}=f.value,r=[];for(let a=0;a<s;a++){const i=t*s+a;if(!u.value[i]||u.value[i].isLoaded)continue;const v=u.value[i];r.push(new S.MosaicId(v.id))}if(!r.length){x.value=!1;return}const e=await A.chainAPI.assetAPI.getMosaicsNames(r),b=await A.chainAPI.assetAPI.getMosaics(r),C={};r.forEach((a,i)=>{C[a.toHex()]=i}),b.sort((a,i)=>{const v=C[a.mosaicId.toHex()],H=C[i.mosaicId.toHex()];return v-H});for(let a=0;a<r.length;a++){const i=u.value.find(v=>v.id==r[a].toHex());i.name=((T=e[a].names[0])==null?void 0:T.name)??"-",i.amount=U.toCurrencyFormat(parseFloat(i.amount)/Math.pow(10,b[a].divisibility),b[a].divisibility),i.isCreator=b[a].owner.address.plain()==S.Address.createFromRawAddress(y.address).plain(),i.isLoaded=!0}x.value=!1};return(t,s)=>{const r=O("router-link");return l(),d("div",null,[c("div",ne,[n(ee,{address:o.address,class:"mb-6"},null,8,["address"]),n(se,{address:o.address,selected:"assets"},null,8,["address"]),c("div",ie,[n(w(te),{value:u.value,paginator:!0,rows:10,dataKey:"id",ref_key:"dt",ref:P,onPage:s[0]||(s[0]=e=>F(e)),"onUpdate:rows":s[1]||(s[1]=e=>I(e)),loading:x.value,rowsPerPageOptions:[10,20,30,40,50],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink  RowsPerPageDropdown",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",responsiveLayout:"scroll"},{empty:m(()=>s[2]||(s[2]=[k(" No assets found. ")])),default:m(()=>[n(w(h),{field:"id",header:"Asset ID"},{body:m(({data:e})=>[c("a",{href:L(e.id),target:"_new",class:"col-span-2"},[c("div",de,g(e.id),1)],8,le)]),_:1}),n(w(h),{field:"name",header:"Namespace"},{body:m(({data:e})=>[c("div",ce,[p(e.name).name=="XPX"?(l(),d("img",me)):p(e.name).name=="XAR"?(l(),d("img",ue)):p(e.name).name=="METX"?(l(),d("img",pe)):e.name=="-"?(l(),d("div",fe)):(l(),d("img",ge)),p(e.name).registered?(l(),d("div",we,g(p(e.name).name),1)):(l(),d("div",_e,g(e.name),1))])]),_:1}),n(w(h),{field:"amount",header:"Balance"},{body:m(({data:e})=>[c("div",null,g(e.amount),1)]),_:1}),n(w(h),{field:"creator",header:"Creator"},{body:m(({data:e})=>[e.isCreator?(l(),d("img",xe)):(l(),d("img",ye))]),_:1}),n(w(h),{header:"Actions "},{body:m(({data:e})=>[e.isCreator?(l(),d("div",ve,[n(V,{address:o.address,id:e.id,"is-creator":!0},null,8,["address","id"])])):(l(),d("div",he,[n(V,{address:o.address,id:e.id,"is-creator":!1},null,8,["address","id"])]))]),_:1})]),_:1},8,["value","loading"]),c("div",be,[n(r,{to:{name:"ViewTransferCreate"},class:"bg-blue-primary px-5 py-2 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center"},{default:m(()=>[s[3]||(s[3]=c("img",{src:ae,class:"inline-block w-4 h-4 mt-0.5 cursor-pointer mr-1"},null,-1)),k(g(t.$t("general.transfer")),1)]),_:1}),n(r,{to:{name:"ViewServicesMainnetSwap"},class:"bg-blue-primary px-5 py-2 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center"},{default:m(()=>[s[4]||(s[4]=c("img",{src:oe,class:"w-4 h-4 inline-block relative mr-1"},null,-1)),k(g(t.$t("general.swap")),1)]),_:1}),n(r,{to:{name:"ViewServicesAssetsCreate"},class:"bg-blue-primary px-5 py-2 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center"},{default:m(()=>[s[5]||(s[5]=c("img",{src:Z,class:"inline-block w-4 h-4 mr-2"},null,-1)),k(g(t.$t("asset.createNewAsset")),1)]),_:1})])])])])}}});export{je as default};
