import{d as A,r as w,a9 as I,aa as L,g as D,R as V,o as c,b as x,s as l,z as a,A as h,t as u,m as v,e,S as k,C as p,f as m,ac as R,p as C,j as F,_ as P,c as H,E as T,a as E,ah as N,k as j,w as S}from"./index-8ffe16f8.js";import{A as z,a as M}from"./AccountTabs-f9b8fa99.js";import{s as f,a as B}from"./column.esm-f85fdded.js";import{s as W,a as K}from"./accordiontab.esm-b92bcf14.js";import"./jdenticon-module-4b08f1ac.js";import"./functions-00a97599.js";import"./TextInput-1e124e7b.js";import"./TextInputClean-36bb88e0.js";import"./icon-key-5b3f7dda.js";const O=t=>(C("data-v-3bbf48ab"),t=t(),F(),t),J={class:"uppercase text-xxs font-bold mb-1"},U={class:"flex items-center"},q={class:"uppercase cursor-pointer font-bold text-txs"},G={class:"text-txs"},Q=O(()=>e("div",{class:"uppercase text-xxs font-bold mb-1"}," Status ",-1)),X={class:"flex items-center"},Y={class:"text-txs"},Z={class:"flex items-center"},ee={class:"text-txs cursor-pointer"},te={class:"text-txs"},se={directives:{tooltip:R}},ae=A({...se,__name:"FailedTxnDT",props:{transactions:Array},setup(t){const n=w(!1),i=()=>{window.innerWidth<1024?n.value=!1:n.value=!0};i(),I(()=>{window.removeEventListener("resize",i)}),L(()=>{window.addEventListener("resize",i)});const _=D(),b=_==null?void 0:_.appContext.config.globalProperties.emitter,g=w(!1);return b.on("CLOSE_MODAL",o=>{g.value=o}),(o,r)=>{const d=V("tooltip");return c(),x("div",null,[l(p(B),{value:t.transactions,paginator:!0,rows:10,scrollDirection:"horizontal",alwaysShowPaginator:!1,responsiveLayout:"scroll",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",currentPageReportTemplate:""},{empty:a(()=>[h(u(o.$t("general.noRecord")),1)]),loading:a(()=>[h(u(o.$t("dashboard.fetchingTx")),1)]),default:a(()=>[n.value?m("v-if",!0):(c(),v(p(f),{key:0,style:{width:"200px"},headerClass:"invisible"},{body:a(({data:s})=>[e("div",null,[e("div",J,u(o.$t("dashboard.txHash")),1),e("div",U,[e("div",q,[k((c(),x("span",G,[h(u(s.txnHash.substring(0,20))+"...",1)])),[[d,s.txnHash,void 0,{right:!0}]])])])])]),_:1})),n.value?m("v-if",!0):(c(),v(p(f),{key:1,style:{width:"200px"},headerClass:"invisible"},{body:a(({data:s})=>[e("div",null,[Q,e("div",X,[e("span",Y,u(s.statusMsg),1)])])]),_:1})),n.value?(c(),v(p(f),{key:2,field:"hash",header:o.$t("dashboard.txHash"),headerStyle:"width:100px"},{body:a(({data:s})=>[e("div",Z,[k((c(),x("span",ee,[h(u(s.txnHash.substring(0,20))+"...",1)])),[[d,s.txnHash,void 0,{bottom:!0}]])])]),_:1},8,["header"])):m("v-if",!0),n.value?(c(),v(p(f),{key:3,field:"status",header:"Status",headerStyle:"width:110px"},{body:a(({data:s})=>[e("span",te,u(s.statusMsg),1)]),_:1})):m("v-if",!0)]),_:1},8,["value"])])}}});const oe=P(ae,[["__scopeId","data-v-3bbf48ab"],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/dashboard/components/TransactionDataTable/FailedTxnDT.vue"]]),ne=t=>(C("data-v-4f659c47"),t=t(),F(),t),re={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},ie={class:"flex my-2 gap-5 flex-none text-xs md:text-sm"},ce=ne(()=>e("div",{class:"border rounded-md text-white py-2 px-5",style:{background:"#DC143C"}},"Failed",-1)),le={class:"bg-white px-2"},de={class:"mt-3"},ue=A({__name:"ViewAccountFailedTransactions",props:{address:String},setup(t){const n=w([]),i=w(!0),_=H(()=>{let r=[];return r=n.value,r});let b=async()=>{_.value.length>0?i.value=!1:i.value=!0};const g=async()=>{if(!T.chainAPI||!S.currentLoggedInWallet)return;const r=S.currentLoggedInWallet.accounts.find(y=>y.default===!0),d=r?r.publicKey:"";let $=(JSON.parse(sessionStorage.getItem("allFailedTransactions"))||[]).filter(y=>y.accPubKey.includes(d));n.value=$.flat()},o=async()=>{await g(),await b()};if(T.isReady)o();else{let r=E(T,d=>{d.isReady&&(o(),r())})}return N(()=>{setInterval(()=>{o()},1e3)}),(r,d)=>{const s=j("router-link");return c(),x("div",null,[e("div",re,[l(z,{address:t.address,class:"mb-6"},null,8,["address"]),l(M,{address:t.address,selected:"txn"},null,8,["address"]),e("div",ie,[l(s,{to:{name:"ViewAccountConfirmedTransactions",params:{address:t.address}},class:"border opacity-60 hover:opacity-100 cursor-pointer rounded-md text-white py-2 px-4",style:{background:"#007CFF"}},{default:a(()=>[h("Confirmed")]),_:1},8,["to"]),l(s,{to:{name:"ViewAccountPendingTransactions",params:{address:t.address}},class:"border opacity-60 hover:opacity-100 cursor-pointer rounded-md text-white py-2 px-5",style:{background:"#f3a91d"}},{default:a(()=>[h("Pending")]),_:1},8,["to"]),ce]),l(p(K),{activeIndex:i.value?null:0},{default:a(()=>[l(p(W),{class:"p-accordion-header p-highlight",disabled:i.value},{default:a(()=>[e("div",le,[e("div",de,[l(oe,{transactions:_.value,class:"mt-3"},null,8,["transactions"])])])]),_:1},8,["disabled"])]),_:1},8,["activeIndex"])])])}}});const ge=P(ue,[["__scopeId","data-v-4f659c47"],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/views/ViewAccountFailedTransactions.vue"]]);export{ge as default};
