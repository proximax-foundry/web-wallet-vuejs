import{w as s,t as K,A as U,_ as O,T as H,H as z}from"./index-e91c98d3.js";import"./vue-86063517.js";import{t as q}from"./jdenticon-e4458e79.js";import{u as F}from"./vue-i18n-728f748b.js";import{c as G}from"./functions-3b5b4af7.js";import{u as J}from"./primevue-e09f7e84.js";import{T as Q}from"./TextInput-909d01ae.js";import{T as S}from"./TextInputClean-5873929f.js";import{d as $}from"./tsjs-xpx-chain-sdk-84426b6a.js";import{d as P,r as h,c as I,o as n,z as u,A as c,g as v,e as p,a as k,F as X,B as D,p as Y,L as Z,u as ee,m as W,D as N,b as B,l as M}from"./@vue-a9ecc9f1.js";import{_ as te,a as ae}from"./icon-key-5b3f7dda.js";const se="/web-wallet-vuejs/assets/edit-icon-026aae3d.svg",le={key:0,class:"popup-outer-lang fixed flex z-50"},re={class:"modal-popup-box"},oe={key:0},ne={key:0,class:"error error_box mb-3"},de=c("div",{class:"text-center mt-2 text-xs font-semibold"},"Change Name",-1),ce={class:"flex justify-center mt-3"},ie=["disabled"],ue={key:1},me={key:0,class:"error error_box mb-3"},fe=c("div",{class:"text-center mt-2 text-xs font-semibold"},"Add to Address Book",-1),ve={class:"flex justify-center"},ge=["disabled"],pe={key:2},be={key:0,class:"error error_box mb-3"},ye=c("div",{class:"text-center mt-2 text-xs font-semibold"},"Edit Address Book",-1),we={class:"flex justify-center"},xe=["disabled"],he=P({__name:"ChangeNameModal",props:{isOther:Boolean,address:String},setup(l){const o=l,b=h(o.address),{t}=F(),A=I(()=>y.value.trim()==""),m=I(()=>i.value.trim()==""),g=h(!1),i=h(""),y=h(""),d=h(""),j=()=>{if(y.value.trim()){const r=s.currentLoggedInWallet.accounts.find(a=>a.name==y.value.trim()),e=s.currentLoggedInWallet.others.find(a=>a.name==y.value.trim());if(!r&&!e){const a=s.currentLoggedInWallet.accounts.findIndex(f=>f.address===o.address);if(a==-1){const f=s.currentLoggedInWallet.others.findIndex(_=>_.address===o.address);s.currentLoggedInWallet.others[f].name=y.value}else s.currentLoggedInWallet.accounts[a].name=y.value;s.wallets.saveMyWalletOnlytoLocalStorage(s.currentLoggedInWallet),d.value="",y.value="",g.value=!1}else r||e?d.value=t("account.nameTaken"):d.value=t("account.failChangeName")}else d.value=t("account.nameEmpty")},w=h(!1);o.isOther&&s.currentLoggedInWallet.contacts.find(e=>e.address==o.address)&&(w.value=!0);const T=()=>{if(i.value==" "){d.value=t("general.nameRequired");return}const r=$.Address.createFromRawAddress(o.address);let e=new K(i.value.trim(),r.plain(),"-none-");const a=s.currentLoggedInWallet,f=a.accounts.findIndex(L=>L.name.toLowerCase()==i.value.toLowerCase().trim()),_=a.contacts!=null?a.contacts.findIndex(L=>$.Address.createFromRawAddress(L.address).plain()==r.plain()):-1,V=a.contacts!=null?a.contacts.findIndex(L=>L.name.toLowerCase()==i.value.toLowerCase().trim()):-1;_>=0?d.value=t("addressBook.addressExist"):V>=0||f>=0?d.value=t("addressBook.nameExist"):(s.currentLoggedInWallet.addAddressBook(e),s.wallets.saveMyWalletOnlytoLocalStorage(s.currentLoggedInWallet),d.value="",i.value="",g.value=!1)},C=h("");(async r=>{try{let e=await U.chainAPI.accountAPI.getAccountInfo($.Address.createFromRawAddress(r));e.publicKey=="0000000000000000000000000000000000000000000000000000000000000000"?C.value=null:C.value=e.publicKey}catch{C.value=null}})(o.address);const R=()=>{const r=s.currentLoggedInWallet;if(!r)return;const e=s.currentLoggedInWallet.contacts.find(x=>x.address==o.address),a=s.currentLoggedInWallet.contacts.findIndex(x=>x.address==o.address);let f=r.contacts.filter(x=>x.name.toLowerCase()!=e.name.toLowerCase().trim()),_=f.find(x=>x.name.toLowerCase()==i.value.toLowerCase().trim()),V=r.accounts.find(x=>x.name.toLowerCase()==i.value.toLowerCase().trim()),L=f.find(x=>$.Address.createFromRawAddress(x.address).plain()==$.Address.createFromRawAddress(o.address).plain());_!=null||V!=null?d.value=t("addressBook.nameExist"):L!=null?d.value=t("addressBook.addressExist"):(s.currentLoggedInWallet.updateAddressBook(a,{name:i.value.trim(),address:$.Address.createFromRawAddress(o.address).plain(),group:"-none-",publicKey:C.value}),s.wallets.saveMyWalletOnlytoLocalStorage(s.currentLoggedInWallet),d.value="",i.value="",g.value=!1)};return(r,e)=>(n(),u(X,null,[c("img",{src:se,class:"w-4 h-4 text-black cursor-pointer mt-1 ml-1",onClick:e[0]||(e[0]=a=>g.value=!g.value)}),g.value?(n(),u("div",le,[c("div",re,[l.isOther?l.isOther&&!w.value?(n(),u("div",ue,[d.value!=""?(n(),u("div",me,v(d.value),1)):p("v-if",!0),fe,k(S,{placeholder:r.$t("general.name"),errorMessage:r.$t("general.nameRequired"),modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=a=>i.value=a),icon:"id-card-alt",class:"w-full md:w-96 inline-block mt-3 mr-2"},null,8,["placeholder","errorMessage","modelValue"]),k(S,{placeholder:r.$t("general.address"),modelValue:b.value,"onUpdate:modelValue":e[4]||(e[4]=a=>b.value=a),disabled:!0,icon:"wallet",class:"w-full md:w-96 inline-block mr-2"},null,8,["placeholder","modelValue"]),c("div",ve,[c("button",{onClick:e[5]||(e[5]=a=>T()),class:"blue-btn font-semibold py-2 cursor-pointer text-center w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:m.value},v(r.$t("general.add")),9,ge)])])):(n(),u("div",pe,[d.value!=""?(n(),u("div",be,v(d.value),1)):p("v-if",!0),ye,k(S,{placeholder:r.$t("general.name"),errorMessage:r.$t("general.nameRequired"),modelValue:i.value,"onUpdate:modelValue":e[6]||(e[6]=a=>i.value=a),icon:"id-card-alt",class:"w-full md:w-96 inline-block mt-3 mr-2"},null,8,["placeholder","errorMessage","modelValue"]),k(S,{placeholder:r.$t("general.address"),modelValue:b.value,"onUpdate:modelValue":e[7]||(e[7]=a=>b.value=a),disabled:!0,icon:"wallet",class:"w-full md:w-96 inline-block mr-2"},null,8,["placeholder","modelValue"]),c("div",we,[c("button",{onClick:e[8]||(e[8]=a=>R()),class:"blue-btn font-semibold py-2 cursor-pointer text-center w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:m.value},v(r.$t("general.add")),9,xe)])])):(n(),u("div",oe,[d.value!=""?(n(),u("div",ne,v(d.value),1)):p("v-if",!0),de,k(Q,{class:"mt-3",placeholder:r.$t("account.namePlaceholder"),errorMessage:r.$t("account.enterAccountName"),modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=a=>y.value=a),icon:"wallet"},null,8,["placeholder","errorMessage","modelValue"]),c("div",ce,[c("button",{onClick:e[2]||(e[2]=a=>j()),class:"blue-btn font-semibold py-2 cursor-pointer text-center w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:A.value},v(r.$t("general.confirm")),9,ie)])])),c("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:e[9]||(e[9]=a=>{g.value=!g.value,d.value=""})},v(r.$t("general.cancel")),1)])])):p("v-if",!0),g.value?(n(),u("div",{key:1,onClick:e[10]||(e[10]=a=>{g.value=!g.value,d.value=""}),class:"fixed inset-0 bg-opacity-60 bg-gray-100 z-20"})):p("v-if",!0)],64))}}),_e=O(he,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/components/ChangeNameModal.vue"]]),ke={name:"AccountComponent",props:{address:String},components:{changeNameModal:_e},setup(l){const{t:o}=F(),b=J(),t=I(()=>{if(!s.currentLoggedInWallet)return null;let e=s.currentLoggedInWallet.accounts.find(a=>a.address==l.address)||s.currentLoggedInWallet.others.find(a=>a.address==l.address);return e||null}),A=I(()=>s.currentLoggedInWallet?s.currentLoggedInWallet.others.find(e=>e.address==l.address):null);let m=h(""),g=new H("ThemeStyleConfig");const i=I(()=>{if(l.address)try{return z.createAddress(l.address).pretty()}catch{}return""});g.init(),ee().appContext.config.globalProperties.emitter;const d=I(()=>t.value?!!t.value.default:!1),j=I(()=>t.value?!!t.value.getDirectParentMultisig().length:!1),w=h("");w.value=t.value?t.value.name:"";const T=I(()=>s.currentLoggedInWallet?s.currentLoggedInWallet.convertAddressToName(l.address,!0):""),C=h(q(l.address,75,g.jdenticonConfig)),E=h(!0);return{accountName:w,accountNameDisplay:T,showName:E,svgString:C,isDefault:d,isMultiSig:j,prettyAddress:i,changeName:()=>{if(w.value.trim()){const e=s.currentLoggedInWallet.accounts.find(f=>f.name==w.value.trim()),a=s.currentLoggedInWallet.others.find(f=>f.name==w.value.trim());if(!e&&!a){const f=s.currentLoggedInWallet.accounts.findIndex(_=>_.address===l.address);if(f==-1){const _=s.currentLoggedInWallet.others.findIndex(V=>V.address===l.address);s.currentLoggedInWallet.others[_].name=w.value}else s.currentLoggedInWallet.accounts[f].name=w.value;s.wallets.saveMyWalletOnlytoLocalStorage(s.currentLoggedInWallet),E.value=!0,T.value=w.value,m.value="",m.value=""}else e||a?m.value=o("account.nameTaken"):m.value=o("account.failChangeName")}else m.value=o("account.nameEmpty")},copy:e=>{let a=document.getElementById(e).getAttribute("copyValue"),f=document.getElementById(e).getAttribute("copySubject");G(a),b.add({severity:"info",detail:f+" "+o("general.copied"),group:"br-custom",life:3e3})},err:m,other_acc:A}}},Ie={class:"border-2 py-3 px-6"},Ae={class:"flex"},Le=["innerHTML"],Ce={class:"flex flex-col justify-center ml-4"},$e={key:0,class:"text-red-500 text-xs"},We={class:"flex"},Ne={key:0,class:"font-semibold text-md"},Me={class:"flex gap-2"},Ve=["copyValue","title","copySubject"],Te={class:"flex gap-2"},Se=["title"],Be=c("img",{src:te,class:"h-4 w-4"},null,-1),je={class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"},Ee=["title"],De={key:0,src:ae,class:"h-4 w-4 mr-1"},Oe={key:1,class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"};function Re(l,o,b,t,A,m){const g=D("changeNameModal"),i=D("font-awesome-icon");return n(),u("div",Ie,[c("div",Ae,[c("div",{innerHTML:t.svgString},null,8,Le),c("div",Ce,[t.err!=""?(n(),u("div",$e,v(t.err),1)):p("v-if",!0),c("div",We,[t.showName?(n(),u("div",Ne,v(t.accountNameDisplay),1)):p("v-if",!0),t.showName?p("v-if",!0):Y((n(),u("input",{key:1,class:"outline-none ml-4 font-semibold text-md","onUpdate:modelValue":o[0]||(o[0]=y=>t.accountName=y)},null,512)),[[Z,t.accountName]]),k(g,{address:b.address,isOther:t.other_acc!=null},null,8,["address","isOther"])]),c("div",Me,[c("div",{id:"address",copyValue:t.prettyAddress,title:t.prettyAddress,copySubject:l.$t("general.address"),class:"truncate md:text-clip w-44 md:w-full text-xs font-semibold mt-1"},v(t.prettyAddress),9,Ve),k(i,{icon:"copy",title:l.$t("general.copy"),onClick:o[1]||(o[1]=y=>t.copy("address")),class:"w-5 h-5 text-blue-link cursor-pointer"},null,8,["title"])]),c("div",Te,[t.isDefault?(n(),u("div",{key:0,class:"px-1 py-0.5 flex mt-0.5 bg-blue-primary rounded-sm",title:l.$t("general.defaultTitle")},[Be,c("p",je,v(l.$t("general.default")),1)],8,Se)):p("v-if",!0),t.isMultiSig?(n(),u("div",{key:1,class:"px-1 py-0.5 flex mt-0.5 bg-orange-primary rounded-sm",title:l.$t("general.multisigTitle")},[t.isMultiSig?(n(),u("img",De)):p("v-if",!0),t.isMultiSig?(n(),u("p",Oe,v(l.$t("general.multisig")),1)):p("v-if",!0)],8,Ee)):p("v-if",!0)])])])])}const tt=O(ke,[["render",Re],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/components/AccountComponent.vue"]]),Fe={class:"flex text-xs flex-wrap font-semibold border-b-2 menu_title_div"},Pe={name:"AccountTabs"},Ke=P({...Pe,props:{address:String,selected:String},setup(l){const o=l,b=()=>{if(!s.currentLoggedInWallet)return!1;let t=s.currentLoggedInWallet.others.find(A=>A.address==o.address);return t?t.type=="DELEGATE":!1};return(t,A)=>{const m=D("router-link");return n(),u("div",Fe,[k(m,{class:N([`${l.selected=="details"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-32 text-center py-3 word-break"]),to:{name:"ViewAccountDetails",params:{address:l.address}}},{default:W(()=>[M(v(t.$t("account.accountDetails")),1)]),_:1},8,["class","to"]),b()?p("v-if",!0):(n(),B(m,{key:0,class:N([`${l.selected=="assets"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-18 py-3 text-center word-break"]),to:{name:"ViewAccountAssets",params:{address:l.address}}},{default:W(()=>[M(v(t.$t("general.asset",2)),1)]),_:1},8,["class","to"])),b()?p("v-if",!0):(n(),B(m,{key:1,class:N([`${l.selected=="namespaces"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-24 py-3 text-center word-break"]),to:{name:"ViewAccountNamespaces",params:{address:l.address}}},{default:W(()=>[M(v(t.$t("general.namespace",2)),1)]),_:1},8,["class","to"])),b()?p("v-if",!0):(n(),B(m,{key:2,class:N([`${l.selected=="metadata"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-18 text-center py-3 word-break"]),to:{name:"ViewAccountMetadata",params:{address:l.address}}},{default:W(()=>[M("Metadata")]),_:1},8,["class","to"])),b()?p("v-if",!0):(n(),B(m,{key:3,class:N([`${l.selected=="multisig"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-18 py-3 text-center word-break"]),to:{name:"ViewMultisigHome",params:{address:l.address}}},{default:W(()=>[M(v(t.$t("general.multisig")),1)]),_:1},8,["class","to"])),k(m,{class:N([`${l.selected=="txn"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-18 py-3 text-center word-break"]),to:{name:"ViewAccountConfirmedTransactions",params:{address:l.address}}},{default:W(()=>[M(v(t.$t("general.transaction",2)),1)]),_:1},8,["class","to"])])}}}),at=O(Ke,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/components/AccountTabs.vue"]]);export{tt as A,se as _,at as a};
