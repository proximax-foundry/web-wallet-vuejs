import{d as I,H as r,c as y,w as o,r as c,a as k,B as l,E as u,i as F,o as Q,b as B,e as m,m as d,v as h,x as w,z as O,R as V}from"./index-c6fbb434.js";import{A as D,_ as E}from"./AccountTabs.vue_vue_type_script_setup_true_lang-5c3ad6b6.js";import{_ as N}from"./PendingDataTable.vue_vue_type_script_setup_true_lang-dbe3fe20.js";import{D as S}from"./dashboardService-b645294c.js";import"./jdenticon-module-e10ef9f6.js";import"./functions-55ca5bfa.js";import"./TextInput-2b290268.js";import"./TextInputClean-0ef3e161.js";import"./icon-key-5b3f7dda.js";import"./icon-message-e27d55b6.js";import"./icon-proximax-logo-gray-c2486ce1.js";import"./column.esm-a2a4d52d.js";const R={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},W={class:"flex my-2 gap-5 flex-none text-xs md:text-sm"},M=m("div",{class:"border rounded-md text-white py-2 px-5",style:{background:"#f3a91d"}}," Pending ",-1),ee=I({__name:"ViewAccountPendingTransactions",props:{address:String},setup(s){const i=s;let _=r.createTransactionFieldOrder(r.getQueryParamOrder_v2().DESC,r.getTransactionSortField().BLOCK);const n=y(()=>{if(!o.currentLoggedInWallet)return null;let e=o.currentLoggedInWallet.accounts.find(a=>a.address==i.address)||o.currentLoggedInWallet.others.find(a=>a.address==i.address);return e||null}),g=c([]),p=c([]),T=c([]),b=y(()=>g.value.concat(T.value).concat(p.value));let f=new S(o.currentLoggedInWallet,n.value),x=r.getTransactionGroupType(),A=async()=>{if(!n.value)return;let e=r.createTransactionQueryParams();e.pageSize=1,e.address=n.value.address,e.embedded=!0,e.updateFieldOrder(_);let a=await f.searchTxns(x.UNCONFIRMED,e),t=await f.formatUnconfirmedMixedTxns(a.transactions);g.value=t},L=async()=>{if(!n.value)return;let e=new S(o.currentLoggedInWallet,n.value),a=r.createTransactionQueryParams();a.pageSize=100,a.address=n.value.address;let t=await e.searchTxns(x.PARTIAL,a),v=await e.formatPartialMixedTxns(t.transactions);p.value=v},P=()=>{if(!n.value)return;let e=[];u.autoAnnounceSignedTransaction.forEach(a=>{let t=O.TransactionMapping.createFromPayload(a.signedTransaction.payload);(V.castToAggregate(t).innerTransactions.find(C=>C.signer.address.plain()==i.address)!=null||a.signedTransaction.signer==n.value.publicKey)&&e.push({type:"Aggregate Bonded",hash:a.signedTransaction.hash,deadline:t.deadline.value,groupType:"In Queue",recipient:"",sender:"",amount:"",message:"",sda:""})}),T.value=e};return k([l.txnActivityLog,l.txnCosignLog,l.txnSwapLog,u.autoAnnounceSignedTransaction,()=>u.aggregateBondedTxLength],async()=>{await A(),await L(),P()},{immediate:!0,deep:!0}),(e,a)=>{const t=F("router-link");return Q(),B("div",null,[m("div",R,[d(D,{address:s.address,class:"mb-6"},null,8,["address"]),d(E,{address:s.address,selected:"txn"},null,8,["address"]),m("div",W,[d(t,{to:{name:"ViewAccountConfirmedTransactions",params:{address:s.address}},class:"border opacity-60 hover:opacity-100 cursor-pointer rounded-md text-white py-2 px-4",style:{background:"#007cff"}},{default:h(()=>[w("Confirmed")]),_:1},8,["to"]),M,d(t,{to:{name:"ViewAccountFailedTransactions",params:{address:s.address}},class:"border opacity-60 hover:opacity-100 cursor-pointer rounded-md text-white py-2 px-5",style:{background:"#dc143c"}},{default:h(()=>[w("Failed")]),_:1},8,["to"])]),d(N,{transaction:b.value,class:"mt-3"},null,8,["transaction"])])])}}});export{ee as default};
