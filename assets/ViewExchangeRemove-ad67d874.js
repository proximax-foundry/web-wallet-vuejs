import"./vue-86063517.js";import{_ as J}from"./proximax-logo-ecfc3767.js";import{d as a}from"./tsjs-xpx-chain-sdk-84426b6a.js";import{T as Q,w as d,A as o,_ as Y,H as q,n as D,f as R,W as z}from"./index-e91c98d3.js";import{M as ue}from"./multisigUtils-f2f699ac.js";import{t as K}from"./jdenticon-e4458e79.js";import{u as me}from"./primevue-e09f7e84.js";import{d as Z,r as k,t as pe,w as ee,B as te,o as f,z as w,b as ge,m as O,A as e,g as r,e as I,bf as T,u as oe,c as y,a as j,l as ve}from"./@vue-a9ecc9f1.js";import{P as fe}from"./PasswordInput-342be278.js";import{u as _e}from"./vue-router-21fffbbf.js";import{l as he}from"./rxjs-1250b26d.js";import"./@js-joda-d98eb16f.js";import"./@noble-f8eff84a.js";import"./js-sha3-d7d4f583.js";import"./node-stdlib-browser-23a8bc7f.js";import"./buffer-6d367910.js";import"./base64-js-50a5cdf9.js";import"./ieee754-44f7831e.js";import"./process-2209b2b3.js";import"./utf8-c941a4a0.js";import"./bip39-936aefa9.js";import"./axios-b48d2c29.js";import"./flatbuffers-edc4f8d7.js";import"./ws-0a714537.js";import"./crypto-js-e64ac54c.js";import"./crypto-browserify-4fd8cccd.js";import"./randombytes-685e9383.js";import"./safe-buffer-c463177b.js";import"./create-hash-92c04a28.js";import"./inherits-804453d8.js";import"./md5.js-8d474739.js";import"./hash-base-bb85fc42.js";import"./readable-stream-2241ee9e.js";import"./events-86ccc6d8.js";import"./util-06f7ff32.js";import"./is-arguments-86164331.js";import"./has-tostringtag-7c6352d6.js";import"./has-symbols-cd7870b9.js";import"./call-bind-9e7f09da.js";import"./get-intrinsic-f35014ba.js";import"./has-proto-8ede3a55.js";import"./function-bind-68631a08.js";import"./has-ab8e2922.js";import"./is-generator-function-06dfaf9d.js";import"./which-typed-array-cf6b6a29.js";import"./for-each-f57c5052.js";import"./is-callable-7492318c.js";import"./available-typed-arrays-61974ec7.js";import"./gopd-bab4d6bd.js";import"./is-typed-array-037eef20.js";import"./util-deprecate-c3aabb3c.js";import"./string_decoder-ef7b01fe.js";import"./ripemd160-58dcfa02.js";import"./sha.js-cea3da2e.js";import"./cipher-base-aee0e03d.js";import"./stream-browserify-7496a08f.js";import"./create-hmac-e8b5ea4a.js";import"./browserify-sign-a708a95f.js";import"./browserify-rsa-bfbdcbb6.js";import"./bn.js-1ae23332.js";import"./elliptic-75e883ee.js";import"./minimalistic-assert-4cc49674.js";import"./minimalistic-crypto-utils-6f869a51.js";import"./brorand-03f0f79d.js";import"./hash.js-4f5dfe73.js";import"./hmac-drbg-87799258.js";import"./parse-asn1-465c125b.js";import"./asn1.js-405e93e4.js";import"./safer-buffer-2ac6237e.js";import"./evp_bytestokey-e91543fa.js";import"./browserify-aes-ce20a0e6.js";import"./buffer-xor-87a7236a.js";import"./pbkdf2-e2ae8643.js";import"./browserify-cipher-c4c37ca3.js";import"./browserify-des-3f7e64d9.js";import"./des.js-d262604a.js";import"./diffie-hellman-c8260aab.js";import"./miller-rabin-de27bf02.js";import"./create-ecdh-ffe720e9.js";import"./public-encrypt-fc0568a2.js";import"./randomfill-2874e5f1.js";import"./mathjs-2a513dae.js";import"./@babel-484168fe.js";import"./typed-function-4896e4f1.js";import"./decimal.js-d133ee8e.js";import"./complex.js-cf2520e8.js";import"./fraction.js-39e7906a.js";import"./javascript-natural-sort-c4dd0c27.js";import"./escape-latex-c8a96e7a.js";import"./seedrandom-c8f991ad.js";import"./tiny-emitter-56d49cfd.js";import"./crypto-random-string-d158262e.js";import"./jose-92e5544c.js";import"./vue-i18n-728f748b.js";import"./@intlify-16888cd3.js";import"./vue-loading-overlay-b89251b1.js";import"./jspdf-30014160.js";import"./fflate-8981c52c.js";import"./vue-debounce-3bbbf8c6.js";import"./mitt-f7ef348c.js";/* empty css                   */import"./maska-6f10db43.js";import"./@fortawesome-014b81f2.js";import"./vue3-blocks-tree-e53499e3.js";import"./tslib-8dbab242.js";const xe={key:0,class:"account-item-value account-item"},be={class:"flex"},ye=["innerHTML"],we={class:"flex flex-col ml-2 text-left"},Te=e("div",{class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}}," Selected Multisig Account",-1),Ae={class:"mt-1 text-tsm font-bold"},Ie={class:"account-item"},ke={class:"flex items-center"},Le=["innerHTML"],Me={class:"text-xs ml-2 font-semibold"},Se=Z({__name:"SelectInputCosignerAccount",props:{cosignerList:{type:Array,required:!1}},emits:["select-cosigner-account","update:modelValue"],setup(S){const g=S;k(!1);const{cosignerList:W}=pe(g),v=k([]),_=oe().appContext.config.globalProperties.emitter;let F=new Q("ThemeStyleConfig");F.init();let H=F.jdenticonConfig;const A=k(null);ee(W,h=>{v.value=h.map(p=>{const l=[...d.currentLoggedInWallet.accounts,...d.currentLoggedInWallet.others].find(s=>s.publicKey==p);return{label:l?d.currentLoggedInWallet.convertAddressToName(l.address):a.PublicAccount.createFromPublicKey(p,o.networkType).address.plain(),value:a.PublicAccount.createFromPublicKey(p,o.networkType).address.plain()}})},{deep:!0,immediate:!0});const V=k(null),L=(h,p)=>{if(h==null&&p==null){A.value=null,_.emit("select-cosigner-account",null);return}_.emit("select-cosigner-account",p),A.value.label=h,A.value.value=p,V.value=K(p,25,H)};return(h,p)=>{const u=te("Dropdown");return f(),w("div",null,[v.value.length?(f(),ge(u,{key:0,showClear:!0,modelValue:A.value,"onUpdate:modelValue":p[0]||(p[0]=l=>A.value=l),style:{width:"100%"},options:v.value,filter:!0,filterFields:["label","value"],emptyFilterMessage:" ",onChange:p[1]||(p[1]=l=>{var s,x,C,P;L((s=l.value)==null?void 0:s.label,(x=l.value)==null?void 0:x.value),h.$emit("update:modelValue",(C=l.value)==null?void 0:C.value),h.$emit("select-cosigner-account",(P=l.value)==null?void 0:P.value)})},{value:O(l=>[l.value?(f(),w("div",xe,[e("div",be,[e("div",{innerHTML:V.value},null,8,ye),e("div",we,[Te,e("div",Ae,r(l.value.label),1)])])])):I("v-if",!0)]),option:O(l=>[e("div",Ie,[e("div",ke,[e("div",{innerHTML:T(K)(l.option.value,20,T(H))},null,8,Le),e("div",Me,r(l.option.label),1)])])]),_:1},8,["modelValue","options"])):I("v-if",!0)])}}}),Fe=Y(Se,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/services/submodule/exchange/components/SelectInputCosignerAccount.vue"]]),He={class:"border-2 xl:grid xl:grid-cols-3"},Ce={class:"xl:col-span-2 p-12"},Pe=e("div",null,"SDA-SDA Exchange - Remove Offer",-1),Ee={key:0,class:"text-blue-primary mt-3"},Ve={key:1,class:"text-red-500"},Ge={class:"border border-blue-300 rounded-md p-3 mt-3 bg-blue-50"},$e={class:"flex items-center gap-2"},Re=["innerHTML"],We={class:"flex flex-col gap-0.5"},Ne=e("div",{class:"uppercase text-xxs text-blue-primary"},"Selected Account",-1),Be={class:"font-semibold"},De=e("div",{class:"text-blue-primary mt-3"},"Amount to give ",-1),je=e("div",{class:"text-blue-primary mt-3"},"Amount to get ",-1),Ke={class:"bg-navy-primary py-6 px-6 xl:col-span-1"},Oe={key:0},Ue={class:"font-bold text-xs text-blue-primary uppercase"},Xe={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 text-gray-200 my-1"},qe={class:"font-semibold text-xxs mt-2 lg:col-span-2 col-span-3 text-blue-primary uppercase"},ze=["innerHTML"],Je={class:"flex"},Qe={class:"ml-1 text-blue-400 font-bold"},Ye=e("img",{src:J,class:"ml-1 h-5 w-5 mt-0.5"},null,-1),Ze=e("div",{class:"border-b-2 border-gray-600 my-2"},null,-1),et={class:"font-bold text-xs text-blue-primary uppercase"},tt={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 text-gray-200 my-1"},ot={class:"font-semibold text-xxs mt-2 lg:col-span-2 col-span-3 text-blue-primary uppercase"},st=["innerHTML"],nt={class:"flex"},it={class:"ml-1 text-blue-400 font-bold"},at=e("img",{src:J,class:"ml-1 h-5 w-5 mt-0.5"},null,-1),rt=e("div",{class:"border-b-2 border-gray-600 mt-2"},null,-1),lt={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs py-2"},ct={class:"font-semibold lg:col-span-2 col-span-3"},dt=["innerHTML"],ut={class:"ml-1 text-blue-400"},mt={key:1,class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs"},pt={class:"font-semibold lg:col-span-2 col-span-3"},gt=["innerHTML"],vt={class:"ml-1 text-blue-400"},ft={key:2,class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs py-2"},_t={class:"font-semibold lg:col-span-2 col-span-3"},ht=["innerHTML"],xt={class:"ml-1 text-blue-400"},bt=e("div",{class:"border-b-2 border-gray-600 mt-2"},null,-1),yt={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs py-2"},wt=e("div",{class:"font-semibold lg:col-span-2 col-span-3 uppercase"},"Total",-1),Tt=["innerHTML"],At={class:"ml-1 text-blue-400"},It={class:"font-semibold text-xs text-white mb-1.5"},kt={class:"text-center"},Lt=Z({__name:"ViewExchangeRemove",props:{owner:String,pair:String},setup(S){const g=S,W=[{namespace:"prx.xpx",name:"XPX"},{namespace:"prx.metx",name:"METX"},{namespace:"xarcade.xar",name:"XAR"}],v=k(""),N=t=>{if(!t)return"0";const n=a.Address.createFromRawAddress(t).plain(),i=d.currentLoggedInWallet.accounts.find(m=>m.address==n)||d.currentLoggedInWallet.others.find(m=>m.address==n);return i?_(i.balance):0},_=t=>{let n=t.toString().split(".");return n[1]!=null?'<span class="font-semibold text-sm">'+n[0]+'</span>.<span class="font-semibold text-xs">'+n[1]+"</span>":'<span class="font-semibold text-sm">'+n[0]+"</span>"},F=t=>{const n=W.find(i=>i.namespace==t);return n?n.name:t},H=new Q("ThemeStyleConfig");H.init();const A=y(()=>K(g.owner,40,H.jdenticonConfig)),V=y(()=>{const t=a.Address.createFromRawAddress(g.owner).plain();return d.currentLoggedInWallet.convertAddressToName(t,!0)}),L=k(null);oe().appContext.config.globalProperties.emitter.on("select-cosigner-account",t=>{L.value=t});const u=y(()=>{const t=a.Address.createFromRawAddress(g.owner).plain();return(d.currentLoggedInWallet.accounts.find(i=>i.address==t)||d.currentLoggedInWallet.others.find(i=>i.address==t)).getDirectParentMultisig().length}),l=y(()=>{if(!u.value)return[];const t=a.Address.createFromRawAddress(g.owner).plain(),n=d.currentLoggedInWallet.accounts.find(i=>i.address==t)||d.currentLoggedInWallet.others.find(i=>i.address==t);return ue.getCosignerInWallet(n.publicKey).cosignerList}),s=k(null),x=me(),C=g.pair.split("/")[0],P=g.pair.split("/")[1],se=async()=>{if(!C||!P){x.add({severity:"error",summary:"Error",detail:"Invalid",group:"br-custom",life:1e3});return}const t=new a.ExchangeSdaHttp(o.nodeFullURL),n=await he(t.getAccountSdaExchangeOffers(a.Address.createFromRawAddress(g.owner)));if(s.value=n.sdaOfferBalances.find(c=>c.mosaicIdGive.toHex()==C&&c.mosaicIdGet.toHex()==P),!s.value){x.add({severity:"error",summary:"Error",detail:"Offer not found",group:"br-custom",life:1e3});return}const i=await o.chainAPI.assetAPI.getMosaicsNames([s.value.mosaicIdGet,s.value.mosaicIdGive]),m=await o.chainAPI.assetAPI.getMosaics([s.value.mosaicIdGet,s.value.mosaicIdGive]);s.value.mosaicGetName=i[0].names.length?i[0].names[0].name:s.value.mosaicIdGet.toHex(),s.value.mosaicGiveName=i[1].names.length?i[1].names[0].name:s.value.mosaicIdGive.toHex(),s.value.mosaicGetDivisibility=m.find(c=>c.mosaicId.toHex()==s.value.mosaicIdGet.toHex()).divisibility,s.value.mosaicGiveDivisibility=m.find(c=>c.mosaicId.toHex()==s.value.mosaicIdGive.toHex()).divisibility},ne=ee(o,async(t,n)=>{t.isReady&&(await se(),ne())},{immediate:!0}),U=y(()=>q.convertToExact(D.currentNetworkProfileConfig.lockedFundsPerAggregate,o.nativeToken.divisibility)),X=y(()=>q.convertToExact(R.getLockFundFee(),o.nativeToken.divisibility)),B=y(()=>{var m;if(!o.isReady)return 0;const t=a.RemoveSdaExchangeOfferTransaction.create(a.Deadline.create(),[new a.RemoveSdaExchangeOffer(new a.MosaicId(o.nativeToken.assetId),new a.MosaicId(o.nativeToken.assetId))],o.networkType);if(!u.value)return((m=t.maxFee)==null?void 0:m.compact())/Math.pow(10,o.nativeToken.divisibility);const n=[...d.currentLoggedInWallet.accounts,...d.currentLoggedInWallet.others].find(c=>c.address==a.Address.createFromRawAddress(g.owner).plain()),i=[t.toAggregateV1(a.PublicAccount.createFromPublicKey(n.publicKey,o.networkType))];return o.buildTxn.aggregateBonded(i).maxFee.compact()/Math.pow(10,o.nativeToken.divisibility)}),ie=y(()=>u.value?Math.round((U.value+X.value+B.value)*Math.pow(10,o.nativeToken.divisibility))/Math.pow(10,o.nativeToken.divisibility):B.value),ae=_e(),re=async()=>{if(u.value&&!L.value){x.add({severity:"error",summary:"Error",detail:"Initiator not selected",group:"br-custom",life:1e3});return}if(v.value.length<8){x.add({severity:"error",summary:"Error",detail:"password must be at least 8 characters",group:"br-custom",life:1e3});return}if(!z.verifyWalletPassword(d.currentLoggedInWallet.name,D.chainNetworkName,v.value)){x.add({severity:"error",summary:"Error",detail:"Incorrect password",group:"br-custom",life:1e3});return}const t=a.Address.createFromRawAddress(g.owner).plain(),n=d.currentLoggedInWallet.accounts.find(b=>b.address==(u.value?L.value:t)),i=z.decryptPrivateKey(new a.Password(v.value),n.encrypted,n.iv);v.value="";const m=a.RemoveSdaExchangeOfferTransaction.create(a.Deadline.create(),[new a.RemoveSdaExchangeOffer(s.value.mosaicIdGive,s.value.mosaicIdGet)],o.networkType),c=a.Account.createFromPrivateKeyV1(i,o.networkType),M=D.currentNetworkProfile.generationHash;if(u.value){const b=[...d.currentLoggedInWallet.accounts,...d.currentLoggedInWallet.others].find(de=>de.address==t),G=[m.toAggregateV1(a.PublicAccount.createFromPublicKey(b.publicKey,o.networkType))],$=o.buildTxn.aggregateBonded(G),E=c.preV2Sign($,M),le=R.lockFundTx(E),ce=c.preV2Sign(le,M);R.announceLF_AND_addAutoAnnounceABT(ce,E)}else{const b=c.preV2Sign(m,M);await R.announceTransaction(b)}ae.push({name:"ViewAccountPendingTransactions",params:{address:c.address.plain()}})};return(t,n)=>{var m,c,M,b,G,$;const i=te("router-link");return f(),w("div",null,[e("div",He,[e("div",Ce,[Pe,l.value.length?(f(),w("div",Ee,"Select Initiator")):I("v-if",!0),j(Fe,{"cosigner-list":l.value},null,8,["cosigner-list"]),u.value&&!l.value.length?(f(),w("div",Ve,"Cosigner not found")):I("v-if",!0),e("div",Ge,[e("div",$e,[e("div",{innerHTML:A.value},null,8,Re),e("div",We,[Ne,e("div",Be,r(V.value),1)])])]),De,e("div",null,r(((m=s.value)==null?void 0:m.currentMosaicGiveAmount.compact())/Math.pow(10,(c=s.value)==null?void 0:c.mosaicGiveDivisibility))+" "+r(F((M=s.value)==null?void 0:M.mosaicGiveName)),1),je,e("div",null,r(((b=s.value)==null?void 0:b.currentMosaicGetAmount.compact())/Math.pow(10,(G=s.value)==null?void 0:G.mosaicGetDivisibility))+" "+r(F(($=s.value)==null?void 0:$.mosaicGetName)),1)])]),e("div",Ke,[u.value?(f(),w("div",Oe,[e("div",Ue,r(t.$t("general.multisigAcc")),1),e("div",Xe,[e("div",qe,r(t.$t("general.currentBalance")),1),e("span",{class:"ml-auto lg:col-span-2 col-span-3",innerHTML:N(S.owner)},null,8,ze),e("div",Je,[e("div",Qe,r(T(o).nativeToken.label),1),Ye])]),Ze])):I("v-if",!0),e("div",et,r(t.$t("general.signerAcc")),1),e("div",tt,[e("div",ot,r(t.$t("general.currentBalance")),1),e("span",{class:"ml-auto lg:col-span-2 col-span-3",innerHTML:N(u.value?L.value:S.owner)},null,8,st),e("div",nt,[e("div",it,r(T(o).nativeToken.label),1),at])]),rt,e("div",lt,[e("div",ct,r(u.value?t.$t("general.aggregateFee"):t.$t("general.transactionFee")),1),e("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:_(B.value)},null,8,dt),e("div",ut,r(T(o).nativeToken.label),1)]),u.value?(f(),w("div",mt,[e("div",pt,r(t.$t("general.lockFund")),1),e("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:_(U.value??0)},null,8,gt),e("div",vt,r(T(o).nativeToken.label),1)])):I("v-if",!0),u.value?(f(),w("div",ft,[e("div",_t,r(t.$t("general.lockFundTxFee")),1),e("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:_(X.value??0)},null,8,ht),e("div",xt,r(T(o).nativeToken.label),1)])):I("v-if",!0),bt,e("div",yt,[wt,e("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:_(ie.value)},null,8,Tt),e("div",At,r(T(o).nativeToken.label),1)]),e("div",It,r(t.$t("general.enterPasswordContinue")),1),j(fe,{placeholder:t.$t("general.enterPassword"),modelValue:v.value,"onUpdate:modelValue":n[0]||(n[0]=E=>v.value=E),icon:"lock",class:"mt-5 mb-3"},null,8,["placeholder","modelValue"]),e("button",{class:"w-full blue-btn px-3 py-3 disabled:opacity-50 disabled:cursor-auto",onClick:n[1]||(n[1]=E=>re())}," Sell "),e("div",kt,[j(i,{to:{name:"ViewExchangeListing"},class:"content-center text-xs text-white underline"},{default:O(()=>[ve(r(t.$t("general.cancel")),1)]),_:1})])])])}}}),ks=Y(Lt,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/services/submodule/exchange/ViewExchangeRemove.vue"]]);export{ks as default};
