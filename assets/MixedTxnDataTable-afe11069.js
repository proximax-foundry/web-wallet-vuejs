import{x as l,d as ie,g as m,j as Y,H as I,c as b,w as G,A as F,D as le,Q as z,o as s,f as a,O as T,e as n,t as i,i as d,l as W,F as ce,ag as X,E as B,W as K,n as E,y as de,ah as pe,$ as ue,_ as ye,r as V,b as _,s as v,a as g}from"./index-5ab99b99.js";import{a as _e,s as he}from"./column.esm-097ca995.js";import{_ as ge}from"./PasswordInput.vue_vue_type_script_setup_true_lang-8033b6bb.js";import{c as me}from"./functions-bdc73ff4.js";import{_ as j,a as $,b as ve}from"./icon-message-e27d55b6.js";import{_ as Te}from"./icon-proximax-logo-gray-c2486ce1.js";class Dt{static getTransferTypes(){return[l.TransactionType.TRANSFER]}static getAliasTypes(){return[l.TransactionType.ADDRESS_ALIAS,l.TransactionType.MOSAIC_ALIAS]}static getMetadataTypes(){return[l.TransactionType.ACCOUNT_METADATA_V2,l.TransactionType.MOSAIC_METADATA_V2,l.TransactionType.NAMESPACE_METADATA_V2]}static getAccountTypes(){return[l.TransactionType.MODIFY_MULTISIG_ACCOUNT]}static getSecretTypes(){return[l.TransactionType.SECRET_LOCK,l.TransactionType.SECRET_PROOF]}static getNamespaceTypes(){return[l.TransactionType.REGISTER_NAMESPACE]}static getAssetTypes(){return[l.TransactionType.MODIFY_MOSAIC_LEVY,l.TransactionType.REMOVE_MOSAIC_LEVY,l.TransactionType.MOSAIC_DEFINITION,l.TransactionType.MOSAIC_SUPPLY_CHANGE]}static getRestrictionTypes(){return[l.TransactionType.MODIFY_ACCOUNT_RESTRICTION_ADDRESS,l.TransactionType.MODIFY_ACCOUNT_RESTRICTION_MOSAIC,l.TransactionType.MODIFY_ACCOUNT_RESTRICTION_OPERATION]}static getLockTypes(){return[l.TransactionType.HASH_LOCK]}static getLinkTypes(){return[l.TransactionType.LINK_ACCOUNT]}static getExchangeTypes(){return[l.TransactionType.EXCHANGE_OFFER,l.TransactionType.ADD_EXCHANGE_OFFER,l.TransactionType.REMOVE_EXCHANGE_OFFER]}static getChainTypes(){return[l.TransactionType.CHAIN_CONFIGURE,l.TransactionType.CHAIN_UPGRADE]}static getAggregateTypes(){return[l.TransactionType.AGGREGATE_BONDED_V1,l.TransactionType.AGGREGATE_COMPLETE_V1]}static getSdaExchangeTypes(){return[l.TransactionType.PLACE_SDA_EXCHANGE_OFFER,l.TransactionType.REMOVE_SDA_EXCHANGE_OFFER]}}var xe=(r=>(r.TRANSFER="Transfer",r.ACCOUNT="Account",r.AGGREGATE="Aggregate",r.ALIAS="Alias",r.ASSET="Asset",r.NAMESPACE="Namespace",r.METADATA="Metadata",r.EXCHANGE="Exchange",r.LOCK="Lock",r.LINK="Link",r.RESTRICTION="Restriction",r.SECRET="Secret",r.CHAIN="Chain",r.SDA_EXCHANGE="SDA Exchange",r))(xe||{});const be="/web-wallet-vuejs/assets/encrypted-icon-message-0ed64fdf.svg",fe={key:0,class:"popup-outer fixed flex z-50"},Ae={class:"modal-popup-box"},Ee={key:0,class:"error error_box mb-3"},ke=["disabled"],we={key:1,class:"popup-outer fixed flex z-50"},Se={class:"modal-popup-box"},Ce={name:"DecryptMessageModal",directives:{tooltip:X}},Ne=ie({...Ce,props:{messageTypeTitle:String,message:String||null,recipientAddress:String||null,initiator:String||null},setup(r){const M=r,h=m(!1),{t}=Y(),k=m(!0);B().appContext.config.globalProperties.emitter;const x=m(""),p=m(""),f=m(""),C=m("");let y=I.createEncryptedMessageFromEncoded(M.message);const e=()=>{if(!M.recipientAddress)return;let u=I.createAddress(M.recipientAddress);F.chainAPI.accountAPI.getAccountInfo(u).then(c=>{C.value=c.publicKey})},N="^[^ ]{8,}$",A=b(()=>!p.value.match(N));m(!1);const P=()=>{p.value="",f.value="",k.value=!0,x.value="",h.value=!1},R=b(()=>{if(!G.currentLoggedInWallet)return null;let u=G.currentLoggedInWallet.accounts.find(c=>c.publicKey==C.value);return u||null}),H=()=>{if(!R.value)return;if(!K.verifyWalletPassword(G.currentLoggedInWallet.name,E.chainNetworkName,p.value)){x.value=t("general.walletPasswordInvalid",{name:G.currentLoggedInWallet.name});return}x.value="";let c=K.decryptPrivateKey(I.createPasswordInstance(p.value),R.value.encrypted,R.value.iv),O=I.createPublicAccount(M.initiator,F.networkType);l.EncryptedMessage.decrypt(y,c,O).payload===""?x.value="Error when trying to decrypt":(k.value=!1,f.value=l.EncryptedMessage.decrypt(y,c,O).payload)},D=()=>{e()};if(F.isReady)D();else{let u=le(F,c=>{c.isReady&&(D(),u())})}return(u,c)=>{const O=z("tooltip");return s(),a(ce,null,[T(n("img",{src:be,class:"cursor-pointer w-6 h-6",onClick:c[0]||(c[0]=w=>h.value=!0)},null,512),[[O,{value:"<tiptitle>"+r.messageTypeTitle+"</tiptitle><tiptext>"+r.message+"</tiptext>",escape:!1},void 0,{left:!0}]]),h.value&&k.value?(s(),a("div",fe,[n("div",Ae,[n("div",null,[x.value!=""?(s(),a("div",Ee,i(x.value),1)):d("",!0),c[5]||(c[5]=n("div",{class:"text-center mt-2 text-xs font-semibold"},"Decrypt Message",-1)),W(ge,{class:"my-3",modelValue:p.value,"onUpdate:modelValue":c[1]||(c[1]=w=>p.value=w),placeholder:u.$t("general.password"),errorMessage:u.$t("general.passwordRequired")},null,8,["modelValue","placeholder","errorMessage"]),n("div",{onClick:c[2]||(c[2]=w=>H()),class:"blue-btn font-semibold py-2 cursor-pointer text-center ml-auto mr-auto w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:A.value},i(u.$t("general.confirm")),9,ke),n("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:c[3]||(c[3]=w=>P())},i(u.$t("general.cancel")),1)])])])):h.value&&k.value==!1?(s(),a("div",we,[n("div",Se,[c[6]||(c[6]=n("div",null,"Decrypted Message: ",-1)),n("div",null,i(f.value),1),n("div",{onClick:c[4]||(c[4]=w=>P()),class:"blue-btn font-semibold py-2 mt-3 cursor-pointer text-center ml-auto mr-auto w-7/12"},i(u.$t("general.close")),1)])])):d("",!0),h.value?(s(),a("div",{key:2,onClick:P,class:"fixed inset-0 bg-opacity-60 z-20"})):d("",!0)],64)}}}),Ie={components:{DataTable:_e,Column:he,DecryptMessageModal:Ne},name:"MixedTxnDataTable",props:{transactions:Array,selectedGroupType:String,currentAddress:String},emits:["openMessage","openDecryptMsg"],directives:{tooltip:X},setup(r,M){const h=m(!1),t=de(),{t:k}=Y(),L=()=>{window.innerWidth<1024?h.value=!1:h.value=!0};L(),pe(()=>{window.removeEventListener("resize",L)}),ue(()=>{window.addEventListener("resize",L)});const p=B().appContext.config.globalProperties.emitter,f=m("border border-gray-400"),C=m(!1),y=m(""),e=I.getTransactionGroupType(),N=b(()=>{var o;return(o=E.currentNetworkProfile)==null?void 0:o.network.currency.name}),A=b(()=>E.currentNetworkProfile.chainExplorer.url),P=b(()=>E.currentNetworkProfile.chainExplorer.blockRoute),R=b(()=>E.currentNetworkProfile.chainExplorer.publicKeyRoute),H=b(()=>E.currentNetworkProfile.chainExplorer.addressRoute),D=b(()=>E.currentNetworkProfile.chainExplorer.hashRoute),u=b(()=>E.currentNetworkProfile.chainExplorer.namespaceInfoRoute),c=b(()=>E.currentNetworkProfile.chainExplorer.assetInfoRoute),O=m("TransferTransactionModal"),w=()=>{f.value="border border-white-100 drop-shadow"},q=()=>{f.value="border border-gray-400"};p.on("CLOSE_MODAL",o=>{C.value=o});const Q=o=>A.value+R.value+"/"+o,J=o=>A.value+u.value+"/"+o,Z=o=>A.value+c.value+"/"+o,ee=o=>A.value+H.value+"/"+o,te=o=>A.value+D.value+"/"+o,se=o=>{window.open(A.value+D.value+"/"+o,"_blank")},re=o=>{let S=[];if(o.length>0){for(const U of o){let ae=oe(U);S.push(ae)}return S.join("<br>")}},ne=o=>I.convertDisplayDateTimeFormat24(o),oe=o=>{let S;return[].push(o.id),o.currentAlias&&o.currentAlias.length?S=o.amount+" "+o.currentAlias[0].name:S=o.amount+" - "+o.id,S};return{borderColor:f,filterText:y,clickInputText:w,blurInputText:q,showTransactionModel:C,dynamicModelComponentDisplay:O,blockExplorerURL:P,addressExplorerURL:H,assetExplorerURL:c,namespaceExplorerURL:u,hashExplorerURL:D,publicKeyExplorerURL:R,explorerBaseURL:A,getPublicKeyExplorerUrl:Q,getNamespaceExplorerUrl:J,getAssetExplorerUrl:Z,getAddressExplorerUrl:ee,getHashExplorerUrl:te,gotoHashExplorer:se,displaySDAs:re,checkOtherAsset:o=>!!(o&&o.length>0),nativeTokenName:N,convertLocalTime:ne,transactionGroupType:e,wideScreen:h,Helper:I,walletState:G,copy:o=>{let S=o,U=k("dashboard.txHash");me(S),t.add({severity:"info",detail:U+" "+k("general.copied"),group:"br-custom",life:3e3})}}}},Me={class:"uppercase text-xxs font-bold mb-1"},Re={class:"flex items-center"},De=["onClick"],Oe={class:"text-txs"},Le={class:"uppercase text-xxs text-gray-300 font-bold mb-1 mt-5"},Pe={class:"flex items-center"},Ge={class:"uppercase font-bold text-txs mr-2"},He={key:0,src:j,class:"inline-block w-5"},Ue={key:1,src:$,class:"inline-block w-5"},Fe={key:0,class:"uppercase text-xxs text-gray-300 font-bold mb-1 mt-5"},Ve={class:"uppercase font-bold text-txs"},We={key:0},Ke={key:1,class:"truncate inline-block text-txs"},Ye={key:2,class:"truncate inline-block text-txs"},ze={key:0},Xe={class:"uppercase text-xxs text-gray-300 font-bold mb-1"},Be={class:"uppercase font-bold text-txs"},je={class:"uppercase text-xxs text-gray-300 font-bold mb-1 mt-5"},$e={class:"uppercase font-bold text-txs"},qe={key:0},Qe={key:1,class:"truncate inline-block text-txs"},Je=["href"],Ze={class:"uppercase text-xxs text-gray-300 font-bold mb-1 mt-5"},et={class:"text-txs uppercase font-bold"},tt={key:0},st={key:0,src:j,class:"inline-block"},rt={key:1,src:$,class:"inline-block"},nt={class:"flex items-center"},ot=["onClick"],at={class:"text-txs"},it={class:"text-txs"},lt={key:0},ct={key:1,class:"truncate inline-block text-txs"},dt=["href"],pt={key:0},ut={key:1,class:"truncate inline-block text-txs"},yt={key:2,class:"truncate inline-block text-txs"},_t={class:"text-txs"},ht={key:0},gt={class:"text-txs"},mt={key:0},vt={class:"flex items-center"},Tt={key:0,src:Te,class:"inline-block"},xt={key:1,class:"flex"},bt={class:"flex justify-center"},ft={key:0,src:ve,class:"inline-block"},At={key:2,class:"w-full text-center"};function Et(r,M,h,t,k,L){const x=V("font-awesome-icon"),p=V("Column"),f=V("DecryptMessageModal"),C=V("DataTable"),y=z("tooltip");return s(),a("div",null,[W(C,{value:h.transactions,paginator:!0,rows:10,scrollDirection:"horizontal",alwaysShowPaginator:!1,responsiveLayout:"scroll",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",currentPageReportTemplate:""},{empty:_(()=>[v(i(r.$t("general.noRecord")),1)]),loading:_(()=>[v(i(r.$t("dashboard.fetchingTx")),1)]),default:_(()=>[t.wideScreen?d("",!0):(s(),g(p,{key:0,style:{width:"200px"},headerClass:"invisible"},{body:_(({data:e})=>[n("div",null,[n("div",Me,i(r.$t("dashboard.txHash")),1),n("div",Re,[n("div",{onClick:N=>t.gotoHashExplorer(e.hash),class:"uppercase cursor-pointer font-bold text-txs text-blue-primary"},[T((s(),a("span",Oe,[v(i(e.hash.substring(0,20))+"...",1)])),[[y,e.hash,void 0,{right:!0}]])],8,De),W(x,{icon:"copy",title:r.$t("general.copy"),onClick:N=>t.copy(e.hash),class:"ml-0.5 w-5 h-5 text-blue-link cursor-pointer"},null,8,["title","onClick"])])]),n("div",null,[n("div",Le,i(r.$t("dashboard.type")),1),n("div",Pe,[n("div",Ge,i(e.type),1),n("div",null,[e.in_out===!0?(s(),a("img",He)):e.in_out===!1?(s(),a("img",Ue)):d("",!0)])])]),n("div",null,[e.recipient!=""&&e.recipient!=null?(s(),a("div",Fe,i(r.$t("general.recipient")),1)):d("",!0),n("div",Ve,[e.recipient===""||e.recipient===null?(s(),a("span",We)):e.recipientNamespaceName?T((s(),a("span",Ke,[v(i(e.recipientNamespaceName),1)])),[[y,t.Helper.createAddress(e.recipient).pretty(),void 0,{right:!0}]]):T((s(),a("span",Ye,[v(i(t.walletState.currentLoggedInWallet?t.walletState.currentLoggedInWallet.convertAddressToNamePretty(e.recipient).substring(0,20):""),1)])),[[y,t.Helper.createAddress(e.recipient).pretty(),void 0,{right:!0}]])])])]),_:1})),t.wideScreen?d("",!0):(s(),g(p,{key:1,style:{width:"200px"},headerClass:"invisible"},{body:_(({data:e})=>[h.selectedGroupType===t.transactionGroupType.CONFIRMED?(s(),a("div",ze,[n("div",Xe,i(r.$t("dashboard.timestamp")),1),n("div",Be,i(t.convertLocalTime(e.timestamp)),1)])):d("",!0),n("div",null,[n("div",je,i(r.$t("general.sender")),1),n("div",$e,[e.sender===""||e.sender===null?(s(),a("span",qe)):T((s(),a("span",Qe,[n("a",{href:t.getPublicKeyExplorerUrl(e.sender),target:"_blank"},i(t.walletState.currentLoggedInWallet?t.walletState.currentLoggedInWallet.convertAddressToNamePretty(e.sender).substring(0,20):""),9,Je)])),[[y,t.Helper.createAddress(e.sender).pretty(),void 0,{right:!0}]])])]),n("div",null,[n("div",Ze,i(r.$t("dashboard.txAmount")),1),n("div",et,[v(i(e.amountTransfer?e.amountTransfer:"-")+" ",1),e.amountTransfer?(s(),a("b",tt,i(t.nativeTokenName),1)):d("",!0)])])]),_:1})),t.wideScreen?(s(),g(p,{key:2,header:r.$t("dashboard.inOut"),headerStyle:"width:40px"},{body:_(({data:e})=>[n("div",null,[e.in_out===!0?(s(),a("img",st)):e.in_out===!1?(s(),a("img",rt)):d("",!0)])]),_:1},8,["header"])):d("",!0),t.wideScreen?(s(),g(p,{key:3,field:"hash",header:r.$t("dashboard.txHash"),headerStyle:"width:100px"},{body:_(({data:e})=>[n("div",nt,[T((s(),a("span",{onClick:N=>t.gotoHashExplorer(e.hash),class:"text-txs text-blue-primary cursor-pointer"},[v(i(e.hash.substring(0,20))+"...",1)],8,ot)),[[y,e.hash,void 0,{bottom:!0}]]),W(x,{icon:"copy",title:r.$t("general.copy"),onClick:N=>t.copy(e.hash),class:"ml-0.5 w-5 h-5 text-blue-link cursor-pointer"},null,8,["title","onClick"])])]),_:1},8,["header"])):d("",!0),h.selectedGroupType===t.transactionGroupType.CONFIRMED&&t.wideScreen?(s(),g(p,{key:4,field:"timestamp",header:r.$t("dashboard.timestamp"),headerStyle:"width:110px"},{body:_(({data:e})=>[n("span",at,i(t.convertLocalTime(e.timestamp)),1)]),_:1},8,["header"])):d("",!0),t.wideScreen?(s(),g(p,{key:5,field:"type",header:r.$t("dashboard.type"),headerStyle:"width:110px"},{body:_(({data:e})=>[n("span",it,i(e.type),1)]),_:1},8,["header"])):d("",!0),t.wideScreen?(s(),g(p,{key:6,field:"signer",header:r.$t("general.sender"),headerStyle:"width:110px"},{body:_(({data:e})=>[e.sender===""||e.sender===null?(s(),a("span",lt)):T((s(),a("span",ct,[n("a",{href:t.getPublicKeyExplorerUrl(e.sender),target:"_blank"},i(t.walletState.currentLoggedInWallet?t.walletState.currentLoggedInWallet.convertAddressToNamePretty(e.sender).substring(0,20):""),9,dt)])),[[y,t.Helper.createAddress(e.sender).pretty(),void 0,{bottom:!0}]])]),_:1},8,["header"])):d("",!0),t.wideScreen?(s(),g(p,{key:7,field:"recipient",header:r.$t("general.recipient"),headerStyle:"width:110px"},{body:_(({data:e})=>[e.recipient===""||e.recipient===null?(s(),a("span",pt)):e.recipientNamespaceName?T((s(),a("span",ut,[v(i(e.recipientNamespaceName),1)])),[[y,t.Helper.createAddress(e.recipient).pretty(),void 0,{bottom:!0}]]):T((s(),a("span",yt,[v(i(t.walletState.currentLoggedInWallet?t.walletState.currentLoggedInWallet.convertAddressToNamePretty(e.recipient).substring(0,20):""),1)])),[[y,t.Helper.createAddress(e.recipient).pretty(),void 0,{bottom:!0}]])]),_:1},8,["header"])):d("",!0),h.selectedGroupType===t.transactionGroupType.CONFIRMED&&t.wideScreen?(s(),g(p,{key:8,header:r.$t("dashboard.txFee"),headerStyle:"width:90px"},{body:_(({data:e})=>[n("div",_t,[v(i(e.fee)+" ",1),e.fee?(s(),a("b",ht,i(t.nativeTokenName),1)):d("",!0)])]),_:1},8,["header"])):d("",!0),t.wideScreen?(s(),g(p,{key:9,header:r.$t("general.amount"),headerStyle:"width:90px"},{body:_(({data:e})=>[n("div",gt,[v(i(e.amountTransfer?e.amountTransfer:"-")+" ",1),e.amountTransfer?(s(),a("b",mt,i(t.nativeTokenName),1)):d("",!0)])]),_:1},8,["header"])):d("",!0),t.wideScreen?(s(),g(p,{key:10,header:r.$t("general.sda"),headerStyle:"width:40px"},{body:_(({data:e})=>[n("div",vt,[t.checkOtherAsset(e.sda)?T((s(),a("img",Tt,null,512)),[[y,{value:"<tiptitle>"+r.$t("general.sdaFull")+"</tiptitle><tiptext>"+t.displaySDAs(e.sda)+"</tiptext>",escape:!1},void 0,{left:!0}]]):(s(),a("span",xt,"-"))])]),_:1},8,["header"])):d("",!0),t.wideScreen?(s(),g(p,{key:11,header:r.$t("general.message"),headerStyle:"width:40px"},{body:_(({data:e})=>[n("div",bt,[e.message&&e.messageType!==1?T((s(),a("img",ft,null,512)),[[y,{value:"<tiptitle>"+e.messageTypeTitle+"</tiptitle><tiptext>"+e.message+"</tiptext>",escape:!1},void 0,{left:!0}]]):e.message&&e.messageType!==0?(s(),g(f,{key:1,messageTypeTitle:e.messageTypeTitle,message:e.message,recipientAddress:e.recipient,initiator:e.initiator},null,8,["messageTypeTitle","message","recipientAddress","initiator"])):(s(),a("div",At,"-"))])]),_:1},8,["header"])):d("",!0)]),_:1},8,["value"])])}const Ot=ye(Ie,[["render",Et]]);export{Ot as M,Dt as T,Ne as _,xe as a};
