import{_ as O,a5 as se,M as ae,o as m,b,e as t,j as H,t as u,O as oe,f as V,x as re,d as _e,l as he,r as s,u as ye,c as v,W,w as Y,B as o,H as A,n as S,S as xe,a as ee,i as te,m as p,v as Te,h as ke,z as D}from"./index-5c640343.js";import{_ as we,a as Ce,b as Ie,c as Ae}from"./TxnSummary.vue_vue_type_script_setup_true_lang-93305cc6.js";import{S as Se}from"./SupplyInputClean-518f6015.js";import{_ as ie}from"./icon-info-8b4f1351.js";import{A as K}from"./assetsUtils-65a7ead9.js";import{T as R}from"./transactionState-d904b215.js";import"./jdenticon-module-fec6c6e8.js";import"./proximax-logo-ecfc3767.js";const Ee="/web-wallet-vuejs/assets/icon-done-a0410eac.svg",$e="/web-wallet-vuejs/assets/icon-undone-5c4de078.svg",Ne={directives:{tooltip:se},props:{title:String,disabled:Boolean,modelValue:Boolean,toolTip:String},emits:["update:modelValue"],name:"CheckInput",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},methods:{clickInputText:function(){!this.showError&&!this.disabled&&(this.borderColor="border-2 border-blue-primary")},getIcon(){return require(`@/${this.icon}`)},blurInputText:function(){this.disabled||(this.modelValue==""?(this.borderColor="border-2 border-red-primary",this.textErr=!0):(this.borderColor="border-2 border-gray-300",this.textErr=!1))},focusInputText:function(){this.borderColor="border-2 border-blue-primary",this.textErr=!1}},mounted(){this.emitter.on("CLEAR_TEXT",n=>{this.inputText=n,this.textErr=!1,this.borderColor="border border-gray-300"})}},Ve={class:"border border-gray-200 px-2 py-1 h-14 flex items-center justify-between rounded-md"},Me={key:0,src:ie,class:"inline-block ml-2 relative",style:{top:"-1px"}},Fe={key:0,src:Ee,class:"inline-block"},Pe={key:1,src:$e,class:"inline-block"};function De(n,c,a,E,M,f){const r=ae("tooltip");return m(),b("div",{class:H(`${a.disabled?"opacity-50":"cursor-pointer"}`)},[t("div",Ve,[t("div",null,[t("div",{class:H(["inline-block font-bold text-tsm",`${a.disabled?"text-gray-500":"text-black"}`])},u(a.title),3),a.toolTip?oe((m(),b("img",Me,null,512)),[[r,{value:"<tiptext>"+a.toolTip+"</tiptext>",escape:!1},void 0,{bottom:!0}]]):V("",!0)]),a.modelValue?(m(),b("img",Fe)):(m(),b("img",Pe))])],2)}const le=O(Ne,[["render",De]]);const Ue={directives:{tooltip:se},props:{placeholder:String,errorMessage:String,icon:String,showError:Boolean,modelValue:String,title:String,disabled:Boolean,max:Number,toolTip:String},emits:["update:modelValue"],name:"NumberInputClean",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},methods:{clickInputText:function(){this.pswdErr||(this.borderColor="border-2 border-blue-primary")},validateKey:function(n){if(n.charCode<48||n.charCode>54)n.preventDefault();else return n.key},validate:function(n){this.$emit("update:modelValue",n.data)}},mounted(){this.emitter.on("CLEAR_TEXT",n=>{this.inputText=n,this.textErr=!1,this.borderColor="border border-gray-300"})}},Be={class:"border border-gray-200 px-2 py-1 h-14 rounded-md"},Le={class:"uppercase text-gray-500 text-txs text-left mb-2"},Ke={key:0,src:ie,class:"inline-block ml-1 relative cursor-pointer",style:{top:"-1px"}},Re=["disabled","value","max","placeholder"],je={class:"h-3 mb-2"},ze={key:0,class:"error error-text text-left"};function We(n,c,a,E,M,f){const r=ae("tooltip");return m(),b("div",{class:H(a.disabled?"opacity-50":"")},[t("div",Be,[t("div",Le,[re(u(a.placeholder)+" ",1),a.toolTip?oe((m(),b("img",Ke,null,512)),[[r,{value:"<tiptext>"+a.toolTip+"</tiptext>",escape:!0},void 0,{bottom:!0}]]):V("",!0)]),t("input",{disabled:a.disabled,value:a.modelValue,onInput:c[0]||(c[0]=(...y)=>f.validate&&f.validate(...y)),onKeypress:c[1]||(c[1]=(...y)=>f.validateKey&&f.validateKey(...y)),type:"number",maxlength:"1",min:"0",max:a.max,placeholder:a.placeholder,class:"number_input",onClick:c[2]||(c[2]=y=>f.clickInputText()),onFocus:c[3]||(c[3]=y=>y.target.select())},null,40,Re)]),t("div",je,[M.textErr||a.showError?(m(),b("div",ze,u(a.errorMessage),1)):V("",!0)])],2)}const He=O(Ue,[["render",We]]),Oe={class:"w-10/12 ml-auto mr-auto"},Xe={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},Ze={class:"xl:col-span-2 p-12"},qe={class:"font-semibold mb-4"},Ge={key:0,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},Qe={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},Je={class:"inline-block text-xs"},Ye={key:1,class:"error error_box"},et={class:"mt-4"},tt={class:"flex gap-1 mt-3"},lt={key:0,class:"mt-3"},st={class:"lg:grid lg:grid-cols-2 mt-5"},at={class:"lg:mr-2"},ot={class:"lg:ml-2"},rt={class:"lg:grid lg:grid-cols-2"},it={class:"mb-5 lg:mb-0 lg:mr-2"},nt={class:"mb-5 lg:mb-0 lg:ml-2"},ut={class:"bg-navy-primary py-6 px-6 xl:col-span-1"},ct=["disabled"],dt={class:"text-center"},vt={class:"sm:grid sm:grid-cols-2 mt-10 lg:mt-16"},mt={class:"mb-8"},bt={href:"https://bcdocs.xpxsirius.io/docs/built-in-features/mosaic/",target:"_new",class:"sm:h-9 lg:h-5 text-blue-primary font-bold text-tsm flex items-start"},pt={class:"text-gray-400 text-xs lg:text-tsm my-3 sm:pr-2"},ft={class:"mb-8"},gt={href:"https://t.me/proximaxhelpdesk",target:"_new",class:"sm:h-9 lg:h-5 text-blue-primary font-bold text-tsm items-start flex"},_t={class:"text-gray-400 text-tsm my-3"},ht=_e({__name:"ViewServicesAssetsCreate",setup(n){const c=he(),E=ke().appContext.config.globalProperties.emitter,M=s(!1);ye();const f=s(""),r=s("0"),y=s(!1),g=s(!1),_=s(!1);v(()=>h.value||q.value);const U=v(()=>q.value),X=s(!1),j=s(!1),ne=s("month"),ue=s("1"),ce=s(!1);s(!1);const Z=s(!1),x=s("0"),q=s(!1),w=s(),F=s();try{w.value=W.createPublicAccount(Y.currentLoggedInWallet?Y.currentLoggedInWallet.selectDefaultAccount().publicKey:"",o.networkType)}catch(e){console.log(e)}const de=s("0"),C=s(0);try{de.value=A.amountFormatterSimple(K.createAssetTransactionFee(w.value,Number(x.value),_.value,g.value,Number(r.value)),o.nativeToken.divisibility),C.value=A.convertToExact(K.createAssetTransactionFee(w.value,Number(x.value),_.value,g.value,Number(r.value)),o.nativeToken.divisibility)}catch(e){console.log(e)}const B=v(()=>S.currentNetworkProfileConfig?A.convertToExact(S.currentNetworkProfileConfig.mosaicRentalFee,o.nativeToken.divisibility):0),ve=v(()=>S.currentNetworkProfileConfig?A.convertToCurrency(S.currentNetworkProfileConfig.mosaicRentalFee,o.nativeToken.divisibility):"0"),G=v(()=>S.currentNetworkProfileConfig?A.convertToExact(S.currentNetworkProfileConfig.lockedFundsPerAggregate,o.nativeToken.divisibility):0),Q=v(()=>S.currentNetworkProfile?A.convertToExact(xe.getLockFundFee(),o.nativeToken.divisibility):0),J=v(()=>G.value+Q.value),me=v(()=>!(r.value!=null&&Number(x.value)>0&&!M.value&&!ce.value&&!h.value)),i=s(null),$=s(null),N=s(null),T=s(0),L=s(0),z=async e=>{if(o.chainAPI&&e)try{const l=await o.chainAPI.accountAPI.getAccountInfo(D.Address.createFromRawAddress(e)),k=l.mosaics.findIndex(I=>I.id.toHex()==o.nativeToken.assetId);return k!=-1?l.mosaics[k].amount.compact()/Math.pow(10,o.nativeToken.divisibility):0}catch{return 0}},h=v(()=>{if(N.value)return i.value?L.value<B.value?!0:T.value<C.value+J.value:T.value<B.value+C.value});T.value<B.value+C.value?(X.value=!0,j.value=!0,Z.value=!0):(X.value=!1,j.value=!1,Z.value=!1);const P=()=>{r.value="0",x.value="0",ue.value="1",ne.value="month",j.value=!1,g.value=!1,_.value=!1};ee(N,async(e,l)=>{e==null?(T.value=0,P(),$.value=null,i.value=null,F.value=null):e!=l&&(P(),$.value=null,i.value=null,F.value=null,T.value=await z(e))}),ee(i,async(e,l)=>{e==null?(L.value=0,P(),$.value=null,i.value=null,F.value=null,T.value=await z(N.value)):e!=l&&(P(),L.value=await z(e))});const be=v(()=>i?J.value+C.value:B.value+C.value),pe=v(()=>A.amountFormatterSimple(be.value,0)),fe=e=>{M.value=e},ge=()=>{if(i.value){const e=o.buildTxn.mosaicDefinition(F.value,_.value,g.value,Number(r.value));let l=D.MosaicSupplyType.Increase;const k=o.buildTxn.buildMosaicSupplyChange(e.mosaicId,l,D.UInt64.fromUint(K.addZeros(Number(r.value),Number(x.value)))),I=[e.serialize(),k.serialize()];R.unsignedTransactionPayload=I}else{const e=o.buildTxn.mosaicDefinition(w.value,_.value,g.value,Number(r.value)),l=e.toAggregateV1(w.value);let k=D.MosaicSupplyType.Increase;const I=o.buildTxn.buildMosaicSupplyChange(e.mosaicId,k,D.UInt64.fromUint(K.addZeros(Number(r.value),Number(x.value)))).toAggregateV1(w.value);let d=o.buildTxn.aggregateComplete([l,I]).serialize();R.unsignedTransactionPayload=d}P(),R.selectedAddress=N.value,R.selectedMultisigAddress=i.value,c.push({name:"ViewConfirmTransaction"})};return E.on("select-account",e=>{N.value=e}),E.on("select-account-public-key",e=>{w.value=W.createPublicAccount(e,o.networkType)}),E.on("select-multisig-account",e=>{$.value=e.label,i.value=e.value,F.value=W.createPublicAccount(e.publicKey,o.networkType)}),E.on("CLOSE_MULTISIG",()=>{$.value=null,i.value=null}),(e,l)=>{const k=te("font-awesome-icon"),I=te("router-link");return m(),b("div",null,[t("div",Oe,[t("div",Xe,[t("div",Ze,[t("div",qe,u(e.$t("asset.createAssets")),1),h.value?(m(),b("div",Ge,[t("div",Qe,[p(k,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),t("div",Je,u(e.$t("general.insufficientBalance")),1)])):V("",!0),f.value!=""?(m(),b("div",Ye,u(f.value),1)):V("",!0),t("div",et,[t("div",tt,[p(we,{type:"asset"}),p(Ce,{"selected-address":N.value},null,8,["selected-address"])]),i.value?(m(),b("div",lt,[p(Ie,{"select-default-address":i.value,"select-default-name":$.value,type:"asset"},null,8,["select-default-address","select-default-name"])])):V("",!0),t("div",st,[t("div",at,[p(Se,{disabled:h.value||U.value,modelValue:x.value,"onUpdate:modelValue":l[0]||(l[0]=d=>x.value=d),balance:Number.MAX_VALUE,placeholder:e.$t("general.supply"),type:"text",onShowError:fe,decimal:Number(r.value),toolTip:e.$t("asset.supplyMsg1")+" <br><br>"+e.$t("asset.supplyMsg2")+"<br>"+e.$t("asset.supplyMsg3")},null,8,["disabled","modelValue","balance","placeholder","decimal","toolTip"])]),t("div",ot,[p(He,{disabled:h.value||U.value,modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=d=>r.value=d),max:6,placeholder:e.$t("general.divisibility"),showError:y.value,toolTip:e.$t("asset.divisibilityMsg1")+" <br><br>"+e.$t("asset.divisibilityMsg2")+"<br>"+e.$t("asset.divisibilityMsg3")},null,8,["disabled","modelValue","placeholder","showError","toolTip"])])]),t("div",rt,[t("div",it,[p(le,{disabled:h.value||U.value,modelValue:g.value,"onUpdate:modelValue":l[2]||(l[2]=d=>g.value=d),title:e.$t("general.transferable"),toolTip:e.$t("asset.transferableMsg"),onClick:l[3]||(l[3]=d=>h.value?"":g.value=!g.value)},null,8,["disabled","modelValue","title","toolTip"])]),t("div",nt,[p(le,{disabled:h.value||U.value,modelValue:_.value,"onUpdate:modelValue":l[4]||(l[4]=d=>_.value=d),title:e.$t("general.supplyMutable"),toolTip:e.$t("asset.supplyMutableMsg"),onClick:l[5]||(l[5]=d=>h.value?"":_.value=!_.value)},null,8,["disabled","modelValue","title","toolTip"])])])])]),t("div",ut,[p(Ae,{"signer-native-token-balance":T.value,"asset-rental-fee-currency":ve.value,"native-token-balance":i.value?L.value:T.value,"lock-fund":G.value,"lock-fund-tx-fee":Q.value,"selected-multisig-address":i.value,"txn-fee":C.value,"total-fee":Number(pe.value)},null,8,["signer-native-token-balance","asset-rental-fee-currency","native-token-balance","lock-fund","lock-fund-tx-fee","selected-multisig-address","txn-fee","total-fee"]),t("button",{type:"submit",class:"mt-3 w-full blue-btn py-4 disabled:opacity-50 disabled:cursor-auto text-white",disabled:me.value,onClick:ge},u(e.$t("asset.createAssets")),9,ct),t("div",dt,[p(I,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white border-b-2 border-white"},{default:Te(()=>[re(u(e.$t("general.cancel")),1)]),_:1})])])]),t("div",vt,[t("div",mt,[t("a",bt,u(e.$t("general.assetQues")),1),t("div",pt,u(e.$t("asset.assetAns")),1)]),t("div",ft,[t("a",gt,u(e.$t("general.feedback")),1),t("div",_t,u(e.$t("general.feedbackDescription")),1)])])])])}}});const St=O(ht,[["__scopeId","data-v-73249776"]]);export{St as default};
