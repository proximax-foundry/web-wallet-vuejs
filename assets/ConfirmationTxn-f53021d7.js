import{d as M,k as W,g as y,c as i,H as P,n as x,r as H,o,f as r,e as t,s as g,t as d,i as f,F as I,K as L,l as b,b as T,T as B,W as D,w as R,A as z,B as k,x as F}from"./index-5ab99b99.js";import{_ as q}from"./PasswordInput.vue_vue_type_script_setup_true_lang-8033b6bb.js";import{T as a}from"./transactionState-cfbbb012.js";const K={class:"w-10/12 ml-auto mr-auto mt-5"},O={class:"border filter shadow-lg mt-8"},G={key:0},J={class:"ml-7 my-2 text-sm"},Q={class:"font-bold"},X={key:0,class:"ml-7 mt-1 mb-4 text-sm"},Y={class:"font-bold"},Z={key:1},ee={class:"flex justify-center px-12"},te={class:"mb-3 border rounded-lg border-gray-900 w-full p-2 flex items-center justify-center break-all"},se={key:2},ae={class:"flex justify-center px-12"},ne={class:"mb-3 border rounded-lg border-gray-900 w-full p-2 flex items-center justify-center break-all"},le=["onClick"],oe={class:"flex justify-center my-3"},re={key:0,class:"popup-outer-lang lg:translate-x-2/4 fixed flex z-50"},ie={class:"modal-popup-box text-center"},de={key:0,class:"error error_box mb-3"},ue={class:"text-center mt-2 text-xs font-semibold"},ye=M({__name:"ConfirmationTxn",setup(ce){const h=W(),n=y(!1),u=y(""),v=y(""),A=i(()=>p.value?P.createAddress(p.value).pretty():""),C=i(()=>m.value?P.createAddress(m.value).pretty():""),$=i(()=>x.currentNetworkProfile.chainExplorer.url),U=i(()=>x.currentNetworkProfile.chainExplorer.payloadInfoRoute),_=s=>{window.open($.value+U.value+"/"+s,"_blank")},N=i(()=>a.lockHashPayload?a.lockHashPayload:null),c=i(()=>a.unsignedTransactionPayload?a.unsignedTransactionPayload:null),V=i(()=>a.transactionPayload),p=i(()=>a.selectedAddress),m=i(()=>a.selectedMultisigAddress),w=()=>{a.lockHashPayload="",a.transactionPayload="",a.unsignedTransactionPayload="",a.selectedAddress="",a.selectedMultisigAddress=""},S=async()=>{if(u.value=="")v.value="Please insert wallet password to sign transaction";else if(D.verifyWalletPassword(R.currentLoggedInWallet.name,x.chainNetworkName,u.value)){n.value=!n.value,v.value="";let s=null;if(m.value){const e=await z.chainAPI.nodeAPI.getNodeTime();s=await k.signAbtWithTxnAndPassword(p.value,m.value,u.value,c.value,new F.UInt64(e.sendTimeStamp))}else s=await k.signTxnWithPassword(p.value,m.value,u.value,c.value);a.transactionPayload=s.txnPayload,a.lockHashPayload=s.hashLockTxnPayload,u.value="",a.unsignedTransactionPayload="",j()}else v.value="Wallet password is incorrect"},j=async()=>{await k.confirmAnnounceTransaction(V.value,N.value);const s=p.value;w(),h.push({name:"ViewAccountPendingTransactions",params:{address:s}})};return(s,e)=>{const E=H("router-link");return o(),r("div",null,[t("div",K,[t("div",O,[c.value?(o(),r("div",G,[e[9]||(e[9]=t("div",{class:"text-lg font-semibold m-7"},"Unsigned Transaction",-1)),t("div",J,[e[7]||(e[7]=g("To be signed by ")),t("span",Q,d(A.value),1)]),m.value?(o(),r("div",X,[e[8]||(e[8]=g("Transaction(s) for ")),t("span",Y,d(C.value),1)])):f("",!0),typeof c.value=="string"?(o(),r("div",Z,[t("div",ee,[t("div",te,d(c.value),1)]),t("div",{class:"flex justify-center text-blue-primary font-semibold uppercase ml-3.5 mt-3 text-sm xl:text-md xl:ml-0 cursor-pointer",onClick:e[0]||(e[0]=l=>_(c.value))},"Click to view Unsigned Transaction Details in Explorer")])):(o(),r("div",se,[(o(!0),r(I,null,L(c.value,l=>(o(),r("div",null,[t("div",ae,[t("div",ne,d(l),1)]),t("div",{class:"flex justify-center text-blue-primary font-semibold uppercase ml-3.5 my-3 text-sm xl:text-md xl:ml-0 cursor-pointer",onClick:me=>_(l)},"Click to view Unsigned Transaction Details in Explorer",8,le)]))),256))]))])):f("",!0),t("div",oe,[b(E,{to:{name:"ViewDashboard"},class:"text-black font-bold text-xs pt-3 mr-4 sm:mr-5 mt-2 focus:outline-none disabled:opacity-50",onClick:e[1]||(e[1]=l=>w())},{default:T(()=>[g(d(s.$t("general.cancel")),1)]),_:1}),t("button",{type:"submit",class:"default-btn focus:outline-none disabled:opacity-50 mt-2",onClick:e[2]||(e[2]=l=>n.value=!n.value)}," Sign ")])]),b(B,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:T(()=>[n.value?(o(),r("div",re,[t("div",ie,[v.value!=""?(o(),r("div",de,d(v.value),1)):f("",!0),t("div",ue,d(s.$t("general.enterPassword")),1),b(q,{class:"mt-3",modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=l=>u.value=l),placeholder:s.$t("general.enterPassword"),errorMessage:s.$t("general.passwordRequired")},null,8,["modelValue","placeholder","errorMessage"]),t("button",{onClick:e[4]||(e[4]=l=>S()),class:"blue-btn py-2 font-semibold cursor-pointer text-center w-7/12 mt-5 inline-block"},d(s.$t("general.confirm")),1),t("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:e[5]||(e[5]=l=>{n.value=!n.value,u.value=""})},d(s.$t("general.cancel")),1)])])):f("",!0)]),_:1}),n.value?(o(),r("div",{key:0,onClick:e[6]||(e[6]=l=>n.value=!n.value),class:"fixed inset-0 bg-opacity-60 bg-gray-100 z-20"})):f("",!0)])])}}});export{ye as default};
