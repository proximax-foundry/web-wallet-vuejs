import"./vue-86063517.js";import{S as xt}from"./SupplyInputClean-7b01a554.js";import{S as kt,_ as _t}from"./icon-dots-6390c14a.js";import{_ as Ct,A as De,C as St,n as pe,w as M,H as y,x as Tt}from"./index-71c561bd.js";import{a as Mt,c as It}from"./functions-3b5b4af7.js";import{u as At}from"./primevue-35724b2c.js";import{A as Et}from"./AddressInputClean-ad879bd2.js";import{S as I,a as He}from"./swapUtils-5f8c942f.js";import{u as Nt}from"./vue-i18n-728f748b.js";import{N as Bt}from"./namespaceUtils-41ae3b50.js";import{d as se}from"./tsjs-xpx-chain-sdk-84426b6a.js";import{_ as Lt}from"./bsc-e621c678.js";import{_ as Rt}from"./icon-metamask-fox-25ba78e6.js";import{_ as Ke}from"./icon-connected-48d7208e.js";import{_ as ze}from"./metx-logo-27f23eae.js";import{_ as Ge}from"./icon-xpx-072deeab.js";import{r as i,c as _,b5 as Fe,w as he,aJ as Ut,B as W,C as Vt,o as n,z as d,A as t,g as s,l as p,D as u,p as be,bq as Pt,F as We,k as qe,e as f,a as w,b as E,m as Oe,bn as jt}from"./@vue-a9ecc9f1.js";import{W as ae,C as Qe,p as Dt}from"./@ethersproject-91cc0060.js";import"./@js-joda-d98eb16f.js";import"./icon-info-8b4f1351.js";import"./vue-router-21fffbbf.js";import"./rxjs-1250b26d.js";import"./tslib-8dbab242.js";import"./crypto-js-e64ac54c.js";import"./crypto-browserify-4fd8cccd.js";import"./randombytes-685e9383.js";import"./node-stdlib-browser-23a8bc7f.js";import"./buffer-6d367910.js";import"./base64-js-50a5cdf9.js";import"./ieee754-44f7831e.js";import"./process-2209b2b3.js";import"./safe-buffer-c463177b.js";import"./create-hash-92c04a28.js";import"./inherits-804453d8.js";import"./md5.js-8d474739.js";import"./hash-base-bb85fc42.js";import"./readable-stream-2241ee9e.js";import"./events-86ccc6d8.js";import"./util-06f7ff32.js";import"./is-arguments-86164331.js";import"./has-tostringtag-7c6352d6.js";import"./has-symbols-cd7870b9.js";import"./call-bind-9e7f09da.js";import"./get-intrinsic-f35014ba.js";import"./has-proto-8ede3a55.js";import"./function-bind-68631a08.js";import"./has-ab8e2922.js";import"./is-generator-function-06dfaf9d.js";import"./which-typed-array-cf6b6a29.js";import"./for-each-f57c5052.js";import"./is-callable-7492318c.js";import"./available-typed-arrays-61974ec7.js";import"./gopd-bab4d6bd.js";import"./is-typed-array-037eef20.js";import"./util-deprecate-c3aabb3c.js";import"./string_decoder-ef7b01fe.js";import"./ripemd160-58dcfa02.js";import"./sha.js-cea3da2e.js";import"./cipher-base-aee0e03d.js";import"./stream-browserify-7496a08f.js";import"./create-hmac-e8b5ea4a.js";import"./browserify-sign-a708a95f.js";import"./browserify-rsa-bfbdcbb6.js";import"./bn.js-1ae23332.js";import"./elliptic-75e883ee.js";import"./minimalistic-assert-4cc49674.js";import"./minimalistic-crypto-utils-6f869a51.js";import"./brorand-03f0f79d.js";import"./hash.js-4f5dfe73.js";import"./hmac-drbg-87799258.js";import"./parse-asn1-465c125b.js";import"./asn1.js-405e93e4.js";import"./safer-buffer-2ac6237e.js";import"./evp_bytestokey-e91543fa.js";import"./browserify-aes-ce20a0e6.js";import"./buffer-xor-87a7236a.js";import"./pbkdf2-e2ae8643.js";import"./browserify-cipher-c4c37ca3.js";import"./browserify-des-3f7e64d9.js";import"./des.js-d262604a.js";import"./diffie-hellman-c8260aab.js";import"./miller-rabin-de27bf02.js";import"./create-ecdh-ffe720e9.js";import"./public-encrypt-fc0568a2.js";import"./randomfill-2874e5f1.js";import"./mathjs-2a513dae.js";import"./@babel-484168fe.js";import"./typed-function-4896e4f1.js";import"./decimal.js-d133ee8e.js";import"./complex.js-cf2520e8.js";import"./fraction.js-39e7906a.js";import"./javascript-natural-sort-c4dd0c27.js";import"./escape-latex-c8a96e7a.js";import"./seedrandom-c8f991ad.js";import"./tiny-emitter-56d49cfd.js";import"./js-sha3-d7d4f583.js";import"./crypto-random-string-d158262e.js";import"./jose-92e5544c.js";import"./vue-loading-overlay-b89251b1.js";import"./jspdf-30014160.js";import"./fflate-8981c52c.js";import"./vue-debounce-3bbbf8c6.js";import"./mitt-f7ef348c.js";/* empty css                   */import"./maska-6f10db43.js";import"./@fortawesome-014b81f2.js";import"./vue3-blocks-tree-e53499e3.js";import"./@noble-f8eff84a.js";import"./utf8-c941a4a0.js";import"./bip39-936aefa9.js";import"./axios-b48d2c29.js";import"./flatbuffers-edc4f8d7.js";import"./ws-0a714537.js";import"./@intlify-16888cd3.js";import"./icon-red-x-a5511f99.js";import"./icon-green-tick-1b766454.js";import"./qrcode-generator-0cbfda4c.js";import"./bech32-123a6149.js";const Ht={name:"ViewServicesMainnetSwapBSCToSirius",components:{AddressInputClean:Et,SupplyInputClean:xt,SwapCertificateComponent:kt},setup(){const l=i(0),{t:g}=Nt(),e=_(()=>De.nativeToken.label),we=Fe(!1),B=i(!0),v=i(""),x=Fe(!0),oe=_(()=>St.buildAPIEndpoint(pe.selectedAPIEndpoint,pe.currentNetworkProfile.httpPort));he(v,o=>{o.length==40||o.length==46?O():x.value=!0});const q=async o=>await Bt.getLinkedAddress(o,oe.value),O=()=>{if(M.currentLoggedInWallet)try{let o=y.createAddress(v.value);y.checkAddressNetwork(o,De.networkType)?x.value=!1:x.value=!0}catch{try{let r=y.createNamespaceId(v.value);q(r).then(m=>{v.value=m.plain(),x.value=!1}).catch(m=>{x.value=!0})}catch{x.value=!0}}},re=_(()=>{if(!M.currentLoggedInWallet)return[];let o=M.currentLoggedInWallet.accounts.map(m=>({name:m.name,balance:m.balance,address:m.address,publicKey:m.publicKey,isMultisig:!!m.getDirectParentMultisig().length})),r=M.currentLoggedInWallet.others.filter(m=>m.type==="MULTISIG").map(m=>({name:m.name,balance:m.balance,address:m.address,publicKey:m.publicKey,isMultisig:!0}));return o.concat(r)}),c=_(()=>{if(!M.currentLoggedInWallet)return[];const o=M.currentLoggedInWallet;var r=[],m=[];return re.value.forEach(b=>{r.push({value:se.Address.createFromRawAddress(b.address).pretty(),label:b.name+" - "+g("general.ownerAcc")})}),o.contacts!=null&&o.contacts.forEach(b=>{r.push({value:se.Address.createFromRawAddress(b.address).pretty(),label:b.name+" - "+g("general.contact")})}),m=r.reduce((b,R)=>{let je=b.find(yt=>yt.value===R.value),gt={...R};return je?je.label=R.label:b.push(gt),b},[]),m});Ut(()=>{});let h=new Tt(pe.chainNetworkName);h.init();const U=i(0),L=i(0),C=i(0),ge=i(""),ne=i(""),A=i(null),ie=i([]),Je=async()=>{let o=await I.getSwapTokenList(h.swap_XPX_BSC_URL);o&&(ie.value=o.map(r=>({name:r.name,assetId:r.assetId,contractAddress:r.contractAddress,namespace:r.namespace})),A.value=ie.value[0])};let Xe=h.BSCNetworkName,Ye=h.BSCChainId;const ye=i(!1),Q=i(!1),S=i(null),V=i(0),le=i(0),xe=i(""),de=i(!1),K=i(!1),P=i(!1),z=i(!1),G=i(g("swap.retry")),Ze=h.BSCScanUrl,ce=i(!1),$e=_(()=>K.value?g("swap.rejectMetamask"):g("swap.signTx"));Je();const et=_(()=>A.value!=null?(console.log(I.getIncoming_BSCSwapTransfer_URL(h.swap_IN_SERVICE_URL,A.value.name)),I.getIncoming_BSCSwapTransfer_URL(h.swap_IN_SERVICE_URL,A.value.name)):"");he(A,o=>{I.fetchTokenServiceInfo(h.swap_IN_SERVICE_URL,o.name).then(async r=>{if(r.status==200){if(ne.value=r.data.bscInfo.scAddress,ge.value=r.data.bscInfo.sinkAddress,D.value="",C.value=r.data.siriusInfo.divisibility,l.value=y.safeMultiply(321+r.data.feeInfo.cosigners*96,r.data.feeInfo.feePerByte),L.value=r.data.feeInfo.multiplier?y.safeMultiply(l.value,r.data.feeInfo.multiplier):l.value,o.name!==r.data.feeInfo.tokenName.toLowerCase()){let m=await Mt(I.checkSwapPrice(h.priceConsultURL)),b=y.safeMultiply(m[r.data.feeInfo.tokenName.toLowerCase()],l.value);L.value=y.safeDivideCeilDecimals(b,m[o.name],C.value)}U.value=y.safeMultiplyCeilDecimals(L.value,1.2,r.data.feeInfo.decimals)}else D.value=g("swap.serviceDown")})});let k,N;const ke=()=>{typeof window.ethereum<"u"?(k=new ae(window.ethereum),N=k.getSigner(),ye.value=!0,Q.value=!!ethereum.isConnected(),ethereum.request({method:"eth_accounts"}).then(_e).catch(o=>{console.error(o)}),ethereum.request({method:"eth_chainId"}).then(o=>{Ce(o,!1)}).catch(o=>{console.error(o)}),ethereum.on("accountsChanged",st),ethereum.on("chainChanged",o=>{Ce(o,!0)})):console.log("MetaMask not installed")};ke(),window.ethereum&&(window.ethereum.isMetaMask||(B.value=!1));const tt=()=>{window.ethereum&&(ke(),window.ethereum.isMetaMask||(B.value=!1))};function _e(o){o.length===0?(le.value=0,S.value=""):o[0]!==S.value&&(S.value=o[0],me()),Q.value=!!ethereum.isConnected()}function st(o){window.ethereum.isMetaMask&&(o.length===0?(le.value=0,S.value=""):o[0]!==S.value&&(S.value=o[0],D.value="",me())),Q.value=!!ethereum.isConnected()}function Ce(o,r=!1){xe.value=o,Ye===parseInt(o)?(j.value="",r&&me()):j.value=g("swap.selectNetworkToSwap",{network:Xe})}function me(){ethereum.request({method:"eth_getBalance",params:[S.value,"latest"]}).then(o=>{le.value=parseInt(o)/Math.pow(10,18)}).catch(o=>{console.error(o)})}const at=()=>{window.ethereum.isMetaMask?(B.value=!0,ethereum.request({method:"eth_requestAccounts"}).then(_e).catch(o=>{o.code===4001?console.log("Please connect to MetaMask."):o.code=="-32002"&&(D.value=g("swap.approveConnection"))})):B.value=!1};he([xe,S,ne],([o,r,m])=>{m!=null&&m!=""&&(async()=>{try{k=new ae(window.ethereum,"any"),N=k.getSigner();const R=await new Qe(m,He,N).balanceOf(r);V.value=R.toNumber()/Math.pow(10,C.value)}catch{V.value=0}})()});const Se=i(!1),Te=i(!1),Me=i(!1),Ie=i(!1),Ae=i(!1),Ee=i(!1),Ne=i(!1),J=i(""),X=i(""),Be=i(""),Y=i(""),Z=i(""),$=i(""),ee=i(""),ot=()=>{I.generateIncomingPdfCert("BSC",Y.value,v.value,Z.value,$.value,ee.value)},rt=At(),nt=o=>{let r=document.getElementById(o).getAttribute("copyValue"),m=document.getElementById(o).getAttribute("copySubject");It(r),rt.add({severity:"info",summary:m+" "+g("general.copied"),detail:r,group:"br-custom",life:3e3})},ue=i(1),it=i(!1),ve=i(!0),lt=_(()=>!(T.value<=V.value&&T.value>=U.value)),dt=i(!1),j=i(""),D=i(""),ct=_(()=>!(T.value>0&&x.value==!1&&!j.value&&V.value>=T.value&&T.value>=U.value)),T=i("0"),mt=_(()=>{let o=M.currentLoggedInWallet.accounts.find(r=>r.address==v.value)||M.currentLoggedInWallet.others.find(r=>r.address==v.value);return o?o.name:"ACCOUNT-"+v.value.substring(v.value.length-4,v.value.length)}),ut=_(()=>Math.round((T.value-L.value)*Math.pow(10,C.value))/Math.pow(10,C.value)>0?Math.round((T.value-L.value)*Math.pow(10,C.value))/Math.pow(10,C.value):0),vt=()=>{ue.value=2,setTimeout(()=>Se.value=!0,1e3),setTimeout(()=>{Te.value=!0,(async()=>await Le())()},2e3)},Le=async()=>{try{j.value="",de.value=!1,k=new ae(window.ethereum,"any"),N=k.getSigner();const r=new Qe(ne.value,He,N);var o={gasLimit:(await I.getBSC_GasLimit(h.gasPriceConsultURL)).standardGasLimit};const b=await r.transfer(ge.value,Dt(T.value,C.value),o);J.value=b.hash,X.value=Ze+b.hash,(await k.getTransaction(b.hash)).hash===b.hash&&ft()}catch(r){de.value=!0,(r.code="-32000")&&(r.value=r.message)}},ft=()=>{Me.value=!0},fe=i(!1),te=i(!1),H=i(!1),pt=()=>{fe.value=!0,te.value=!0,H.value=!1,setTimeout(async()=>{await Re()},2e3)},Re=async()=>{const o=await ht();fe.value=!1,o?ce.value?(te.value=!1,H.value=!0):(H.value=!1,setTimeout(()=>Ie.value=!0,1e3),setTimeout(()=>{Ae.value=!0,(async()=>await Ve())()},2e3)):(te.value=!1,H.value=!0)},Ue=i(""),Ve=async()=>{try{K.value=!1,k=new ae(window.ethereum,"any"),N=k.getSigner();const o=await N.signMessage(se.Address.createFromRawAddress(v.value).pretty());Be.value=o;const r={recipient:se.Address.createFromRawAddress(v.value).pretty(),signature:o,txnInfo:{network:"BSC",txnHash:J.value}};Ue.value=r,await Pe()}catch{K.value=!0}},ht=async()=>{try{let o=await k.getTransactionReceipt(J.value);return o&&o.status===1?!0:o&&o.status===0?(ce.value=!0,!0):!1}catch(o){return console.log(o),!1}},F=i(0),Pe=async()=>{Ee.value=!0,Ne.value=!0,G.value=g("swap.initiatingSwap"),z.value=!0;let o=JSON.stringify(Ue.value);try{const r=await fetch(et.value,{method:"POST",headers:{"Content-Type":"application/json"},body:o});if(r.status==200||r.status==201){const m=await r.json();P.value=!1,$.value=m.transactionId,Y.value=y.IsoTimeRemoveFormat(m.timestamp),Z.value=y.toUppercase(A.value.name),ee.value=I.generateQRCode(X.value),setTimeout(()=>ve.value=!1,1e3),F.value=0}else if(r.status==202){const m=await r.json();P.value=!1,$.value=m.transactionId,Y.value=y.IsoTimeRemoveFormat(m.timestamp),Z.value=y.toUppercase(A.value.name),ee.value=I.generateQRCode(X.value),setTimeout(()=>ve.value=!1,1e3),F.value=0}else r.status==208?console.log("208"):(P.value=!0,++F.value,G.value=g("swap.retry"),z.value=!1)}catch{P.value=!0,++F.value,G.value=g("swap.retry"),z.value=!1}},bt=()=>{ue.value=3},wt=i(!1);return{recheckMetamask:tt,contacts:c,err:j,balance:V,isInstallMetamask:ye,connectMetamask:at,isMetamaskConnected:Q,currentAccount:S,copy:nt,currentPage:ue,isDisabledValidate:ve,siriusAddress:v,disableSiriusAddress:it,showAmountErr:lt,sendRequest:vt,validated:bt,amount:T,disableAmount:dt,isDisabledSwap:ct,savedCheck:wt,toggleContact:we,step1:Se,step2:Te,step3:Me,step4:Ie,step5:Ae,step6:Ee,step7:Ne,validationLink:X,validationHash:J,messageHash:Be,transactionHash:$,swapTimestamp:Y,swapToken:Z,swapQr:ee,saveCertificate:ot,isInvalidConfirmedMeta:de,isInvalidSignedMeta:K,isInvalidSwapService:P,getValidation:Le,getSigned:Ve,serviceErr:D,swapServerErrIndex:F,afterSigned:Pe,disableRetrySwap:z,retrySwapButtonText:G,signatureMessage:$e,checkTxnConfirmation:Re,triggerTxnConfirmation:pt,isCheckingTxnConfirmation:fe,isDisabledCheckTxnConfirmed:te,isTxnNotConfirmed:H,transactionFailed:ce,verifyMetaMaskPlugin:B,currentNativeTokenName:e,walletState:M,amountReceived:ut,Helper:y,siriusName:mt,minAmount:U,feeAmount:L,tokenDivisibility:C,tokenList:ie,selectedToken:A,checkRecipient:O,showAddressError:x}}},Ft={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},Wt={class:"mt-6 p-6 border filter shadow-lg text-center"},qt={class:"text-md"},Ot={class:"text-xs my-3 mb-5 sm:mb-10"},Qt=t("img",{src:Lt,class:"mr-2 h-5 inline-block"},null,-1),Kt={class:"flex my-10"},zt={class:"flex-none"},Gt={class:"flex border border-gray-300 rounded-md filter shadow-md"},Jt={class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},Xt=t("div",{class:"flex-grow self-center md:mx-4 h-0.5 bg-gray-100"},null,-1),Yt={class:"flex-none"},Zt={class:"flex border border-gray-300 rounded-md filter shadow-md"},$t={class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},es=t("div",{class:"flex-grow self-center md:mx-4 h-0.5 bg-gray-100"},null,-1),ts={class:"flex-none"},ss={class:"flex border border-gray-300 rounded-md filter shadow-md"},as={class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},os={key:0},rs=t("div",{class:"text-sm my-5 font-bold"},"Select Asset",-1),ns=["value"],is={class:"text-lg my-7 font-bold"},ls={key:0,class:"error error_box mb-5"},ds={key:2,class:"bg-yellow-200 text-yellow-900 text-tsm p-3 mb-5 rounded-2xl"},cs={class:"my-2"},ms={href:"https://bit.ly/3mVayCu",target:"_new",class:"text-blue-primary"},us={key:3,class:"error error_box mb-5"},vs={key:4,class:"error error_box mb-5"},fs={class:"mb-5 md:flex md:justify-between border border-gray-200 rounded"},ps={class:"flex justify-left"},hs=t("div",{class:"w-18 flex items-center justify-center py-5 sm:h-20"},[t("img",{src:Rt,class:"w-8 h-8 inline-block"})],-1),bs={class:"text-left flex items-center"},ws={class:"text-xxs uppercase text-blue-primary font-bold mb-1"},gs={class:"font-bold text-black text-tsm break-all mr-2"},ys={key:0,class:"border-l border-gray-200 text-green-500 font-semibold text-xxs w-16 lg:w-20 flex items-center justify-center uppercase"},xs=t("img",{src:Ke,class:"inline-block"},null,-1),ks={class:"border-l border-gray-200 text-blue-primary text-tsm font-bold w-16 lg:w-20 flex justify-center items-center"},_s={key:0},Cs={key:1},Ss={href:"https://metamask.io/",target:"_new"},Ts={class:"md:hidden"},Ms={key:0,class:"border-t border-gray-200 text-green-500 font-semibold text-xxs uppercase p-2"},Is={class:"flex items-center justify-center"},As=t("img",{src:Ke,class:"inline-block mr-2 w-4 h-4"},null,-1),Es={class:"border-t border-gray-200 text-blue-primary text-tsm font-bold p-3"},Ns={key:0},Bs={key:1},Ls={href:"https://metamask.io/",target:"_new"},Rs={class:"flex"},Us={class:"text-xxs text-blue-primary font-semibold uppercase"},Vs={key:5,class:"border"},Ps={class:"text-xxs text-left text-gray-300 font-semibold py-2 px-2 uppercase"},js=["onClick"],Ds={key:0,class:"text-xs py-2 bg-gray-100 pl-2 w-full text-left"},Hs={key:1,class:"text-xs py-2 pl-2 w-full text-left"},Fs={key:2,class:"ml-auto pr-2 text-xxs py-2 font-semibold text-blue-primary bg-gray-100 uppercase"},Ws={key:3,class:"ml-auto mr-2 text-xxs py-2 font-semibold text-blue-primary uppercase"},qs={class:"bg-blue-50 border border-blue-primary h-20 mt-5 rounded flex items-center justify-center"},Os={key:0,src:ze,class:"w-5 h-5 ml-4"},Qs={key:1,src:Ge,class:"w-5 h-5 ml-4"},Ks={class:"my-4 text-xs"},zs={class:"mt-10 text-center"},Gs=["disabled"],Js={key:1},Xs={class:"text-lg my-7"},Ys={key:0,class:"error error_box mb-5"},Zs={class:"flex border-b border-gray-300 p-3"},$s={class:"flex-none"},ea={class:"flex h-full justify-center"},ta={class:"flex border-b border-gray-300 p-3"},sa={class:"flex-none"},aa={class:"flex h-full justify-center"},oa={key:0,class:"mt-5"},ra={class:"flex border-b border-gray-300 p-3"},na={class:"flex-none"},ia={class:"flex h-full justify-center"},la={key:0,class:"bg-yellow-100 py-2 px-5 mt-3 rounded flex"},da=["href","copyValue","copySubject"],ca={class:"flex-none mr-3"},ma={class:"sm:flex"},ua=["disabled"],va={key:1,class:"py-2 sm:flex-grow text-xs mt-3"},fa={class:"mb-1"},pa={class:"mb-1"},ha={class:"mb-1"},ba={class:"mb-1"},wa={class:"mb-1"},ga=["href"],ya={key:1,class:"text-tsm mt-2 bg-blue-100 px-4 py-2 rounded-xl inline-block text-blue-900"},xa={key:2,class:"text-tsm mt-2 bg-red-100 px-4 py-2 rounded-xl inline-block text-red-primary"},ka={class:"flex border-b border-gray-300 p-3"},_a={class:"flex-none"},Ca={class:"flex h-full justify-center"},Sa={class:"flex border-b border-gray-300 p-3"},Ta={class:"flex-none"},Ma={class:"flex h-full justify-center"},Ia={key:0,class:"mt-5"},Aa={class:"flex border-b border-gray-300 p-3"},Ea={class:"flex-none"},Na={class:"flex h-full justify-center"},Ba={key:0,class:"bg-yellow-100 py-2 px-5 mt-2 rounded flex"},La=["copyValue","copySubject"],Ra={class:"flex-none mr-3"},Ua={class:"flex border-b border-gray-300 p-3"},Va={class:"flex-none"},Pa={class:"flex h-full justify-center"},ja={key:0,class:"mt-5"},Da=["disabled"],Ha={key:1,class:"mt-5 text-tsm sm:text-sm"},Fa={href:"https://t.me/proximaxhelpdesk",target:"_new",class:"text-blue-primary font-bold underline"},Wa={class:"mt-10 text-center"},qa=["disabled"],Oa={key:2},Qa={class:"default-title font-bold mt-5 mb-2"},Ka={class:"text-tsm mb-7"},za={class:"mt-3"},Ga=["href"],Ja={class:"md:mx-20 lg:mx-40 font-bold text-center text-tsm py-5 sm:py-10 mt-5 sm:mt-10 border-t border-gray-200"},Xa={class:"md:mx-20 lg:mx-10 xl:mx-40 border-2 border-gray-200 mt-4 p-5 text-xs font-bold filter shadow-lg"},Ya={class:"text-blue-primary mb-1"},Za={class:"break-all"},$a={class:"mt-1"},eo=t("div",null,[t("img",{src:_t,class:"inline-block h-8 my-2"})],-1),to={class:"text-blue-primary mb-1"},so={class:"mt-1"},ao={key:0,src:ze,class:"w-3 h-3 ml-2 inline relative",style:{top:"-2px"}},oo={key:1,src:Ge,class:"w-3 h-3 ml-2 inline relative",style:{top:"-2px"}},ro={class:"my-5 sm:my-7 text-gray-500 text-xs md:mx-20 lg:mx-10 xl:mx-40"},no={class:"inline-flex items-center mb-5"},io={class:"ml-2 cursor-pointer text-xs font-bold"},lo={class:"sm:mt-3 text-center"},co=["disabled"];function mo(a,l,g,e,we,B){const v=W("font-awesome-icon"),x=W("SupplyInputClean"),oe=W("AddressInputClean"),q=W("router-link"),O=W("swap-certificate-component"),re=Vt("debounce");return n(),d("div",null,[t("div",Ft,[t("div",Wt,[t("div",qt,s(a.$t("swap.mainNetworkSwap")),1),t("div",Ot,[Qt,p(s(a.$t("swap.swapBscToSirius")),1)]),t("div",Kt,[t("div",zt,[t("div",Gt,[t("div",{class:u(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage>=1?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:u(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=1?"text-white":"text-gray-400"}`])},"1",2)],2),t("div",Jt,s(a.$t("general.transaction")),1)])]),Xt,t("div",Yt,[t("div",Zt,[t("div",{class:u(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage>=2?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:u(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=2?"text-white":"text-gray-400"}`])},"2",2)],2),t("div",$t,s(a.$t("swap.validation")),1)])]),es,t("div",ts,[t("div",ss,[t("div",{class:u(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage==3?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:u(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=3?"text-white":"text-gray-400"}`])},"3",2)],2),t("div",as,s(a.$t("general.certificate")),1)])])]),e.currentPage==1?(n(),d("div",os,[rs,be(t("select",{class:"","onUpdate:modelValue":l[0]||(l[0]=c=>e.selectedToken=c)},[(n(!0),d(We,null,qe(e.tokenList,(c,h)=>(n(),d("option",{value:c,key:h},s(c.name.toUpperCase()),9,ns))),128))],512),[[Pt,e.selectedToken]]),t("div",is,s(a.$t("general.transactionDetails")),1),e.isInstallMetamask?f("v-if",!0):(n(),d("div",ls,s(a.$t("swap.noMetamask")),1)),e.isInstallMetamask?f("v-if",!0):(n(),d("button",{key:1,onClick:l[1]||(l[1]=c=>e.recheckMetamask()),class:"text-xs blue-btn p-2 mb-3"},"Recheck MetaMask")),e.verifyMetaMaskPlugin?f("v-if",!0):(n(),d("div",ds,[p(s(a.$t("swap.noOtherExtension"))+" ",1),t("b",null,s(a.$t("swap.metamask")),1),p("."),t("div",cs,[p(s(a.$t("swap.referTo")),1),t("a",ms,[p(s(a.$t("swap.walkthrough")),1),w(v,{icon:"external-link-alt",class:"text-blue-primary w-3 h-3 self-center inline-block ml-1"})]),p(s(a.$t("swap.forMoreDetails")),1)]),p(s(a.$t("swap.refreshMsg")),1)])),e.serviceErr!=""?(n(),d("div",us,s(e.serviceErr),1)):f("v-if",!0),e.err!=""?(n(),d("div",vs,s(e.err),1)):f("v-if",!0),t("div",fs,[t("div",ps,[hs,t("div",bs,[t("div",null,[t("div",ws,s(a.$t("swap.fromMetamaskAddress")),1),t("div",gs,s(e.isMetamaskConnected&&e.currentAccount?e.currentAccount:a.$t("swap.notConnected")),1)])])]),t("div",{class:u(["md:grid hidden",e.currentAccount?"grid-cols-2":"grid-cols-1"])},[e.currentAccount?(n(),d("div",ys,[t("div",null,[xs,t("div",null,s(a.$t("swap.connected")),1)])])):f("v-if",!0),t("div",ks,[e.isInstallMetamask?(n(),d("div",_s,[e.currentAccount?(n(),d("div",{key:1,class:"cursor-pointer",onClick:l[3]||(l[3]=c=>e.connectMetamask())},s(a.$t("general.change")),1)):(n(),d("div",{key:0,class:"cursor-pointer",onClick:l[2]||(l[2]=c=>e.connectMetamask())},s(a.$t("swap.connect")),1))])):(n(),d("div",Cs,[t("a",Ss,s(a.$t("general.download")),1)]))])],2),t("div",Ts,[e.currentAccount?(n(),d("div",Ms,[t("div",Is,[As,p(" "+s(a.$t("swap.connected")),1)])])):f("v-if",!0),t("div",Es,[e.isInstallMetamask?(n(),d("div",Ns,[e.currentAccount?(n(),d("div",{key:1,class:"cursor-pointer",onClick:l[5]||(l[5]=c=>e.connectMetamask())},s(a.$t("general.change")),1)):(n(),d("div",{key:0,class:"cursor-pointer",onClick:l[4]||(l[4]=c=>e.connectMetamask())},s(a.$t("swap.connect")),1))])):(n(),d("div",Bs,[t("a",Ls,s(a.$t("general.download")),1)]))])])]),w(x,{disabled:e.disableAmount,modelValue:e.amount,"onUpdate:modelValue":l[6]||(l[6]=c=>e.amount=c),balance:e.balance,placeholder:`BEP20 ${e.selectedToken?e.selectedToken.name:""}`,type:"text",showError:e.showAmountErr,errorMessage:e.amount?e.amount>=e.minAmount?a.$t("swap.insufficientTokenBalance"):`Min. amount is ${e.minAmount}(${e.feeAmount} ${e.selectedToken.name.toUpperCase()} will deducted for transaction fee)`:"Required Field",decimal:e.tokenDivisibility},null,8,["disabled","modelValue","balance","placeholder","showError","errorMessage","decimal"]),t("div",Rs,[be(w(oe,{placeholder:a.$t("transfer.transferPlaceholder"),modelValue:e.siriusAddress,"onUpdate:modelValue":l[7]||(l[7]=c=>e.siriusAddress=c),showError:e.showAddressError},null,8,["placeholder","modelValue","showError"]),[[re,e.checkRecipient,"1000"]]),t("div",{onClick:l[8]||(l[8]=c=>e.toggleContact=!e.toggleContact),class:"border rounded-md cursor-pointer flex flex-col justify-around p-2"},[w(v,{icon:"id-card-alt",class:"text-blue-primary ml-auto mr-auto"}),t("div",Us,s(a.$t("general.select")),1)])]),e.toggleContact?(n(),d("div",Vs,[t("div",Ps,s(a.$t("general.importFromAB")),1),(n(!0),d(We,null,qe(e.contacts,(c,h)=>(n(),d("div",{key:h,class:"cursor-pointer"},[t("div",{onClick:U=>{e.siriusAddress=c.value,e.toggleContact=!1},class:"flex justify-between"},[h%2==0?(n(),d("div",Ds,s(c.label),1)):f("v-if",!0),h%2==1?(n(),d("div",Hs,s(c.label),1)):f("v-if",!0),h%2==0?(n(),d("div",Fs,s(a.$t("general.select")),1)):f("v-if",!0),h%2==1?(n(),d("div",Ws,s(a.$t("general.select")),1)):f("v-if",!0)],8,js)]))),128))])):f("v-if",!0),t("div",qs,[p(s(e.amountReceived)+" "+s(e.selectedToken?e.selectedToken.name.toUpperCase():"")+" ",1),e.selectedToken&&e.selectedToken.name=="metx"?(n(),d("img",Os)):f("v-if",!0),e.selectedToken&&e.selectedToken.name=="xpx"?(n(),d("img",Qs)):f("v-if",!0)]),t("div",Ks,s(e.selectedToken&&e.selectedToken.name.toUpperCase()!==e.currentNativeTokenName?"Estimated":"")+" Total Amount of "+s(e.selectedToken?e.selectedToken.name.toUpperCase():"")+" received after deducting transaction fee",1),t("div",zs,[t("button",{onClick:l[9]||(l[9]=c=>a.$router.push({name:"ViewServicesMainnetSwap"})),class:"text-black font-bold text-xs mr-5 focus:outline-none disabled:opacity-50"},s(a.$t("general.cancel")),1),t("button",{type:"submit",class:"default-btn focus:outline-none disabled:opacity-50",disabled:e.isDisabledSwap,onClick:l[10]||(l[10]=c=>e.sendRequest())},s(a.$t("swap.sendRequest")),9,Gs)])])):f("v-if",!0),e.currentPage==2?(n(),d("div",Js,[t("div",Xs,[e.err!=""?(n(),d("div",Ys,s(e.err),1)):f("v-if",!0),t("div",{class:u(["font-bold text-left text-xs md:text-sm",e.step1?"text-gray-700":"text-gray-300"])},s(a.$t("swap.step1",{tokenName:e.selectedToken.name.toUpperCase()})),3),t("div",Zs,[t("div",$s,[t("div",{class:u(["rounded-full border w-6 h-6 transition-all duration-500",e.step1?"border-blue-primary":"border-gray-300"])},[t("div",ea,[w(v,{icon:"check",class:u([e.step1?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block transition-all duration-500"])},null,8,["class"])])],2)]),t("div",{class:u(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step1?"text-gray-700":"text-gray-300"])},s(a.$t("swap.sendingTx")),3)]),t("div",ta,[t("div",sa,[t("div",{class:u(["rounded-full border w-6 h-6 transition-all duration-500",e.isInvalidConfirmedMeta?"border-red-primary":e.step2?"border-blue-primary":"border-gray-300"])},[t("div",aa,[e.isInvalidConfirmedMeta?(n(),E(v,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block transition-all duration-500"})):(n(),E(v,{key:1,icon:"check",class:u([e.step2?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block transition-all duration-500"])},null,8,["class"]))])],2)]),t("div",{class:u(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step2?"text-gray-700":"text-gray-300"])},[p(s(e.isInvalidConfirmedMeta?a.$t("swap.rejectMetamask"):a.$t("swap.waitingConfirmMetamask"))+" ",1),e.isInvalidConfirmedMeta?(n(),d("div",oa,[t("button",{type:"button",class:"bg-blue-primary rounded mr-5 focus:outline-none text-tsm font-bold py-2 border-blue-primary px-8 text-white hover:shadow-lg",onClick:l[11]||(l[11]=(...c)=>e.getValidation&&e.getValidation(...c))},s(a.$t("swap.retry")),1),w(q,{to:{name:"ViewServicesMainnetSwap"},class:"px-6 py-2 text-gray-500 outline-none focus:outline-none mr-4 w-32 text-tsm",tag:"button"},{default:Oe(()=>[p(s(a.$t("swap.cancelSwap")),1)]),_:1})])):f("v-if",!0)],2)]),t("div",ra,[t("div",na,[t("div",{class:u(["rounded-full border w-6 h-6",e.step3?"border-blue-primary":"border-gray-300"])},[t("div",ia,[w(v,{icon:"check",class:u([e.step3?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"])])],2)]),t("div",{class:u(["text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step3?"text-gray-700":"text-gray-300"])},[p(s(a.$t("swap.transactionHash"))+": ",1),e.validationHash?(n(),d("div",la,[t("a",{href:e.validationLink,target:"_new",class:u([e.isInvalidConfirmedMeta?"text-gray-300":"text-blue-primary","flex-grow break-all text-tsm self-center hover:underline"]),id:"validateTransfer",copyValue:e.validationHash,copySubject:a.$t("swap.transactionHash")},[w(v,{icon:"external-link-alt",class:"text-blue-primary w-3 h-3 self-center inline-block mr-2"}),p(s(e.validationHash),1)],10,da),t("div",ca,[e.step3?(n(),E(v,{key:0,icon:"copy",onClick:l[12]||(l[12]=c=>e.copy("validateTransfer")),class:"w-5 h-5 text-blue-primary cursor-pointer self-center mx-3 absolute top-2 hover:opacity-90 duration-800 transition-all"})):f("v-if",!0)])])):f("v-if",!0),t("div",ma,[e.validationHash?(n(),d("button",{key:0,class:"sm:flex-none justify-start sm:justify-end bg-blue-primary h-15 w-60 rounded mr-5 focus:outline-none text-xs font-bold py-2 border border-blue-primary px-8 text-white hover:shadow-lg mt-3 sm:mt-0 disabled:opacity-50 self-center",type:"button",disabled:e.isDisabledCheckTxnConfirmed||e.transactionFailed,onClick:l[13]||(l[13]=(...c)=>e.triggerTxnConfirmation&&e.triggerTxnConfirmation(...c))},s(e.isCheckingTxnConfirmation?a.$t("swap.checkTransaction"):a.$t("swap.checkingTransaction")),9,ua)):f("v-if",!0),e.validationHash?(n(),d("div",va,[t("div",fa,s(a.$t("swap.validationWarning")),1),t("div",pa,[t("b",null,s(a.$t("swap.validationWarning2")),1)]),t("div",ha,s(a.$t("swap.validationWarning3")),1),t("div",ba,[t("b",null,s(a.$t("swap.validationWarning4")),1),p(" "+s(a.$t("swap.validationWarning5")),1)]),t("div",wa,[p(s(a.$t("swap.validationWarning6"))+" ",1),t("a",{href:e.validationLink,target:"_new",class:"text-blue-primary inline-block hover:text-blue-900 hover:underline"},[p(s(a.$t("swap.bscScan")),1),w(v,{icon:"external-link-alt",class:"ml-1 text-blue-primary w-3 h-3 self-center inline-block"})],8,ga),p(".")])])):f("v-if",!0)]),e.isTxnNotConfirmed&&!e.transactionFailed?(n(),d("div",ya,s(a.$t("swap.notConfirmed")),1)):f("v-if",!0),e.transactionFailed?(n(),d("div",xa,s(a.$t("swap.txFailed")),1)):f("v-if",!0)],2)]),t("div",{class:u(["font-bold text-left text-xs md:text-sm mt-4",e.step4?"text-gray-700":"text-gray-300"])},s(a.$t("swap.step2")),3),t("div",ka,[t("div",_a,[t("div",{class:u(["rounded-full border w-6 h-6",e.step4?"border-blue-primary":"border-gray-300"])},[t("div",Ca,[w(v,{icon:"check",class:u([e.step4?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"])])],2)]),t("div",{class:u(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step4?"text-gray-700":"text-gray-300"])},s(a.$t("swap.sendingMsg")),3)]),t("div",Sa,[t("div",Ta,[t("div",{class:u(["rounded-full border w-6 h-6",e.isInvalidSignedMeta?"border-red-primary":e.step5?"border-blue-primary":"border-gray-300"])},[t("div",Ma,[e.isInvalidSignedMeta?(n(),E(v,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block"})):(n(),E(v,{key:1,icon:"check",class:u([e.step5?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"]))])],2)]),t("div",{class:u(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step5?"text-gray-700":"text-gray-300"])},[p(s(e.signatureMessage)+" ",1),e.isInvalidSignedMeta?(n(),d("div",Ia,[t("button",{type:"button",class:"bg-blue-primary rounded mr-5 focus:outline-none text-tsm py-2 px-4 text-white hover:shadow-lg w-24",onClick:l[14]||(l[14]=(...c)=>e.getSigned&&e.getSigned(...c))},s(a.$t("swap.retry")),1)])):f("v-if",!0)],2)]),t("div",Aa,[t("div",Ea,[t("div",{class:u(["rounded-full border w-6 h-6",e.step6?"border-blue-primary":"border-gray-300"])},[t("div",Na,[w(v,{icon:"check",class:u([e.step6?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"])])],2)]),t("div",{class:u(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step6?"text-gray-700":"text-gray-300"])},[p(s(a.$t("swap.messageSigned")),1),e.messageHash&&e.step6?(n(),d("div",Ba,[t("div",{class:u([e.step6?"text-gray-500":"text-gray-300","text-tsm break-all flex-grow"]),id:"validateMessage",copyValue:e.messageHash,copySubject:a.$t("swap.signatureHash")},s(e.messageHash),11,La),t("div",Ra,[e.step6?(n(),E(v,{key:0,icon:"copy",onClick:l[15]||(l[15]=c=>e.copy("validateMessage")),class:"w-5 h-5 text-blue-primary cursor-pointer self-center ml-3 absolute top-2 hover:opacity-90 duration-800 transition-all"})):f("v-if",!0)])])):f("v-if",!0)],2)]),t("div",{class:u(["font-bold text-left text-xs md:text-sm mt-4",e.step7?"text-gray-700":"text-gray-300"])},s(a.$t("swap.step3")),3),t("div",Ua,[t("div",Va,[t("div",{class:u(["rounded-full border w-6 h-6",e.isInvalidSwapService?"border-red-primary":e.step7?"border-blue-primary":"border-gray-300"])},[t("div",Pa,[e.isInvalidSwapService?(n(),E(v,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block"})):(n(),E(v,{key:1,icon:"check",class:u([e.step7?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"]))])],2)]),t("div",{class:u(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step7?"text-gray-700":"text-gray-300"])},[p(s(e.isInvalidSwapService?a.$t("swap.sendMsgFail"):a.$t("swap.messageSent"))+" ",1),e.isInvalidSwapService&&e.swapServerErrIndex<=3?(n(),d("div",ja,[t("button",{type:"button",class:"bg-blue-primary rounded mr-5 focus:outline-none text-tmd py-2 px-4 text-white hover:shadow-lg disabled:opacity-50",onClick:l[16]||(l[16]=(...c)=>e.afterSigned&&e.afterSigned(...c)),disabled:e.disableRetrySwap},s(e.retrySwapButtonText),9,Da)])):f("v-if",!0),e.swapServerErrIndex>3?(n(),d("div",Ha,[p(s(a.$t("swap.serverErrMsg1"))+" ",1),t("b",null,s(a.$t("swap.transactionHash")),1),p(", "),t("b",null,s(a.$t("swap.signature")),1),p(" "+s(a.$t("swap.serverErrMsg2"))+" ",1),t("a",Fa,s(a.$t("home.helpdesk")),1),p(". ")])):f("v-if",!0)],2)])]),t("div",Wa,[t("button",{type:"submit",class:"default-btn focus:outline-none disabled:opacity-50",disabled:e.isDisabledValidate,onClick:l[17]||(l[17]=c=>e.validated())},s(a.$t("general.continue")),9,qa)])])):f("v-if",!0),e.currentPage==3?(n(),d("div",Oa,[t("div",null,[t("h1",Qa,s(a.$t("general.congratz")),1),t("div",Ka,s(a.$t("swap.swapStarted")),1),w(O,{networkTerm:a.$t("swap.bsc"),swapType:"In",swapToken:e.swapToken,swapTimestamp:e.swapTimestamp,transactionHash:e.transactionHash,siriusName:e.siriusName,swappedAmount:e.amount,siriusAddress:e.Helper.createAddress(e.siriusAddress).pretty(),swapQr:e.swapQr,swapLink:e.validationLink},null,8,["networkTerm","swapToken","swapTimestamp","transactionHash","siriusName","swappedAmount","siriusAddress","swapQr","swapLink"]),t("button",{type:"button",class:"w-40 hover:shadow-lg bg-blue-primary text-white text-xs hover:opacity-50 rounded font-bold px-4 py-3 border border-blue-primary outline-none mr-4 mt-6",onClick:l[18]||(l[18]=(...c)=>e.saveCertificate&&e.saveCertificate(...c))},s(a.$t("general.certificate")),1),t("div",za,[t("a",{href:e.validationLink,target:"_new",class:"underline self-center text-xs font-bold text-blue-primary"},[p(s(a.$t("swap.viewTxInExplorer")),1),w(v,{icon:"external-link-alt",class:"ml-2 text-blue-500 w-3 h-3 self-center inline-block"})],8,Ga)]),t("div",Ja,s(a.$t("swap.swapDetails")),1),t("div",Xa,[t("div",Ya,s(a.$t("general.from"))+": "+s(a.$t("swap.metamaskAcc")),1),t("div",Za,s(e.currentAccount),1),t("div",$a,s(a.$t("swap.swapAmount"))+": "+s(e.amount)+" BEP20 "+s(e.selectedToken.name.toUpperCase()),1),eo,t("div",to,s(a.$t("general.to"))+": "+s(e.siriusName),1),t("div",null,s(e.Helper.createAddress(e.siriusAddress).pretty()),1),t("div",so,[p(s(a.$t("swap.equivalentTo"))+" "+s(e.amountReceived)+" "+s(e.selectedToken.name.toUpperCase())+" ",1),e.selectedToken.name=="metx"?(n(),d("img",ao)):e.selectedToken.name=="xpx"?(n(),d("img",oo)):f("v-if",!0)])]),t("div",ro,s(a.$t("swap.swapMsg2")),1),t("label",no,[be(t("input",{type:"checkbox",class:"h-5 w-5 bg-blue-primary","onUpdate:modelValue":l[19]||(l[19]=c=>e.savedCheck=c)},null,512),[[jt,e.savedCheck]]),t("span",io,s(a.$t("swap.confirmDownloaded")),1)]),t("div",lo,[w(q,{to:{name:"ViewServicesMainnetSwap"}},{default:Oe(()=>[t("button",{type:"submit",class:"default-btn mr-5 focus:outline-none w-40 inline-block disabled:opacity-50",disabled:!e.savedCheck},s(a.$t("general.done")),9,co)]),_:1})])])])):f("v-if",!0)])])])}const _n=Ct(Ht,[["render",mo],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/services/submodule/mainnetSwap/submodule2/bsc/views/ViewServicesMainnetSwapBSCToSirius.vue"]]);export{_n as default};
