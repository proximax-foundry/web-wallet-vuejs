import"./vue-86063517.js";import"./crypto-js-e64ac54c.js";import{c as q}from"./functions-3b5b4af7.js";import{u as G}from"./primevue-e09f7e84.js";import{_ as B,w as n,A as O,H as F,T as ee,s as te,L as oe}from"./index-5a7a9eaf.js";import{t as se}from"./jdenticon-e4458e79.js";import{u as le}from"./vue-i18n-728f748b.js";import{d as re}from"./tsjs-xpx-chain-sdk-84426b6a.js";import{u as ne}from"./vue-router-21fffbbf.js";import{_ as ae}from"./proximax-logo-ecfc3767.js";import{_ as ie,a as ce}from"./icon-key-5b3f7dda.js";import{_ as ue}from"./icon-multisig-2a7c5e5f.js";import{_ as de}from"./icon-green-tick-1b766454.js";import{r as y,c as w,B as $,o as c,z as d,A as e,g as b,a as C,e as x,F as T,k as V,u as H,aW as Q,aT as R,d as me,w as U,D as pe,m as fe,p as ve,L as ge,b as _e}from"./@vue-a9ecc9f1.js";import{_ as J}from"./icon-arrow-down-83b4f5a8.js";import{T as be}from"./TextInputClean-ee94245b.js";import"./@js-joda-d98eb16f.js";import"./crypto-browserify-4fd8cccd.js";import"./randombytes-685e9383.js";import"./node-stdlib-browser-23a8bc7f.js";import"./buffer-6d367910.js";import"./base64-js-50a5cdf9.js";import"./ieee754-44f7831e.js";import"./process-2209b2b3.js";import"./safe-buffer-c463177b.js";import"./create-hash-92c04a28.js";import"./inherits-804453d8.js";import"./md5.js-8d474739.js";import"./hash-base-bb85fc42.js";import"./readable-stream-2241ee9e.js";import"./events-86ccc6d8.js";import"./util-06f7ff32.js";import"./is-arguments-86164331.js";import"./has-tostringtag-7c6352d6.js";import"./has-symbols-cd7870b9.js";import"./call-bind-9e7f09da.js";import"./get-intrinsic-f35014ba.js";import"./has-proto-8ede3a55.js";import"./function-bind-68631a08.js";import"./has-ab8e2922.js";import"./is-generator-function-06dfaf9d.js";import"./which-typed-array-cf6b6a29.js";import"./for-each-f57c5052.js";import"./is-callable-7492318c.js";import"./available-typed-arrays-61974ec7.js";import"./gopd-bab4d6bd.js";import"./is-typed-array-037eef20.js";import"./util-deprecate-c3aabb3c.js";import"./string_decoder-ef7b01fe.js";import"./ripemd160-58dcfa02.js";import"./sha.js-cea3da2e.js";import"./cipher-base-aee0e03d.js";import"./stream-browserify-7496a08f.js";import"./create-hmac-e8b5ea4a.js";import"./browserify-sign-a708a95f.js";import"./browserify-rsa-bfbdcbb6.js";import"./bn.js-1ae23332.js";import"./elliptic-75e883ee.js";import"./minimalistic-assert-4cc49674.js";import"./minimalistic-crypto-utils-6f869a51.js";import"./brorand-03f0f79d.js";import"./hash.js-4f5dfe73.js";import"./hmac-drbg-87799258.js";import"./parse-asn1-465c125b.js";import"./asn1.js-405e93e4.js";import"./safer-buffer-2ac6237e.js";import"./evp_bytestokey-e91543fa.js";import"./browserify-aes-ce20a0e6.js";import"./buffer-xor-87a7236a.js";import"./pbkdf2-e2ae8643.js";import"./browserify-cipher-c4c37ca3.js";import"./browserify-des-3f7e64d9.js";import"./des.js-d262604a.js";import"./diffie-hellman-c8260aab.js";import"./miller-rabin-de27bf02.js";import"./create-ecdh-ffe720e9.js";import"./public-encrypt-fc0568a2.js";import"./randomfill-2874e5f1.js";import"./rxjs-1250b26d.js";import"./tslib-8dbab242.js";import"./mathjs-2a513dae.js";import"./@babel-484168fe.js";import"./typed-function-4896e4f1.js";import"./decimal.js-d133ee8e.js";import"./complex.js-cf2520e8.js";import"./fraction.js-39e7906a.js";import"./javascript-natural-sort-c4dd0c27.js";import"./escape-latex-c8a96e7a.js";import"./seedrandom-c8f991ad.js";import"./tiny-emitter-56d49cfd.js";import"./js-sha3-d7d4f583.js";import"./crypto-random-string-d158262e.js";import"./jose-92e5544c.js";import"./vue-loading-overlay-b89251b1.js";import"./jspdf-30014160.js";import"./fflate-8981c52c.js";import"./vue-debounce-3bbbf8c6.js";import"./mitt-f7ef348c.js";/* empty css                   */import"./maska-6f10db43.js";import"./@fortawesome-014b81f2.js";import"./vue3-blocks-tree-e53499e3.js";import"./@noble-f8eff84a.js";import"./utf8-c941a4a0.js";import"./bip39-936aefa9.js";import"./axios-b48d2c29.js";import"./flatbuffers-edc4f8d7.js";import"./ws-0a714537.js";import"./@intlify-16888cd3.js";const ye="/web-wallet-vuejs/assets/icon-default-account-drop-down-03c40c1e.svg";const he={name:"AccountTile",props:["account"],setup(s){const a=G(),{t:v}=le(),o=y(""),g=y(!1),k=w(()=>{if(n.currentLoggedInWallet){let i=[];return n.currentLoggedInWallet.labels.forEach(f=>{let A=!1;f.addresses.includes(s.account.address)&&(A=!0),i.push({name:f.name,isLabeled:A})}),i}else return[]}),h=async i=>{if(!n.currentLoggedInWallet)return;let f=n.currentLoggedInWallet.labels.find(j=>j.name==i),A=re.Address.createFromRawAddress(s.account.address).plain();if(!f)return;let K=f.addresses.findIndex(j=>j==A);if(K>=0){f.removeAddress(K),n.wallets.saveMyWalletOnlytoLocalStorage(n.currentLoggedInWallet),a.add({severity:"info",summary:"Label",detail:t.value+" is removed as "+i,group:"br-custom",life:5e3});return}f.addresses.push(A),n.wallets.saveMyWalletOnlytoLocalStorage(n.currentLoggedInWallet),a.add({severity:"info",summary:"Label",detail:t.value+" is added as "+i,group:"br-custom",life:5e3})},t=w(()=>{const i=n.currentLoggedInWallet.contacts.find(f=>f.address==s.account.address);return i?i.name:s.account.name}),r=w(()=>{let i=!1,f=n.currentLoggedInWallet.accounts.find(A=>A.name==s.account.name);return f&&f.getDirectParentMultisig().length==0&&(i=!0),i}),l=w(()=>O.nativeToken.label),m=w(()=>O.nativeToken.divisibility),_=w(()=>F.toCurrencyFormat(s.account.balance,m.value)),W=w(()=>{let i=_.value.split(".");return i[1]!=null?{left:i[0],right:i[1]}:{left:i[0],right:null}});let p=new ee("ThemeStyleConfig");p.init();const u=y(se(s.account.address,50,p.jdenticonConfig)),I=H().appContext.config.globalProperties.emitter,M=i=>{let f=document.getElementById(i).getAttribute("copyValue"),A=document.getElementById(i).getAttribute("copySubject");q(f),a.add({severity:"info",detail:A+" "+v("general.copied"),group:"br-custom",life:3e3})},S=w(()=>!!s.account.getDirectParentMultisig().length),E=i=>{const f=n.currentLoggedInWallet.others.find(A=>A.address==i);return f!=null&&f.type=="MULTISIG"&&(o.value=f.address),f},Y=i=>F.createAddress(i).pretty(),N=y(!1),P=y(!1);I.on("PAGE_CLICK",()=>{!N.value&&!g.value||!N.value&&g.value&&(g.value=!1)});const z=ne(),Z=()=>{if(E(s.account.address)==null)n.currentLoggedInWallet.setDefaultAccountByName(s.account.name);else return};return{currentNativeTokenName:l,splitBalance:W,svgString:u,otherAccount:E,prettyAddress:Y,copy:M,isMultiSig:S,accountName:t,displayDefaultAccountMenu:g,multisig_add:o,isHover:N,isHoverCopy:P,isNormalAcc:r,labels:k,updateLabel:h,navigate:()=>{N.value||P.value||(s.account.type?z.push({name:"ViewAccountDetails",params:{address:s.account.address}}):(Z(),te(s.account.address),z.push({name:"ViewAccountDetails",params:{address:s.account.address}})))}}}},D=s=>(Q("data-v-45923937"),s=s(),R(),s),xe={class:"flex gap-2"},we=["innerHTML"],Le={class:"flex flex-col"},Ie={class:"text-blue-primary font-bold text-xs mb-0.5"},Ae={class:"flex justify-around"},ke=["id","title","copyValue","copySubject"],Ce={class:"flex"},We={class:"text-xs font-bold"},Me={key:0,class:"text-xs font-bold"},$e={class:"text-xxs mt-0.5"},Se={class:"ml-1 text-xs font-bold"},Te=D(()=>e("img",{src:ae,class:"h-4 w-4"},null,-1)),De={class:"flex gap-2"},Ne=["title"],Ve=D(()=>e("img",{src:ie,class:"h-4 w-4"},null,-1)),je={class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"},Be=["title"],He=D(()=>e("img",{src:ue,class:"h-3 w-3 mr-1"},null,-1)),Ee={class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"},Pe=["title"],ze=D(()=>e("img",{src:ce,class:"h-4 w-4 mr-1"},null,-1)),Ke={class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"},Oe={class:"absolute flex invisible 2xl:visible pt-4 explicitLeft"},Fe={key:0,class:"text-xs mr-3 border bg-gray-300 rounded-md p-1"},Ue={class:"ml-auto mt-auto mb-auto"},Ge={key:0,class:"mt-1 pop-option absolute right-0 w-32 rounded-sm shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10 text-left lg:mr-2",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},Qe={role:"none",class:"my-2"},Re=D(()=>e("div",{class:"p-2 z-20 text-xs text-gray-400"},"Change Labels",-1)),Je=["onClick"],Xe={class:"text-xs"},Ye={key:0,src:de,class:"h-4 w-4"};function Ze(s,a,v,o,g,k){const h=$("font-awesome-icon");return c(),d("div",{class:"border rounded-lg border-gray-200 p-3 filter shadow-lg cursor-pointer",onClick:a[8]||(a[8]=t=>o.navigate())},[e("div",xe,[e("div",{class:"mt-auto mb-auto",innerHTML:o.svgString},null,8,we),e("div",Le,[e("div",Ie,b(o.accountName),1),e("div",Ae,[e("div",{id:v.account.address,title:o.prettyAddress(v.account.address),class:"text-xs font-bold mt-0.5 mr-2 truncate md:text-clip w-44 md:w-full",copyValue:o.prettyAddress(v.account.address),copySubject:s.$t("general.address")},b(o.prettyAddress(v.account.address)),9,ke),C(h,{onMouseover:a[0]||(a[0]=t=>o.isHoverCopy=!0),onMouseout:a[1]||(a[1]=t=>o.isHoverCopy=!1),icon:"copy",onClick:a[2]||(a[2]=t=>o.copy(v.account.address)),class:"w-5 h-5 text-blue-primary cursor-pointer inline-block"})]),e("div",Ce,[e("div",We,b(o.splitBalance.left),1),o.splitBalance.right!=null?(c(),d("div",Me,".")):x("v-if",!0),e("div",$e,b(o.splitBalance.right),1),e("div",Se,b(o.currentNativeTokenName),1),Te]),e("div",De,[v.account.default?(c(),d("div",{key:0,class:"px-1 py-0.5 flex items-center bg-blue-primary rounded-sm",title:s.$t("general.defaultTitle")},[Ve,e("p",je,b(s.$t("general.default")),1)],8,Ne)):x("v-if",!0),o.isMultiSig?(c(),d("div",{key:1,class:"px-1 py-0.5 flex items-center bg-green-500 rounded-sm",title:s.$t("general.multisigTitle")},[He,e("p",Ee,b(s.$t("general.multisig")),1)],8,Be)):x("v-if",!0),o.isMultiSig&&!o.otherAccount(v.account.address)?(c(),d("div",{key:2,class:"px-1 py-0.5 flex items-center bg-purple-500 rounded-sm",title:s.$t("general.ownerTitle")},[ze,e("p",Ke,b(s.$t("general.owner")),1)],8,Pe)):x("v-if",!0)])]),e("div",Oe,[(c(!0),d(T,null,V(o.labels,(t,r)=>(c(),d("div",{key:r},[t.isLabeled?(c(),d("div",Fe,b(t.name),1)):x("v-if",!0)]))),128))]),e("div",Ue,[e("img",{src:ye,class:"h-6 w-6 cursor-pointer",onMouseover:a[3]||(a[3]=t=>o.isHover=!0),onMouseout:a[4]||(a[4]=t=>o.isHover=!1),onClick:a[5]||(a[5]=t=>o.displayDefaultAccountMenu=!0)},null,32),e("div",{class:"relative",onMouseover:a[6]||(a[6]=t=>o.isHover=!0),onMouseout:a[7]||(a[7]=t=>o.isHover=!1)},[o.displayDefaultAccountMenu?(c(),d("div",Ge,[e("div",Qe,[x(` <router-link  :to="{ name: 'ViewAccountDetails', params: { address: account.address }}" @click="displayDefaultAccountMenu = false" class="block hover:bg-gray-100 transition duration-200 p-2 z-20 text-xs">{{$t('general.details')}}</router-link> `),x(' <hr class="solid"> '),Re,(c(!0),d(T,null,V(o.labels,(t,r)=>(c(),d("div",{key:r},[e("div",{onClick:l=>o.updateLabel(t.name),class:"flex justify-between p-2 cursor-pointer"},[e("div",Xe,b(t.name),1),t.isLabeled?(c(),d("img",Ye)):x("v-if",!0)],8,Je)]))),128))])])):x("v-if",!0)],32)])])])}const qe=B(he,[["render",Ze],["__scopeId","data-v-45923937"],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/components/AccountTile.vue"]]),et={class:"flex flex-col"},tt=e("div",null,"Labels",-1),ot={key:0,src:J,class:"w-3 ml-2 h-3",style:{"margin-top":"0.12em"}},st={key:1,src:J,class:"w-3 ml-2 h-3",style:{"margin-top":"0.12em",transform:"rotate(180deg)"}},lt={key:0,class:"relative"},rt={class:"absolute border-t-0 w-52 border bg-white"},nt={class:"flex flex-col max-h-44 overflow-auto"},at=["onClick"],it={class:"text-xs mt-0.5"},ct=e("div",null,"Create Label",-1),ut={key:0,class:"popup-outer fixed flex z-50"},dt={class:"modal-popup-box"},mt={key:0,class:"error error_box mb-3"},pt=e("div",{class:"text-center my-2 text-xs font-semibold"},"Create Label",-1),ft={name:"LabelComponent"},vt=me({...ft,setup(s){const v=H().appContext.config.globalProperties.emitter,o=G(),g=y(!1),k=y(!1),h=y(!1),t=y(""),r=y(""),l=y([]),m=w(()=>n.currentLoggedInWallet?n.currentLoggedInWallet.labels:[]);for(let p=0;p<m.value.length;p++)l.value.push(!1);U(m,(p,u)=>{l.value=[];for(let L=0;L<p.length;L++)l.value.push(!1)},{deep:!0}),U(l,p=>{let u=[];p.length==m.value.length&&(p.forEach((L,I)=>{L&&u.push(m.value[I].name)}),v.emit("filterByLabel",u))},{deep:!0});const _=async()=>{if(!n.currentLoggedInWallet)return;if(r.value=r.value.trim(),r.value==""){t.value="Label name cannot be empty.";return}if(n.currentLoggedInWallet.labels.find(L=>L.name==r.value)){t.value="Label is already existed in wallet.";return}let u=new oe(r.value,[]);n.currentLoggedInWallet.addLabel(u),await n.wallets.saveMyWalletOnlytoLocalStorage(n.currentLoggedInWallet),t.value="",r.value="",o.add({severity:"info",summary:"Label",detail:"New Label is Created",group:"br-custom",life:5e3}),k.value=!1},W=async p=>{n.currentLoggedInWallet&&(n.currentLoggedInWallet.removeLabel(p),await n.wallets.saveMyWalletOnlytoLocalStorage(n.currentLoggedInWallet),o.add({severity:"info",summary:"Label",detail:"Label is removed",group:"br-custom",life:5e3}),h.value=!1)};return(p,u)=>{const L=$("font-awesome-icon");return c(),d(T,null,[e("div",et,[e("div",{onClick:u[0]||(u[0]=I=>g.value=!g.value),class:"border p-2 cursor-pointer w-52 bg-white text-xs justify-between flex"},[tt,g.value?(c(),d("img",st)):(c(),d("img",ot))]),g.value?(c(),d("div",lt,[e("div",rt,[e("div",nt,[(c(!0),d(T,null,V(m.value,(I,M)=>(c(),d("div",{key:M},[e("div",{onClick:S=>h.value?"":l.value[M]=!l.value[M],class:pe(`${l.value[M]?"bg-blue-300 flex cursor-pointer p-2 hover:bg-blue-300 ":"flex cursor-pointer p-2 hover:bg-blue-300 "}`)},[C(L,{icon:"tag",class:"w-4 h-4 mr-3 thin"}),e("div",it,b(I.name),1),C(L,{icon:"trash",onMouseover:u[1]||(u[1]=S=>h.value=!0),onMouseout:u[2]||(u[2]=S=>h.value=!1),onClick:S=>W(M),title:"Remove label",class:"ml-auto w-3 h-3 cursor-pointer mt-0.5"},null,8,["onClick"])],10,at)]))),128)),e("div",{onClick:u[3]||(u[3]=I=>{k.value=!0,g.value=!1}),class:"text-xs cursor-pointer flex gap-3 p-2 hover:bg-blue-300"},[C(L,{icon:"plus",class:"w-3 h-3 mr-1"}),ct])])])])):x("v-if",!0)]),k.value?(c(),d("div",ut,[e("div",dt,[e("div",null,[t.value!=""?(c(),d("div",mt,b(t.value),1)):x("v-if",!0),pt,C(be,{placeholder:"Label Name",modelValue:r.value,"onUpdate:modelValue":u[4]||(u[4]=I=>r.value=I)},null,8,["modelValue"]),e("div",{onClick:u[5]||(u[5]=I=>_()),class:"blue-btn font-semibold py-2 cursor-pointer text-center ml-auto mr-auto w-7/12 disabled:opacity-50 disabled:cursor-auto"},b(p.$t("general.confirm")),1),e("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:u[6]||(u[6]=I=>k.value=!1)},b(p.$t("general.cancel")),1)])])])):x("v-if",!0)],64)}}}),gt=B(vt,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/components/LabelComponent.vue"]]);const _t={name:"ViewAccountDisplayAll",components:{AccountTile:qe,LabelComponent:gt},setup(){const a=H().appContext.config.globalProperties.emitter;w(()=>{if(!n.currentLoggedInWallet)return[];let t=n.currentLoggedInWallet.accounts.map(l=>({name:l.name,balance:l.balance,address:l.address,publicKey:l.publicKey,isMultisig:!!l.getDirectParentMultisig().length,multisigInfo:l.multisigInfo})),r=n.currentLoggedInWallet.others.filter(l=>l.type==="MULTISIG").map(l=>({name:l.name,balance:l.balance,address:l.address,publicKey:l.publicKey,isMultisig:!0,multisigInfo:l.multisigInfo}));return t.concat(r)});const v=y([]),o=w(()=>{if(n.currentLoggedInWallet)if(n.currentLoggedInWallet.others){const t=n.currentLoggedInWallet.accounts.concat(n.currentLoggedInWallet.others);let r=[];return v.value.forEach(l=>{let m=n.currentLoggedInWallet.labels.find(_=>_.name==l);m&&m.addresses.forEach(_=>{let W=t.find(p=>p.address==_);r.push(W)})}),r=Array.from(new Set(r)),v.value.length?r:t}else{const t=n.currentLoggedInWallet.accounts;let r=[];return v.value.forEach(l=>{let m=n.currentLoggedInWallet.labels.find(_=>_.name==l);m&&m.addresses.forEach(_=>{let W=t.find(p=>p.address==_);r.push(W)})}),r=Array.from(new Set(r)),v.value.length?r:t}else return null});a.on("filterByLabel",t=>{v.value=t});const g=y(""),k=w(()=>{const t=g.value.toLowerCase();return g.value==""?h(o.value):o.value.filter(r=>r.name.toLowerCase().includes(t)||r.address.toLowerCase().includes(t.replace(/-/g,"")))});function h(t){if(t!==null){var r=t.reduce((l,m)=>(l.some(_=>_.address===m.address&&_.name===m.name)||l.push(m),l),[]);return r}}return{accounts:o,filterQuery:g,filteredAccounts:k}}},X=s=>(Q("data-v-447b24e0"),s=s(),R(),s),bt={class:"my-4 w-11/12 ml-auto mr-auto flex flex-col sm:flex-row justify-between"},yt=X(()=>e("div",{class:"absolute invisible 2xl:visible text-gray-500 mt-1 explicitLeft"},"Labels",-1)),ht={class:"mt-3 sm:mt-0 text-center w-44 text-white bg-blue-primary rounded-md font-semibold text-xs p-2"},xt={class:"mt-2 py-3"},wt={class:"w-11/12 ml-auto mr-auto flex flex-col gap-3"},Lt={class:"flex items-center"},It=["placeholder"],At=X(()=>e("div",{class:"mb-36"},null,-1));function kt(s,a,v,o,g,k){const h=$("LabelComponent"),t=$("router-link"),r=$("font-awesome-icon"),l=$("AccountTile");return c(),d("div",null,[e("div",bt,[C(h),yt,C(t,{to:{name:"ViewAccountCreateSelectType"}},{default:fe(()=>[e("div",ht,"+ "+b(s.$t("general.createNewAcc")),1)]),_:1})]),e("div",xt,[e("div",wt,[e("div",Lt,[C(r,{icon:"search",class:"text-blue-link mr-1"}),ve(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o.filterQuery=m),type:"text",class:"py-2 px-2 outline-none text-xs text-black",placeholder:s.$t("general.search")},null,8,It),[[ge,o.filterQuery]])]),(c(!0),d(T,null,V(o.filteredAccounts,(m,_)=>(c(),_e(l,{key:_,account:m},null,8,["account"]))),128))])]),At])}const $s=B(_t,[["render",kt],["__scopeId","data-v-447b24e0"],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/views/ViewAccountDisplayAll.vue"]]);export{$s as default};
