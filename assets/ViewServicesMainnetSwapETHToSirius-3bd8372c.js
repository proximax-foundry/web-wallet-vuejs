import"./vue-86063517.js";import{S as Oe}from"./SupplyInputClean-dff4a06e.js";import{S as Ge,_ as ze}from"./icon-dots-f8a65dba.js";import{S as Je}from"./SelectInputAccount-5a686cb2.js";import{_ as Ke,A as Ye,x as Ze,n as $e,w as q,H as et}from"./index-913a8781.js";import{c as tt}from"./functions-3b5b4af7.js";import{u as st}from"./primevue-e09f7e84.js";import{S as N,a as we}from"./swapUtils-37778b25.js";import{_ as at}from"./eth-aa063e38.js";import{_ as ot}from"./icon-metamask-fox-25ba78e6.js";import{_ as Ce}from"./icon-connected-48d7208e.js";import{_ as Me}from"./icon-xpx-072deeab.js";import{c as E,r as a,aJ as it,w as ae,B as P,o as i,z as l,A as t,D as r,g as d,e as u,l as c,a as v,b as _,m as ke,p as rt,bn as nt}from"./@vue-a9ecc9f1.js";import{W,C as Se,p as lt}from"./@ethersproject-91cc0060.js";import"./@js-joda-d98eb16f.js";import"./icon-info-8b4f1351.js";import"./jdenticon-e4458e79.js";import"./node-stdlib-browser-23a8bc7f.js";import"./buffer-6d367910.js";import"./base64-js-50a5cdf9.js";import"./ieee754-44f7831e.js";import"./process-2209b2b3.js";import"./tsjs-xpx-chain-sdk-84426b6a.js";import"./rxjs-1250b26d.js";import"./tslib-8dbab242.js";import"./@noble-f8eff84a.js";import"./js-sha3-d7d4f583.js";import"./utf8-c941a4a0.js";import"./bip39-936aefa9.js";import"./axios-b48d2c29.js";import"./flatbuffers-edc4f8d7.js";import"./ws-0a714537.js";import"./vue-router-21fffbbf.js";import"./crypto-js-e64ac54c.js";import"./crypto-browserify-4fd8cccd.js";import"./randombytes-685e9383.js";import"./safe-buffer-c463177b.js";import"./create-hash-92c04a28.js";import"./inherits-804453d8.js";import"./md5.js-8d474739.js";import"./hash-base-bb85fc42.js";import"./readable-stream-2241ee9e.js";import"./events-86ccc6d8.js";import"./util-06f7ff32.js";import"./is-arguments-86164331.js";import"./has-tostringtag-7c6352d6.js";import"./has-symbols-cd7870b9.js";import"./call-bind-9e7f09da.js";import"./get-intrinsic-f35014ba.js";import"./has-proto-8ede3a55.js";import"./function-bind-68631a08.js";import"./has-ab8e2922.js";import"./is-generator-function-06dfaf9d.js";import"./which-typed-array-cf6b6a29.js";import"./for-each-f57c5052.js";import"./is-callable-7492318c.js";import"./available-typed-arrays-61974ec7.js";import"./gopd-bab4d6bd.js";import"./is-typed-array-037eef20.js";import"./util-deprecate-c3aabb3c.js";import"./string_decoder-ef7b01fe.js";import"./ripemd160-58dcfa02.js";import"./sha.js-cea3da2e.js";import"./cipher-base-aee0e03d.js";import"./stream-browserify-7496a08f.js";import"./create-hmac-e8b5ea4a.js";import"./browserify-sign-a708a95f.js";import"./browserify-rsa-bfbdcbb6.js";import"./bn.js-1ae23332.js";import"./elliptic-75e883ee.js";import"./minimalistic-assert-4cc49674.js";import"./minimalistic-crypto-utils-6f869a51.js";import"./brorand-03f0f79d.js";import"./hash.js-4f5dfe73.js";import"./hmac-drbg-87799258.js";import"./parse-asn1-465c125b.js";import"./asn1.js-405e93e4.js";import"./safer-buffer-2ac6237e.js";import"./evp_bytestokey-e91543fa.js";import"./browserify-aes-ce20a0e6.js";import"./buffer-xor-87a7236a.js";import"./pbkdf2-e2ae8643.js";import"./browserify-cipher-c4c37ca3.js";import"./browserify-des-3f7e64d9.js";import"./des.js-d262604a.js";import"./diffie-hellman-c8260aab.js";import"./miller-rabin-de27bf02.js";import"./create-ecdh-ffe720e9.js";import"./public-encrypt-fc0568a2.js";import"./randomfill-2874e5f1.js";import"./mathjs-2a513dae.js";import"./@babel-484168fe.js";import"./typed-function-4896e4f1.js";import"./decimal.js-d133ee8e.js";import"./complex.js-cf2520e8.js";import"./fraction.js-39e7906a.js";import"./javascript-natural-sort-c4dd0c27.js";import"./escape-latex-c8a96e7a.js";import"./seedrandom-c8f991ad.js";import"./tiny-emitter-56d49cfd.js";import"./crypto-random-string-d158262e.js";import"./jose-92e5544c.js";import"./vue-i18n-728f748b.js";import"./@intlify-16888cd3.js";import"./vue-loading-overlay-b89251b1.js";import"./jspdf-30014160.js";import"./fflate-8981c52c.js";import"./vue-debounce-3bbbf8c6.js";import"./mitt-f7ef348c.js";/* empty css                   */import"./maska-6f10db43.js";import"./@fortawesome-014b81f2.js";import"./vue3-blocks-tree-e53499e3.js";import"./qrcode-generator-0cbfda4c.js";import"./bech32-123a6149.js";const ct={name:"ViewServicesMainnetSwapETHToSirius",components:{SupplyInputClean:Oe,SwapCertificateComponent:Ge,SelectInputAccount:Je},setup(){const b=E(()=>Ye.nativeToken.label),o=a(!0);window.ethereum&&(window.ethereum.isMetaMask||(o.value=!1)),it(()=>{});let y=new Ze($e.chainNetworkName);y.init();const e=a(0),X=a(""),V=a("");(async()=>{try{const s=await N.fetchTokenServiceInfo(y.swap_IN_SERVICE_URL,"xpx");s.status==200?(V.value=s.data.ethInfo.scAddress,X.value=s.data.ethInfo.sinkAddress,e.value=parseInt(s.data.siriusInfo.feeAmount),C.value=""):C.value="Swapping service is temporary not available. Please try again later"}catch{C.value="Swapping service is temporary not available. Please try again later"}})();let f=y.ETHChainId,Q=y.ETHNetworkName;const H=a(!1),w=a(!1),h=a(null),n=a(0),O=a(0),oe=a(""),G=a(!1),R=a(!1),j=a(!1),D=a(!1),L=a("Retry"),Te=y.ETHScanUrl,Ie=N.getIncoming_ETHSwapTransfer_URL(y.swap_IN_SERVICE_URL,"xpx"),z=a(!1),Ae=E(()=>R.value?"Approval on MetaMask is rejected":"Please sign transaction confirmation in MetaMask");let p,k;typeof window.ethereum<"u"?(p=new W(window.ethereum),k=p.getSigner(),H.value=!0,w.value=!!ethereum.isConnected(),ethereum.request({method:"eth_accounts"}).then(ie).catch(s=>{console.error(s)}),ethereum.request({method:"eth_chainId"}).then(s=>{re(s,!1)}).catch(s=>{console.error(s)}),ethereum.on("accountsChanged",Ne),ethereum.on("chainChanged",s=>{re(s,!0)})):console.log("MetaMask not installed");function ie(s){s.length===0?(O.value=0,h.value=""):s[0]!==h.value&&(h.value=s[0],J()),w.value=!!ethereum.isConnected()}function Ne(s){window.ethereum.isMetaMask&&(s.length===0?(O.value=0,h.value=""):s[0]!==h.value&&(h.value=s[0],C.value="",J())),w.value=!!ethereum.isConnected()}function re(s,m=!1){oe.value=s,f===parseInt(s)?(I.value="",m&&J()):I.value="Please select "+Q+" on MetaMask to swap"}function J(){ethereum.request({method:"eth_getBalance",params:[h.value,"latest"]}).then(s=>{O.value=parseInt(s)/Math.pow(10,18)}).catch(s=>{console.error(s)})}const Ee=()=>{window.ethereum.isMetaMask==null?o.value=!1:(o.value=!0,ethereum.request({method:"eth_requestAccounts"}).then(ie).catch(s=>{s.code===4001?console.log("Please connect to MetaMask."):s.code=="-32002"&&(C.value="Please click on MetaMask extension to approve connection")}))};ae([oe,h,V],([s,m,x])=>{x!=null&&x!=""&&(async()=>{try{p=new W(window.ethereum,"any"),k=p.getSigner();const _e=await new Se(x,we,k).balanceOf(m);n.value=_e.toNumber()/Math.pow(10,6)}catch{n.value=0}})()}),ae(n,s=>{s<=e.value?T.value=!0:T.value=!1});const ne=a(!1),le=a(!1),ce=a(!1),de=a(!1),me=a(!1),ue=a(!1),fe=a(!1),B=a(""),K=a(""),ve=a(""),Y=a(""),Z=a(""),$=a(""),ee=a(""),Pe=()=>{N.generateIncomingPdfCert("ETH",Y.value,S.value,Z.value,$.value,ee.value)},Ve=st(),He=s=>{let m=document.getElementById(s).getAttribute("copyValue"),x=document.getElementById(s).getAttribute("copySubject");tt(m),Ve.add({severity:"info",summary:x+" copied",detail:m,group:"br-custom",life:3e3})},te=a(1),Re=a(!1),he=a(!0),T=a(!1),je=a(!1),S=a(q.currentLoggedInWallet.selectDefaultAccount().address),I=a(""),C=a(""),De=E(()=>!(g.value>0&&S.value!=""&&!I.value&&n.value>=g.value&&g.value>e.value)),g=a("0"),Le=E(()=>{let s=q.currentLoggedInWallet.accounts.find(m=>m.address==S.value);return s||(s=q.currentLoggedInWallet.others.find(m=>m.address==S.value)),s.name}),Be=E(()=>g.value-50>0?g.value-50:0);ae(g,s=>{s<=e.value?T.value=!0:T.value=!1});const Ue=()=>{te.value=2,setTimeout(()=>ne.value=!0,1e3),setTimeout(()=>{le.value=!0,(async()=>await pe())()},2e3)},pe=async()=>{try{I.value="",G.value=!1,p=new W(window.ethereum,"any"),k=p.getSigner();const m=new Se(V.value,we,k);var s={gasLimit:(await N.getETH_GasLimit(y.gasPriceConsultURL)).standardGasLimit};const M=await m.transfer(X.value,lt(g.value,6),s);B.value=M.hash,K.value=Te+M.hash,(await p.getTransaction(M.hash)).hash===M.hash&&Fe()}catch(m){G.value=!0,(m.code="-32000")&&(m.value=m.message)}},Fe=()=>{ce.value=!0},se=a(!1),U=a(!1),A=a(!1),qe=()=>{se.value=!0,U.value=!0,A.value=!1,setTimeout(async()=>{await xe()},2e3)},xe=async()=>{const s=await We();se.value=!1,s?z.value?(U.value=!1,A.value=!0):(A.value=!1,setTimeout(()=>de.value=!0,1e3),setTimeout(()=>{me.value=!0,(async()=>await ye())()},2e3)):(U.value=!1,A.value=!0)},be=a(""),ye=async()=>{try{R.value=!1,p=new W(window.ethereum,"any"),k=p.getSigner();const s=await k.signMessage(S.value);ve.value=s;const m={recipient:S.value,signature:s,txnInfo:{network:"ETH",txnHash:B.value}};be.value=m,await ge()}catch{R.value=!0}},We=async()=>{try{let s=await p.getTransactionReceipt(B.value);return s&&s.status===1?!0:s&&s.status===0?(z.value=!0,!0):!1}catch(s){return console.log(s),!1}},F=a(0),ge=async()=>{ue.value=!0,fe.value=!0,L.value="Initiating swap...",D.value=!0;let s=JSON.stringify(be.value);try{const m=await fetch(Ie,{method:"POST",headers:{"Content-Type":"application/json"},body:s});if(m.status==200||m.status==201){const x=await m.json();j.value=!1,$.value=x.remoteTxnHash,Y.value=x.timestamp,Z.value=x.ctxId,ee.value=N.generateQRCode(K.value),setTimeout(()=>he.value=!1,1e3),F.value=0}else m.status==208?console.log("208"):(j.value=!0,++F.value,L.value="Retry",D.value=!1)}catch{j.value=!0,++F.value,L.value="Retry",D.value=!1}},Xe=()=>{te.value=3},Qe=a(!1);return{err:I,balance:n,isInstallMetamask:H,connectMetamask:Ee,isMetamaskConnected:w,currentAccount:h,copy:He,currentPage:te,isDisabledValidate:he,siriusAddress:S,disableSiriusAddress:Re,showAmountErr:T,sendRequest:Ue,validated:Xe,amount:g,disableAmount:je,isDisabledSwap:De,savedCheck:Qe,step1:ne,step2:le,step3:ce,step4:de,step5:me,step6:ue,step7:fe,validationLink:K,validationHash:B,messageHash:ve,transactionHash:$,swapTimestamp:Y,swapId:Z,swapQr:ee,saveCertificate:Pe,isInvalidConfirmedMeta:G,isInvalidSignedMeta:R,isInvalidSwapService:j,getValidation:pe,getSigned:ye,defaultXPXTxFee:e,serviceErr:C,swapServerErrIndex:F,afterSigned:ge,disableRetrySwap:D,retrySwapButtonText:L,signatureMessage:Ae,checkTxnConfirmation:xe,triggerTxnConfirmation:qe,isCheckingTxnConfirmation:se,isDisabledCheckTxnConfirmed:U,isTxnNotConfirmed:A,transactionFailed:z,verifyMetaMaskPlugin:o,currentNativeTokenName:b,walletState:q,amountReceived:Be,Helper:et,siriusName:Le}}},dt={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},mt={class:"mt-6 p-6 border filter shadow-lg text-center"},ut=t("div",{class:"text-md"},"Main Network Swap",-1),ft=t("div",{class:"text-xs my-3 mb-5 sm:mb-10"},[t("img",{src:at,class:"mr-2 h-5 inline-block"}),c("Swap from ETH to Proximax Sirius Chain")],-1),vt={class:"flex my-10"},ht={class:"flex-none"},pt={class:"flex border border-gray-300 rounded-md filter shadow-md"},xt={class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},bt=t("div",{class:"flex-grow self-center md:mx-4 h-0.5 bg-gray-100"},null,-1),yt={class:"flex-none"},gt={class:"flex border border-gray-300 rounded-md filter shadow-md"},_t={class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},wt=t("div",{class:"flex-grow self-center md:mx-4 h-0.5 bg-gray-100"},null,-1),kt={class:"flex-none"},St={class:"flex border border-gray-300 rounded-md filter shadow-md"},Ct={class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},Mt={key:0},Tt=t("div",{class:"text-lg my-7 font-bold"},"Transaction Details",-1),It={key:0,class:"error error_box mb-5"},At={key:1,class:"bg-yellow-200 text-yellow-900 text-tsm p-3 mb-5 rounded-2xl"},Nt=t("b",null,"MetaMask",-1),Et={class:"my-2"},Pt={href:"https://bit.ly/3mVayCu",target:"_new",class:"text-blue-primary"},Vt={key:2,class:"error error_box mb-5"},Ht={key:3,class:"error error_box mb-5"},Rt={class:"mb-5 md:flex md:justify-between border border-gray-200 rounded"},jt={class:"flex justify-left"},Dt=t("div",{class:"w-18 flex items-center justify-center py-5 sm:h-20"},[t("img",{src:ot,class:"w-8 h-8 inline-block"})],-1),Lt={class:"text-left flex items-center"},Bt=t("div",{class:"text-xxs uppercase text-blue-primary font-bold mb-1"},"From MetaMask Address",-1),Ut={class:"font-bold text-black text-tsm break-all mr-2"},Ft={key:0,class:"border-l border-gray-200 text-green-500 font-semibold text-xxs w-16 lg:w-20 flex items-center justify-center uppercase"},qt=t("div",null,[t("img",{src:Ce,class:"inline-block"}),t("div",null,"Connected")],-1),Wt=[qt],Xt={class:"border-l border-gray-200 text-blue-primary text-tsm font-bold w-16 lg:w-20 flex justify-center items-center"},Qt={key:0},Ot={key:1},Gt=t("a",{href:"https://metamask.io/",target:"_new"},"Download",-1),zt=[Gt],Jt={class:"md:hidden"},Kt={key:0,class:"border-t border-gray-200 text-green-500 font-semibold text-xxs uppercase p-2"},Yt=t("div",{class:"flex items-center justify-center"},[t("img",{src:Ce,class:"inline-block mr-2 w-4 h-4"}),c(" Connected ")],-1),Zt=[Yt],$t={class:"border-t border-gray-200 text-blue-primary text-tsm font-bold p-3"},es={key:0},ts={key:1},ss=t("a",{href:"https://metamask.io/",target:"_new"},"Download",-1),as=[ss],os={class:"text-left"},is={class:"bg-blue-50 border border-blue-primary h-20 mt-5 rounded flex items-center justify-center"},rs=t("img",{src:Me,class:"w-5 h-5 ml-4"},null,-1),ns={class:"my-4 text-xs"},ls={class:"mt-10 text-center"},cs=["disabled"],ds={key:1},ms={class:"text-lg my-7"},us={key:0,class:"error error_box mb-5"},fs={class:"flex border-b border-gray-300 p-3"},vs={class:"flex-none"},hs={class:"flex h-full justify-center"},ps={class:"flex border-b border-gray-300 p-3"},xs={class:"flex-none"},bs={class:"flex h-full justify-center"},ys={key:0,class:"mt-5"},gs={class:"flex border-b border-gray-300 p-3"},_s={class:"flex-none"},ws={class:"flex h-full justify-center"},ks={key:0,class:"bg-yellow-100 py-2 px-5 mt-3 rounded flex"},Ss=["href","copyValue"],Cs={class:"flex-none mr-3"},Ms={class:"sm:flex"},Ts=["disabled"],Is={key:1,class:"py-2 sm:flex-grow text-xs mt-3"},As=t("div",{class:"mb-1"},"One block confirmation needed to proceed.",-1),Ns=t("div",{class:"mb-1"},[t("b",null,"Do not change Gas Limit, Max Piority Fee or Max Fee"),c(".")],-1),Es=t("div",{class:"mb-1"},"Confirmation might take up to 30 minutes, 1 hour or more due to high transaction volumes.",-1),Ps=t("div",{class:"mb-1"},[c("Please "),t("b",null,"do not close or refresh"),c(" this page until the swap process is complete and you have saved your certificate.")],-1),Vs={class:"mb-1"},Hs=["href"],Rs={key:1,class:"text-tsm mt-2 bg-blue-100 px-4 py-2 rounded-xl inline-block text-blue-900"},js={key:2,class:"text-tsm mt-2 bg-red-100 px-4 py-2 rounded-xl inline-block text-red-primary"},Ds={class:"flex border-b border-gray-300 p-3"},Ls={class:"flex-none"},Bs={class:"flex h-full justify-center"},Us={class:"flex border-b border-gray-300 p-3"},Fs={class:"flex-none"},qs={class:"flex h-full justify-center"},Ws={key:0,class:"mt-5"},Xs={class:"flex border-b border-gray-300 p-3"},Qs={class:"flex-none"},Os={class:"flex h-full justify-center"},Gs={key:0,class:"bg-yellow-100 py-2 px-5 mt-2 rounded flex"},zs=["copyValue"],Js={class:"flex-none mr-3"},Ks={class:"flex border-b border-gray-300 p-3"},Ys={class:"flex-none"},Zs={class:"flex h-full justify-center"},$s={key:0,class:"mt-5"},ea=["disabled"],ta={key:1,class:"mt-5 text-tsm sm:text-sm"},sa=t("b",null,"transaction hash",-1),aa=t("b",null,"signature",-1),oa=t("a",{href:"https://t.me/proximaxhelpdesk",target:"_new",class:"text-blue-primary font-bold underline"},"helpdesk",-1),ia={class:"mt-10 text-center"},ra=["disabled"],na={key:2},la=t("h1",{class:"default-title font-bold mt-5 mb-2"},"Congratulations!",-1),ca=t("div",{class:"text-tsm mb-7"},"The swap process has already started!",-1),da={class:"mt-3"},ma=["href"],ua=t("div",{class:"md:mx-20 lg:mx-40 font-bold text-center text-tsm py-5 sm:py-10 mt-5 sm:mt-10 border-t border-gray-200"},"Swap Details",-1),fa={class:"md:mx-20 lg:mx-10 xl:mx-40 border-2 border-gray-200 mt-4 p-5 text-xs font-bold filter shadow-lg"},va=t("div",{class:"text-blue-primary mb-1"},"From: MetaMask Account",-1),ha={class:"break-all"},pa={class:"mt-1"},xa=t("div",null,[t("img",{src:ze,class:"inline-block h-8 my-2"})],-1),ba={class:"text-blue-primary mb-1"},ya={class:"mt-1"},ga=t("img",{src:Me,class:"w-3 h-3 ml-2 inline relative",style:{top:"-2px"}},null,-1),_a=t("div",{class:"my-5 sm:my-7 text-gray-500 text-xs md:mx-20 lg:mx-10 xl:mx-40"},"Swap process may take a few hours to complete. Please save a copy of your certificate. It is needed in the event of an error.",-1),wa={class:"inline-flex items-center mb-5"},ka=t("span",{class:"ml-2 cursor-pointer text-xs font-bold"},"I confirm that I have downloaded a copy of my certificate.",-1),Sa={class:"sm:mt-5 text-center"};function Ca(b,o,y,e,X,V){const f=P("font-awesome-icon"),Q=P("SupplyInputClean"),H=P("SelectInputAccount"),w=P("router-link"),h=P("swap-certificate-component");return i(),l("div",null,[t("div",dt,[t("div",mt,[ut,ft,t("div",vt,[t("div",ht,[t("div",pt,[t("div",{class:r(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage>=1?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:r(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=1?"text-white":"text-gray-400"}`])},"1",2)],2),t("div",xt,d(b.$t("swap.transaction")),1)])]),bt,t("div",yt,[t("div",gt,[t("div",{class:r(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage>=2?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:r(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=2?"text-white":"text-gray-400"}`])},"2",2)],2),t("div",_t,d(b.$t("swap.validation")),1)])]),wt,t("div",kt,[t("div",St,[t("div",{class:r(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage==3?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:r(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=3?"text-white":"text-gray-400"}`])},"3",2)],2),t("div",Ct,d(b.$t("swap.certificate")),1)])])]),e.currentPage==1?(i(),l("div",Mt,[Tt,e.isInstallMetamask?u("v-if",!0):(i(),l("div",It,d(b.$t("swap.noMetamask")),1)),e.verifyMetaMaskPlugin?u("v-if",!0):(i(),l("div",At,[c("Please make sure there is no other crypto wallet extension currently being enabled except "),Nt,c("."),t("div",Et,[c("Refer to the "),t("a",Pt,[c("walkthrough"),v(f,{icon:"external-link-alt",class:"text-blue-primary w-3 h-3 self-center inline-block ml-1"})]),c(" for more details.")]),c("Please refresh this page after disabling other wallet extensions.")])),e.serviceErr!=""?(i(),l("div",Vt,d(e.serviceErr),1)):u("v-if",!0),e.err!=""?(i(),l("div",Ht,d(e.err),1)):u("v-if",!0),t("div",Rt,[t("div",jt,[Dt,t("div",Lt,[t("div",null,[Bt,t("div",Ut,d(e.isMetamaskConnected&&e.currentAccount?e.currentAccount:"Not connected"),1)])])]),t("div",{class:r(["md:grid hidden",e.currentAccount?"grid-cols-2":"grid-cols-1"])},[e.currentAccount?(i(),l("div",Ft,Wt)):u("v-if",!0),t("div",Xt,[e.isInstallMetamask?(i(),l("div",Qt,[e.currentAccount?(i(),l("div",{key:1,class:"cursor-pointer",onClick:o[1]||(o[1]=n=>e.connectMetamask())},"Change")):(i(),l("div",{key:0,class:"cursor-pointer",onClick:o[0]||(o[0]=n=>e.connectMetamask())},"Connect"))])):(i(),l("div",Ot,zt))])],2),t("div",Jt,[e.currentAccount?(i(),l("div",Kt,Zt)):u("v-if",!0),t("div",$t,[e.isInstallMetamask?(i(),l("div",es,[e.currentAccount?(i(),l("div",{key:1,class:"cursor-pointer",onClick:o[3]||(o[3]=n=>e.connectMetamask())},"Change")):(i(),l("div",{key:0,class:"cursor-pointer",onClick:o[2]||(o[2]=n=>e.connectMetamask())},"Connect"))])):(i(),l("div",ts,as))])])]),v(Q,{disabled:e.disableAmount,modelValue:e.amount,"onUpdate:modelValue":o[4]||(o[4]=n=>e.amount=n),balance:e.balance,placeholder:"ERC20 "+e.currentNativeTokenName+" (MINIMUM = 51 )",type:"text",showError:e.showAmountErr,errorMessage:e.amount?parseFloat(e.amount)<=e.defaultXPXTxFee?"Insufficient amount":"Insufficient token balance.":"Required Field",decimal:6,toolTip:"BEP20 token amount to swap. Minimum 51 BEP20 amount is required as 50 will be deducted from the amount as transaction fee."},null,8,["disabled","modelValue","balance","placeholder","showError","errorMessage"]),t("div",os,[v(H,{modelValue:e.siriusAddress,"onUpdate:modelValue":o[5]||(o[5]=n=>e.siriusAddress=n),placeholder:"To Sirius Chain Account",selectDefault:e.walletState.currentLoggedInWallet.selectDefaultAccount().address},null,8,["modelValue","selectDefault"])]),t("div",is,[c(d(e.amountReceived)+" "+d(e.currentNativeTokenName)+" ",1),rs]),t("div",ns,"The fees for the transaction on Sirius Chain will be deducted from this amount, which is 50 "+d(e.currentNativeTokenName),1),t("div",ls,[t("button",{onClick:o[6]||(o[6]=n=>b.$router.push({name:"ViewServicesMainnetSwap"})),class:"text-black font-bold text-xs mr-5 focus:outline-none disabled:opacity-50"},"Cancel"),t("button",{type:"submit",class:"default-btn focus:outline-none disabled:opacity-50",disabled:e.isDisabledSwap,onClick:o[7]||(o[7]=n=>e.sendRequest())},"Send Request",8,cs)])])):u("v-if",!0),e.currentPage==2?(i(),l("div",ds,[t("div",ms,[e.err!=""?(i(),l("div",us,d(e.err),1)):u("v-if",!0),t("div",{class:r(["font-bold text-left text-xs md:text-sm",e.step1?"text-gray-700":"text-gray-300"])},"Step 1: Send ERC20 "+d(e.currentNativeTokenName)+" to the escrow account",3),t("div",fs,[t("div",vs,[t("div",{class:r(["rounded-full border w-6 h-6 transition-all duration-500",e.step1?"border-blue-primary":"border-gray-300"])},[t("div",hs,[v(f,{icon:"check",class:r([e.step1?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block transition-all duration-500"])},null,8,["class"])])],2)]),t("div",{class:r(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step1?"text-gray-700":"text-gray-300"])},"Sending transaction to MetaMask",2)]),t("div",ps,[t("div",xs,[t("div",{class:r(["rounded-full border w-6 h-6 transition-all duration-500",e.isInvalidConfirmedMeta?"border-red-primary":e.step2?"border-blue-primary":"border-gray-300"])},[t("div",bs,[e.isInvalidConfirmedMeta?(i(),_(f,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block transition-all duration-500"})):(i(),_(f,{key:1,icon:"check",class:r([e.step2?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block transition-all duration-500"])},null,8,["class"]))])],2)]),t("div",{class:r(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step2?"text-gray-700":"text-gray-300"])},[c(d(e.isInvalidConfirmedMeta?"Approval in MetaMask is rejected":"Waiting for confirmation in MetaMask")+" ",1),e.isInvalidConfirmedMeta?(i(),l("div",ys,[t("button",{type:"button",class:"bg-blue-primary rounded mr-5 focus:outline-none text-tsm font-bold py-2 border-blue-primary px-8 text-white hover:shadow-lg",onClick:o[8]||(o[8]=(...n)=>e.getValidation&&e.getValidation(...n))},"Retry"),v(w,{to:{name:"ViewServicesMainnetSwap"},class:"px-6 py-2 text-gray-500 outline-none focus:outline-none mr-4 w-32 text-tsm",tag:"button"},{default:ke(()=>[c("Cancel this swap")]),_:1})])):u("v-if",!0)],2)]),t("div",gs,[t("div",_s,[t("div",{class:r(["rounded-full border w-6 h-6",e.step3?"border-blue-primary":"border-gray-300"])},[t("div",ws,[v(f,{icon:"check",class:r([e.step3?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"])])],2)]),t("div",{class:r(["text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step3?"text-gray-700":"text-gray-300"])},[c(" Transaction hash: "),e.validationHash?(i(),l("div",ks,[t("a",{href:e.validationLink,target:"_new",class:r([e.isInvalidConfirmedMeta?"text-gray-300":"text-blue-primary","flex-grow break-all text-tsm self-center hover:underline"]),id:"validateTransfer",copyValue:e.validationHash,copySubject:"Transfer hash"},[v(f,{icon:"external-link-alt",class:"text-blue-primary w-3 h-3 self-center inline-block mr-2"}),c(d(e.validationHash),1)],10,Ss),t("div",Cs,[e.step3?(i(),_(f,{key:0,icon:"copy",onClick:o[9]||(o[9]=n=>e.copy("validateTransfer")),class:"w-5 h-5 text-blue-primary cursor-pointer self-center mx-3 absolute top-2 hover:opacity-90 duration-800 transition-all"})):u("v-if",!0)])])):u("v-if",!0),t("div",Ms,[e.validationHash?(i(),l("button",{key:0,class:"sm:flex-none justify-start sm:justify-end bg-blue-primary h-15 w-60 rounded mr-5 focus:outline-none text-xs font-bold py-2 border border-blue-primary px-8 text-white hover:shadow-lg mt-3 sm:mt-0 disabled:opacity-50 self-center",type:"button",disabled:e.isDisabledCheckTxnConfirmed||e.transactionFailed,onClick:o[10]||(o[10]=(...n)=>e.triggerTxnConfirmation&&e.triggerTxnConfirmation(...n))},d(e.isCheckingTxnConfirmation?"Checking transaction confirmation...":"Check transaction confirmation to proceed"),9,Ts)):u("v-if",!0),e.validationHash?(i(),l("div",Is,[As,Ns,Es,Ps,t("div",Vs,[c("View confirmation status on "),t("a",{href:e.validationLink,target:"_new",class:"text-blue-primary inline-block hover:text-blue-900 hover:underline"},[c("EtherScan"),v(f,{icon:"external-link-alt",class:"ml-1 text-blue-primary w-3 h-3 self-center inline-block"})],8,Hs),c(".")])])):u("v-if",!0)]),e.isTxnNotConfirmed&&!e.transactionFailed?(i(),l("div",Rs,"Transaction is not confirmed yet. Please check again in a moment")):u("v-if",!0),e.transactionFailed?(i(),l("div",js,"Transaction failed. Please try again with suggested gas price and gas limit")):u("v-if",!0)],2)]),t("div",{class:r(["font-bold text-left text-xs md:text-sm mt-4",e.step4?"text-gray-700":"text-gray-300"])},"Step 2: Validate your Sirius address",2),t("div",Ds,[t("div",Ls,[t("div",{class:r(["rounded-full border w-6 h-6",e.step4?"border-blue-primary":"border-gray-300"])},[t("div",Bs,[v(f,{icon:"check",class:r([e.step4?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"])])],2)]),t("div",{class:r(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step4?"text-gray-700":"text-gray-300"])},"Sending message to MetaMask",2)]),t("div",Us,[t("div",Fs,[t("div",{class:r(["rounded-full border w-6 h-6",e.isInvalidSignedMeta?"border-red-primary":e.step5?"border-blue-primary":"border-gray-300"])},[t("div",qs,[e.isInvalidSignedMeta?(i(),_(f,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block"})):(i(),_(f,{key:1,icon:"check",class:r([e.step5?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"]))])],2)]),t("div",{class:r(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step5?"text-gray-700":"text-gray-300"])},[c(d(e.signatureMessage)+" ",1),e.isInvalidSignedMeta?(i(),l("div",Ws,[t("button",{type:"button",class:"bg-blue-primary rounded mr-5 focus:outline-none text-tsm py-2 px-4 text-white hover:shadow-lg w-24",onClick:o[11]||(o[11]=(...n)=>e.getSigned&&e.getSigned(...n))},"Retry")])):u("v-if",!0)],2)]),t("div",Xs,[t("div",Qs,[t("div",{class:r(["rounded-full border w-6 h-6",e.step6?"border-blue-primary":"border-gray-300"])},[t("div",Os,[v(f,{icon:"check",class:r([e.step6?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"])])],2)]),t("div",{class:r(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step6?"text-gray-700":"text-gray-300"])},[c("Message signed with signature: "),e.messageHash&&e.step6?(i(),l("div",Gs,[t("div",{class:r([e.step6?"text-gray-500":"text-gray-300","text-tsm break-all flex-grow"]),id:"validateMessage",copyValue:e.messageHash,copySubject:"Signature hash"},d(e.messageHash),11,zs),t("div",Js,[e.step6?(i(),_(f,{key:0,icon:"copy",onClick:o[12]||(o[12]=n=>e.copy("validateMessage")),class:"w-5 h-5 text-blue-primary cursor-pointer self-center ml-3 absolute top-2 hover:opacity-90 duration-800 transition-all"})):u("v-if",!0)])])):u("v-if",!0)],2)]),t("div",{class:r(["font-bold text-left text-xs md:text-sm mt-4",e.step7?"text-gray-700":"text-gray-300"])},"Step 3: Initiate swap",2),t("div",Ks,[t("div",Ys,[t("div",{class:r(["rounded-full border w-6 h-6",e.isInvalidSwapService?"border-red-primary":e.step7?"border-blue-primary":"border-gray-300"])},[t("div",Zs,[e.isInvalidSwapService?(i(),_(f,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block"})):(i(),_(f,{key:1,icon:"check",class:r([e.step7?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"]))])],2)]),t("div",{class:r(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step7?"text-gray-700":"text-gray-300"])},[c(d(e.isInvalidSwapService?"Unable to send message to swap service":"Message sent to the swap service, swap initiated...")+" ",1),e.isInvalidSwapService&&e.swapServerErrIndex<=3?(i(),l("div",$s,[t("button",{type:"button",class:"bg-blue-primary rounded mr-5 focus:outline-none text-tmd py-2 px-4 text-white hover:shadow-lg disabled:opacity-50",onClick:o[13]||(o[13]=(...n)=>e.afterSigned&&e.afterSigned(...n)),disabled:e.disableRetrySwap},d(e.retrySwapButtonText),9,ea)])):u("v-if",!0),e.swapServerErrIndex>3?(i(),l("div",ta,[c(" Sorry. Please save the "),sa,c(", the "),aa,c(" and contact our "),oa,c(". ")])):u("v-if",!0)],2)])]),t("div",ia,[t("button",{type:"submit",class:"default-btn focus:outline-none disabled:opacity-50",disabled:e.isDisabledValidate,onClick:o[14]||(o[14]=n=>e.validated())},d(b.$t("general.continue")),9,ra)])])):u("v-if",!0),e.currentPage==3?(i(),l("div",na,[t("div",null,[la,ca,v(h,{networkTerm:"ETH",swapType:"In",swapId:e.swapId,swapTimestamp:e.swapTimestamp,transactionHash:e.transactionHash,siriusName:e.siriusName,swappedAmount:e.amount,siriusAddress:e.Helper.createAddress(e.siriusAddress).pretty(),swapQr:e.swapQr,swapLink:e.validationLink},null,8,["swapId","swapTimestamp","transactionHash","siriusName","swappedAmount","siriusAddress","swapQr","swapLink"]),t("button",{type:"button",class:"w-40 hover:shadow-lg bg-blue-primary text-white text-xs hover:opacity-50 rounded font-bold px-4 py-3 border border-blue-primary outline-none mr-4 mt-6",onClick:o[15]||(o[15]=(...n)=>e.saveCertificate&&e.saveCertificate(...n))},"Download Certificate"),t("div",da,[t("a",{href:e.validationLink,target:"_new",class:"underline self-center text-xs font-bold text-blue-primary"},[c("View Transaction in Explorer"),v(f,{icon:"external-link-alt",class:"ml-2 text-blue-500 w-3 h-3 self-center inline-block"})],8,ma)]),ua,t("div",fa,[va,t("div",ha,d(e.currentAccount),1),t("div",pa,"Swap Amount "+d(e.amount)+" ERC20 XPX",1),xa,t("div",ba,"To: "+d(e.siriusName),1),t("div",null,d(e.Helper.createAddress(e.siriusAddress).pretty()),1),t("div",ya,[c("Equivalent to "+d(e.amountReceived)+" "+d(e.currentNativeTokenName)+" ",1),ga])]),_a,t("label",wa,[rt(t("input",{type:"checkbox",class:"h-5 w-5 bg-blue-primary",value:"true","onUpdate:modelValue":o[16]||(o[16]=n=>e.savedCheck=n)},null,512),[[nt,e.savedCheck]]),ka]),t("div",Sa,[v(w,{to:{name:"ViewServicesMainnetSwap"},class:r(["default-btn mr-5 focus:outline-none w-40 inline-block mt-1",e.savedCheck?"":"opacity-50"]),is:e.savedCheck?"router-link":"span",tag:"button"},{default:ke(()=>[c("Done")]),_:1},8,["class","is"])])])])):u("v-if",!0)])])])}const Hi=Ke(ct,[["render",Ca],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/services/submodule/mainnetSwap/submodule2/eth/views/ViewServicesMainnetSwapETHToSirius.vue"]]);export{Hi as default};
