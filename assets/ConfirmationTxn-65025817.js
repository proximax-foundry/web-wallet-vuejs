import{d as S,l as V,r as x,c,n as y,i as j,o as r,b as i,e as s,t as u,F as E,g as W,f as v,m as g,v as w,x as I,T as L,W as M,w as B,B as D,S as b,z as R}from"./index-ca9ee916.js";import{_ as H}from"./PasswordInput.vue_vue_type_script_setup_true_lang-523abb96.js";import{T as a}from"./transactionState-85c61020.js";const z={class:"w-10/12 ml-auto mr-auto mt-5"},F={class:"border filter shadow-lg mt-8"},q={key:0},O=s("div",{class:"text-lg font-semibold m-7"},"Unsigned Transaction",-1),G={key:0},J={class:"flex justify-center px-12"},K={class:"mb-3 border rounded-lg border-gray-900 w-full p-2 flex items-center justify-center break-all"},Q={class:"flex justify-center px-12"},X={class:"mb-3 border rounded-lg border-gray-900 w-full p-2 flex items-center justify-center break-all"},Y=["onClick"],Z={class:"flex justify-center my-3"},ee={key:0,class:"popup-outer-lang lg:translate-x-2/4 fixed flex z-50"},te={class:"modal-popup-box text-center"},ae={key:0,class:"error error_box mb-3"},se={class:"text-center mt-2 text-xs font-semibold"},de=S({__name:"ConfirmationTxn",setup(ne){const P=V(),n=x(!1),o=x(""),m=x(""),T=c(()=>y.currentNetworkProfile.chainExplorer.url),h=c(()=>y.currentNetworkProfile.chainExplorer.payloadInfoRoute),k=t=>{window.open(T.value+h.value+"/"+t,"_blank")},A=c(()=>a.lockHashPayload?a.lockHashPayload:null),d=c(()=>a.unsignedTransactionPayload?a.unsignedTransactionPayload:null),C=c(()=>a.transactionPayload),p=c(()=>a.selectedAddress),f=c(()=>a.selectedMultisigAddress),_=()=>{a.lockHashPayload="",a.transactionPayload="",a.unsignedTransactionPayload="",a.selectedAddress="",a.selectedMultisigAddress=""},$=async()=>{if(o.value=="")m.value="Please insert wallet password to sign transaction";else if(M.verifyWalletPassword(B.currentLoggedInWallet.name,y.chainNetworkName,o.value)){n.value=!n.value,m.value="";let t=null;if(f.value){const e=await D.chainAPI.nodeAPI.getNodeTime();t=await b.signAbtWithTxnAndPassword(p.value,f.value,o.value,d.value,new R.UInt64(e.sendTimeStamp))}else t=await b.signTxnWithPassword(p.value,f.value,o.value,d.value);a.transactionPayload=t.txnPayload,a.lockHashPayload=t.hashLockTxnPayload,o.value="",a.unsignedTransactionPayload="",U()}else m.value="Wallet password is incorrect"},U=async()=>{await b.confirmAnnounceTransaction(C.value,A.value);const t=p.value;_(),P.push({name:"ViewAccountPendingTransactions",params:{address:t}})};return(t,e)=>{const N=j("router-link");return r(),i("div",null,[s("div",z,[s("div",F,[d.value?(r(),i("div",q,[O,typeof d.value=="string"?(r(),i("div",G,[s("div",J,[s("div",K,u(d.value),1)]),s("div",{class:"flex justify-center text-blue-primary font-semibold uppercase ml-3.5 mt-3 text-sm xl:text-md xl:ml-0 cursor-pointer",onClick:e[0]||(e[0]=l=>k(d.value))},"Click to view Unsigned Transaction Details in Explorer")])):(r(!0),i(E,{key:1},W(d.value,l=>(r(),i("div",null,[s("div",Q,[s("div",X,u(l),1)]),s("div",{class:"flex justify-center text-blue-primary font-semibold uppercase ml-3.5 my-3 text-sm xl:text-md xl:ml-0 cursor-pointer",onClick:le=>k(l)},"Click to view Unsigned Transaction Details in Explorer",8,Y)]))),256))])):v("",!0),s("div",Z,[g(N,{to:{name:"ViewDashboard"},class:"text-black font-bold text-xs pt-3 mr-4 sm:mr-5 mt-2 focus:outline-none disabled:opacity-50",onClick:e[1]||(e[1]=l=>_())},{default:w(()=>[I(u(t.$t("general.cancel")),1)]),_:1}),s("button",{type:"submit",class:"default-btn focus:outline-none disabled:opacity-50 mt-2",onClick:e[2]||(e[2]=l=>n.value=!n.value)}," Sign ")])]),g(L,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:w(()=>[n.value?(r(),i("div",ee,[s("div",te,[m.value!=""?(r(),i("div",ae,u(m.value),1)):v("",!0),s("div",se,u(t.$t("general.enterPassword")),1),g(H,{class:"mt-3",modelValue:o.value,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value=l),placeholder:t.$t("general.enterPassword"),errorMessage:t.$t("general.passwordRequired")},null,8,["modelValue","placeholder","errorMessage"]),s("button",{onClick:e[4]||(e[4]=l=>$()),class:"blue-btn py-2 font-semibold cursor-pointer text-center w-7/12 mt-5 inline-block"},u(t.$t("general.confirm")),1),s("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:e[5]||(e[5]=l=>{n.value=!n.value,o.value=""})},u(t.$t("general.cancel")),1)])])):v("",!0)]),_:1}),n.value?(r(),i("div",{key:0,onClick:e[6]||(e[6]=l=>n.value=!n.value),class:"fixed inset-0 bg-opacity-60 bg-gray-100 z-20"})):v("",!0)])])}}});export{de as default};
