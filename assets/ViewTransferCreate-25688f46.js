import{_ as Z,k as S,o as d,b as m,f as _,e as t,s as A,z as Q,t as n,T as $e,A as Ve,d as be,r as c,m as Je,g as ue,a as D,B as k,E as I,O as jt,W as ae,w as M,n as H,P as le,H as z,u as Ye,c as y,v as Ut,Q as Dt,I as et,R as tt,S as Ee,l as Kt,F as Me,i as Pe,q as Rt,K as Wt,U as Le,V as Ht,p as qt,j as Xt}from"./index-a7feb194.js";import{P as zt}from"./PasswordInput-4b60f3d0.js";import{T as Qt}from"./TextInput-1b27ff32.js";import{a as Ge}from"./accountUtils-726a4823.js";import{N as Zt}from"./namespaceUtils-42aa2bac.js";import{t as ke}from"./jdenticon-module-028d553f.js";import{S as Gt}from"./SelectAccountAndContact-2384dfe4.js";import{A as Jt}from"./AddressInputClean-2b86796f.js";import{_ as Be}from"./proximax-logo-ecfc3767.js";import{S as Yt}from"./sirius-2d318dcd.js";import{_ as Ae,a as es}from"./icon-new-page-link-270844f6.js";import"./icon-red-x-a5511f99.js";import"./icon-green-tick-1b766454.js";const ts={props:["placeholder","errorMessage","options","modelValue","disableOptions","index"],emits:["update:modelValue","show-mosaic-selection","remove-mosaic-selected"],name:"MosaicInput",data(){return{selectedMosaic:this.modelValue,label:["label"],selectErr:!1,selectModel:0,displayClearIcon:!1}},methods:{clearSelection:function(){this.selectModel=0,this.$emit("remove-mosaic-selected",{index:this.index}),this.selectErr=!0,this.displayClearIcon=!1},makeSelection:function(s){s==null?this.clearSelection():(this.$emit("update:modelValue",s.val),this.$emit("show-mosaic-selection",{index:this.index}),this.selectErr=!1,this.displayClearIcon=!0)}},watch:{"disableOptions.length":{handler:function(s,a){if(a-1==s){for(let u in this.disableOptions)if(u==this.index)if(this.disableOptions[this.index].id==0)this.selectedMosaic=0;else{const e=this.options.findIndex(v=>v.val===this.disableOptions[this.index].id);this.selectedMosaic=this.options[e]}}},deep:!0}},mounted(){this.emitter.on("CLEAR_SELECT",s=>{this.selectModel=s,this.selectErr=!1,this.displayClearIcon=!1})}},ss={class:"h-5 text-left"},ls={class:"text-xs text-blue-400"},as={class:"select mb-3",style:{position:"relative"}},ns={key:0},os={style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},is={class:"text-tsm text-gray-400"},rs={key:1},cs={style:{display:"flex","justify-content":"space-between"}},ds={class:"text-sm"},us={class:"text-tsm text-gray-500"};function ms(s,a,u,e,v,f){const o=S("Dropdown");return d(),m("div",null,[_(" showing blue text of select assets "),t("div",ss,[A($e,{"enter-active-class":"animate__animated animate__fadeInUp"},{default:Q(()=>[t("span",ls,n(u.placeholder),1)]),_:1})]),_(" for the dropdown "),t("div",as,[A(o,{modelValue:v.selectedMosaic,"onUpdate:modelValue":a[0]||(a[0]=r=>v.selectedMosaic=r),options:this.options,style:{width:"100%"},showClear:!0,filter:!0,filterFields:v.label,optionLabel:"text","option-disabled":"disabled",placeholder:this.placeholder,onChange:a[1]||(a[1]=r=>f.makeSelection(r.value)),virtualScrollerOptions:{itemSize:32,scrollHeight:"flex",style:"max-height: "+(this.options.length*32+35)+"px;"}},{value:Q(r=>[r.value?(d(),m("div",ns,[t("div",os,[Ve(n(r.value.label)+" ",1),t("span",is," ("+n(r.value.balance)+")",1)])])):(d(),m("span",rs,n(r.placeholder),1))]),option:Q(r=>[t("div",cs,[t("span",ds,n(r.option.label),1),t("span",us,n(r.option.balance),1)])]),_:1},8,["modelValue","options","filterFields","placeholder","virtualScrollerOptions"])])])}const vs=Z(ts,[["render",ms],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/transfer/components/MosaicInput.vue"]]),gs=be({__name:"SelectMultisigInput",props:{account:{type:Array,required:!0},selectedNode:{type:Object,required:!0}},emits:["node-select"],setup(s,{emit:a}){const u=c({}),e=o=>{a("node-select",o)},v=o=>{u.value[o.key]=!0},f=()=>{u.value={}};return(o,r)=>{const p=S("Tree");return d(),Je(p,{value:s.account,selectionMode:"single","onUpdate:selectionKeys":s.selectedNode,expandedKeys:u.value,filter:!0,filterMode:"strict",onNodeSelect:e,onNodeExpand:v,onNodeCollapse:f},null,8,["value","onUpdate:selectionKeys","expandedKeys"])}}}),fs=Z(gs,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/components/SelectMultisigInput.vue"]]),ps={props:["placeholder","errorMessage","icon","showError","modelValue","msgOpt","disabled","limit","remainingChar"],emits:["update:modelValue"],name:"TransferTextareaInput",setup(s){const u=ue().appContext.config.globalProperties.emitter,e=c(0),v=c(""),f=c("border border-gray-300"),o=c(!1);D(()=>s.remainingChar,h=>{e.value=h});const r=h=>{if(s.msgOpt=="regular")h.target.value.length>s.limit&&(h.returnValue=!1,h.preventDefault&&h.preventDefault());else{var C=h||window.event;if(C.type==="paste")P=C.clipboardData.getData("text/plain");else{var P=C.keyCode||C.which;P=String.fromCharCode(P)}var $=/[0-9A-Fa-f]|\./;(!$.test(P)||h.target.value.length>s.limit)&&(C.returnValue=!1,C.preventDefault&&C.preventDefault())}},p=()=>{o.value||(f.value="border-2 border-blue-primary")},x=()=>{f.value="border-2 border-gray-300",o.value=!1};return u.on("CLEAR_TEXTAREA",h=>{e.value=h}),u.on("CLEAR_TEXT",h=>{v.value=h,o.value=!1,f.value="border border-gray-300"}),{inputText:v,textErr:o,borderColor:f,countChar:r,remainingLength:e,clickInputText:p,blurInputText:x}}},bs={class:"rounded-md bg-white flex border"},hs=["value","disabled","placeholder"],_s=t("div",{class:"w-1 flex-none"},null,-1),ys={class:"float-right mt-1 text-tsm text-gray-800"},ws={class:"h-3 mb-2"},xs={key:0,class:"error error-text text-left"};function Ms(s,a,u,e,v,f){return d(),m("div",null,[t("div",bs,[t("textarea",{value:u.modelValue,disabled:u.disabled==1,onInput:a[0]||(a[0]=o=>{e.countChar(o),s.$emit("update:modelValue",o.target.value)}),rows:"2",class:"w-full text-gray-500 px-2 py-1 outline-none bg-white text-xs",placeholder:u.placeholder.toUpperCase(),onClick:a[1]||(a[1]=o=>e.clickInputText()),onBlur:a[2]||(a[2]=o=>e.blurInputText())},null,40,hs),_s]),t("div",ys,n(e.remainingLength)+"/"+n(u.limit),1),t("div",ws,[e.textErr||u.showError?(d(),m("div",xs,n(u.errorMessage),1)):_("v-if",!0)])])}const ks=Z(ps,[["render",Ms],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/transfer/components/TransferTextareaInput.vue"]]);async function As(s){return await ae.getAccInfo(s).then(u=>u.publicAccount)}const Cs=async(s,a,u,e,v,f,o,r,p)=>{if(!ae.verifyWalletPassword(M.currentLoggedInWallet.name,H.chainNetworkName,f))return!1;const h=H.currentNetworkProfile.generationHash;let C=I.networkType;const P=s;let $=parseFloat(a)*Math.pow(10,I.nativeToken.divisibility),W=[];$>0&&W.push(new k.Mosaic(new k.MosaicId(I.nativeToken.assetId),k.UInt64.fromUint(Number($)))),e.length>0&&e.forEach((b,E)=>{b.amount>0&&W.push(new k.Mosaic(new k.MosaicId(b.id),k.UInt64.fromUint(Number(b.amount*Math.pow(10,v[E])))))});let w=I.buildTxn,F,L;if(!r)F=M.currentLoggedInWallet.accounts.find(b=>b.publicKey===o);else{F=M.currentLoggedInWallet.accounts.find(E=>E.address===r);let b=o;L=k.PublicAccount.createFromPublicKey(b,C)}let J=ae.decryptPrivateKey(new k.Password(f),F.encrypted,F.iv),B;if(p){let b=await As(P);B=k.EncryptedMessage.create(u,b,J)}else B=k.PlainMessage.create(u);let O=w.transferBuilder().recipient(k.Address.createFromRawAddress(P)).mosaics(W).message(B).build();const T=k.Account.createFromPrivateKey(J,C,1);if(r){let b=M.currentLoggedInWallet.accounts.find(me=>me.address==r),E=ae.decryptPrivateKey(new k.Password(f),b.encrypted,b.iv),q=k.Account.createFromPrivateKey(E,C,1);const Y=[O.toAggregateV1(L)],Ce=w.aggregateBonded(Y),V=q.preV2Sign(Ce,h),ee=le.lockFundTx(V),ce=q.preV2Sign(ee,h);le.announceLF_AND_addAutoAnnounceABT(ce,V)}else{const b=T.preV2Sign(O,h);le.announceTransaction(b)}return!0},st="0".repeat(64),lt=k.PublicAccount.createFromPublicKey(st,I.networkType).address.plain(),at=(s,a)=>{let u=[];return parseInt(s)>0&&u.push(new k.Mosaic(new k.MosaicId(I.nativeToken.assetId),k.UInt64.fromUint(Number(s)))),a.length>0&&a.forEach((e,v)=>{parseInt(e.amount)>0&&u.push(new k.Mosaic(new k.MosaicId(e.id),k.UInt64.fromUint(Number(e.amount))))}),u},Is=(s,a,u)=>{let e=I.buildTxn,v=at(a,u),o=[e.transferBuilder().recipient(k.Address.createFromRawAddress(lt)).mosaics(v).message(k.PlainMessage.create(s)).build().toAggregateV1(k.PublicAccount.createFromPublicKey(st,I.networkType))],r=e.aggregateBondedBuilder().innerTransactions(o).build();return z.amountFormatterSimple(r.maxFee.compact(),I.nativeToken.divisibility)},Ts=(s,a,u)=>{let e=I.buildTxn,v=at(a,u),f=e.transferBuilder().recipient(k.Address.createFromRawAddress(lt)).mosaics(v).message(k.PlainMessage.create(s)).build();return z.amountFormatterSimple(f.maxFee.compact(),I.nativeToken.divisibility)},xe=jt({calculate_fee:Ts,calculate_aggregate_fee:Is}),Ss={name:"SignInModal",props:{toggleModal:Boolean,saveAddress:String},setup(s){const{t:a}=Ye(),e=ue().appContext.config.globalProperties.emitter,v=c(""),f=c(s.saveAddress),o=c(""),r=c(""),p=c(!0),x=c(!0),h=c(!1),C=y(()=>!(p.value&&v.value!="")),P=y(()=>!p.value&&f.value!=""),$=c(!1),W=async B=>{try{let O=await I.chainAPI.accountAPI.getAccountInfo(k.Address.createFromRawAddress(B));O.publicKey=="0000000000000000000000000000000000000000000000000000000000000000"?o.value=null:o.value=O.publicKey}catch{o.value=null}},w=async()=>{v.value!==""&&f.value!==""&&(M.currentLoggedInWallet.contacts.find(O=>O.name==v.value)?r.value=a("addressBook.nameExist"):(await W(f.value),M.currentLoggedInWallet.addAddressBook(new Dt(v.value,f.value,"-none-",o.value)),M.wallets.saveMyWalletOnlytoLocalStorage(M.currentLoggedInWallet),r.value="",h.value=!0))},F=()=>v.value="",L=()=>{e.emit("CLOSE_CONTACT_MODAL",!1)},J=()=>x.value=!1;return D(()=>s.saveAddress,()=>f.value=s.saveAddress),{err:r,contactName:v,address:f,disableSave:C,showAddErr:P,showNameErr:$,SaveContact:w,isAddContactQues:x,closeModal:L,proceed:J,clearInput:F,isSuccessAdded:h}},components:{TextInput:Qt}},Fs={key:0,class:"popup-outer fixed flex z-50",style:{top:"110px !important"}},Ns={class:"modal-popup-box"},Ls={class:"delete-position"},Es={key:0,class:"w-104"},Ps={class:"text-md text-center my-5"},$s={key:1,class:"w-104"},Vs={class:"default-title font-bold mt-4 text-center"},Bs={class:"w-full"},Os={key:0,class:"error error_box mb-5"},js={class:"mt-4 text-center"},Us=["disabled"],Ds=["disabled"],Ks={key:2,class:"w-104"},Rs={class:"text-md my-5"},Ws={key:0,class:"fixed inset-0 bg-opacity-90 bg-gray-100 z-20"};function Hs(s,a,u,e,v,f){const o=S("font-awesome-icon"),r=S("TextInput");return d(),m("div",null,[A($e,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:Q(()=>[u.toggleModal?(d(),m("div",Fs,[t("div",Ns,[t("div",Ls,[A(o,{icon:"times",class:"delete-icon-style",onClick:a[0]||(a[0]=p=>{e.isAddContactQues=!0,e.closeModal()})})]),e.isAddContactQues&&!e.isSuccessAdded?(d(),m("div",Es,[t("h1",Ps,n(s.$t("transfer.addContacts")),1),t("div",{type:"button",class:"blue-btn py-2 font-semibold cursor-pointer text-center ml-auto mr-auto w-7/12",onClick:a[1]||(a[1]=p=>e.proceed())},n(s.$t("general.yes")),1),t("div",{type:"button",class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:a[2]||(a[2]=p=>e.closeModal())},n(s.$t("general.no")),1)])):_("v-if",!0),!e.isAddContactQues&&!e.isSuccessAdded?(d(),m("div",$s,[t("h1",Vs,n(s.$t("transfer.addContacts")),1),t("form",{onSubmit:a[7]||(a[7]=Ut((...p)=>s.create&&s.create(...p),["prevent"])),class:"mt-4"},[t("fieldset",Bs,[e.err!=""?(d(),m("div",Os,n(e.err),1)):_("v-if",!0),A(r,{class:"mb-3",placeholder:s.$t("general.name"),errorMessage:s.$t("general.nameRequired"),modelValue:e.contactName,"onUpdate:modelValue":a[3]||(a[3]=p=>e.contactName=p),icon:"id-card-alt",showError:e.showNameErr},null,8,["placeholder","errorMessage","modelValue","showError"]),A(r,{placeholder:s.$t("general.address"),modelValue:e.address,"onUpdate:modelValue":a[4]||(a[4]=p=>e.address=p),icon:"wallet",showError:e.showAddErr,disabled:!0},null,8,["placeholder","modelValue","showError"]),t("div",js,[_(` <button type="button" class="default-btn mr-5 focus:outline-none" @click="clearInput()">
                    {{$t('signin.clear')}}
                  </button> `),t("button",{type:"submit",class:"blue-btn py-2 font-semibold cursor-pointer text-center ml-auto mr-auto w-7/12",disabled:e.disableSave,onClick:a[5]||(a[5]=p=>e.SaveContact())},n(s.$t("general.save")),9,Us),t("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",disabled:e.disableSave,onClick:a[6]||(a[6]=p=>e.isAddContactQues=!0)},n(s.$t("general.cancel")),9,Ds)])])],32)])):_("v-if",!0),e.isSuccessAdded?(d(),m("div",Ks,[t("h1",Rs,n(s.$t("transfer.successfullySaved",{name:e.contactName})),1)])):_("v-if",!0)])])):_("v-if",!0)]),_:1}),_(' <div @click="toggleModal = !toggleModal" v-if="toggleModal" class="fixed inset-0 bg-opacity-90 bg-blue-primary"></div> '),u.toggleModal?(d(),m("div",Ws)):_("v-if",!0)])}const qs=Z(Ss,[["render",Hs],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/transfer/components/AddContactModal.vue"]]),Xs={name:"ConfirmSendModal",props:["toggleModal"],setup(){const a=ue().appContext.config.globalProperties.emitter;return{closeConfirmModal:()=>{a.emit("CLOSE_CONFIRM_SEND_MODAL",!1)},proceedSend:()=>{a.emit("CONFIRM_PROCEED_SEND",!0)}}}},zs={key:0,class:"popup-outer fixed flex z-50"},Qs={class:"modal-popup-box"},Zs={class:"delete-position"},Gs={class:"w-92"},Js={class:"text-center"},Ys={class:"mt-3"};function el(s,a,u,e,v,f){const o=S("font-awesome-icon");return d(),m("div",null,[A($e,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:Q(()=>[u.toggleModal?(d(),m("div",zs,[t("div",Qs,[t("div",Zs,[A(o,{icon:"times",class:"delete-icon-style",onClick:a[0]||(a[0]=r=>{e.closeConfirmModal()})})]),t("div",Gs,[t("div",Js,n(s.$t("transfer.proceedWithZero")),1),t("div",Ys,[t("div",{onClick:a[1]||(a[1]=r=>e.proceedSend()),class:"blue-btn py-2 font-semibold cursor-pointer text-center ml-auto mr-auto w-7/12"},n(s.$t("general.confirm")),1),t("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:a[2]||(a[2]=r=>e.closeConfirmModal())},n(s.$t("general.cancel")),1)])])])])):_("v-if",!0)]),_:1}),u.toggleModal?(d(),m("div",{key:0,onClick:a[3]||(a[3]=r=>{e.closeConfirmModal()}),class:"fixed inset-0 bg-opacity-90 bg-gray-100 z-20"})):_("v-if",!0)])}const tl=Z(Xs,[["render",el],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/transfer/components/ConfirmSendModal.vue"]]),sl=be({name:"SelectInputAccount",emits:["select-account","update:modelValue"],props:["modelValue","selectDefault","initiateBy"],setup(s){const a=c(!1),e=ue().appContext.config.globalProperties.emitter;let v=new et("ThemeStyleConfig");v.init();let f=v.jdenticonConfig;const o=y(()=>{if(M.currentLoggedInWallet){var w=[];return M.currentLoggedInWallet.accounts.forEach(L=>{w.push({value:L.address,label:M.currentLoggedInWallet.convertAddressToName(L.address,!0),isMultiSig:!!L.getDirectParentMultisig().length})}),w.filter(L=>L.isMultiSig==!1)}else return[]}),r=c(!0),p=c(""),x=c(""),h={label:p.value,value:x.value},C=c(ke(x,25,f)),P=(w,F)=>{e.emit("select-account",F),p.value,h.label=w,x.value,h.value=F,C.value=ke(F,25,f),a.value=!a.value},$=c(""),W=y(()=>{const w=$.value.toLowerCase();return $.value==""?o.value:o.value.filter(F=>Object.values(F).some(L=>String(L).toLowerCase().includes(w)))});return{selectAccount:P,selectedAddress:x,selectedAccountInfo:h,selectedImg:C,accounts:o,toggleSelection:a,selectedAccount:p,jdenticonConfig:f,toSvg:ke,filterQuery:$,filteredAccounts:W,placeholder:r}}}),ll={class:"w-full"},al={key:0,class:"account-item-value account-item"},nl={class:"flex"},ol=["innerHTML"],il={class:"flex flex-col ml-2 text-left"},rl={key:0,class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}},cl={key:1,class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}},dl={key:2,class:"mt-2 text-base"},ul={class:"mt-2 text-base font-bold"},ml={class:"account-item"},vl={class:"flex"},gl=["innerHTML"],fl={class:"text-base ml-2 font-semibold"};function pl(s,a,u,e,v,f){const o=S("Dropdown");return d(),m("div",ll,[A(o,{modelValue:s.selectedAccountInfo,"onUpdate:modelValue":a[0]||(a[0]=r=>s.selectedAccountInfo=r),style:{width:"100%"},options:s.filteredAccounts,filter:!0,optionLabel:"label",emptyFilterMessage:" ",onChange:a[1]||(a[1]=r=>{s.selectAccount(r.value.label,r.value.value),s.$emit("update:modelValue",r.value.value),s.$emit("select-account",r.value.value),s.placeholder=!1}),class:"h-16 mt-0"},{value:Q(r=>[r.value?(d(),m("div",al,[t("div",nl,[t("div",{innerHTML:s.selectedImg},null,8,ol),t("div",il,[s.initiateBy?(d(),m("div",rl,n(s.$t("general.initiateBy")),1)):(d(),m("div",cl,n(s.$t("transfer.transferFrom"))+" OR Select Signing Account to initiate Multisig",1)),s.placeholder?(d(),m("div",dl,n(s.$t("general.selectAccount")),1)):_("v-if",!0),t("div",ul,n(r.value.label),1)])])])):_("v-if",!0)]),option:Q(r=>[t("div",ml,[t("div",vl,[t("div",{innerHTML:s.toSvg(r.option.value,20,s.jdenticonConfig)},null,8,gl),t("div",fl,n(r.option.label),1)])])]),_:1},8,["modelValue","options"])])}const bl=Z(sl,[["render",pl],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/components/SelectInputAccountTransfer.vue"]]),hl={class:"border border-gray-200 px-2 py-1 rounded-md"},_l={class:"flex flex-col"},yl={class:"uppercase font-light text-gray-500 text-txs text-left mb-2"},wl={class:"flex w-full"},xl={key:0,src:Be,class:"h-5 w-5 mt-0.5"},Ml=["value","data-maska","placeholder"],kl=be({__name:"TransferInputClean",props:{modelValue:{type:String,required:!0},decimal:{type:Number,required:!0},placeholder:{type:String,required:!0},toolTip:{type:String,required:!1},disabled:{type:Boolean,required:!1},showError:{type:Boolean,required:!1},logo:{type:Boolean,required:!1},balance:{type:Number,required:!1}},emits:["update:modelValue","show-error"],setup(s){const a=s,u=()=>{let v="0";return a.decimal>0&&(v=v+"."+"9".repeat(a.decimal)),v},e={preProcess:v=>v.replace(/,/g,""),postProcess:v=>{if(!v)return"";let f=0;return a.decimal>0&&(f=1+a.decimal-(v.includes(".")?v.length-v.indexOf("."):0)),Intl.NumberFormat("en-US",{minimumFractionDigits:a.decimal}).format(parseFloat(v)).slice(0,f?-f:void 0)}};return(v,f)=>{const o=tt("maska");return d(),m("div",{class:Kt(s.disabled?"opacity-50":"")},[t("div",hl,[t("div",_l,[t("div",yl,n(s.placeholder),1),t("div",wl,[s.logo?(d(),m("img",xl)):_("v-if",!0),Ee(t("input",{value:s.modelValue,class:"supply_input","data-maska":u(),"data-maska-tokens":"0:\\d:multiple|9:\\d:optional",placeholder:s.placeholder,onInput:f[0]||(f[0]=r=>v.$emit("update:modelValue",parseFloat(r.target.value.replace(/,/g,"")).toString()))},null,40,Ml),[[o,void 0,e]])])])])],2)}}});const Al=Z(kl,[["__scopeId","data-v-03ac6095"],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/transfer/components/TransferInputClean.vue"]]),Cl={class:"w-full h-16 mt-0 border border-gray-200 px-2 py-2 rounded-md"},Il={class:"flex"},Tl=["innerHTML"],Sl={class:"flex flex-col ml-2 text-left"},Fl={class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}},Nl={class:"mt-2 text-base font-bold"},Ll={class:"ml-auto mt-auto mb-auto mr-6"},El=be({__name:"MultisigInput",props:{selectDefaultAddress:{type:String,required:!0},selectDefaultName:{type:String,required:!0}},setup(s){const a=s,e=ue().appContext.config.globalProperties.emitter;let v=new et("ThemeStyleConfig");v.init();let f=c(v.jdenticonConfig);const o=y(()=>ke(a.selectDefaultAddress,25,f.value)),r=()=>{e.emit("CLOSE_MULTISIG")};return(p,x)=>{const h=S("font-awesome-icon");return d(),m("div",Cl,[t("div",Il,[t("div",{innerHTML:o.value},null,8,Tl),t("div",Sl,[t("div",Fl,n(p.$t("transfer.transferFrom"))+" "+n(p.$t("general.multisig")),1),t("div",Nl,n(s.selectDefaultName),1)]),t("div",Ll,[A(h,{icon:"times",class:"delete-icon-style",onClick:x[0]||(x[0]=C=>r())})])])])}}}),Pl=Z(El,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/components/MultisigInput.vue"]]),$l={key:0,class:"font-bold text-xs text-blue-primary uppercase"},Vl={key:1,class:"font-bold text-xs text-blue-primary uppercase"},Bl={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 text-gray-200 my-1"},Ol={class:"font-semibold text-xxs mt-2 lg:col-span-2 col-span-3 text-blue-primary uppercase"},jl=["innerHTML"],Ul={class:"flex"},Dl={class:"ml-1 text-blue-400 font-bold"},Kl=t("img",{src:Be,class:"ml-1 h-5 w-5 mt-0.5"},null,-1),Rl={key:2,class:"mt-2 grid bg-yellow-50 p-3 rounded-md"},Wl={class:"flex gap-2"},Hl=t("img",{src:Ae,class:"w-5 h-5"},null,-1),ql={class:"flex-cols"},Xl={class:"text-txs"},zl=["href"],Ql=t("img",{src:es,class:"w-3 h-3 ml-2 inline-block"},null,-1),Zl={key:3,class:"mt-2 grid bg-yellow-50 p-3 rounded-md"},Gl={class:"flex gap-2"},Jl=t("img",{src:Ae,class:"w-5 h-5"},null,-1),Yl={class:"text-txs"},ea={key:4,class:"mt-2 grid bg-yellow-50 p-3 rounded-md"},ta={class:"flex gap-2"},sa=t("img",{src:Ae,class:"w-5 h-5"},null,-1),la={class:"text-txs"},aa={key:5,class:"mt-2 bg-yellow-50 p-3 rounded-md mb-2"},na={class:"flex items-center gap-2"},oa=t("img",{src:Ae,class:"w-5 h-5"},null,-1),ia={class:"text-txs"},ra=t("div",{class:"border-b-2 border-gray-600 mt-2"},null,-1),ca={key:6,class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},da={class:"font-semibold lg:col-span-2 col-span-3"},ua={key:0,class:"lg:col-span-2 col-span-3 ml-auto"},ma={key:1,class:"lg:col-span-2 col-span-3 ml-auto"},va={class:"ml-1 text-blue-400"},ga={key:7},fa={key:0,class:"lg:col-span-4 col-span-6 ml-auto"},pa={key:1,class:"lg:col-span-4 col-span-6 ml-auto"},ba=["index"],ha={key:8,class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},_a={class:"font-semibold lg:col-span-2 col-span-3"},ya=["innerHTML"],wa={class:"ml-1 text-blue-400"},xa={key:9,class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},Ma={class:"font-semibold lg:col-span-2 col-span-3"},ka=["innerHTML"],Aa={class:"ml-1 text-blue-400"},Ca={key:10},Ia={key:0,class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},Ta={class:"font-semibold lg:col-span-2 col-span-3"},Sa=["innerHTML"],Fa={class:"ml-1 text-blue-400"},Na={key:1,class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},La={class:"font-semibold lg:col-span-2 col-span-3"},Ea=["innerHTML"],Pa={class:"ml-1 text-blue-400"},$a={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between border-gray-600 border-b items-center text-gray-200 text-xs py-2"},Va={class:"font-semibold lg:col-span-2 col-span-3"},Ba=["innerHTML"],Oa={class:"ml-1 text-blue-400"},ja={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between border-gray-600 text-white text-xs pt-3"},Ua={class:"font-bold uppercase lg:col-span-2 col-span-3"},Da=["innerHTML"],Ka={class:"ml-1 mt-0.5 text-blue-400"},Ra={key:0,class:"lg:col-span-4 col-span-6 ml-auto"},Wa={key:1,class:"lg:col-span-4 col-span-6 ml-auto"},Ha=["index"],qa={key:11},Xa={key:0},za={class:"font-bold text-xs text-blue-primary uppercase pt-3"},Qa={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 text-gray-200 my-1"},Za={class:"font-semibold text-xxs mt-2 lg:col-span-2 col-span-3 text-blue-primary uppercase"},Ga={class:"ml-auto font-bold lg:col-span-2 col-span-3"},Ja={class:"flex"},Ya={class:"ml-1 text-blue-400 font-bold"},en=t("img",{src:Be,class:"ml-1 h-5 w-5 mt-0.5"},null,-1),tn=t("div",{class:"border-b-2 border-gray-600 mt-2"},null,-1),sn={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},ln={class:"font-semibold lg:col-span-2 col-span-3"},an=["innerHTML"],nn={class:"ml-1 text-blue-400"},on={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},rn={class:"font-semibold lg:col-span-2 col-span-3"},cn=["innerHTML"],dn={class:"ml-1 text-blue-400"},un={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between border-gray-600 border-b items-center text-gray-200 text-xs py-2"},mn={class:"font-semibold lg:col-span-2 col-span-3"},vn=["innerHTML"],gn={class:"ml-1 text-blue-400"},fn={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between border-gray-600 text-white text-xs pt-3"},pn={class:"font-bold uppercase lg:col-span-2 col-span-3"},bn=["innerHTML"],hn={class:"ml-1 mt-0.5 text-blue-400"},_n=be({__name:"TransactionFeeDisplayTransfer",props:{transactionFee:{type:Number,required:!0},lockFundCurrency:{type:Number,required:!1},lockFundTxFee:{type:Number,required:!1},totalFeeFormatted:{type:String,required:!0},selectedAccAdd:{type:String,required:!0},balance:{type:String,required:!0},sendXPX:String,selectedMultisigAdd:{type:String,required:!1},checkCosignBalance:String,selectedMosaic:Object,mosaicsCreated:Object,assetRentalFeeCurrency:String,namespaceRentalFeeCurrency:String,fundStatus:Boolean,isMultisig:Boolean,isCosigner:Boolean,onPartial:Boolean,isMultisigAlready:Boolean,lockFundCurrencyConvert:String,lockFundTxFeeConvert:String,noNamespace:Boolean},setup(s){const a=y(()=>I.nativeToken.label),u=o=>{let r=o.toString().split(".");return r[1]!=null?'<span class="font-semibold text-sm">'+r[0]+'</span>.<span class="font-semibold text-xs">'+r[1]+"</span>":'<span class="font-semibold text-sm">'+r[0]+"</span>"},e=o=>{if(o.length<=7)return o;{let r=o.slice(0,3),p=o.slice(-4);return r+"..."+p}},v=y(()=>f.value==168&&H.chainNetworkName=="Sirius Testnet 1"?"https://bctestnetfaucet.xpxsirius.io/#/":f.value==168&&H.chainNetworkName=="Sirius Testnet 2"?"https://bctestnet2faucet.xpxsirius.io/#/":""),f=y(()=>I.networkType);return(o,r)=>(d(),m(Me,null,[s.selectedMultisigAdd.length==0?(d(),m("div",$l,n(o.$t("general.signerAcc")),1)):(d(),m("div",Vl,n(o.$t("general.multisigAcc")),1)),t("div",Bl,[t("div",Ol,n(o.$t("general.currentBalance")),1),t("span",{class:"ml-auto lg:col-span-2 col-span-3",innerHTML:u(s.balance)},null,8,jl),t("div",Ul,[t("div",Dl,n(a.value),1),Kl])]),s.fundStatus?(d(),m("div",Rl,[t("div",Wl,[Hl,t("div",ql,[t("div",Xl,n(o.$t("general.insufficientBalanceWarning",{tokenName:a.value})),1),f.value==168?(d(),m("a",{key:0,class:"text-xs text-blue-primary font-semibold underline",href:v.value,target:"_blank"},[Ve(n(o.$t("general.topUp",{tokenName:a.value})),1),Ql],8,zl)):_("v-if",!0)])])])):_("v-if",!0),s.onPartial?(d(),m("div",Zl,[t("div",Gl,[Jl,t("div",Yl,n(o.$t("general.hasPartial")),1)])])):_("v-if",!0),s.isMultisigAlready?(d(),m("div",ea,[t("div",ta,[sa,t("div",la,n(o.$t("multisig.alreadyMultisig")),1)])])):_("v-if",!0),s.noNamespace?(d(),m("div",aa,[t("div",na,[oa,t("div",ia,n(o.$t("namespace.noNamespace")),1)])])):_("v-if",!0),ra,s.sendXPX?(d(),m("div",ca,[t("div",da,n(o.$t("transfer.transferAmount")),1),isNaN(parseFloat(s.sendXPX))?(d(),m("div",ua,"0")):(d(),m("div",ma,n(s.sendXPX),1)),t("div",va,n(a.value),1)])):_("v-if",!0),s.selectedMultisigAdd.length>0&&s.selectedMosaic?(d(),m("div",ga,[(d(!0),m(Me,null,Pe(s.mosaicsCreated,(p,x)=>(d(),m("div",{class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs",key:x},[isNaN(parseFloat(s.selectedMosaic[x].amount))?(d(),m("div",fa,"0")):(d(),m("div",pa,n(s.selectedMosaic[x].amount),1)),t("div",{class:"ml-1 text-blue-400",index:x},n(e(s.selectedMosaic[x].namespace)),9,ba)]))),128))])):_("v-if",!0),s.assetRentalFeeCurrency?(d(),m("div",ha,[t("div",_a,n(o.$t("general.assetRentalFee")),1),t("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:u(s.assetRentalFeeCurrency)},null,8,ya),t("div",wa,n(a.value),1)])):_("v-if",!0),s.namespaceRentalFeeCurrency?(d(),m("div",xa,[t("div",Ma,n(o.$t("general.namespacerentalFee")),1),t("div",{class:"ml-auto lg:col-span-2 col-span-3",innerHTML:u(s.namespaceRentalFeeCurrency)},null,8,ka),t("div",Aa,n(a.value),1)])):_("v-if",!0),s.selectedMultisigAdd.length==0?(d(),m("div",Ca,[s.lockFundCurrencyConvert?(d(),m("div",Ia,[t("div",Ta,n(o.$t("general.lockFund")),1),t("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:u(s.lockFundCurrencyConvert)},null,8,Sa),t("div",Fa,n(a.value),1)])):_("v-if",!0),s.lockFundTxFeeConvert?(d(),m("div",Na,[t("div",La,n(o.$t("general.lockFundTxFee")),1),t("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:u(s.lockFundTxFeeConvert)},null,8,Ea),t("div",Pa,n(a.value),1)])):_("v-if",!0),t("div",$a,[t("div",Va,n(o.$t("general.transactionFee")),1),t("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:u(s.transactionFee)},null,8,Ba),t("div",Oa,n(a.value),1)]),t("div",ja,[t("div",Ua,n(o.$t("general.total")),1),t("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:u(s.totalFeeFormatted)},null,8,Da),t("div",Ka,n(a.value),1)]),(d(!0),m(Me,null,Pe(s.mosaicsCreated,(p,x)=>(d(),m("div",{class:"lg:grid lg:grid-cols-5 grid grid-cols-7 text-white text-xs",key:x},[isNaN(parseFloat(s.selectedMosaic[x].amount))?(d(),m("div",Ra,"0")):(d(),m("div",Wa,n(s.selectedMosaic[x].amount),1)),t("div",{class:"ml-1 text-blue-400",index:x},n(e(s.selectedMosaic[x].namespace)),9,Ha)]))),128))])):(d(),m("div",qa,[s.selectedMultisigAdd.length>0?(d(),m("div",Xa,[t("div",za,n(o.$t("general.signerAcc")),1),t("div",Qa,[t("div",Za,n(o.$t("general.currentBalance")),1),t("span",Ga,n(s.checkCosignBalance),1),t("div",Ja,[t("div",Ya,n(a.value),1),en])]),tn,t("div",sn,[t("div",ln,n(o.$t("general.aggregateFee")),1),t("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:u(s.transactionFee)},null,8,an),t("div",nn,n(a.value),1)]),t("div",on,[t("div",rn,n(o.$t("general.lockFund")),1),t("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:u(s.lockFundCurrency??0)},null,8,cn),t("div",dn,n(a.value),1)]),t("div",un,[t("div",mn,n(o.$t("general.lockFundTxFee")),1),t("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:u(s.lockFundTxFee??0)},null,8,vn),t("div",gn,n(a.value),1)]),t("div",fn,[t("div",pn,n(o.$t("general.total")),1),t("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:u(s.totalFeeFormatted)},null,8,bn),t("div",hn,n(a.value),1)])])):_("v-if",!0)]))],64))}}),yn=Z(_n,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/services/components/TransactionFeeDisplayTransfer.vue"]]);const wn={name:"ViewTransferCreate",components:{AddressInputClean:Jt,SelectInputAccountTransfer:bl,SelectAccountAndContact:Gt,TransferInputClean:Al,TransferTextareaInput:ks,PasswordInput:zt,AddContactModal:qs,ConfirmSendModal:tl,MosaicInput:vs,TransactionFeeDisplayTransfer:yn,SelectMultisigInput:fs,MultisigInput:Pl},setup(){const s=Rt(),a=y(()=>I.nativeToken.label),u=c(!1),e=c(!1),{t:v}=Ye(),o=ue().appContext.config.globalProperties.emitter,r=c(!1),p=c([]),x=c("0"),h=c(""),C=c({}),P=c({}),$=c(),W=c("regular"),w=c(""),F=c(""),L=c(""),J=c(!1),B=c(""),O=c(!1),T=c([]),b=c([]),E=c([]),q=c([]),Y=c([]),Ce=c([]),V=c("0"),ee=c(!0),ce=c(!1),me=c(!1),ne=c(""),ot=M.currentLoggedInWallet,K=c(!1),it=y(()=>K.value),Oe=y(()=>K.value),rt=y(()=>K.value),ct=y(()=>K.value),dt=y(()=>K.value),ut=y(()=>K.value),mt=y(()=>K.value),Ie=c(!1),vt=c(""),gt=I.networkType,ft=y(()=>Wt.buildAPIEndpoint(H.selectedAPIEndpoint,H.currentNetworkProfile.httpPort)),pt=M.currentLoggedInWallet?M.currentLoggedInWallet.name:"",bt=y(()=>H.currentNetworkProfile.network.currency.name),Te=y(()=>z.convertToExact(H.currentNetworkProfileConfig.lockedFundsPerAggregate,I.nativeToken.divisibility)),ht=y(()=>z.convertToCurrency(H.currentNetworkProfileConfig.lockedFundsPerAggregate,I.nativeToken.divisibility)),he=y(()=>H.currentNetworkProfile?z.convertToExact(le.getLockFundFee(),I.nativeToken.divisibility):0),Se=y(()=>Te.value+he.value),oe=y(()=>H.currentNetworkProfileConfig.maxMessageSize-1),_t="^[0-9A-Za-z]{40}$",yt="^[0-9A-Za-z-]{46}$",te=c(0),G=c(!0),wt="^[^ ]{8,}$",xt=c(!1),se=c(!1),ve=c(""),j=c(""),de=c(""),_e=c(""),U=c(""),ge=c(""),Fe=c(""),Mt=y(()=>!!U.value),je=c([]),ye=y(()=>{if(!M.currentLoggedInWallet)return[];let l=M.currentLoggedInWallet.accounts.map(g=>({name:g.name,balance:g.balance,address:g.address,publicKey:g.publicKey,isMultisig:!!g.getDirectParentMultisig().length})),i=M.currentLoggedInWallet.others.filter(g=>g.type==="MULTISIG").map(g=>({name:g.name,balance:g.balance,address:g.address,publicKey:g.publicKey,isMultisig:!0}));return l.concat(i)}),ie=c(U.value?xe.calculate_aggregate_fee(w.value,V.value,T.value):xe.calculate_fee(w.value,V.value,T.value)),Ue=y(()=>{let l=Le(ne.value)?Le(ne.value).balance:0;return z.toCurrencyFormat(l)}),fe=c(0),kt=y(()=>ye.value.length>1),De=y(()=>{if(!M.currentLoggedInWallet)return[];const l=M.currentLoggedInWallet;var i=[],g=0;return i.push({key:"0",label:v("general.ownerAcc"),selectable:!1,children:[]}),ye.value.forEach(N=>{i[0].children.push({key:"0-"+g.toString(),label:N.name,data:k.Address.createFromRawAddress(N.address).pretty()}),g++}),g=0,i.push({key:"1",label:v("general.contact"),selectable:!1,children:[]}),l.contacts!=null&&l.contacts.forEach(N=>{i[1].children.push({key:"1-"+g.toString(),label:N.name,data:k.Address.createFromRawAddress(N.address).pretty()}),g++}),i}),Ke=y(()=>{const l=M.currentLoggedInWallet;if(!l)return[];let i=l.accounts.find(X=>X.address==j.value);if(!i)return[];var N=i.multisigInfo.filter(X=>X.level<0).map((X,Ot)=>({key:Ot.toString(),label:l.contacts.find(re=>re.address==ae.createAddressFromPublicKey(X.publicKey,I.networkType).plain())?l.contacts.find(re=>re.address==ae.createAddressFromPublicKey(X.publicKey,I.networkType).plain()).name:l.accounts.find(re=>re.publicKey==X.publicKey)?l.accounts.find(re=>re.publicKey==X.publicKey).name:"MULTISIG-"+ae.createAddressFromPublicKey(X.publicKey,I.networkType).plain().slice(-4),data:X.publicKey,selectable:!0}));return N}),At=y(()=>Ke.value.length!=0),Ct=l=>{Re(),u.value=!1,h.value=l.data,C.value[l.key]=!0,l.selectable=!1},It=l=>{e.value=!1,U.value=ae.createAddressFromPublicKey(l.data,I.networkType).plain(),_e.value=l.label,ge.value=l.data,ne.value=j.value,P.value[l.key]=!0},Re=()=>{Object.keys(C.value).length!==0&&($.value=Object.keys(C.value)[0].split("-"),De.value[$.value[0]].children[$.value[1]].selectable=!0,C.value={})};let We=async()=>{let l=await Yt.scanAsset(de.value);l.length>0?fe.value=l[0].amount:fe.value=0;let i=l.slice(1);je.value=i.map((g,N)=>({val:g.id,balance:z.toCurrencyFormat(g.amount,g.divisibility),label:g.label,id:N+1,divisibility:g.divisibility,disabled:!1}))};const Ne=()=>{x.value="0",F.value="",h.value="",ee.value=!0,w.value="",V.value="0",o.emit("CLEAR_SELECT",0),T.value=[],b.value=[],q.value=[],Y.value=[],r.value=!1},Tt=()=>{w.value="",o.emit("CLEAR_TEXTAREA",0)},St=l=>{h.value=l},He=async()=>{if(V.value=="0"&&!me.value)ce.value=!0;else{let l;U.value&&(l=ne.value),await Cs(h.value.toUpperCase(),V.value,w.value,T.value,Y.value,F.value,de.value,l,B.value)?(L.value="",Ge.checkAvailableContact(h.value)?(s.push({name:"ViewAccountPendingTransactions",params:{address:j.value}}),Ne()):O.value=!0,me.value=!1):L.value=v("general.walletPasswordInvalid",{name:M.currentLoggedInWallet.name})}},Ft=y(()=>{if(Oe.value)return!0;{let l;return M.currentLoggedInWallet?l=M.currentLoggedInWallet.accounts.find(i=>i.name==ve.value)||M.currentLoggedInWallet.others.find(i=>i.name==ve.value):l=void 0,l!=null&&l.assets!=null?l.assets.length==0||b.value.length==R.value.length:!0}}),qe=l=>isNaN(parseFloat(l))?0:parseFloat(l),Xe=y(()=>{let l=I.nativeToken.divisibility;return U.value?l==0?Math.trunc(parseFloat(ie.value)+he.value+Te.value):Math.round((parseFloat(ie.value)+he.value+Te.value)*Math.pow(10,l))/Math.pow(10,l):l==0?Math.trunc(qe(parseFloat(V.value.replace(/,/g,"")))+parseFloat(ie.value)):Math.round((qe(parseFloat(V.value.replace(/,/g,"")))+parseFloat(ie.value))*Math.pow(10,l))/Math.pow(10,l)}),ze=y(()=>j.value?U.value?V.value>fe.value||!p.value.every(l=>l==!1):Xe.value>fe.value||!p.value.every(l=>l==!1):!1),Nt=y(()=>!(F.value.match(wt)&&!G.value&&h.value.length>0&&p.value.every(l=>l==!1)&&!ze.value&&!se.value)),R=y(()=>je.value);for(let l=0;l<R.value.length;l++)p.value.push(!1);const Lt=()=>{b.value.push(0),T.value.push({id:0,amount:"0",namespace:""})},Et=async l=>{let i=await I.chainAPI.assetAPI.getMosaicsNames([new k.MosaicId(l)]);Fe.value=i[0].names[0]?i[0].names[0].name:void 0},Pt=l=>{let i=R.value.find(g=>g.val==T.value[l.index].id);for(let g in R.value)R.value[g].disabled=!1;R.value.forEach(g=>T.value.some(N=>{g.val==N.id&&(g.disabled=!0)})),Et(i.val),T.value[l.index].namespace=Fe.value?Fe.value:i.val,T.value[l.index].amount="0",Y.value[l.index]=i.divisibility,o.emit("CLOSE_MOSAIC_INSUFFICIENT_ERR",!1)},$t=l=>{T.value[l.index]!=null&&T.value[l.index].id!=0&&(R.value[R.value.findIndex(i=>i.val===T.value[l.index].id)].disabled=!1),T.value.splice(l.index,1),p.value.splice(l.index,1),Y.value.splice(l.index,1),b.value.splice(l.index,1)},Vt=l=>{let g=(M.currentLoggedInWallet.accounts.find(N=>N.address===j.value)||M.currentLoggedInWallet.others.find(N=>N.address===j.value)).assets.find(N=>N.idHex==R.value[l].val);return g!=null?g.amount:0};D(j,()=>{U.value="",_e.value=""}),D([j,U],()=>{const l=Le(j.value);U.value?de.value=ge.value:de.value=l?l.publicKey:"",We(),pe(),p.value=[];for(let i=0;i<R.value.length;i++)p.value.push(!1);if(U.value){const i=ot.accounts.find(g=>g.address==j.value);i&&(ne.value=i.address),parseFloat(Ue.value.replace(/,/g,""))<Se.value?K.value=!0:K.value=!1}else K.value=!1}),D(ge,()=>{de.value=ge.value}),D(ne,(l,i)=>{l!=i&&(ye.value.find(g=>g.address==l).balance<Se.value+Number(ie.value)?(Ie.value=!0,K.value=!0):(Ie.value=!1,K.value=!1))}),D(h,l=>{we(l),l.length==40||l.length==46?(we(l),Qe()):G.value=!0});const Qe=()=>{if(M.currentLoggedInWallet)try{let l=z.createAddress(h.value);z.checkAddressNetwork(l,gt)?(we(h.value),G.value=!1):G.value=!0}catch{try{let i=z.createNamespaceId(h.value);Ze(i).then(g=>{h.value=g.plain(),G.value=!1,we(h.value)}).catch(g=>{G.value=!0})}catch{G.value=!0}}},we=l=>{l.match(yt)||l.match(_t)?Ge.verifyPublicKey(h.value).then(i=>ee.value=i).catch(i=>ee.value=!0):(ee.value=!0,G.value=!0)},Ze=async l=>await Zt.getLinkedAddress(l,ft.value),pe=()=>{ie.value=U.value?xe.calculate_aggregate_fee(w.value,V.value,T.value):xe.calculate_fee(w.value,V.value,T.value)};D(ve,(l,i)=>{l!=i&&(Re(),h.value="",pe())}),D(V,(l,i)=>{l!=i&&pe()}),D(w,(l,i)=>{l!=i&&(pe(),B.value&&w.value?te.value=le.getFakeEncryptedMessageSize(w.value):te.value=le.getPlainMessageSize(w.value),w.value.length>oe.value||te.value>oe.value?se.value=!0:se.value=!1)});const Bt=l=>{let i=R.value.find(g=>g.val==l);return i?parseFloat(i.balance.replace(/,/g,"")):0};return D(ee,l=>{l||(B.value="")}),D(B,l=>{l?w.value&&(te.value=le.getFakeEncryptedMessageSize(w.value),w.value.length>oe.value||te.value>oe.value?se.value=!0:se.value=!1):(te.value=le.getPlainMessageSize(w.value),w.value.length>oe.value||te.value>oe.value?se.value=!0:se.value=!1)}),D(()=>[...T.value],l=>{pe();for(let i=0;i<l.length;i++)l[i].amount>Bt(l[i].id)?p.value[i]=!0:p.value[i]=!1},{deep:!0}),o.on("CLOSE_MULTISIG",()=>{U.value="",_e.value=""}),o.on("CLOSE_CONTACT_MODAL",l=>{O.value=l,s.push({name:"ViewAccountPendingTransactions",params:{address:j.value}}),Ne()}),o.on("select-account",l=>{ve.value=M.currentLoggedInWallet.accounts.find(i=>i.address==l)?M.currentLoggedInWallet.accounts.find(i=>i.address==l).name:M.currentLoggedInWallet.others.find(i=>i.address==l).name,j.value=l,T.value=[],b.value=[],q.value=[],Y.value=[]}),o.on("CLOSE_CONFIRM_SEND_MODAL",l=>{ce.value=l}),o.on("CONFIRM_PROCEED_SEND",l=>{l&&(me.value=l,ce.value=!1,He())}),{showAssetBalanceErr:p,totalFee:Xe,contacts:De,onNodeSelect:Ct,selectedNode:C,toggleContact:u,moreThanOneAccount:kt,showMenu:J,selectedAccName:ve,selectedAccAdd:j,showAddressError:G,balance:fe,showBalanceErr:ze,err:L,recipientInput:h,namespace:vt,sendXPX:V,messageText:w,msgOption:W,showContactSelection:r,selectContact:x,walletPassword:F,disableCreate:Nt,clearInput:Ne,showPasswdError:xt,updateAdd:St,addMosaicsButton:Ft,clearMsg:Tt,accounts:ye,encryptedMsgDisable:ee,encryptedMsg:B,makeTransfer:He,togglaAddContact:O,displayMosaicsOption:Lt,selectedMosaic:T,mosaicsCreated:b,mosaicsSelected:E,mosaics:R,selectedMosaicAmount:q,getSelectedMosaicBalance:Vt,mosaicSupplyDivisibility:Y,updateMosaic:Pt,currentlySelectedMosaic:Ce,removeMosaic:$t,toggleConfirm:ce,effectiveFee:ie,cosignAddress:ne,disableRecipient:it,checkRecipient:Qe,disableSupply:Oe,disableRegularMsg:rt,disableHexMsg:ct,disableEncryptMsg:dt,disableMsgInput:ut,disablePassword:mt,cosignerBalanceInsufficient:Ie,messageLimit:oe,remainingChar:te,lockFundCurrency:ht,currencyName:bt,lockFundTxFee:he,lockFundTotalFee:Se,walletName:pt,checkNamespace:Ze,currentNativeTokenName:a,showLimitErr:se,checkCosignBalance:Ue,displayAssetId:l=>{let i=l.toString(),g=i.slice(0,3),N=i.slice(-4);return g+"..."+N},toggleMultisig:e,selectedNodeMultisig:P,selectedAccPublicKey:de,selectedMultisigName:_e,selectedMultisigAdd:U,selectedMultisigPublicKey:ge,selectableMultisig:Ke,onNodeSelectMultisig:It,scanDistributorAsset:We,haveSelectableMultisig:At,initiateBy:Mt}}},nt=s=>(qt("data-v-78445887"),s=s(),Xt(),s),xn={class:"w-10/12 ml-auto mr-auto mt-5"},Mn={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},kn={class:"xl:col-span-2 p-12"},An={class:"text-sm font-semibold"},Cn={key:0,class:"error error_box mb-5"},In={key:1,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},Tn={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},Sn={class:"inline-block text-xs"},Fn=nt(()=>t("div",{class:"mt-4"},null,-1)),Nn={class:"flex gap-1"},Ln={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},En={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},Pn={key:2,class:"error text-tsm text-left mt-2 mb-5 ml-4"},$n={key:3,class:"mt-3"},Vn={class:"flex mt-3 gap-1"},Bn={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},On={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},jn=["disabled"],Un={key:4,class:"mb-5"},Dn=["disabled"],Kn={for:"encryptedMsg",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},Rn={class:"bg-navy-primary py-6 px-6 xl:col-span-1"},Wn=nt(()=>t("div",{class:"mt-5"},null,-1)),Hn={class:"font-semibold text-xs text-white mb-1.5"},qn=["disabled"],Xn={class:"text-center"};function zn(s,a,u,e,v,f){const o=S("AddContactModal"),r=S("ConfirmSendModal"),p=S("font-awesome-icon"),x=S("SelectInputAccountTransfer"),h=S("SelectMultisigInput"),C=S("Sidebar"),P=S("MultisigInput"),$=S("AddressInputClean"),W=S("SelectAccountAndContact"),w=S("MosaicInput"),F=S("TransferInputClean"),L=S("TransferTextareaInput"),J=S("TransactionFeeDisplayTransfer"),B=S("PasswordInput"),O=S("router-link"),T=tt("debounce");return d(),m("div",null,[A(o,{toggleModal:e.togglaAddContact,saveAddress:e.recipientInput},null,8,["toggleModal","saveAddress"]),A(r,{toggleModal:e.toggleConfirm},null,8,["toggleModal"]),t("div",xn,[t("div",Mn,[t("div",kn,[t("div",An,n(s.$t("transfer.newTransfer")),1),e.err!=""?(d(),m("div",Cn,n(e.err),1)):_("v-if",!0),e.showBalanceErr?(d(),m("div",In,[t("div",Tn,[A(p,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),t("div",Sn,n(s.$t("general.insufficientBalance")),1)])):_("v-if",!0),Fn,t("div",Nn,[A(x,{modelValue:e.selectedAccAdd,"onUpdate:modelValue":a[0]||(a[0]=b=>e.selectedAccAdd=b),initiateBy:e.initiateBy},null,8,["modelValue","initiateBy"]),e.haveSelectableMultisig?(d(),m("div",{key:0,onClick:a[1]||(a[1]=b=>e.toggleMultisig=!e.toggleMultisig),class:"border rounded-md cursor-pointer flex flex-col justify-around p-2 h-16 w-18 mt-auto"},[A(p,{icon:"id-card-alt",class:"text-blue-primary ml-auto mr-auto"}),t("div",Ln,n(s.$t("general.select")),1),t("div",En,n(s.$t("general.multisig")),1)])):_("v-if",!0)]),_(" Pop Up when select icon is clicked "),A(C,{visible:e.toggleMultisig,"onUpdate:visible":a[3]||(a[3]=b=>e.toggleMultisig=b),baseZIndex:1e4,position:"full"},{default:Q(()=>[A(h,{account:e.selectableMultisig,selectedNode:e.selectedNodeMultisig,onNodeSelect:a[2]||(a[2]=b=>e.onNodeSelectMultisig(b))},null,8,["account","selectedNode"])]),_:1},8,["visible"]),e.cosignerBalanceInsufficient?(d(),m("div",Pn,n(s.$t("general.insufficientBalance")),1)):_("v-if",!0),e.selectedMultisigAdd?(d(),m("div",$n,[A(P,{"select-default-address":e.selectedMultisigAdd,"select-default-name":e.selectedMultisigName},null,8,["select-default-address","select-default-name"])])):_("v-if",!0),t("div",Vn,[Ee(A($,{placeholder:s.$t("transfer.transferPlaceholder"),modelValue:e.recipientInput,"onUpdate:modelValue":a[4]||(a[4]=b=>e.recipientInput=b),showError:e.showAddressError,disabled:e.disableRecipient},null,8,["placeholder","modelValue","showError","disabled"]),[[T,e.checkRecipient,"1000"]]),t("div",{onClick:a[5]||(a[5]=b=>e.toggleContact=!e.toggleContact),class:"border rounded-md cursor-pointer flex flex-col justify-around p-2 h-16 w-18"},[A(p,{icon:"id-card-alt",class:"text-blue-primary ml-auto mr-auto"}),t("div",Bn,n(s.$t("general.select")),1),t("div",On,n(s.$t("general.contact")),1)])]),_(" Pop Up when select icon is clicked "),A(C,{visible:e.toggleContact,"onUpdate:visible":a[6]||(a[6]=b=>e.toggleContact=b),baseZIndex:1e4,position:"full"},{default:Q(()=>[A(W,{contacts:e.contacts,selectedNode:e.selectedNode,onNodeSelect:e.onNodeSelect},null,8,["contacts","selectedNode","onNodeSelect"])]),_:1},8,["visible"]),(d(!0),m(Me,null,Pe(e.mosaicsCreated,(b,E)=>(d(),m("div",{key:E},[A(w,{placeholder:s.$t("transfer.selectAsset"),errorMessage:"",modelValue:e.selectedMosaic[E].id,"onUpdate:modelValue":q=>e.selectedMosaic[E].id=q,index:E,options:e.mosaics,disableOptions:e.selectedMosaic,onShowMosaicSelection:e.updateMosaic,onRemoveMosaicSelected:e.removeMosaic},null,8,["placeholder","modelValue","onUpdate:modelValue","index","options","disableOptions","onShowMosaicSelection","onRemoveMosaicSelected"]),e.selectedMosaic[E].id!=0?(d(),Je(F,{key:0,modelValue:e.selectedMosaic[E].amount,"onUpdate:modelValue":q=>e.selectedMosaic[E].amount=q,placeholder:s.$t("transfer.assetAmount"),type:"text",showError:e.showAssetBalanceErr[E],decimal:e.mosaicSupplyDivisibility[E]},null,8,["modelValue","onUpdate:modelValue","placeholder","showError","decimal"])):_("v-if",!0)]))),128)),t("div",null,[t("button",{class:"my-2 font-semibold text-xs text-blue-primary outline-none focus:outline-none disabled:opacity-50",disabled:e.addMosaicsButton||e.mosaics.length==0,onClick:a[7]||(a[7]=(...b)=>e.displayMosaicsOption&&e.displayMosaicsOption(...b))}," + "+n(s.$t("transfer.addAssets")),9,jn)]),A(F,{modelValue:e.sendXPX,"onUpdate:modelValue":a[8]||(a[8]=b=>e.sendXPX=b),balance:Number(e.balance),placeholder:s.$t("transfer.transferAmount"),logo:!0,type:"text",showError:e.showBalanceErr,decimal:6,disabled:e.disableSupply},null,8,["modelValue","balance","placeholder","showError","disabled"]),A(L,{class:"pt-4",placeholder:s.$t("general.message"),errorMessage:s.$t("general.limitExceed"),modelValue:e.messageText,"onUpdate:modelValue":a[9]||(a[9]=b=>e.messageText=b),remainingChar:e.remainingChar,showError:e.showLimitErr,limit:e.messageLimit,icon:"comment",msgOpt:e.msgOption,disabled:e.disableMsgInput},null,8,["placeholder","errorMessage","modelValue","remainingChar","showError","limit","msgOpt","disabled"]),e.encryptedMsgDisable?_("v-if",!0):(d(),m("div",Un,[Ee(t("input",{id:"encryptedMsg",type:"checkbox",value:"encryptedMsg","onUpdate:modelValue":a[10]||(a[10]=b=>e.encryptedMsg=b),disabled:e.disableEncryptMsg==1},null,8,Dn),[[Ht,e.encryptedMsg]]),t("label",Kn,n(s.$t("transfer.enableEncryption")),1)]))]),t("div",Rn,[A(J,{"send-x-p-x":e.sendXPX,"selected-mosaic":e.selectedMosaic,"mosaics-created":e.mosaicsCreated,"transaction-fee":e.effectiveFee,"total-fee-formatted":String(e.totalFee),"selected-multisig-add":e.selectedMultisigAdd,"check-cosign-balance":e.checkCosignBalance,"lock-fund-currency":e.lockFundCurrency,"lock-fund-tx-fee":e.lockFundTxFee,balance:String(e.balance),"selected-acc-add":e.selectedAccAdd},null,8,["send-x-p-x","selected-mosaic","mosaics-created","transaction-fee","total-fee-formatted","selected-multisig-add","check-cosign-balance","lock-fund-currency","lock-fund-tx-fee","balance","selected-acc-add"]),Wn,t("div",Hn,n(s.$t("general.enterPasswordContinue")),1),A(B,{placeholder:s.$t("general.enterPassword"),errorMessage:s.$t("general.passwordRequired"),showError:e.showPasswdError,modelValue:e.walletPassword,"onUpdate:modelValue":a[11]||(a[11]=b=>e.walletPassword=b),icon:"lock",class:"mt-5 mb-3",disabled:e.disablePassword},null,8,["placeholder","errorMessage","showError","modelValue","disabled"]),t("button",{type:"submit",class:"w-full blue-btn px-3 py-3 disabled:opacity-50 disabled:cursor-auto",disabled:e.disableCreate,onClick:a[12]||(a[12]=b=>e.makeTransfer())},n(s.$t("general.transfer")),9,qn),t("div",Xn,[A(O,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white underline"},{default:Q(()=>[Ve(n(s.$t("general.cancel")),1)]),_:1})])])])])])}const co=Z(wn,[["render",zn],["__scopeId","data-v-78445887"],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/transfer/views/ViewTransferCreate.vue"]]);export{co as default};
