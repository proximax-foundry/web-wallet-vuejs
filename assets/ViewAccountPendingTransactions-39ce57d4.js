import{d as Q,H as s,c as u,w as d,r as m,I as w,K as i,a as g,G as S,af as O,k as R,o as V,b as W,e as p,s as c,z as _,B as b,A as D,X as E}from"./index-50355987.js";import{A as N,_ as M}from"./AccountTabs.vue_vue_type_script_setup_true_lang-9a59e31a.js";import{_ as U}from"./PendingDataTable.vue_vue_type_script_setup_true_lang-241b26d8.js";import"./jdenticon-module-4ad48b04.js";import"./functions-1fb91649.js";import"./TextInput-5db56c58.js";import"./TextInputClean-c42dd765.js";import"./icon-key-5b3f7dda.js";import"./icon-message-e27d55b6.js";import"./icon-proximax-logo-gray-c2486ce1.js";import"./column.esm-5fec6136.js";const z={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},G={class:"flex my-2 gap-5 flex-none text-xs md:text-sm"},K=p("div",{class:"border rounded-md text-white py-2 px-5",style:{background:"#f3a91d"}},"Pending",-1),ne=Q({__name:"ViewAccountPendingTransactions",props:{address:String},setup(r){const l=r;let A=s.createTransactionFieldOrder(s.getQueryParamOrder_v2().DESC,s.getTransactionSortField().BLOCK);const n=u(()=>{if(!d.currentLoggedInWallet)return null;let e=d.currentLoggedInWallet.accounts.find(a=>a.address==l.address)||d.currentLoggedInWallet.others.find(a=>a.address==l.address);return e||null}),f=m([]),T=m([]),x=m([]),C=u(()=>f.value.concat(x.value).concat(T.value));let h=new w(d.currentLoggedInWallet,n.value),v=s.getTransactionGroupType(),I=async()=>{if(!n.value)return;let e=s.createTransactionQueryParams();e.pageSize=1,e.address=n.value.address,e.embedded=!0,e.updateFieldOrder(A);let a=await h.searchTxns(v.UNCONFIRMED,e),t=await h.formatUnconfirmedMixedTxns(a.transactions);f.value=t},P=async()=>{if(!n.value)return;let e=new w(d.currentLoggedInWallet,n.value),a=s.createTransactionQueryParams();a.pageSize=100,a.address=n.value.address;let t=await e.searchTxns(v.PARTIAL,a),y=await e.formatPartialMixedTxns(t.transactions);T.value=y},F=()=>{if(!n.value)return;let e=[];i.autoAnnounceSignedTransaction.forEach(a=>{let t=D.TransactionMapping.createFromPayload(a.signedTransaction.payload);(E.castToAggregate(t).innerTransactions.find(B=>B.signer.address.plain()==l.address)!=null||a.signedTransaction.signer==n.value.publicKey)&&e.push({type:"Aggregate Bonded",hash:a.signedTransaction.hash,deadline:t.deadline.value,groupType:"In Queue",recipient:"",sender:"",amount:"",message:"",sda:""})}),x.value=e};const k=[i.unconfirmedTransactions,i.autoAnnounceSignedTransaction,i.confirmedTransactions];g([...k],()=>{o()});const L=u(()=>i.aggregateBondedTxLength);g(L,()=>{o()});const o=async()=>{await I(),await P(),F()};if(S.isReady)o();else{let e=g(S,a=>{a.isReady&&(o(),e())})}return O(()=>{setInterval(()=>{o()},1e3)}),(e,a)=>{const t=R("router-link");return V(),W("div",null,[p("div",z,[c(N,{address:r.address,class:"mb-6"},null,8,["address"]),c(M,{address:r.address,selected:"txn"},null,8,["address"]),p("div",G,[c(t,{to:{name:"ViewAccountConfirmedTransactions",params:{address:r.address}},class:"border opacity-60 hover:opacity-100 cursor-pointer rounded-md text-white py-2 px-4",style:{background:"#007CFF"}},{default:_(()=>[b("Confirmed")]),_:1},8,["to"]),K,c(t,{to:{name:"ViewAccountFailedTransactions",params:{address:r.address}},class:"border opacity-60 hover:opacity-100 cursor-pointer rounded-md text-white py-2 px-5",style:{background:"#DC143C"}},{default:_(()=>[b("Failed")]),_:1},8,["to"])]),c(U,{transaction:C.value,class:"mt-3"},null,8,["transaction"])])])}}});export{ne as default};
