import{_ as ye,c as k,B as _e,r as n,b6 as ke,n as A,A as pe,i as N,o,b as a,e as t,j as i,t as m,f as d,x as c,m as h,k as p,v as W}from"./index-f7850f6e.js";import{T as we}from"./TextInputClean-fb2ea122.js";import{c as ge}from"./functions-aaab0f11.js";import{S as G}from"./swapUtils-bfdf04a1.js";import{_ as Te}from"./eth-aa063e38.js";import{_ as Se}from"./index-8bf594ea.js";import{W as Ce,_ as Z}from"./icon-connected-fdd8e531.js";import"./jspdf.es.min-faf91f1e.js";import"./qrcode-c4f964a5.js";const He={name:"ViewServicesMainnetSwapCheckSiriusToETH",components:{TextInputClean:we},setup(){const b=k(()=>_e.nativeToken.label),r=n(!0);window.ethereum&&(window.ethereum.isMetaMask||(r.value=!1));let x=new ke(A.chainNetworkName);x.init();const e=n(""),M=n("");(async()=>{try{const s=await G.fetchTokenServiceInfo(x.swap_IN_SERVICE_URL,"xpx");s.status==200?(M.value=s.data.ethInfo.scAddress,e.value=s.data.ethInfo.sinkAddress,y.value=""):y.value="Swapping service is temporary not available. Please try again later"}catch{y.value="Swapping service is temporary not available. Please try again later"}})();const V="^[0-9A-Za-z]{64}$",l=n(""),T=k(()=>!l.value.match(V)&&l.value.length>0);let S=x.ETHChainId,u=x.ETHNetworkName;const R=n(!1),C=n(!1),f=n(null),J=n(""),K=G.getOutgoing_ETHCheckStatus_URL(x.swap_IN_SERVICE_URL),Q=x.ETHScanUrl,X=k(()=>Q+_.value);let w;typeof window.ethereum<"u"?(w=new Ce(window.ethereum),w.getSigner(),R.value=!0,C.value=!!ethereum.isConnected(),ethereum.request({method:"eth_accounts"}).then(j).catch(s=>{console.error(s)}),ethereum.request({method:"eth_chainId"}).then(s=>{D(s)}).catch(s=>{console.error(s)}),ethereum.on("accountsChanged",Y),ethereum.on("chainChanged",s=>{D(s)})):console.log("MetaMask not installed");function j(s){s.length===0?f.value="":s[0]!==f.value&&(f.value=s[0]),C.value=!!ethereum.isConnected()}function Y(s){window.ethereum.isMetaMask&&(s.length===0?f.value="":s[0]!==f.value&&(f.value=s[0],y.value="")),C.value=!!ethereum.isConnected()}function D(s){J.value=s,S===parseInt(s)?H.value="":H.value="Please select "+u+" on MetaMask to swap"}const $=()=>{window.ethereum.isMetaMask==null?r.value=!1:(r.value=!0,ethereum.request({method:"eth_requestAccounts"}).then(j).catch(s=>{s.code===4001?console.log("Please connect to MetaMask."):s.code=="-32002"&&(y.value="Please click on MetaMask extension to approve connection")}))},L=n(!1),U=n(!1),B=n(!1),q=n(!1),ee=n(!1),te=n(!1),se=n(!1),ne=pe(),oe=s=>{let v=document.getElementById(s).getAttribute("copyValue"),g=document.getElementById(s).getAttribute("copySubject");ge(v),ne.add({severity:"info",summary:g+" copied",detail:v,group:"br-custom",life:3e3})},F=n(1),re=n(!1),ae=n(!1),ie=n(!0),le=n(""),H=n(""),y=n(""),ce=k(()=>!(!H.value&&!(T.value&&l.value.length>0)&&l.value.length>0)),E=n(!1),de=()=>{F.value=2,setTimeout(()=>L.value=!0,1e3),setTimeout(()=>{(async()=>await xe())()},2e3)};let ue=A.currentNetworkProfile.chainExplorer.url+"/"+A.currentNetworkProfile.chainExplorer.hashRoute+"/";const me=k(()=>ue+l.value),he=n(!1),I=n(!1),P=n(!1),_=n(!1),O=n(!1),z=n(!0),xe=async()=>{l.value;try{const s=await fetch(K+l.value,{method:"GET",headers:{"Content-Type":"application/json"}});if(U.value=!0,s.status==200){const v=await s.json();_.value=v.fulfillTransaction,setTimeout(async()=>{B.value=!0,await fe()||(P.value=!0),setTimeout(async()=>{setTimeout(()=>q.value=!0,1e3),setTimeout(()=>z.value=!1,1e3)},1e3)},1e3)}else E.value=!0}catch{E.value=!0}},fe=async()=>{try{let s=await w.getTransactionReceipt(_.value),v=await w.getTransaction(_.value),g=!1;return w.on("pending",be=>{be===_.value&&(g=!0)}),g?(O.value=!0,!0):s&&s.status===1&&v.to.toLowerCase()==M.value.toLowerCase()?!0:!s&&!v?(I.value=!0,!1):(he.value=!0,!1)}catch{return I.value=!0,!1}},ve=k(()=>P.value?I.value?"Transaction is not found":"Transaction has failed":O.value?"ETH transaction is still pending. Please wait a few more moment":"ETH transaction is successful");return{err:H,isInstallMetamask:R,connectMetamask:$,isMetamaskConnected:C,currentAccount:f,copy:oe,currentPage:F,isDisabledValidate:ie,siriusAddress:le,showSiriusAddressErr:re,disableSiriusAddress:ae,sendRequest:de,isDisabledCheck:ce,step1:L,step2:U,step3:B,step4:q,step5:ee,step6:te,step7:se,siriusTxnLink:me,serviceErr:y,verifyMetaMaskPlugin:r,showTxnHashError:T,siriusTxnHash:l,isInvalidSiriusTxnHash:E,isInvalidRemoteTxnHash:P,remoteTxnLink:X,remoteTxnHash:_,txtRemoteTxnSummary:ve,isDisabled:z,currentNativeTokenName:b}}},Me={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},Ee={class:"mt-6 p-6 border filter shadow-lg text-center"},Ie=t("div",{class:"text-md"},"Main Network Swap",-1),Pe=t("div",{class:"text-xs my-3 mb-5 sm:mb-10"},[t("img",{src:Te,class:"mr-2 h-5 inline-block"}),c("Check swap from Proximax Sirius Chain to ETH")],-1),Ae={class:"flex my-10"},Ne={class:"flex-none"},Ve={class:"flex border border-gray-300 rounded-md filter shadow-md"},Re=t("div",{class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},"Input Information",-1),je=t("div",{class:"flex-grow self-center md:mx-4 h-0.5 bg-gray-100"},null,-1),De={class:"flex-none"},Le={class:"flex border border-gray-300 rounded-md filter shadow-md"},Ue={class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},Be={key:0},qe=t("div",{class:"text-lg my-7 font-bold"},"Check Swap Status",-1),Fe={key:0,class:"error error_box mb-5"},Oe={key:1,class:"bg-yellow-200 text-yellow-900 text-tsm p-3 mb-5 rounded-2xl"},ze=t("b",null,"MetaMask",-1),We={class:"my-2"},Ge={href:"https://bit.ly/3mVayCu",target:"_new",class:"text-blue-primary"},Ze={key:2,class:"error error_box mb-5"},Je={key:3,class:"error error_box mb-5"},Ke=t("p",{class:"font-bold text-xs text-left mb-1"},"Type",-1),Qe={class:"mb-5 mt-3 text-left"},Xe=t("button",{class:"bg-blue-primary px-3 py-2 w-20 text-white font-bold rounded-r border border-blue-primary cursor-auto"},"Out",-1),Ye=t("span",{class:"text-gray-500 ml-3 text-tsm"},"From Sirius to ETH",-1),$e={class:"mb-5 md:flex md:justify-between border border-gray-200 rounded"},et={class:"flex justify-left"},tt=t("div",{class:"w-18 flex items-center justify-center py-5 sm:h-20"},[t("img",{src:Se,class:"w-8 h-8 inline-block"})],-1),st={class:"text-left flex items-center"},nt=t("div",{class:"text-xxs uppercase text-blue-primary font-bold mb-1"},"From MetaMask Address",-1),ot={class:"font-bold text-black text-tsm break-all mr-2"},rt={key:0,class:"border-l border-gray-200 text-green-500 font-semibold text-xxs w-16 lg:w-20 flex items-center justify-center uppercase"},at=t("div",null,[t("img",{src:Z,class:"inline-block"}),t("div",null,"Connected")],-1),it=[at],lt={class:"border-l border-gray-200 text-blue-primary text-tsm font-bold w-16 lg:w-20 flex justify-center items-center"},ct={key:0},dt={key:1},ut=t("a",{href:"https://metamask.io/",target:"_new"},"Download",-1),mt=[ut],ht={class:"md:hidden"},xt={key:0,class:"border-t border-gray-200 text-green-500 font-semibold text-xxs uppercase p-2"},ft=t("div",{class:"flex items-center justify-center"},[t("img",{src:Z,class:"inline-block mr-2 w-4 h-4"}),c(" Connected ")],-1),vt=[ft],bt={class:"border-t border-gray-200 text-blue-primary text-tsm font-bold p-3"},yt={key:0},_t={key:1},kt=t("a",{href:"https://metamask.io/",target:"_new"},"Download",-1),pt=[kt],wt={class:"mt-10 text-center"},gt=["disabled"],Tt={key:1},St={class:"text-lg my-7"},Ct={class:"flex border-b border-gray-300 p-3"},Ht={class:"flex-none"},Mt={class:"flex h-full justify-center"},Et={class:"flex border-b border-gray-300 p-3"},It={class:"flex-none"},Pt={class:"flex h-full justify-center"},At={key:0,class:"mt-2"},Nt={key:0,class:"bg-yellow-100 py-2 px-5 mt-1 rounded-xl flex"},Vt=["href","copyValue"],Rt={class:"flex-none"},jt={key:1,class:"mt-2 text-sm text-gray-700"},Dt={class:"flex border-b border-gray-300 p-3"},Lt={class:"flex-none"},Ut={class:"flex h-full justify-center"},Bt={class:"flex border-b border-gray-300 p-3"},qt={class:"flex-none"},Ft={class:"flex h-full justify-center"},Ot={key:0,class:"mt-2"},zt={key:0,class:"bg-yellow-100 py-2 px-5 mt-1 rounded-xl flex"},Wt=["href","copyValue"],Gt={class:"flex-none"},Zt={key:1,class:"mt-2 text-xs md:text-sm text-gray-700"},Jt=t("a",{href:"https://t.me/proximaxhelpdesk",target:"_new",class:"text-blue-primary font-bold underline"},"helpdesk",-1),Kt={class:"mt-10 text-center"};function Qt(b,r,x,e,M,V){const l=N("font-awesome-icon"),T=N("TextInputClean"),S=N("router-link");return o(),a("div",null,[t("div",Me,[t("div",Ee,[Ie,Pe,t("div",Ae,[t("div",Ne,[t("div",Ve,[t("div",{class:i(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage>=1?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:i(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=1?"text-white":"text-gray-400"}`])},"1",2)],2),Re])]),je,t("div",De,[t("div",Le,[t("div",{class:i(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage>=2?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:i(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=2?"text-white":"text-gray-400"}`])},"2",2)],2),t("div",Ue,m(b.$t("swap.validation")),1)])])]),e.currentPage==1?(o(),a("div",Be,[qe,e.isInstallMetamask?d("",!0):(o(),a("div",Fe,m(b.$t("swap.noMetamask")),1)),e.verifyMetaMaskPlugin?d("",!0):(o(),a("div",Oe,[c("Please make sure there is no other crypto wallet extension currently being enabled except "),ze,c("."),t("div",We,[c("Refer to the "),t("a",Ge,[c("walkthrough"),h(l,{icon:"external-link-alt",class:"text-blue-primary w-3 h-3 self-center inline-block ml-1"})]),c(" for more details.")]),c("Please refresh this page after disabling other wallet extensions.")])),e.serviceErr!=""?(o(),a("div",Ze,m(e.serviceErr),1)):d("",!0),e.err!=""?(o(),a("div",Je,m(e.err),1)):d("",!0),Ke,t("div",Qe,[t("button",{class:"border px-3 py-2 w-20 text-blue-primary font-bold rounded-l cursor-pointer hover:border-blue-primary hover:bg-blue-50 transition-all duration-200",onClick:r[0]||(r[0]=u=>b.$router.push({name:"ViewServicesMainnetSwapCheckETHToSirius"}))},"In"),Xe,c(),Ye]),t("div",$e,[t("div",et,[tt,t("div",st,[t("div",null,[nt,t("div",ot,m(e.isMetamaskConnected&&e.currentAccount?e.currentAccount:"Not connected"),1)])])]),t("div",{class:i(["md:grid hidden",e.currentAccount?"grid-cols-2":"grid-cols-1"])},[e.currentAccount?(o(),a("div",rt,it)):d("",!0),t("div",lt,[e.isInstallMetamask?(o(),a("div",ct,[e.currentAccount?(o(),a("div",{key:1,class:"cursor-pointer",onClick:r[2]||(r[2]=u=>e.connectMetamask())},"Change")):(o(),a("div",{key:0,class:"cursor-pointer",onClick:r[1]||(r[1]=u=>e.connectMetamask())},"Connect"))])):(o(),a("div",dt,mt))])],2),t("div",ht,[e.currentAccount?(o(),a("div",xt,vt)):d("",!0),t("div",bt,[e.isInstallMetamask?(o(),a("div",yt,[e.currentAccount?(o(),a("div",{key:1,class:"cursor-pointer",onClick:r[4]||(r[4]=u=>e.connectMetamask())},"Change")):(o(),a("div",{key:0,class:"cursor-pointer",onClick:r[3]||(r[3]=u=>e.connectMetamask())},"Connect"))])):(o(),a("div",_t,pt))])])]),h(T,{placeholder:"Sirius Transaction Hash",errorMessage:"Please key in valid transaction hash",modelValue:e.siriusTxnHash,"onUpdate:modelValue":r[5]||(r[5]=u=>e.siriusTxnHash=u),showError:e.showTxnHashError,class:"w-full inline-block mr-2"},null,8,["modelValue","showError"]),t("div",wt,[t("button",{onClick:r[6]||(r[6]=u=>b.$router.push({name:"ViewServicesMainnetSwap"})),class:"text-black font-bold text-xs mr-5 focus:outline-none disabled:opacity-50"},"Cancel"),t("button",{type:"submit",class:"default-btn focus:outline-none disabled:opacity-50",disabled:e.isDisabledCheck,onClick:r[7]||(r[7]=u=>e.sendRequest())},"Check Status",8,gt)])])):d("",!0),e.currentPage==2?(o(),a("div",Tt,[t("div",St,[t("div",{class:i(["font-bold text-left text-xs md:text-sm",e.step1?"text-gray-700":"text-gray-300"])},"Step 1: Check Sirius transaction status",2),t("div",Ct,[t("div",Ht,[t("div",{class:i(["rounded-full border w-6 h-6 transition-all duration-500",e.step1?"border-blue-primary":"border-gray-300"])},[t("div",Mt,[h(l,{icon:"check",class:i([e.step1?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block transition-all duration-500"])},null,8,["class"])])],2)]),t("div",{class:i(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step1?"text-gray-700":"text-gray-300"])},"Checking transaction status",2)]),t("div",Et,[t("div",It,[t("div",{class:i(["rounded-full border w-6 h-6 transition-all duration-500",e.isInvalidSiriusTxnHash?"border-red-primary":e.step2?"border-blue-primary":"border-gray-300"])},[t("div",Pt,[e.isInvalidSiriusTxnHash?(o(),p(l,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block transition-all duration-500"})):(o(),p(l,{key:1,icon:"check",class:i([e.step2?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block transition-all duration-500"])},null,8,["class"]))])],2)]),t("div",{class:i(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step2?"text-gray-700":"text-gray-300"])},[c(m(e.isInvalidSiriusTxnHash?"Transaction is not found.":"Sirius transaction is successful:")+" ",1),!e.isInvalidSiriusTxnHash&&e.step2?(o(),a("div",At,[e.siriusTxnHash?(o(),a("div",Nt,[t("a",{href:e.siriusTxnLink,target:"_new",class:i([e.isInvalidSiriusTxnHash?"text-gray-300":"text-blue-primary","flex-grow break-all text-tsm self-center hover:underline"]),id:"siriusTx",copyValue:e.siriusTxnHash,copySubject:"Sirius transaction hash"},[h(l,{icon:"external-link-alt",class:"text-blue-primary w-3 h-3 self-center inline-block mr-2"}),c(m(e.siriusTxnHash),1)],10,Vt),t("div",Rt,[e.step2?(o(),p(l,{key:0,icon:"copy",onClick:r[8]||(r[8]=u=>e.copy("siriusTx")),class:"w-5 h-5 text-blue-primary cursor-pointer self-center ml-3 absoltue top-2 hover:opacity-90 duration-800 transition-all"})):d("",!0)])])):d("",!0)])):d("",!0),e.isInvalidSiriusTxnHash&&e.step2?(o(),a("div",jt,[c(" Sirius transaction hash is not found in swap service. Please initiate new swap from "+m(e.currentNativeTokenName)+" to ETH ",1),h(S,{to:{name:"ViewServicesMainnetSwapEthOptions"},class:"bg-blue-primary text-white py-2 px-5 rounded-2xl w-24 block text-center my-3 font-bold"},{default:W(()=>[c("Swap")]),_:1})])):d("",!0)],2)]),t("div",{class:i(["font-bold text-left text-xs md:text-sm mt-4",e.step3?"text-gray-700":"text-gray-300"])},"Step 2: Check ETH transaction status",2),t("div",Dt,[t("div",Lt,[t("div",{class:i(["rounded-full border w-6 h-6",e.step3?"border-blue-primary":"border-gray-300"])},[t("div",Ut,[h(l,{icon:"check",class:i([e.step3?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"])])],2)]),t("div",{class:i(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step3?"text-gray-700":"text-gray-300"])},"Checking transaction status",2)]),t("div",Bt,[t("div",qt,[t("div",{class:i(["rounded-full border w-6 h-6 transition-all duration-500",e.isInvalidRemoteTxnHash&&e.step4?"border-red-primary":e.step4?"border-blue-primary":"border-gray-300"])},[t("div",Ft,[e.isInvalidRemoteTxnHash&&e.step4?(o(),p(l,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block transition-all duration-500"})):(o(),p(l,{key:1,icon:"check",class:i([e.step4?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block transition-all duration-500"])},null,8,["class"]))])],2)]),t("div",{class:i(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step4?"text-gray-700":"text-gray-300"])},[c(m(e.txtRemoteTxnSummary)+" ",1),!e.isInvalidRemoteTxnHash&&e.step4?(o(),a("div",Ot,[e.remoteTxnHash?(o(),a("div",zt,[t("a",{href:e.remoteTxnLink,target:"_new",class:i([e.isInvalidRemoteTxnHash?"text-gray-300":"text-blue-primary","flex-grow break-all text-tsm self-center hover:underline"]),id:"remoteTx",copyValue:e.remoteTxnHash,copySubject:"ETH transaction hash"},[h(l,{icon:"external-link-alt",class:"text-blue-primary w-3 h-3 self-center inline-block mr-2"}),c(m(e.remoteTxnHash),1)],10,Wt),t("div",Gt,[e.step4?(o(),p(l,{key:0,icon:"copy",onClick:r[9]||(r[9]=u=>e.copy("remoteTx")),class:"w-5 h-5 text-blue-primary cursor-pointer self-center ml-3 absoltue top-2 hover:opacity-90 duration-800 transition-all"})):d("",!0)])])):d("",!0)])):d("",!0),e.isInvalidRemoteTxnHash&&e.step4?(o(),a("div",Zt,[c(" ETH transaction hash is not found. Please contact our "),Jt,c(". ")])):d("",!0)],2)])]),t("div",Kt,[h(S,{to:{name:"ViewServicesMainnetSwap"},class:i(["default-btn focus:outline-none w-40 inline-block",e.isDisabled?"opacity-50":""]),is:e.isDisabled?"span":"router-link",tag:"button"},{default:W(()=>[c("Done")]),_:1},8,["class","is"])])])):d("",!0)])])])}const as=ye(He,[["render",Qt]]);export{as as default};
