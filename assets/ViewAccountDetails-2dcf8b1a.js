import{_ as B,a8 as ue,u as j,r as v,c as x,k as D,o as l,b as c,s as C,z as V,e,t as r,f as d,T as Z,F as R,i as z,W as K,w as p,n as k,D as me,H as U,E as A,a as Q,g as pe,m as w,C as Y,h as ve,B as fe,p as ge,j as _e,A as ye}from"./index-ac5f7446.js";import{_ as we}from"./icon-green-tick-1b766454.js";import{_ as ee}from"./proximax-logo-ecfc3767.js";import{c as xe,g as be}from"./functions-b45caa9b.js";import{A as ke,_ as he}from"./AccountTabs.vue_vue_type_script_setup_true_lang-c02a889f.js";import{p as Pe}from"./pdfPaperWalletBackground-9b716104.js";import{E as Ie}from"./jspdf.es.min-312f721e.js";import{q as We}from"./qrcode-faedf7ea.js";import{_ as te}from"./PasswordInput.vue_vue_type_script_setup_true_lang-85d9fba6.js";import"./jdenticon-module-0719d88f.js";import"./TextInput-8b64037f.js";import"./TextInputClean-2502bfc6.js";import"./icon-key-5b3f7dda.js";const Ne="/web-wallet-vuejs/assets/icon-link-new-white-dd5275bd.svg",Ae={name:"PkPasswordModal",props:{account:ue},components:{PasswordInput:te},setup(n){const{t:s}=j();let _=v(!1),a=v(""),f=v(""),h=v("");const i="^[^ ]{8,}$",m=x(()=>!a.value.match(i)),b=v(n.account),M=z().appContext.config.globalProperties.emitter;return{verifyWalletPwPk:()=>{try{if(K.verifyWalletPassword(p.currentLoggedInWallet.name,k.chainNetworkName,a.value)){const g=K.createPassword(a.value),I=K.decryptPrivateKey(g,b.value.encrypted,b.value.iv);h.value=I.toUpperCase(),f.value="",M.emit("revealPK",!0),M.emit("pkValue",h.value)}else{let g=p.currentLoggedInWallet.name;f.value=s("general.walletPasswordInvalid",{name:g})}}catch{let I=p.currentLoggedInWallet.name;f.value=s("general.walletPasswordInvalid",{name:I})}},toggleModal:_,err:f,walletPasswd:a,disableShow:m}}},Ce={key:0,class:"popup-outer-lang fixed flex z-50"},$e={class:"modal-popup-box"},Me={key:0,class:"error error_box mb-3"},Ke={class:"text-center mt-2 text-xs font-semibold"},Le=["disabled"];function Ve(n,s,_,a,f,h){const i=D("font-awesome-icon"),m=D("PasswordInput");return l(),c(R,null,[C(i,{icon:"eye",title:"View Private Key",class:"text-blue-link relative cursor-pointer ml-1",onClick:s[0]||(s[0]=b=>a.toggleModal=!a.toggleModal)}),C(Z,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:V(()=>[a.toggleModal?(l(),c("div",Ce,[e("div",$e,[a.err!=""?(l(),c("div",Me,r(a.err),1)):d("",!0),e("div",Ke,r(n.$t("general.enterPassword")),1),C(m,{class:"my-3",modelValue:a.walletPasswd,"onUpdate:modelValue":s[1]||(s[1]=b=>a.walletPasswd=b),placeholder:n.$t("general.password"),errorMessage:n.$t("general.passwordRequired")},null,8,["modelValue","placeholder","errorMessage"]),e("div",{onClick:s[2]||(s[2]=b=>a.verifyWalletPwPk()),class:"blue-btn font-semibold py-2 cursor-pointer text-center ml-auto mr-auto w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:a.disableShow},r(n.$t("general.confirm")),9,Le),e("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:s[3]||(s[3]=b=>{a.toggleModal=!a.toggleModal,a.walletPasswd=""})},r(n.$t("general.cancel")),1)])])):d("",!0)]),_:1}),a.toggleModal?(l(),c("div",{key:0,onClick:s[4]||(s[4]=b=>a.toggleModal=!a.toggleModal),class:"fixed inset-0 bg-opacity-60 bg-gray-100 z-20"})):d("",!0)],64)}const De=B(Ae,[["render",Ve]]),Se={name:"PdfPasswordModal",components:{PasswordInput:te},setup(){const{t:n}=j();let s=v(!1),_=v(""),a=v("");const f="^[^ ]{8,}$",h=x(()=>!_.value.match(f)),m=z().appContext.config.globalProperties.emitter;return{verifyWalletPwWalletPaper:()=>{try{if(K.verifyWalletPassword(p.currentLoggedInWallet.name,k.chainNetworkName,_.value))s.value=!s.value,m.emit("unlockWalletPaper",_.value),_.value="";else{let $=p.currentLoggedInWallet.name;a.value=n("general.walletPasswordInvalid",{name:$})}}catch{let M=p.currentLoggedInWallet.name;a.value=n("general.walletPasswordInvalid",{name:M})}},toggleModal:s,err:a,walletPasswd:_,disableDownload:h}}},Te={key:0,class:"popup-outer-lang fixed flex z-50"},Ee={class:"modal-popup-box"},Ue={key:0,class:"error error_box mb-3"},Be={class:"text-center mt-2 text-xs font-semibold"},je=["disabled"];function Re(n,s,_,a,f,h){const i=D("PasswordInput");return l(),c(R,null,[e("div",{class:"blue-btn cursor-pointer py-3 px-4 text-center",onClick:s[0]||(s[0]=m=>a.toggleModal=!a.toggleModal)},r(n.$t("general.downloadPaperWallet")),1),C(Z,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:V(()=>[a.toggleModal?(l(),c("div",Te,[e("div",Ee,[a.err!=""?(l(),c("div",Ue,r(a.err),1)):d("",!0),e("div",Be,r(n.$t("general.enterPassword")),1),C(i,{class:"my-3",modelValue:a.walletPasswd,"onUpdate:modelValue":s[1]||(s[1]=m=>a.walletPasswd=m),placeholder:n.$t("general.password"),errorMessage:n.$t("general.passwordRequired")},null,8,["modelValue","placeholder","errorMessage"]),e("div",{onClick:s[2]||(s[2]=m=>a.verifyWalletPwWalletPaper()),class:"blue-btn font-semibold py-2 cursor-pointer text-center ml-auto mr-auto w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:a.disableDownload},r(n.$t("general.confirm")),9,je),e("div",{class:"text-center cursor-pointer text-xs text-blue-link mt-2 font-semibold",onClick:s[3]||(s[3]=m=>{a.toggleModal=!a.toggleModal,a.walletPasswd=""})},r(n.$t("general.cancel")),1)])])):d("",!0)]),_:1}),a.toggleModal?(l(),c("div",{key:0,onClick:s[4]||(s[4]=m=>a.toggleModal=!a.toggleModal),class:"fixed inset-0 bg-opacity-60 z-20 bg-gray-100"})):d("",!0)],64)}const ze=B(Se,[["render",Re]]);const P=n=>(ge("data-v-f85772a9"),n=n(),_e(),n),Fe={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},qe={key:0,class:"mb-8"},He={class:"border border-green-300 pl-6 pb-3 bg-green-50"},Xe={class:"flex items-center gap-3"},Ge=P(()=>e("img",{src:we,class:"h-10 w-10 pt-3 mr-2"},null,-1)),Oe={class:"flex flex-col w-full"},Je={class:"flex"},Qe={class:"text-xs text-green-500 font-semibold pt-3"},Ye={class:"text-xxs mt-1"},Ze={class:"border-2 border-t-0 pb-6 px-6 pt-2"},et={class:"flex flex-col sm:flex-row justify-between sm:items-center mt-3"},tt={class:"flex flex-col"},at={class:"text-xxs text-blue-primary font-semibold uppercase"},st={key:0,class:"flex"},lt={class:"text-md font-bold"},ot={key:0,class:"text-md font-bold"},nt={class:"text-xs mt-1.5 font-bold"},rt={class:"ml-1 font-bold"},it=P(()=>e("img",{src:ee,class:"h-5 w-5 mt-0.5"},null,-1)),ct={class:"text-txs text-gray-400 mt-0.5"},dt={key:0,class:"flex mt-2 sm:mt-0"},ut=["href"],mt=P(()=>e("img",{src:ee,class:"h-5 w-5 cursor-pointer"},null,-1)),pt={class:"text-xs mt-0.5 font-semibold text-white"},vt=P(()=>e("img",{src:Ne,class:"h-5 w-5 cursor-pointer"},null,-1)),ft=P(()=>e("div",{class:"my-6 gray-line"},null,-1)),gt={class:"text-xxs text-blue-primary mt-2 font-semibold uppercase"},_t={class:"flex"},yt=["copyValue","title","copySubject"],wt={key:0,class:"my-6 gray-line"},xt={key:1},bt={class:"text-xxs text-blue-primary mt-0.5 font-semibold uppercase"},kt={class:"flex"},ht={key:0,class:"break-all font-semibold truncate md:text-clip md:w-auto"},Pt={class:"flex"},It=["copyValue","title"],Wt={class:"text-txs mt-2 text-red-400 border px-1.5 py-2 border-red-400 rounded-md"},Nt=P(()=>e("div",{class:"my-6 gray-line"},null,-1)),At={class:"flex flex-col"},Ct=P(()=>e("div",{class:"text-xxs text-blue-primary font-semibold uppercase"},"Linked Account",-1)),$t={class:"flex items-center"},Mt={key:0},Kt=["href"],Lt={key:1,class:"text-xs"},Vt={class:"text-xs mt-1 font-semibold break-all truncate md:text-clip md:w-auto"},Dt={key:2,class:"text-xs"},St=P(()=>e("div",{class:"my-6 gray-line"},null,-1)),Tt={class:"flex flex-col"},Et=P(()=>e("div",{class:"text-xxs text-blue-primary font-semibold uppercase"},"Alias",-1)),Ut={class:"flex items-center"},Bt={key:0,class:"text-xs"},jt=["href"],Rt={class:"cursor-pointer"},zt={key:0},Ft={class:"flex mt-6 flex-col sm:flex-row w-auto gap-10 sm:gap-0 justify-between"},qt={__name:"ViewAccountDetails",props:{address:String,accountCreated:Boolean},setup(n){const s=n,{t:_}=j(),a=me(),f=v(!1);let h=()=>{if(!p.currentLoggedInWallet)return!1;let t=p.currentLoggedInWallet.others.find(o=>o.address==s.address);return t?t.type=="DELEGATE":!1};const i=x(()=>{if(!p.currentLoggedInWallet)return null;let t=p.currentLoggedInWallet.accounts.find(o=>o.address==s.address)||p.currentLoggedInWallet.others.find(o=>o.address==s.address);return t||null}),m=x(()=>p.currentLoggedInWallet?p.currentLoggedInWallet.others.find(t=>t.address==s.address):null);s.accountCreated&&(f.value=!0);const $=z().appContext.config.globalProperties.emitter,M=x(()=>{if(s.address)try{return U.createAddress(s.address).pretty()}catch{}return""}),S=v(!1),g=v(!1),I=v(""),F=t=>{let o=document.getElementById(t).getAttribute("copyValue"),u=document.getElementById(t).getAttribute("copySubject");xe(o),a.add({severity:"info",detail:u+" "+_("general.copied"),group:"br-custom",life:3e3})},q=v(""),H=()=>{if(!i.value)return;let t=i.value.balance;be(t).then(o=>{q.value=U.toCurrencyFormat(o,A.nativeToken.divisibility)})},X=x(()=>A.nativeToken.label),ae=x(()=>A.nativeToken.divisibility),G=x(()=>i.value?U.toCurrencyFormat(i.value.balance,ae.value):"0"),T=x(()=>{let t=G.value.split(".");return t[1]!=null?{left:t[0],right:t[1]}:{left:t[0],right:null}});A.nativeToken.label==="XPX"&&(H(),Q(G,()=>{H()}));const se=(t,o=2,u=0)=>{const W=We(10,"H");return W.addData(t),W.make(),W.createDataURL(o,u)},le=t=>{const o=new Ie({unit:"px"});o.addImage(Pe,"JPEG",120,60,205,132);const u=K.createPassword(t);let N=K.decryptPrivateKey(u,i.value.encrypted,i.value.iv).toUpperCase();o.addImage(se(N,1,0),151.5,105),o.setFontSize(8),o.setTextColor("#000000"),o.text(M.value,146,164,{maxWidth:132}),o.save("Your_Paper_Wallet")},E=x(()=>A.networkType),oe=x(()=>E.value==168&&k.chainNetworkName=="Sirius Testnet 1"?"https://bctestnetfaucet.xpxsirius.io/#/":E.value==168&&k.chainNetworkName=="Sirius Testnet 2"?"https://bctestnet2faucet.xpxsirius.io/#/":""),y=v(""),L=v([]),ne=async()=>{i.value&&(y.value=i.value.linkedPublicKey)},re=async()=>{(await A.chainAPI.accountAPI.getAccountsNames([ye.Address.createFromRawAddress(i.value.address)]))[0].names.forEach(o=>{L.value.push(o.name)})},ie=t=>k.currentNetworkProfile?k.currentNetworkProfile.chainExplorer.url+"/"+k.currentNetworkProfile.chainExplorer.namespaceInfoRoute+"/"+t:"",ce=t=>k.currentNetworkProfile?k.currentNetworkProfile.chainExplorer.url+"/"+k.currentNetworkProfile.chainExplorer.publicKeyRoute+"/"+t:"",de=t=>{if(!p.currentLoggedInWallet)return"";let o=p.currentLoggedInWallet.accounts.find(u=>u.publicKey==t)||p.currentLoggedInWallet.others.find(u=>u.publicKey==t);return o?o.address:""},O=async()=>{i.value&&(await ne(),re())};return(()=>{if(A.isReady){if(!i.value)return;O()}else{let t=Q(A,o=>{o.isReady&&(O(),t())})}})(),$.on("revealPK",t=>{g.value=t}),$.on("pkValue",t=>{I.value=t}),$.on("unlockWalletPaper",t=>{le(t)}),(t,o)=>{const u=D("font-awesome-icon"),W=D("router-link");return l(),c("div",null,[e("div",Fe,[C(ke,{address:n.address,class:"mb-6"},null,8,["address"]),f.value?(l(),c("div",qe,[e("div",He,[e("div",Xe,[Ge,e("div",Oe,[e("div",Je,[e("div",Qe,r(t.$t("general.congratz")),1),e("img",{onClick:o[0]||(o[0]=N=>f.value=!1),src:pe,class:"w-5 ml-auto mr-1 cursor-pointer"})]),e("div",Ye,r(t.$t("account.accountCreated"))+r(t.$t("general.pkWarning")),1)])])])])):d("",!0),C(he,{address:n.address,selected:"details"},null,8,["address"]),e("div",Ze,[e("div",et,[e("div",tt,[e("div",at,r(t.$t("general.currentBalance")),1),T.value?(l(),c("div",st,[e("div",lt,r(T.value.left),1),T.value.right!=null?(l(),c("div",ot,".")):d("",!0),e("div",nt,r(T.value.right),1),e("div",rt,r(X.value),1),it])):d("",!0),e("div",ct,r(t.$t("general.estimateUSD"))+" "+r(q.value),1)]),E.value==168?(l(),c("div",dt,[e("a",{href:oe.value,target:"_blank",class:"flex bg-navy-primary rounded-md py-0.5 px-3 cursor-pointer"},[mt,e("div",pt,r(t.$t("general.topUp",{tokenName:X.value})),1),vt],8,ut)])):d("",!0)]),ft,e("div",gt,r(t.$t("general.publicKey")),1),e("div",_t,[e("div",{id:"public",class:"text-xs font-semibold mt-1 break-all truncate md:text-clip md:w-auto",copyValue:i.value?i.value.publicKey:"",title:i.value?i.value.publicKey:"",copySubject:t.$t("general.publicKey")},r(i.value?i.value.publicKey:""),9,yt),C(u,{icon:"copy",onClick:o[1]||(o[1]=N=>F("public")),title:t.$t("general.copy"),class:"ml-2 mt-0.5 pb-1 w-5 h-5 text-blue-link cursor-pointer"},null,8,["title"])]),m.value?d("",!0):(l(),c("div",wt)),m.value?d("",!0):(l(),c("div",xt,[e("div",bt,r(t.$t("general.privateKey")),1),e("div",kt,[!S.value&&!g.value?(l(),c("div",ht," ****************************************************************")):d("",!0),!S.value&&!g.value?(l(),w(De,{key:1,account:i.value},null,8,["account"])):d("",!0)]),e("div",Pt,[g.value?(l(),c("div",{key:0,id:"private",class:"text-xs mt-1 font-semibold break-all truncate md:text-clip md:w-auto",type:"text",copyValue:I.value,title:I.value,copySubject:"Private Key"},r(I.value),9,It)):d("",!0),g.value?(l(),w(u,{key:1,title:"Copy",icon:"copy",onClick:o[2]||(o[2]=N=>F("private")),class:"ml-2 pb-1 w-5 h-5 text-blue-link cursor-pointer"})):d("",!0),g.value?(l(),w(u,{key:2,icon:"eye-slash",title:"Hide Private Key",class:"text-blue-link relative cursor-pointer ml-1",onClick:o[3]||(o[3]=N=>{S.value=!1,g.value=!1})})):d("",!0)]),e("div",Wt,r(t.$t("general.pkWarning")),1)])),Nt,e("div",At,[Ct,e("div",$t,[m.value?(l(),c("div",Mt,[y.value!=""&&y.value!="0".repeat(64)?(l(),c("a",{key:0,href:ce(y.value),target:"_blank",class:"text-xs mt-1 font-semibold break-all text-black truncate md:text-clip md:w-auto"},r(y.value),9,Kt)):(l(),c("div",Lt,"No Linked Account"))])):y.value!=""&&y.value!="0".repeat(64)?(l(),w(W,{key:1,class:"truncate",to:{name:"ViewAccountDetails",params:{address:de(y.value)}}},{default:V(()=>[e("div",Vt,r(y.value),1)]),_:1},8,["to"])):(l(),c("div",Dt,"No Linked Account")),Y(h)()?d("",!0):(l(),w(W,{key:3,to:{name:"ViewAccountDelegate",params:{address:n.address}}},{default:V(()=>[y.value!=""&&y.value!="0".repeat(64)?(l(),w(u,{key:0,title:"Unlink account",icon:"unlink",class:"ml-2 w-4 h-4 text-blue-primary cursor-pointer"})):(l(),w(u,{key:1,title:"Delegate account",icon:"link",class:"ml-2 w-4 h-4 text-blue-primary cursor-pointer"}))]),_:1},8,["to"]))])]),St,e("div",Tt,[Et,e("div",Ut,[L.value.length?d("",!0):(l(),c("div",Bt," No Alias ")),(l(!0),c(R,null,ve(L.value,(N,J)=>(l(),c("div",{key:J,class:"text-xs mt-1 font-semibold break-all"},[e("a",{href:ie(N),target:"_new"},[e("div",Rt,[fe(r(N),1),J!=L.value.length-1?(l(),c("span",zt,",")):d("",!0)])],8,jt)]))),128)),Y(h)()?d("",!0):(l(),w(W,{key:1,to:{name:"ViewAccountAliasAddressToNamespace",params:{address:n.address}}},{default:V(()=>[L.value.length?(l(),w(u,{key:1,title:"Unlink namespace",icon:"unlink",class:"ml-2 w-4 h-4 mt-0.5 text-blue-primary cursor-pointer"})):(l(),w(u,{key:0,title:"Alias to namespace",icon:"link",class:"ml-2 w-4 h-4 mt-0.5 text-blue-primary cursor-pointer"}))]),_:1},8,["to"]))])]),e("div",Ft,[m.value?d("",!0):(l(),w(ze,{key:0}))])])])])}}},na=B(qt,[["__scopeId","data-v-f85772a9"]]);export{na as default};
