import{_ as U,a8 as ue,u as B,r as p,c as b,g as R,k as D,o as l,b as c,s as C,z as L,e,t as r,f as d,T as Z,F as z,W as V,w as v,n as k,D as me,H as E,E as N,a as J,h as ve,m as y,C as Q,i as pe,A as fe,p as ge,j as _e,B as we}from"./index-f81de996.js";import{_ as ye}from"./icon-green-tick-1b766454.js";import{_ as ee}from"./proximax-logo-ecfc3767.js";import{c as be,g as xe}from"./functions-ee8fa276.js";import{A as ke,a as he}from"./AccountTabs-9e5c8eeb.js";import{p as Pe}from"./pdfPaperWalletBackground-9b716104.js";import{E as Ie}from"./jspdf.es.min-b2c6edd1.js";import{q as Ae}from"./qrcode-f6eb3cfa.js";import{P as te}from"./PasswordInput-0dd59ef4.js";import"./jdenticon-module-7161194d.js";import"./TextInput-3c8a9d79.js";import"./TextInputClean-1671b736.js";import"./icon-key-5b3f7dda.js";const We="/web-wallet-vuejs/assets/icon-link-new-white-dd5275bd.svg",Ne={name:"PkPasswordModal",props:{account:ue},components:{PasswordInput:te},setup(n){const{t:s}=B();let _=p(!1),a=p(""),f=p(""),h=p("");const i="^[^ ]{8,}$",m=b(()=>!a.value.match(i)),x=p(n.account),M=R().appContext.config.globalProperties.emitter;return{verifyWalletPwPk:()=>{try{if(V.verifyWalletPassword(v.currentLoggedInWallet.name,k.chainNetworkName,a.value)){const g=V.createPassword(a.value),I=V.decryptPrivateKey(g,x.value.encrypted,x.value.iv);h.value=I.toUpperCase(),f.value="",M.emit("revealPK",!0),M.emit("pkValue",h.value)}else{let g=v.currentLoggedInWallet.name;f.value=s("general.walletPasswordInvalid",{name:g})}}catch{let I=v.currentLoggedInWallet.name;f.value=s("general.walletPasswordInvalid",{name:I})}},toggleModal:_,err:f,walletPasswd:a,disableShow:m}}},Ce={key:0,class:"popup-outer-lang fixed flex z-50"},$e={class:"modal-popup-box"},Me={key:0,class:"error error_box mb-3"},Ve={class:"text-center mt-2 text-xs font-semibold"},Ke=["disabled"];function Le(n,s,_,a,f,h){const i=D("font-awesome-icon"),m=D("PasswordInput");return l(),c(z,null,[C(i,{icon:"eye",title:"View Private Key",class:"text-blue-link relative cursor-pointer ml-1",onClick:s[0]||(s[0]=x=>a.toggleModal=!a.toggleModal)}),C(Z,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:L(()=>[a.toggleModal?(l(),c("div",Ce,[e("div",$e,[a.err!=""?(l(),c("div",Me,r(a.err),1)):d("v-if",!0),e("div",Ve,r(n.$t("general.enterPassword")),1),C(m,{class:"my-3",modelValue:a.walletPasswd,"onUpdate:modelValue":s[1]||(s[1]=x=>a.walletPasswd=x),placeholder:n.$t("general.password"),errorMessage:n.$t("general.passwordRequired")},null,8,["modelValue","placeholder","errorMessage"]),e("div",{onClick:s[2]||(s[2]=x=>a.verifyWalletPwPk()),class:"blue-btn font-semibold py-2 cursor-pointer text-center ml-auto mr-auto w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:a.disableShow},r(n.$t("general.confirm")),9,Ke),e("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:s[3]||(s[3]=x=>{a.toggleModal=!a.toggleModal,a.walletPasswd=""})},r(n.$t("general.cancel")),1)])])):d("v-if",!0)]),_:1}),a.toggleModal?(l(),c("div",{key:0,onClick:s[4]||(s[4]=x=>a.toggleModal=!a.toggleModal),class:"fixed inset-0 bg-opacity-60 bg-gray-100 z-20"})):d("v-if",!0)],64)}const De=U(Ne,[["render",Le],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/components/PkPasswordModal.vue"]]),Te={name:"PdfPasswordModal",components:{PasswordInput:te},setup(){const{t:n}=B();let s=p(!1),_=p(""),a=p("");const f="^[^ ]{8,}$",h=b(()=>!_.value.match(f)),m=R().appContext.config.globalProperties.emitter;return{verifyWalletPwWalletPaper:()=>{try{if(V.verifyWalletPassword(v.currentLoggedInWallet.name,k.chainNetworkName,_.value))s.value=!s.value,m.emit("unlockWalletPaper",_.value),_.value="";else{let $=v.currentLoggedInWallet.name;a.value=n("general.walletPasswordInvalid",{name:$})}}catch{let M=v.currentLoggedInWallet.name;a.value=n("general.walletPasswordInvalid",{name:M})}},toggleModal:s,err:a,walletPasswd:_,disableDownload:h}}},Se={key:0,class:"popup-outer-lang fixed flex z-50"},je={class:"modal-popup-box"},Ee={key:0,class:"error error_box mb-3"},Ue={class:"text-center mt-2 text-xs font-semibold"},Be=["disabled"];function Re(n,s,_,a,f,h){const i=D("PasswordInput");return l(),c(z,null,[e("div",{class:"blue-btn cursor-pointer py-3 px-4 text-center",onClick:s[0]||(s[0]=m=>a.toggleModal=!a.toggleModal)},r(n.$t("general.downloadPaperWallet")),1),C(Z,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:L(()=>[a.toggleModal?(l(),c("div",Se,[e("div",je,[a.err!=""?(l(),c("div",Ee,r(a.err),1)):d("v-if",!0),e("div",Ue,r(n.$t("general.enterPassword")),1),C(i,{class:"my-3",modelValue:a.walletPasswd,"onUpdate:modelValue":s[1]||(s[1]=m=>a.walletPasswd=m),placeholder:n.$t("general.password"),errorMessage:n.$t("general.passwordRequired")},null,8,["modelValue","placeholder","errorMessage"]),e("div",{onClick:s[2]||(s[2]=m=>a.verifyWalletPwWalletPaper()),class:"blue-btn font-semibold py-2 cursor-pointer text-center ml-auto mr-auto w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:a.disableDownload},r(n.$t("general.confirm")),9,Be),e("div",{class:"text-center cursor-pointer text-xs text-blue-link mt-2 font-semibold",onClick:s[3]||(s[3]=m=>{a.toggleModal=!a.toggleModal,a.walletPasswd=""})},r(n.$t("general.cancel")),1)])])):d("v-if",!0)]),_:1}),a.toggleModal?(l(),c("div",{key:0,onClick:s[4]||(s[4]=m=>a.toggleModal=!a.toggleModal),class:"fixed inset-0 bg-opacity-60 z-20 bg-gray-100"})):d("v-if",!0)],64)}const ze=U(Te,[["render",Re],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/components/PdfPasswordModal.vue"]]);const P=n=>(ge("data-v-08f24c48"),n=n(),_e(),n),Fe={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},qe={key:0,class:"mb-8"},He={class:"border border-green-300 pl-6 pb-3 bg-green-50"},Xe={class:"flex items-center gap-3"},Ye=P(()=>e("img",{src:ye,class:"h-10 w-10 pt-3 mr-2"},null,-1)),Ge={class:"flex flex-col w-full"},Oe={class:"flex"},Je={class:"text-xs text-green-500 font-semibold pt-3"},Qe={class:"text-xxs mt-1"},Ze={class:"border-2 border-t-0 pb-6 px-6 pt-2"},et={class:"flex flex-col sm:flex-row justify-between sm:items-center mt-3"},tt={class:"flex flex-col"},at={class:"text-xxs text-blue-primary font-semibold uppercase"},st={key:0,class:"flex"},lt={class:"text-md font-bold"},ot={key:0,class:"text-md font-bold"},nt={class:"text-xs mt-1.5 font-bold"},rt={class:"ml-1 font-bold"},it=P(()=>e("img",{src:ee,class:"h-5 w-5 mt-0.5"},null,-1)),ct={class:"text-txs text-gray-400 mt-0.5"},dt={key:0,class:"flex mt-2 sm:mt-0"},ut=["href"],mt=P(()=>e("img",{src:ee,class:"h-5 w-5 cursor-pointer"},null,-1)),vt={class:"text-xs mt-0.5 font-semibold text-white"},pt=P(()=>e("img",{src:We,class:"h-5 w-5 cursor-pointer"},null,-1)),ft=P(()=>e("div",{class:"my-6 gray-line"},null,-1)),gt={class:"text-xxs text-blue-primary mt-2 font-semibold uppercase"},_t={class:"flex"},wt=["copyValue","title","copySubject"],yt={key:0,class:"my-6 gray-line"},bt={key:1},xt={class:"text-xxs text-blue-primary mt-0.5 font-semibold uppercase"},kt={class:"flex"},ht={key:0,class:"break-all font-semibold truncate md:text-clip md:w-auto"},Pt={class:"flex"},It=["copyValue","title"],At={class:"text-txs mt-2 text-red-400 border px-1.5 py-2 border-red-400 rounded-md"},Wt=P(()=>e("div",{class:"my-6 gray-line"},null,-1)),Nt={class:"flex flex-col"},Ct=P(()=>e("div",{class:"text-xxs text-blue-primary font-semibold uppercase"},"Linked Account",-1)),$t={class:"flex items-center"},Mt={key:0},Vt=["href"],Kt={key:1,class:"text-xs"},Lt={class:"text-xs mt-1 font-semibold break-all truncate md:text-clip md:w-auto"},Dt={key:2,class:"text-xs"},Tt=P(()=>e("div",{class:"my-6 gray-line"},null,-1)),St={class:"flex flex-col"},jt=P(()=>e("div",{class:"text-xxs text-blue-primary font-semibold uppercase"},"Alias",-1)),Et={class:"flex items-center"},Ut={key:0,class:"text-xs"},Bt=["href"],Rt={class:"cursor-pointer"},zt={key:0},Ft={class:"flex mt-6 flex-col sm:flex-row w-auto gap-10 sm:gap-0 justify-between"},qt={__name:"ViewAccountDetails",props:{address:String,accountCreated:Boolean},setup(n){const s=n,{t:_}=B(),a=me(),f=p(!1);let h=()=>{if(!v.currentLoggedInWallet)return!1;let t=v.currentLoggedInWallet.others.find(o=>o.address==s.address);return t?t.type=="DELEGATE":!1};const i=b(()=>{if(!v.currentLoggedInWallet)return null;let t=v.currentLoggedInWallet.accounts.find(o=>o.address==s.address)||v.currentLoggedInWallet.others.find(o=>o.address==s.address);return t||null}),m=b(()=>v.currentLoggedInWallet?v.currentLoggedInWallet.others.find(t=>t.address==s.address):null);s.accountCreated&&(f.value=!0);const $=R().appContext.config.globalProperties.emitter,M=b(()=>{if(s.address)try{return E.createAddress(s.address).pretty()}catch{}return""}),T=p(!1),g=p(!1),I=p(""),F=t=>{let o=document.getElementById(t).getAttribute("copyValue"),u=document.getElementById(t).getAttribute("copySubject");be(o),a.add({severity:"info",detail:u+" "+_("general.copied"),group:"br-custom",life:3e3})},q=p(""),H=()=>{if(!i.value)return;let t=i.value.balance;xe(t).then(o=>{q.value=E.toCurrencyFormat(o,N.nativeToken.divisibility)})},X=b(()=>N.nativeToken.label),ae=b(()=>N.nativeToken.divisibility),Y=b(()=>i.value?E.toCurrencyFormat(i.value.balance,ae.value):"0"),S=b(()=>{let t=Y.value.split(".");return t[1]!=null?{left:t[0],right:t[1]}:{left:t[0],right:null}});N.nativeToken.label==="XPX"&&(H(),J(Y,()=>{H()}));const se=(t,o=2,u=0)=>{const A=Ae(10,"H");return A.addData(t),A.make(),A.createDataURL(o,u)},le=t=>{const o=new Ie({unit:"px"});o.addImage(Pe,"JPEG",120,60,205,132);const u=V.createPassword(t);let W=V.decryptPrivateKey(u,i.value.encrypted,i.value.iv).toUpperCase();o.addImage(se(W,1,0),151.5,105),o.setFontSize(8),o.setTextColor("#000000"),o.text(M.value,146,164,{maxWidth:132}),o.save("Your_Paper_Wallet")},j=b(()=>N.networkType),oe=b(()=>j.value==168&&k.chainNetworkName=="Sirius Testnet 1"?"https://bctestnetfaucet.xpxsirius.io/#/":j.value==168&&k.chainNetworkName=="Sirius Testnet 2"?"https://bctestnet2faucet.xpxsirius.io/#/":""),w=p(""),K=p([]),ne=async()=>{i.value&&(w.value=i.value.linkedPublicKey)},re=async()=>{(await N.chainAPI.accountAPI.getAccountsNames([we.Address.createFromRawAddress(i.value.address)]))[0].names.forEach(o=>{K.value.push(o.name)})},ie=t=>k.currentNetworkProfile?k.currentNetworkProfile.chainExplorer.url+"/"+k.currentNetworkProfile.chainExplorer.namespaceInfoRoute+"/"+t:"",ce=t=>k.currentNetworkProfile?k.currentNetworkProfile.chainExplorer.url+"/"+k.currentNetworkProfile.chainExplorer.publicKeyRoute+"/"+t:"",de=t=>{if(!v.currentLoggedInWallet)return"";let o=v.currentLoggedInWallet.accounts.find(u=>u.publicKey==t)||v.currentLoggedInWallet.others.find(u=>u.publicKey==t);return o?o.address:""},G=async()=>{i.value&&(await ne(),re())};return(()=>{if(N.isReady){if(!i.value)return;G()}else{let t=J(N,o=>{o.isReady&&(G(),t())})}})(),$.on("revealPK",t=>{g.value=t}),$.on("pkValue",t=>{I.value=t}),$.on("unlockWalletPaper",t=>{le(t)}),(t,o)=>{const u=D("font-awesome-icon"),A=D("router-link");return l(),c("div",null,[e("div",Fe,[C(ke,{address:n.address,class:"mb-6"},null,8,["address"]),f.value?(l(),c("div",qe,[e("div",He,[e("div",Xe,[Ye,e("div",Ge,[e("div",Oe,[e("div",Je,r(t.$t("general.congratz")),1),e("img",{onClick:o[0]||(o[0]=W=>f.value=!1),src:ve,class:"w-5 ml-auto mr-1 cursor-pointer"})]),e("div",Qe,r(t.$t("account.accountCreated"))+r(t.$t("general.pkWarning")),1)])])])])):d("v-if",!0),C(he,{address:n.address,selected:"details"},null,8,["address"]),e("div",Ze,[e("div",et,[e("div",tt,[e("div",at,r(t.$t("general.currentBalance")),1),S.value?(l(),c("div",st,[e("div",lt,r(S.value.left),1),S.value.right!=null?(l(),c("div",ot,".")):d("v-if",!0),e("div",nt,r(S.value.right),1),e("div",rt,r(X.value),1),it])):d("v-if",!0),e("div",ct,r(t.$t("general.estimateUSD"))+" "+r(q.value),1)]),j.value==168?(l(),c("div",dt,[e("a",{href:oe.value,target:"_blank",class:"flex bg-navy-primary rounded-md py-0.5 px-3 cursor-pointer"},[mt,e("div",vt,r(t.$t("general.topUp",{tokenName:X.value})),1),pt],8,ut)])):d("v-if",!0)]),ft,e("div",gt,r(t.$t("general.publicKey")),1),e("div",_t,[e("div",{id:"public",class:"text-xs font-semibold mt-1 break-all truncate md:text-clip md:w-auto",copyValue:i.value?i.value.publicKey:"",title:i.value?i.value.publicKey:"",copySubject:t.$t("general.publicKey")},r(i.value?i.value.publicKey:""),9,wt),C(u,{icon:"copy",onClick:o[1]||(o[1]=W=>F("public")),title:t.$t("general.copy"),class:"ml-2 mt-0.5 pb-1 w-5 h-5 text-blue-link cursor-pointer"},null,8,["title"])]),m.value?d("v-if",!0):(l(),c("div",yt)),m.value?d("v-if",!0):(l(),c("div",bt,[e("div",xt,r(t.$t("general.privateKey")),1),e("div",kt,[!T.value&&!g.value?(l(),c("div",ht," ****************************************************************")):d("v-if",!0),!T.value&&!g.value?(l(),y(De,{key:1,account:i.value},null,8,["account"])):d("v-if",!0)]),e("div",Pt,[g.value?(l(),c("div",{key:0,id:"private",class:"text-xs mt-1 font-semibold break-all truncate md:text-clip md:w-auto",type:"text",copyValue:I.value,title:I.value,copySubject:"Private Key"},r(I.value),9,It)):d("v-if",!0),g.value?(l(),y(u,{key:1,title:"Copy",icon:"copy",onClick:o[2]||(o[2]=W=>F("private")),class:"ml-2 pb-1 w-5 h-5 text-blue-link cursor-pointer"})):d("v-if",!0),g.value?(l(),y(u,{key:2,icon:"eye-slash",title:"Hide Private Key",class:"text-blue-link relative cursor-pointer ml-1",onClick:o[3]||(o[3]=W=>{T.value=!1,g.value=!1})})):d("v-if",!0)]),e("div",At,r(t.$t("general.pkWarning")),1)])),Wt,e("div",Nt,[Ct,e("div",$t,[m.value?(l(),c("div",Mt,[w.value!=""&&w.value!="0".repeat(64)?(l(),c("a",{key:0,href:ce(w.value),target:"_blank",class:"text-xs mt-1 font-semibold break-all text-black truncate md:text-clip md:w-auto"},r(w.value),9,Vt)):(l(),c("div",Kt,"No Linked Account"))])):w.value!=""&&w.value!="0".repeat(64)?(l(),y(A,{key:1,class:"truncate",to:{name:"ViewAccountDetails",params:{address:de(w.value)}}},{default:L(()=>[e("div",Lt,r(w.value),1)]),_:1},8,["to"])):(l(),c("div",Dt,"No Linked Account")),Q(h)()?d("v-if",!0):(l(),y(A,{key:3,to:{name:"ViewAccountDelegate",params:{address:n.address}}},{default:L(()=>[w.value!=""&&w.value!="0".repeat(64)?(l(),y(u,{key:0,title:"Unlink account",icon:"unlink",class:"ml-2 w-4 h-4 text-blue-primary cursor-pointer"})):(l(),y(u,{key:1,title:"Delegate account",icon:"link",class:"ml-2 w-4 h-4 text-blue-primary cursor-pointer"}))]),_:1},8,["to"]))])]),Tt,e("div",St,[jt,e("div",Et,[K.value.length?d("v-if",!0):(l(),c("div",Ut," No Alias ")),(l(!0),c(z,null,pe(K.value,(W,O)=>(l(),c("div",{key:O,class:"text-xs mt-1 font-semibold break-all"},[e("a",{href:ie(W),target:"_new"},[e("div",Rt,[fe(r(W),1),O!=K.value.length-1?(l(),c("span",zt,",")):d("v-if",!0)])],8,Bt)]))),128)),Q(h)()?d("v-if",!0):(l(),y(A,{key:1,to:{name:"ViewAccountAliasAddressToNamespace",params:{address:n.address}}},{default:L(()=>[K.value.length?(l(),y(u,{key:1,title:"Unlink namespace",icon:"unlink",class:"ml-2 w-4 h-4 mt-0.5 text-blue-primary cursor-pointer"})):(l(),y(u,{key:0,title:"Alias to namespace",icon:"link",class:"ml-2 w-4 h-4 mt-0.5 text-blue-primary cursor-pointer"}))]),_:1},8,["to"]))])]),e("div",Ft,[m.value?d("v-if",!0):(l(),y(ze,{key:0})),d(` <router-link v-if="!isDelegate()" :to="{ name: 'ViewAccountAliasAddressToNamespace', params: { address: address}}" class="text-center text-xs px-3 blue-btn cursor-pointer py-3" ><img src="@/assets/img/link-icon.svg" class = 'h-3 w-3 mr-1 inline-block' style= "transform: rotateY(180deg)" >{{$t('general.linkToNamespace')}}</router-link>
          <router-link v-if="!isDelegate()" :to="{ name: 'ViewAccountDelegate', params: { address: address}}" class="text-center blue-btn cursor-pointer py-3 px-3"><img src="@/assets/img/icon-multisig.svg" class = 'h-3 w-3 mr-1 inline-block' style= "transform: rotateY(180deg)" >{{$t('delegate.delegateAcc')}}</router-link> `),d(` <DeleteAccountModal v-if="!isDefault && !other_acc "  :account ='acc' /> `)])])])])}}},na=U(qt,[["__scopeId","data-v-08f24c48"],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/views/ViewAccountDetails.vue"]]);export{na as default};
