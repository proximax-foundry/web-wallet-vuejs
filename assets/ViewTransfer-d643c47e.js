import{d as oe,O as Ue,r as P,c as B,k as ee,o as w,b as I,s as V,z as ne,e as s,t as x,f as U,C as de,A as a,E as o,P as ke,Q as te,l as Ae,_ as Ie,B as Me,F as $e,R as Re,S as Ke,U as Oe,W as ae,w as K,n as X,V as q,T as De,i as Pe,u as qe,a as Y,H as D,D as We,q as ze,h as He,m as be,X as je}from"./index-9545ec17.js";import{_ as Xe,a as Ze,b as Ge,c as Qe}from"./TxnSummary.vue_vue_type_script_setup_true_lang-b2af2e6e.js";import{_ as Je}from"./SelectAccountAndContact.vue_vue_type_script_setup_true_lang-0cb442ea.js";import{_ as Ye}from"./proximax-logo-ecfc3767.js";import{_ as et}from"./PasswordInput.vue_vue_type_script_setup_true_lang-5af8dd3c.js";import{_ as tt}from"./icon-red-x-a5511f99.js";import{_ as at}from"./icon-green-tick-1b766454.js";import{T as ve}from"./transactionState-d7bfa9ed.js";import"./jdenticon-module-380bfcbc.js";const st={key:0},lt={class:"flex justify-between"},nt={class:"flex flex-col ml-2 text-left"},ot=s("div",{class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}}," Selected Asset",-1),rt={class:"mt-1 text-tsm font-bold"},it={class:"mt-1 text-tsm font-bold"},ct={class:"account-item"},ut={class:"flex justify-between"},dt={class:"mt-1 text-tsm font-bold"},mt={class:"mt-1 text-tsm font-bold"},vt=oe({__name:"SelectInputAsset",props:{index:{type:Number,required:!0},assetOptions:{type:Object,required:!0},selectedAssets:{type:Object,required:!1}},emits:["select-asset","update:modelValue"],setup(m){const n=m,u=[{namespace:"prx.xpx",name:"XPX"},{namespace:"prx.metx",name:"METX"},{namespace:"xarcade.xar",name:"XAR"}],r=b=>{const p=u.find(k=>k.namespace==b);return p?p.name:b},{assetOptions:l,selectedAssets:i,index:c}=Ue(n),y=P(!1),R=B(()=>{const b=new Set(i.value.map(p=>p.id));return l.value.filter(p=>!b.has(p.id))}),T=async b=>{if(y.value)return;y.value=!0;const{first:p,last:k}=b,d=[];for(let v=p;v<k;v++)l.value[v].hasUpdated||d.push(new a.MosaicId(l.value[v].id));if(!d.length){y.value=!1;return}const M=await o.chainAPI.assetAPI.getMosaicsNames(d),f=await o.chainAPI.assetAPI.getMosaics(d);let g=0,F=0;const S=new Map;M.forEach((v,$)=>{S.set(v.mosaicId.toHex(),$)}),f.sort((v,$)=>{const _=S.get(v.mosaicId.toHex()),O=S.get($.mosaicId.toHex());return _-O});for(let v=p;v<k;v++){if(!M[g])continue;const $=l.value.find(_=>_.id==M[g].mosaicId.toHex());$&&($.namespace=M[g].names.length?M[g].names[0].name:"",$.balance=$.balance/Math.pow(10,f[F].divisibility),$.divisibility=f[F].divisibility,$.hasUpdated=!0,g++,F++)}y.value=!1},E=b=>{if(b==null){i.value.splice(c.value,1);return}i.value[c.value].balance=b.balance,i.value[c.value].id=b.id,i.value[c.value].namespace=b.namespace,i.value[c.value].divisibility=b.divisibility,i.value[c.value].amount="0"};return(b,p)=>{const k=ee("Dropdown");return w(),I("div",null,[V(k,{showClear:!0,modelValue:de(i)[de(c)],"onUpdate:modelValue":p[0]||(p[0]=d=>de(i)[de(c)]=d),style:{width:"100%"},options:R.value,filter:!0,filterFields:["id","namespace"],emptyFilterMessage:" ",placeholder:"Select Asset",virtualScrollerOptions:{lazy:!0,onLazyLoad:T,showLoader:!0,loading:y.value,delay:0,itemSize:38},onChange:p[1]||(p[1]=d=>{var M;E(d.value),b.$emit("update:modelValue",(M=d.value)==null?void 0:M.value)})},{value:ne(d=>[d.value.id?(w(),I("div",st,[s("div",lt,[s("div",nt,[ot,s("div",rt,x(r(d.value.namespace==""?d.value.id:d.value.namespace)),1)]),s("div",it,"Balance: "+x(d.value.balance),1)])])):U("",!0)]),option:ne(d=>[s("div",ct,[s("div",ut,[s("div",dt,x(r(d.option.namespace==""?d.option.id:d.option.namespace)),1),s("div",mt,"Balance: "+x(d.option.balance),1)])])]),_:1},8,["modelValue","options","virtualScrollerOptions"])])}}}),pt={class:"border border-gray-200 px-2 py-1 rounded-md"},ft={class:"flex justify-between"},gt={class:"flex flex-col"},yt={class:"uppercase font-light text-gray-500 text-txs text-left mb-2"},bt={class:"flex w-full"},ht={key:0,src:Ye,class:"h-5 w-5 mt-0.5"},xt=["value","data-maska","placeholder"],_t=["disabled"],wt=oe({__name:"TransferInputClean",props:{modelValue:{type:String,required:!0},decimal:{type:Number,required:!0},placeholder:{type:String,required:!0},toolTip:{type:String,required:!1},disabled:{type:Boolean,required:!1},showError:{type:Boolean,required:!1},logo:{type:Boolean,required:!1},balance:{type:Number,required:!1}},emits:["update:modelValue","show-error","clickedMaxAvailable"],setup(m){const n=m,u=()=>{let l="0";return n.decimal>0&&(l=l+"."+"9".repeat(n.decimal)),l},r={preProcess:l=>l.replace(/,/g,""),postProcess:l=>{if(!l)return"";let i=0;return n.decimal>0&&(i=1+n.decimal-(l.includes(".")?l.length-l.indexOf("."):0)),Intl.NumberFormat("en-US",{minimumFractionDigits:n.decimal}).format(parseFloat(l)).slice(0,i?-i:void 0)}};return(l,i)=>{const c=ke("maska");return w(),I("div",{class:Ae(m.disabled?"opacity-50":"")},[s("div",pt,[s("div",ft,[s("div",gt,[s("div",yt,x(m.placeholder),1),s("div",bt,[m.logo?(w(),I("img",ht)):U("",!0),te(s("input",{value:m.modelValue,class:"supply_input","data-maska":u(),"data-maska-tokens":"0:\\d:multiple|9:\\d:optional",placeholder:m.placeholder,onInput:i[0]||(i[0]=y=>l.$emit("update:modelValue",parseFloat(y.target.value.replace(/,/g,"")).toString()))},null,40,xt),[[c,void 0,r]])])]),m.logo?(w(),I("button",{key:0,disabled:m.disabled==!0,class:"w-24 cursor-pointer focus:outline-none text-blue-primary text-xs font-bold",onClick:i[1]||(i[1]=y=>l.$emit("clickedMaxAvailable",!0))},x(l.$t("swap.maxAmount")),9,_t)):U("",!0)])])],2)}}});const he=Ie(wt,[["__scopeId","data-v-ac217733"]]),kt={class:"rounded-md bg-white flex border mt-3"},At=["value","placeholder"],It=s("div",{class:"w-1 flex-none"},null,-1),Mt={class:"text-gray-800"},$t=oe({__name:"TextAreaInput",props:{modelValue:{type:String,required:!1},currentBytes:{type:Number,required:!0},limit:{type:Number,required:!0},placeholder:{type:String,required:!0}},emits:["update:modelValue"],setup(m){return(n,u)=>(w(),I($e,null,[s("div",kt,[s("textarea",{value:m.modelValue,onInput:u[0]||(u[0]=r=>n.$emit("update:modelValue",r.target.value)),rows:"2",class:"w-full text-gray-500 px-2 py-1 outline-none bg-white text-xs",placeholder:m.placeholder.toUpperCase()},null,40,At),It]),s("div",{class:Ae(["float-right mt-1 text-tsm",m.currentBytes>m.limit?"text-red-500":"text-gray-800"])},[Me(x(m.currentBytes)+" ",1),s("span",Mt,"/"+x(m.limit),1)],2)],64))}}),Pt={class:"border border-gray-200 px-2 py-2 rounded-md w-full"},Tt={class:"flex gap-2"},Ft={class:"flex flex-col w-full"},Vt={class:"uppercase text-gray-500 font-light text-xxs text-left"},Ct={key:0,class:"flex flex-col ml-auto justify-center mt-1"},St=s("img",{src:tt,class:"h-5 w-5 mr-auto ml-auto"},null,-1),Et={class:"text-xxs text-red-400 font-bold uppercase"},Nt={key:1,class:"flex flex-col ml-auto justify-center mt-1"},Bt=s("img",{src:at,class:"h-5 w-5 mr-auto ml-auto"},null,-1),Lt={class:"text-xxs text-green-400 font-bold uppercase"},xe=oe({__name:"FieldValidationInput",props:Re({placeholder:{},showError:{}},{modelValue:{}}),emits:["update:modelValue"],setup(m){const n=Ke(m,"modelValue");return(u,r)=>(w(),I("div",Pt,[s("div",Tt,[s("div",Ft,[s("div",Vt,x(u.placeholder),1),te(s("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=l=>n.value=l),class:"w-full font-semibold text-tsm outline-none mt-1"},null,512),[[Oe,n.value]])]),u.showError&&n.value.length!=0?(w(),I("div",Ct,[St,s("div",Et,x(u.$t("general.invalid")),1)])):u.showError?U("",!0):(w(),I("div",Nt,[Bt,s("div",Lt,x(u.$t("general.valid")),1)]))])]))}});const Te="0".repeat(64),_e=a.PublicAccount.createFromPublicKey(Te,o.networkType).address.plain(),we=(m,n)=>{let u=[];return parseInt(m)>0&&u.push(new a.Mosaic(new a.MosaicId(o.nativeToken.assetId),a.UInt64.fromUint(Number(m)))),n.length>0&&n.forEach(r=>{parseInt(r.amount)>0&&u.push(new a.Mosaic(new a.MosaicId(r.id),a.UInt64.fromUint(Number(r.amount))))}),u},le=class le{};le.createTransaction=async(n,u,r,l,i,c,y,R,T)=>{if(!ae.verifyWalletPassword(K.currentLoggedInWallet.name,X.chainNetworkName,i))return!1;const b=X.currentNetworkProfile.generationHash;let p=o.networkType,k=parseFloat(u)*Math.pow(10,o.nativeToken.divisibility),d=[];k>0&&d.push(new a.Mosaic(new a.MosaicId(o.nativeToken.assetId),a.UInt64.fromUint(Number(k)))),l.length>0&&l.forEach(_=>{_.amount>0&&d.push(new a.Mosaic(new a.MosaicId(_.id),a.UInt64.fromUint(Number(_.amount*Math.pow(10,_.divisibility)))))});let M=o.buildTxn,f,g;if(!y)f=K.currentLoggedInWallet.accounts.find(_=>_.address===c);else{f=K.currentLoggedInWallet.accounts.find(O=>O.address===c);const _=await o.chainAPI.accountAPI.getAccountInfo(a.Address.createFromRawAddress(y));g=a.PublicAccount.createFromPublicKey(_.publicKey,p)}let F=ae.decryptPrivateKey(new a.Password(i),f.encrypted,f.iv),S;if(R&&r.length>0)try{const _=await o.chainAPI.accountAPI.getAccountInfo(a.Address.createFromRawAddress(n));S=a.EncryptedMessage.create(r,_.publicAccount,F)}catch{S=a.EncryptedMessage.create(r,a.PublicAccount.createFromPublicKey(T,o.networkType),F)}else S=a.PlainMessage.create(r);let v=M.transferBuilder().recipient(a.Address.createFromRawAddress(n)).mosaics(d).message(S).build();const $=a.Account.createFromPrivateKey(F,p,1);if(y){let _=K.currentLoggedInWallet.accounts.find(Q=>Q.address==c),O=ae.decryptPrivateKey(new a.Password(i),_.encrypted,_.iv),Z=a.Account.createFromPrivateKey(O,p,1);const W=[v.toAggregateV1(g)],re=M.aggregateBonded(W),z=Z.preV2Sign(re,b),G=q.lockFundTx(z),ie=Z.preV2Sign(G,b);q.announceLF_AND_addAutoAnnounceABT(ie,z)}else{const _=$.preV2Sign(v,b);q.announceTransaction(_)}return!0},le.calculateAggregateFee=(n,u,r,l)=>{let i=o.buildTxn,c=we(u,r),R=[i.transferBuilder().recipient(a.Address.createFromRawAddress(_e)).mosaics(c).message(l&&n.length>0?a.EncryptedMessage.create(n,a.PublicAccount.createFromPublicKey("0".repeat(64),o.networkType),"0".repeat(64)):a.PlainMessage.create(n)).build().toAggregateV1(a.PublicAccount.createFromPublicKey(Te,o.networkType))];return i.aggregateBondedBuilder().innerTransactions(R).build().maxFee.compact()/Math.pow(10,o.nativeToken.divisibility)},le.calculateFee=(n,u,r,l)=>{let i=o.buildTxn,c=we(u,r);return i.transferBuilder().recipient(a.Address.createFromRawAddress(_e)).mosaics(c).message(l&&n.length>0?a.EncryptedMessage.create(n,a.PublicAccount.createFromPublicKey("0".repeat(64),o.networkType),"0".repeat(64)):a.PlainMessage.create(n)).build().maxFee.compact()/Math.pow(10,o.nativeToken.divisibility)};let se=le;const Ut={name:"ConfirmSendModal",props:["toggleModal"],setup(){const n=Pe().appContext.config.globalProperties.emitter;return{closeConfirmModal:()=>{n.emit("CLOSE_CONFIRM_SEND_MODAL",!1)},proceedSend:()=>{n.emit("CONFIRM_PROCEED_SEND",!0)}}}},Rt={key:0,class:"popup-outer fixed flex z-50"},Kt={class:"modal-popup-box"},Ot={class:"delete-position"},Dt={class:"w-92"},qt={class:"text-center"},Wt={class:"mt-3"};function zt(m,n,u,r,l,i){const c=ee("font-awesome-icon");return w(),I("div",null,[V(De,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:ne(()=>[u.toggleModal?(w(),I("div",Rt,[s("div",Kt,[s("div",Ot,[V(c,{icon:"times",class:"delete-icon-style",onClick:n[0]||(n[0]=y=>{r.closeConfirmModal()})})]),s("div",Dt,[s("div",qt,x(m.$t("transfer.proceedWithZero")),1),s("div",Wt,[s("div",{onClick:n[1]||(n[1]=y=>r.proceedSend()),class:"blue-btn py-2 font-semibold cursor-pointer text-center ml-auto mr-auto w-7/12"},x(m.$t("general.confirm")),1),s("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:n[2]||(n[2]=y=>r.closeConfirmModal())},x(m.$t("general.cancel")),1)])])])])):U("",!0)]),_:1}),u.toggleModal?(w(),I("div",{key:0,onClick:n[3]||(n[3]=y=>{r.closeConfirmModal()}),class:"fixed inset-0 bg-opacity-90 bg-gray-100 z-20"})):U("",!0)])}const Ht=Ie(Ut,[["render",zt]]),jt={class:"w-10/12 ml-auto mr-auto mt-5"},Xt={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},Zt={class:"xl:col-span-2 p-12"},Gt={key:0,class:"mb-3 rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},Qt={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},Jt={class:"inline-block text-xs"},Yt={class:"text-sm font-semibold"},ea={class:"flex gap-1 mt-3"},ta={key:1,class:"mt-3"},aa=s("div",{class:"text-blue-primary font-semibold uppercase mt-3 text-xxs"},"Transfer to",-1),sa={class:"flex mt-1 gap-1 items-center"},la={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},na={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},oa={key:3,class:"h-3"},ra={key:4,class:"mb-5"},ia={for:"encryptedMsg",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},ca={class:"bg-navy-primary py-6 px-6 xl:col-span-1"},ua={class:"font-semibold text-xs text-white mb-1.5"},da=["disabled"],ma={class:"text-center"},va="^[0-9A-Za-z]{40}$",pa="^[0-9A-Za-z-]{46}$",fa="^[^ ]{8,}$",Ia=oe({__name:"ViewTransfer",setup(m){const n=Pe(),{t:u}=qe(),r=n.appContext.config.globalProperties.emitter,l=P(null),i=P(null),c=P(null),y=P(!1),R=P(!1),T=P(""),E=P(!1),b=P(!1),p=P(""),k=P(!0),d=P(!0),M=P([]),f=P([]),g=P("0"),F=P(0),S=P(""),v=P(""),$=P(0),_=B(()=>!(p.value.match(fa)&&!k.value&&!Z.value&&W.value<re.value&&O.value)),O=B(()=>!(b.value&&E.value&&W.value>0&&d.value));Y(f,e=>{for(let t=0;t<e.length;t++)isNaN(parseFloat(e[t].amount))&&(e[t].amount="0")},{deep:!0}),Y(g,e=>{isNaN(parseFloat(e))&&(g.value="0")});const Z=B(()=>c.value?l.value?parseFloat(g.value)>F.value||!f.value.every(e=>parseFloat(e.amount)<=e.balance)?!0:Q.value>$.value:Q.value>F.value||!f.value.every(e=>parseFloat(e.amount)<=e.balance):!1),W=B(()=>v.value.length==0?0:E.value?q.getFakeEncryptedMessageSize(v.value):q.getPlainMessageSize(v.value)),re=B(()=>{var e;return((e=X)==null?void 0:e.currentNetworkProfileConfig.maxMessageSize)-1}),z=B(()=>{var e;return D.convertToExact((e=X)==null?void 0:e.currentNetworkProfileConfig.lockedFundsPerAggregate,o.nativeToken.divisibility)}),G=B(()=>X.currentNetworkProfile?D.convertToExact(q.getLockFundFee(),o.nativeToken.divisibility):0),ie=B(()=>{if(!c.value)return 0;let e=o.nativeToken.divisibility;return l.value?D.convertNumberMinimumFormat(F.value,e):D.convertNumberMinimumFormat(F.value-H.value,e)}),Q=B(()=>{let e=o.nativeToken.divisibility;return l.value?e==0?Math.trunc(H.value+G.value+z.value):Math.round((H.value+G.value+z.value)*Math.pow(10,e))/Math.pow(10,e):e==0?Math.trunc(parseFloat(g.value.replace(/,/g,""))+H.value):Math.round((parseFloat(g.value.replace(/,/g,""))+H.value)*Math.pow(10,e))/Math.pow(10,e)}),H=B(()=>{const e=f.value.map(t=>({id:t.id,amount:t.amount}));return e.push({id:o.nativeToken.assetId,amount:g.value}),l.value?se.calculateAggregateFee(v.value,g.value,e,E.value):c.value?se.calculateFee(v.value,g.value,e,E.value):0}),Fe=()=>{g.value=ie.value.toString(),g.value=ie.value.toString()},pe=()=>{c.value=null,p.value="",T.value="",E.value=!1,v.value="",g.value="0",r.emit("CLEAR_SELECT",0),f.value=[],l.value=null,S.value=""},fe=We(),ge=ze(),Ve=async()=>{if(!await se.createTransaction(T.value,g.value,v.value,f.value.map(t=>({id:t.id,amount:parseFloat(t.amount),divisibility:t.divisibility})),p.value,c.value,l.value,E.value,S.value)){fe.add({severity:"error",summary:"Error",detail:"Password is incorrect",group:"br-custom",life:1e3});return}ge.push({name:"ViewAccountPendingTransactions",params:{address:c.value}}),pe()},Ce=async()=>{if(ae.verifyWalletPassword(K.currentLoggedInWallet.name,X.chainNetworkName,p.value)){let t=parseFloat(g.value)*Math.pow(10,o.nativeToken.divisibility),h=[],C=f.value.map(N=>({id:N.id,amount:parseFloat(N.amount),divisibility:N.divisibility}));t>0&&h.push(new a.Mosaic(new a.MosaicId(o.nativeToken.assetId),a.UInt64.fromUint(Number(t)))),C.length>0&&C.forEach(N=>{N.amount>0&&h.push(new a.Mosaic(new a.MosaicId(N.id),a.UInt64.fromUint(Number(N.amount*Math.pow(10,N.divisibility)))))});let j=o.buildTxn,J=K.currentLoggedInWallet.accounts.find(N=>N.address===c.value),A=ae.decryptPrivateKey(new a.Password(p.value),J.encrypted,J.iv),L;if(E.value&&v.value.length>0)try{const N=await o.chainAPI.accountAPI.getAccountInfo(a.Address.createFromRawAddress(T.value));L=a.EncryptedMessage.create(v.value,N.publicAccount,A)}catch{L=a.EncryptedMessage.create(v.value,a.PublicAccount.createFromPublicKey(S.value,o.networkType),A)}else L=a.PlainMessage.create(v.value);let ce=j.transferBuilder().recipient(a.Address.createFromRawAddress(T.value)).mosaics(h).message(L).build(),ue=q.signTxnWithPassword(c.value,l.value,p.value,ce);ve.lockHashPayload=ue.hashLockTxnPayload,ve.transactionPayload=ue.txnPayload,ve.selectedAddress=c.value,ge.push({name:"ViewConfirmTransaction"}),pe()}else{fe.add({severity:"error",summary:"Error",detail:"Password is incorrect",group:"br-custom",life:1e3});return}},Se=async()=>{if(o.chainAPI)try{const e=await o.chainAPI.accountAPI.getAccountInfo(a.Address.createFromRawAddress(c.value)),t=e.mosaics.findIndex(h=>h.id.toHex()==o.nativeToken.assetId);t!=-1?($.value=e.mosaics[t].amount.compact()/Math.pow(10,o.nativeToken.divisibility),e.mosaics.splice(t,1)):$.value=0}catch{$.value=0}},me=async e=>{if(o.chainAPI&&e){M.value=[];try{const t=await o.chainAPI.accountAPI.getAccountInfo(a.Address.createFromRawAddress(e)),h=t.mosaics.findIndex(C=>C.id.toHex()==o.nativeToken.assetId);h!=-1?(F.value=t.mosaics[h].amount.compact()/Math.pow(10,o.nativeToken.divisibility),t.mosaics.splice(h,1)):F.value=0;for(let C=0;C<t.mosaics.length;C++){const j=t.mosaics[C];M.value.push({id:j.id.toHex(),balance:j.amount.compact(),divisibility:0,namespace:"",hasUpdated:!1})}}catch{M.value=[],F.value=0}}};Y(c,async(e,t)=>{M.value=[],f.value=[],e==null?(F.value=0,i.value=null,l.value=null):e!=t&&(i.value=null,l.value=null,await me(e))}),Y(l,async(e,t)=>{M.value=[],f.value=[],e==null&&($.value=0,i.value=null,l.value=null,await me(c.value)),e!=t&&(await Se(),await me(e))}),r.on("select-account",e=>{c.value=e}),r.on("select-multisig-account",e=>{i.value=e.label,l.value=e.value}),r.on("CLOSE_MULTISIG",()=>{i.value=null,l.value=null}),r.on("CLOSE_CONFIRM_SEND_MODAL",e=>{R.value=e}),r.on("CONFIRM_PROCEED_SEND",e=>{e&&(R.value=!1,Ve())});const Ee=e=>{y.value=!1,T.value=e.data},Ne=B(()=>{const e=K.currentLoggedInWallet;if(!e)return[];const t=[...e.accounts,...e.others];return e.contacts.length?[{key:"0",label:u("general.ownerAcc"),selectable:!1,children:t.map((h,C)=>({key:"0-"+C.toString(),label:h.name,data:a.Address.createFromRawAddress(h.address).pretty(),selectable:!0}))},{key:"1",label:u("general.contact"),selectable:!1,children:e.contacts.map((h,C)=>({key:"1-"+C.toString(),label:h.name,data:a.Address.createFromRawAddress(h.address).pretty(),selectable:!0}))}]:[{key:"0",label:u("general.ownerAcc"),selectable:!1,children:t.map((h,C)=>({key:"0-"+C.toString(),label:h.name,data:a.Address.createFromRawAddress(h.address).pretty(),selectable:!0}))}]});Y([T,k],e=>{if(e[0].match(pa)||e[0].match(va)){if(!e[1]){Be();return}ye()}else k.value=!0});const Be=()=>{o.chainAPI.accountAPI.getAccountInfo(a.Address.createFromRawAddress(T.value)).then(e=>{b.value=e.publicKey=="0".repeat(64)}).catch(e=>b.value=!0)},Le=()=>{try{a.PublicAccount.createFromPublicKey(S.value,o.networkType).address.plain()==a.Address.createFromRawAddress(T.value).plain()&&(d.value=!1)}catch{d.value=!0}},ye=()=>{if(K.currentLoggedInWallet)try{let e=D.createAddress(T.value);D.checkAddressNetwork(e,o.networkType)?k.value=!1:k.value=!0}catch{try{let t=D.createNamespaceId(T.value);o.chainAPI.namespaceAPI.getLinkedAddress(t).then(h=>{T.value=h.plain(),k.value=!1}).catch(h=>{k.value=!0})}catch{k.value=!0}}};return(e,t)=>{const h=ee("Sidebar"),C=ee("font-awesome-icon"),j=ee("router-link"),J=ke("debounce");return w(),I("div",null,[V(h,{visible:y.value,"onUpdate:visible":t[0]||(t[0]=A=>y.value=A),baseZIndex:1e4,position:"full"},{default:ne(()=>[V(Je,{contacts:Ne.value,onNodeSelect:Ee},null,8,["contacts"])]),_:1},8,["visible"]),V(Ht,{toggleModal:R.value},null,8,["toggleModal"]),s("div",jt,[s("div",Xt,[s("div",Zt,[Z.value?(w(),I("div",Gt,[s("div",Qt,[V(C,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),s("div",Jt,x(e.$t("general.insufficientBalance")),1)])):U("",!0),s("div",Yt,x(e.$t("transfer.newTransfer")),1),s("div",ea,[V(Xe,{type:"transfer"}),V(Ze,{"selected-address":c.value},null,8,["selected-address"])]),l.value?(w(),I("div",ta,[V(Ge,{"select-default-address":l.value,"select-default-name":i.value,type:"transfer"},null,8,["select-default-address","select-default-name"])])):U("",!0),aa,s("div",sa,[te(V(xe,{placeholder:e.$t("transfer.transferPlaceholder"),modelValue:T.value,"onUpdate:modelValue":t[1]||(t[1]=A=>T.value=A),showError:k.value},null,8,["placeholder","modelValue","showError"]),[[J,ye,"1000"]]),s("div",{onClick:t[2]||(t[2]=A=>y.value=!y.value),class:"border rounded-md cursor-pointer flex flex-col justify-center p-1.5"},[V(C,{icon:"id-card-alt",class:"text-blue-primary ml-auto mr-auto"}),s("div",la,x(e.$t("general.select")),1),s("div",na,x(e.$t("general.contact")),1)])]),(w(!0),I($e,null,He(f.value,(A,L)=>{var ce;return w(),I("div",{key:L},[V(vt,{class:"mt-3","asset-options":M.value,index:L,"selected-assets":f.value},null,8,["asset-options","index","selected-assets"]),((ce=f.value[L].id)==null?void 0:ce.length)==16?(w(),be(he,{key:0,class:"mt-3",modelValue:f.value[L].amount,"onUpdate:modelValue":ue=>f.value[L].amount=ue,placeholder:e.$t("transfer.assetAmount"),type:"text",decimal:f.value[L].divisibility},null,8,["modelValue","onUpdate:modelValue","placeholder","decimal"])):U("",!0)])}),128)),f.value.length!=M.value.length?(w(),I("button",{key:2,class:"my-2 font-semibold text-xs text-blue-primary outline-none focus:outline-none disabled:opacity-50",onClick:t[3]||(t[3]=A=>f.value.push({id:null,balance:0,amount:"0",namespace:"",divisibility:0}))}," + "+x(e.$t("transfer.addAssets")),1)):(w(),I("div",oa)),V(he,{modelValue:g.value,"onUpdate:modelValue":t[4]||(t[4]=A=>g.value=A),balance:F.value,placeholder:e.$t("transfer.transferAmount"),logo:!0,type:"text",onClickedMaxAvailable:t[5]||(t[5]=A=>Fe()),decimal:6},null,8,["modelValue","balance","placeholder"]),V($t,{modelValue:v.value,"onUpdate:modelValue":t[6]||(t[6]=A=>v.value=A),limit:re.value,placeholder:e.$t("general.message"),"current-bytes":W.value},null,8,["modelValue","limit","placeholder","current-bytes"]),k.value?U("",!0):(w(),I("div",ra,[te(s("input",{id:"encryptedMsg",type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=A=>E.value=A)},null,512),[[je,E.value]]),s("label",ia,x(e.$t("transfer.enableEncryption")),1)])),!k.value&&b.value&&E.value&&W.value>0?te((w(),be(xe,{key:5,placeholder:"Recipient Public Key",modelValue:S.value,"onUpdate:modelValue":t[8]||(t[8]=A=>S.value=A),showError:d.value},null,8,["modelValue","showError"])),[[J,Le,"1000"]]):U("",!0)]),s("div",ca,[V(Qe,{"signer-native-token-balance":$.value,"native-amount":g.value,"native-token-balance":F.value,"lock-fund":z.value,"lock-fund-tx-fee":G.value,"selected-multisig-address":l.value,"txn-fee":H.value,"total-fee":Q.value,"selected-assets":f.value},null,8,["signer-native-token-balance","native-amount","native-token-balance","lock-fund","lock-fund-tx-fee","selected-multisig-address","txn-fee","total-fee","selected-assets"]),s("div",ua,x(e.$t("general.enterPasswordContinue")),1),V(et,{placeholder:e.$t("general.enterPassword"),errorMessage:e.$t("general.passwordRequired"),modelValue:p.value,"onUpdate:modelValue":t[9]||(t[9]=A=>p.value=A),icon:"lock",class:"mt-5 mb-3"},null,8,["placeholder","errorMessage","modelValue"]),s("button",{type:"submit",class:"w-full blue-btn px-3 py-3 disabled:opacity-50 disabled:cursor-auto",disabled:_.value,onClick:t[10]||(t[10]=A=>Ce())},x(e.$t("general.transfer")),9,da),s("div",ma,[V(j,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white underline"},{default:ne(()=>[Me(x(e.$t("general.cancel")),1)]),_:1})])])])])])}}});export{Ia as default};
