import{_ as ge,o as i,b as c,e as t,t as l,f as F,ad as Me,u as Fe,q as Ae,D as Ie,c as o,E as f,r as v,n as T,H as p,V as ee,w as U,ao as z,I as Pe,aH as O,a as C,bc as me,k as B,P as Le,s as x,B as M,Q as H,ag as Ne,F as Ve,h as Ee,z as Be,W as De,A as Q}from"./index-8751e63b.js";import{_ as We}from"./PasswordInput.vue_vue_type_script_setup_true_lang-ae91cea7.js";import{S as Ue}from"./SupplyInputClean-d0c4609a.js";import{_ as He}from"./TransactionFeeDisplay.vue_vue_type_script_setup_true_lang-2ad06d0e.js";import{A as te}from"./assetsUtils-cfb156fd.js";import{t as je}from"./jdenticon-module-13fa61a1.js";import{M as Re}from"./multisigUtils-c576010e.js";import{T as se}from"./transactionState-27025085.js";import{_ as qe}from"./icon-asset-2a9ae6ea.js";import{_ as Y}from"./icon-info-8b4f1351.js";import"./proximax-logo-ecfc3767.js";const ze={props:{placeholder:String,errorMessage:String,showError:Boolean,modelValue:String,title:String,disabled:Boolean},emits:["update:modelValue"],name:"SelectModificationType",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},watch:{showError:function(s){s?(this.borderColor="border-2 border-red-primary",this.textErr=!0):(this.borderColor="border-2 border-gray-300",this.textErr=!1)}}},Oe={class:"border border-gray-200 px-2 py-1 h-14 rounded-md"},Qe={class:"uppercase text-gray-500 text-txs text-left mb-2"},Ye={class:"flex items-center"},Ze=["value","disabled","checked"],Ge={for:"increase",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},Je=["value","disabled","checked"],Xe={for:"decrease",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},Ke={class:"h-3 mb-2"},$e={key:0,class:"error error-text text-left"};function et(s,r,m,e,j,b){return i(),c("div",null,[t("div",Oe,[t("div",Qe,l(m.title),1),t("div",Ye,[t("input",{id:"increase",type:"radio",name:"modificationType",value:m.modelValue,disabled:m.disabled,class:"h-5 w-5",onChange:r[0]||(r[0]=g=>s.$emit("update:modelValue","increase")),checked:m.modelValue=="increase"},null,40,Ze),t("label",Ge,l(s.$t("general.increase")),1),t("input",{id:"decrease",type:"radio",name:"modificationType",value:m.modelValue,disabled:m.disabled,class:"h-5 w-5",onChange:r[1]||(r[1]=g=>s.$emit("update:modelValue","decrease")),checked:m.modelValue=="decrease"},null,40,Je),t("label",Xe,l(s.$t("general.decrease")),1)])]),t("div",Ke,[j.textErr||m.showError?(i(),c("div",$e,l(m.errorMessage),1)):F("",!0)])])}const tt=ge(ze,[["render",et]]),st={name:"ViewServicesAssetsModifySupplyChange",directives:{tooltip:Me},components:{PasswordInput:We,SupplyInputClean:Ue,SelectModificationType:tt,TransactionFeeDisplay:He},props:{assetId:String,address:String},setup(s){const{t:r}=Fe(),m=Ae();Ie();let e=9e14;const j=o(()=>f.nativeToken.label),b=v(!1),g=v(""),R=v(""),A=v(!1),I=v(!1),P=v(!1),Z="^[^ ]{8,}$",L=v(!1),n=v(!1),y=v(""),fe=o(()=>f.nativeToken.label),be=o(()=>T.currentNetworkProfileConfig?p.convertToExact(T.currentNetworkProfileConfig.lockedFundsPerAggregate,f.nativeToken.divisibility):0),pe=o(()=>T.currentNetworkProfileConfig?p.convertToCurrency(T.currentNetworkProfileConfig.lockedFundsPerAggregate,f.nativeToken.divisibility):0),ae=o(()=>T.currentNetworkProfile?p.convertToExact(ee.getLockFundFee(),f.nativeToken.divisibility):0),G=o(()=>be.value+ae.value),ye=o(()=>!(g.value.match(Z)&&h.value>0&&!b.value&&!K.value&!X.value)),he=o(()=>d.value?d.value.name:""),w=o(()=>d.value?d.value.address:""),le=o(()=>d.value?d.value.balance:0),oe=o(()=>{if(d.value)return p.toCurrencyFormat(d.value.balance,f.nativeToken.divisibility)}),h=v("0"),re=p.createAddress(s.address).plain();let d=o(()=>U.currentLoggedInWallet?U.currentLoggedInWallet.accounts.find(a=>a.address==re)||U.currentLoggedInWallet.others.find(a=>a.address==re):null);const _e=v(z(w.value));let ne=new Pe("ThemeStyleConfig");ne.init();const xe=v(je(s.address,40,ne.jdenticonConfig)),N=v("increase");let J=9e14;const u=o(()=>d.value?d.value.assets.find(a=>a.idHex===s.assetId):null),D=o(()=>u.value?u.value.amount:0),ie=o(()=>u.value?u.value.idHex:""),we=o(()=>u.value?u.value.transferable:!1),ce=o(()=>u.value?u.value.supplyMutable:!1),q=o(()=>u.value?u.value.divisibility:0),k=o(()=>u.value?u.value.supply/Math.pow(10,u.value.divisibility):0),_=o(()=>{if(!d.value)return{hasCosigner:!1,cosignerList:[]};if(T.currentNetworkProfileConfig){let a=Re.getCosignerInWallet(d.value?d.value.publicKey:""),S=[];return a.cosignerList.forEach(E=>{S.push({publicKey:E,name:O(E).name,balance:O(E).balance,address:O(E).address})}),a.cosignerList=S,{hasCosigner:a.hasCosigner,cosignerList:a.cosignerList}}else return{hasCosigner:!1,cosignerList:[]}});y.value=_.value.cosignerList.length>0?_.value.cosignerList[0].address:"",C(_,a=>{a.cosignerList.length>0&&(y.value=a.cosignerList.length>0?_.value.cosignerList[0].address:"")});const X=o(()=>_.value.cosignerList.length==0&&z(w.value)),de=o(()=>{let a=me(y.value)?me(y.value).balance:0;return p.toCurrencyFormat(a)}),K=o(()=>y.value.length<=0?le.value<W.value:Number(de.value)<W.value+G.value),$=o(()=>_.value.cosignerList.length>0?_.value.cosignerList.length>1?y.value:O(_.value.cosignerList[0].publicKey).address:""),ke=o(()=>f.isReady?p.convertToCurrency(te.getMosaicSupplyChangeTransactionFee(s.assetId,N.value,parseFloat(h.value),q.value),f.nativeToken.divisibility):"0"),W=o(()=>f.isReady?p.convertToExact(te.getMosaicSupplyChangeTransactionFee(s.assetId,N.value,parseFloat(h.value),q.value),f.nativeToken.divisibility):0);C(ce,a=>{a?(P.value=!1,I.value=!1,A.value=!1):(P.value=!0,I.value=!0,A.value=!0)},{immediate:!0});const Se=()=>{if(!De.verifyWalletPassword(U.currentLoggedInWallet.name,T.chainNetworkName,g.value)){R.value=r("general.walletPasswordInvalid",{name:U.currentLoggedInWallet.name});return}let S={};const E=f.buildTxn;let Ce=N.value=="increase"?Q.MosaicSupplyType.Increase:Q.MosaicSupplyType.Decrease,ve=E.buildMosaicSupplyChange(new Q.MosaicId(ie.value),Ce,Q.UInt64.fromUint(te.addZeros(q.value,Number(h.value))));$.value?S=ee.signTxnWithPassword($.value,w.value,g.value,ve):S=ee.signTxnWithPassword(w.value,null,g.value,ve),se.lockHashPayload=S.hashLockTxnPayload,se.transactionPayload=S.txnPayload,se.selectedAddress=w.value,m.push({name:"ViewConfirmTransaction"})};C(N,a=>{a=="increase"?b.value=parseFloat(h.value)>J-k.value:k.value==D.value?b.value=parseFloat(h.value)>k.value-1:b.value=parseFloat(h.value)>D.value}),C(h,a=>{N.value=="increase"?b.value=parseFloat(a)>J-k.value:k.value==D.value?b.value=parseFloat(a)>k.value-1:b.value=parseFloat(a)>D.value});const ue=o(()=>z(w.value)?parseFloat(G.value)+W.value:W.value),Te=o(()=>p.amountFormatterSimple(ue.value,0)),V=a=>{A.value=a,I.value=a,P.value=a};return C(ue,a=>{oe.value<a?V(!0):V(!1)}),C(K,a=>{V(!!a)}),C(X,a=>{V(!!a)}),{currentNativeTokenName:j,selectedAccName:he,selectedAccAdd:w,balance:oe,balanceNumber:le,showNoBalance:K,lockFundTxFee:ae,lockFundCurrency:pe,lockFundTotalFee:G,totalFeeFormatted:Te,showSupplyErr:b,err:R,walletPassword:g,disableModify:ye,showPasswdError:L,supply:h,disabledPassword:A,disabledSupply:I,currencyName:fe,isMultiSig:z,isMultiSigBool:_e,selectAsset:ie,selectIncreaseDecrease:N,modifyAsset:Se,transactionFee:ke,transactionFeeExact:W,assetSupply:k,assetAmount:D,assetDivisibility:q,assetTransferable:we,assetMutable:ce,getMultiSigCosigner:_,cosignerBalanceInsufficient:n,cosignerAddress:y,cosigner:$,isNotCosigner:X,disabledSelectIncreaseDecrease:P,Helper:p,svgString:xe,maxAmount:e,maxAssetSupply:J,checkCosignBalance:de}}},at={class:"w-10/12 ml-auto mr-auto"},lt={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},ot={class:"xl:col-span-2 p-6 lg:p-12"},rt={class:"lg:flex lg:justify-between lg:items-center"},nt={class:"font-semibold mb-4 inline-block mt-1"},it={class:"flex items-center"},ct=["innerHTML"],dt={class:"ml-2"},ut={class:"text-blue-primary text-xxs font-bold uppercase mb-1"},vt={class:"font-bold text-black text-sm"},mt={key:0,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},gt={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},ft=t("div",{class:"inline-block text-xs"},"Asset is immutable",-1),bt={key:1,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},pt={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},yt={class:"inline-block text-xs"},ht={key:2,class:"rounded-md bg-yellow-200 w-full p-2 flex items-center justify-center"},_t={class:"rounded-full w-5 h-5 bg-yellow-100 inline-block relative mr-2"},xt={class:"inline-block text-xs"},wt={key:3,class:"error error_box"},kt={class:"text-right w-full"},St={key:0,class:"inline-block"},Tt={class:"text-tsm text-left mt-3"},Ct={key:0,class:"font-bold"},Mt={key:0,class:"error"},Ft={key:1,class:"font-bold"},At=["value"],It={key:2,class:"error"},Pt={class:"border border-blue-primary p-4 bg-blue-100 flex items-center rounded mt-5"},Lt=t("img",{src:qe},null,-1),Nt={class:"ml-1"},Vt={class:"uppercase text-blue-primary font-semibold text-xxs"},Et={class:"text-black text-sm font-bold"},Bt={class:"border border-gray-200 p-4 rounded mt-5"},Dt={class:"lg:grid lg:grid-cols-2"},Wt={class:"my-3"},Ut={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Ht={src:Y,class:"inline-block ml-2 relative",style:{top:"-1px"}},jt={class:"text-black font-bold text-sm"},Rt={class:"my-3"},qt={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},zt={src:Y,class:"inline-block ml-2 relative",style:{top:"-1px"}},Ot={class:"text-black font-bold text-sm"},Qt={class:"my-3"},Yt={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Zt={src:Y,class:"inline-block ml-2 relative",style:{top:"-1px"}},Gt={class:"uppercase text-black font-bold text-sm"},Jt={class:"my-3"},Xt={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Kt={src:Y,class:"inline-block ml-2 relative",style:{top:"-1px"}},$t={class:"uppercase text-black font-bold text-sm"},es={class:"lg:grid lg:grid-cols-2 mt-5"},ts={class:"bg-navy-primary py-6 px-12 xl:col-span-1"},ss={class:"text-xs text-white mt-5 mb-1.5"},as=["disabled"],ls={class:"text-center"};function os(s,r,m,e,j,b){const g=B("font-awesome-icon"),R=B("SelectModificationType"),A=B("SupplyInputClean"),I=B("TransactionFeeDisplay"),P=B("PasswordInput"),Z=B("router-link"),L=Le("tooltip");return i(),c("div",null,[t("div",at,[t("div",lt,[t("div",ot,[t("div",rt,[t("div",nt,l(s.$t("asset.modifyAssetSupply")),1),t("div",it,[t("div",{innerHTML:e.svgString,class:"inline-block"},null,8,ct),t("div",dt,[t("div",ut,l(s.$t("asset.assetCreatedBy")),1),t("div",vt,l(e.selectedAccName),1)])])]),e.assetMutable?F("",!0):(i(),c("div",mt,[t("div",gt,[x(g,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),ft])),e.showNoBalance?(i(),c("div",bt,[t("div",pt,[x(g,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),t("div",yt,l(s.$t("general.insufficientBalance")),1)])):e.isNotCosigner?(i(),c("div",ht,[t("div",_t,[x(g,{icon:"exclamation",class:"text-yellow-500 h-3 w-3 absolute",style:{top:"5px",left:"7px"}})]),t("div",xt,l(s.$t("general.noCosigner")),1)])):F("",!0),e.err!=""?(i(),c("div",wt,l(e.err),1)):F("",!0),t("div",kt,[e.getMultiSigCosigner.cosignerList.length>0?(i(),c("div",St,[t("div",Tt,[M(l(s.$t("general.initiateBy"))+": ",1),e.getMultiSigCosigner.cosignerList.length==1?(i(),c("span",Ct,[M(l(e.getMultiSigCosigner.cosignerList[0].name)+" ("+l(s.$t("general.balance"))+": "+l(e.Helper.amountFormatterSimple(e.getMultiSigCosigner.cosignerList[0].balance,0))+" "+l(e.currentNativeTokenName)+") ",1),e.getMultiSigCosigner.cosignerList[0].balance<e.lockFundTotalFee?(i(),c("span",Mt,"- "+l(s.$t("general.insufficientBalance")),1)):F("",!0)])):(i(),c("span",Ft,[H(t("select",{"onUpdate:modelValue":r[0]||(r[0]=n=>e.cosignerAddress=n)},[(i(!0),c(Ve,null,Ee(e.getMultiSigCosigner.cosignerList,(n,y)=>(i(),c("option",{value:n.address,key:y},l(n.name)+" ("+l(s.$t("general.balance"))+": "+l(n.balance)+" "+l(e.currentNativeTokenName)+")",9,At))),128))],512),[[Ne,e.cosignerAddress]])])),e.cosignerBalanceInsufficient?(i(),c("div",It,"- "+l(s.$t("general.insufficientBalance")),1)):F("",!0)])])):F("",!0)]),t("div",Pt,[Lt,t("div",Nt,[t("div",Vt,l(s.$t("general.assetId")),1),t("div",Et,l(e.selectAsset),1)])]),t("div",Bt,[t("div",Dt,[t("div",Wt,[t("div",Ut,[M(l(s.$t("asset.currentSupply")),1),H(t("img",Ht,null,512),[[L,{value:"<tiptext>"+s.$t("asset.supplyMsg2")+"<br>"+s.$t("asset.supplyMsg3")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),t("div",jt,l(e.assetAmount),1)]),t("div",Rt,[t("div",qt,[M(l(s.$t("general.divisibility")),1),H(t("img",zt,null,512),[[L,{value:"<tiptext>"+s.$t("asset.divisibilityMsg4")+"<br><br>"+s.$t("asset.divisibilityMsg2")+"<br>"+s.$t("asset.divisibilityMsg3")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),t("div",Ot,l(e.assetDivisibility),1)]),t("div",Qt,[t("div",Yt,[M(l(s.$t("general.transferable")),1),H(t("img",Zt,null,512),[[L,{value:"<tiptext>"+s.$t("asset.transferableMsg")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),t("div",Gt,l(e.assetTransferable?s.$t("general.yes"):s.$t("general.no")),1)]),t("div",Jt,[t("div",Xt,[M(l(s.$t("general.supplyMutable")),1),H(t("img",Kt,null,512),[[L,{value:"<tiptext>"+s.$t("asset.supplyMutableMsg")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),t("div",$t,l(e.assetMutable?s.$t("general.yes"):s.$t("general.no")),1)])])]),t("div",es,[x(R,{title:s.$t("asset.modificationType"),class:"lg:mr-4",modelValue:e.selectIncreaseDecrease,"onUpdate:modelValue":r[1]||(r[1]=n=>e.selectIncreaseDecrease=n)},null,8,["title","modelValue"]),x(A,{disabled:e.showNoBalance||e.isNotCosigner,modelValue:e.supply,"onUpdate:modelValue":r[2]||(r[2]=n=>e.supply=n),balance:e.maxAssetSupply-e.assetSupply.value,placeholder:s.$t("asset.quantityOf",{value:e.selectIncreaseDecrease}),type:"text",icon:"coins",showError:e.showSupplyErr,errorMessage:e.selectIncreaseDecrease=="increase"?" The total asset supply should not exceed 900T":" You have exceeded the maximum value for decrease asset supply.",decimal:Number(e.assetDivisibility),class:"lg:ml-4"},null,8,["disabled","modelValue","balance","placeholder","showError","errorMessage","decimal"])])]),t("div",ts,[x(I,{"transaction-fee":e.transactionFee,"total-fee-formatted":e.totalFeeFormatted,"get-multi-sig-cosigner":e.getMultiSigCosigner,"check-cosign-balance":e.checkCosignBalance,"lock-fund-currency":e.lockFundCurrency,"lock-fund-tx-fee":String(e.lockFundTxFee),balance:e.balance,"selected-acc-add":e.selectedAccAdd},null,8,["transaction-fee","total-fee-formatted","get-multi-sig-cosigner","check-cosign-balance","lock-fund-currency","lock-fund-tx-fee","balance","selected-acc-add"]),t("div",ss,l(s.$t("general.enterPasswordContinue")),1),x(P,{placeholder:s.$t("general.password"),errorMessage:s.$t("general.passwordRequired"),showError:e.showPasswdError,modelValue:e.walletPassword,"onUpdate:modelValue":r[3]||(r[3]=n=>e.walletPassword=n),disabled:e.disabledPassword},null,8,["placeholder","errorMessage","showError","modelValue","disabled"]),t("button",{type:"submit",class:"mt-3 w-full blue-btn py-4 disabled:opacity-50 disabled:cursor-auto text-white",disabled:e.disableModify,onClick:r[4]||(r[4]=(...n)=>e.modifyAsset&&e.modifyAsset(...n))},l(s.$t("asset.modifyAssetSupply")),9,as),t("div",ls,[x(Z,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white border-b-2 border-white"},{default:Be(()=>[M(l(s.$t("general.cancel")),1)]),_:1})])])])])])}const ps=ge(st,[["render",os]]);export{ps as default};
