import{d as O,r as u,a9 as K,a as G,k as U,o as n,b as d,e as l,s as c,z as i,B as h,C as v,t as m,m as T,f as C,aa as W,n as M,i as q,E as A,A as N,H as J}from"./index-78ac0210.js";import{_ as Q}from"./proximax-logo-ecfc3767.js";import{_ as Y}from"./xarcade-logo-c4d3fd5c.js";import{_ as Z}from"./metx-logo-27f23eae.js";import{_ as ee}from"./icon-proximax-logo-gray-c2486ce1.js";import{_ as se}from"./icon-green-tick-1b766454.js";import{_ as te}from"./icon-red-x-a5511f99.js";import{_ as re}from"./icon-more-options-3f3cfda9.js";import{_ as oe}from"./icon-plus-7207f329.js";import{A as ae,_ as ne}from"./AccountTabs.vue_vue_type_script_setup_true_lang-224ffc9a.js";import{s as k,a as ie}from"./column.esm-8eb69f5a.js";import"./jdenticon-module-76c384fd.js";import"./functions-bd9ef88d.js";import"./TextInput-ae47f938.js";import"./TextInputClean-42d80b74.js";import"./icon-key-5b3f7dda.js";const le="/web-wallet-vuejs/assets/icon-transfer-white-08654b1d.svg",ce={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},de={class:"border-2 border-t-0"},me=["href"],ue={class:"text-blue-primary uppercase w-min-max text-xs mt-1.5 cursor-pointertext-blue-primary pr-7"},pe={class:"flex items-center pr-7"},fe={key:0,src:Q,class:"inline-block h-7 w-7 mr-2 border-2 rounded-3xl"},_e={key:1,src:Y,class:"inline-block h-7 w-7 mr-2 border-2 rounded-3xl"},ge={key:2,src:Z,class:"inline-block h-7 w-7 mr-2 border-2 rounded-3xl"},he={key:3},ve={key:4,src:ee,class:"inline-block h-6 w-6 mr-2"},we={key:5,class:"inline-block text-xs ml-2 mt-1"},ye={key:6,class:"inline-block text-xs ml-2 cursor-pointer mt-1"},xe={key:0,src:se,class:"h-5 w-5"},ke={key:1,src:te,class:"h-5 w-5"},be=["onClick","onMouseover"],Ae={key:0,class:"mt-5 w-36 absolute rounded-sm shadow-lg bg-white focus:outline-none z-10 text-left"},Pe={class:"my-2"},Ie=l("div",{class:"block hover:bg-gray-100 transition duration-200 p-2 z-20 cursor-pointer"},"View Metadata",-1),Ce={class:"flex my-3 px-6 flex-col w-full ml-auto mr-auto gap-2 sm:flex-row sm:items-center"},Me=l("img",{src:le,class:"inline-block w-4 h-4 mt-0.5 cursor-pointer mr-1"},null,-1),Ne=l("img",{src:W,class:"w-4 h-4 inline-block relative mr-1"},null,-1),Se=l("img",{src:oe,class:"inline-block w-4 h-4 mr-2"},null,-1),qe=O({__name:"ViewAccountAssets",props:{address:String},setup(p){const S=p,w=e=>e=="prx.xpx"?{name:"XPX",registered:!0}:e=="prx.metx"?{name:"METX",registered:!0}:e=="xarcade.xar"?{name:"XAR",registered:!0}:{name:e,registered:!1},P=u({page:0,rows:10}),$=u(),E=e=>{P.value.rows=e},f=u([]),X=e=>M.currentNetworkProfile?M.currentNetworkProfile.chainExplorer.url+"/"+M.currentNetworkProfile.chainExplorer.assetInfoRoute+"/"+e:"",y=u([]),b=u(0),z=e=>{b.value=e,y.value[e]=!y.value[e]};q().appContext.config.globalProperties.emitter.on("PAGE_CLICK",()=>{for(var e=0;e<y.value.length;)e!=b.value&&(y.value[e]=!1),e++});const B=e=>{b.value=e},H=()=>{b.value=-1},F=async()=>{try{return(await A.chainAPI.accountAPI.getAccountInfo(N.Address.createFromRawAddress(S.address))).mosaics.map((o,t)=>({i:t,id:o.id.toHex(),amount:o.amount.compact().toString(),name:"",isCreator:!1,isLoaded:!1}))}catch{return[]}},L=K(),_=u(!1);L.run(()=>{const e=u(!1),o=G(A,async t=>{t.isReady&&!e.value&&(_.value=!0,f.value=await F(),e.value=!0,V(),_.value=!1,o(),L.stop())},{immediate:!0})});const j=e=>{const{page:o,rows:t}=e;P.value={page:o,rows:t},V()},V=async()=>{var R;_.value=!0;const{page:e,rows:o}=P.value,t=[];for(let r=0;r<o;r++){const a=e*o+r;if(!f.value[a]||f.value[a].isLoaded)continue;const x=f.value[a];t.push(new N.MosaicId(x.id))}if(!t.length){_.value=!1;return}const s=await A.chainAPI.assetAPI.getMosaicsNames(t),g=await A.chainAPI.assetAPI.getMosaics(t),I={};t.forEach((r,a)=>{I[r.toHex()]=a}),g.sort((r,a)=>{const x=I[r.mosaicId.toHex()],D=I[a.mosaicId.toHex()];return x-D});for(let r=0;r<t.length;r++){const a=f.value.find(x=>x.id==t[r].toHex());a.name=((R=s[r].names[0])==null?void 0:R.name)??"-",a.amount=J.toCurrencyFormat(parseFloat(a.amount)/Math.pow(10,g[r].divisibility),g[r].divisibility),a.isCreator=g[r].owner.address.plain()==N.Address.createFromRawAddress(S.address).plain(),a.isLoaded=!0}_.value=!1};return(e,o)=>{const t=U("router-link");return n(),d("div",null,[l("div",ce,[c(ae,{address:p.address,class:"mb-6"},null,8,["address"]),c(ne,{address:p.address,selected:"assets"},null,8,["address"]),l("div",de,[c(v(ie),{value:f.value,paginator:!0,rows:10,dataKey:"id",ref_key:"dt",ref:$,onPage:o[0]||(o[0]=s=>j(s)),"onUpdate:rows":o[1]||(o[1]=s=>E(s)),loading:_.value,rowsPerPageOptions:[10,20,30,40,50],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink  RowsPerPageDropdown",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",responsiveLayout:"scroll"},{empty:i(()=>[h(" No assets found. ")]),default:i(()=>[c(v(k),{field:"id",header:"Asset ID"},{body:i(({data:s})=>[l("a",{href:X(s.id),target:"_new",class:"col-span-2"},[l("div",ue,m(s.id),1)],8,me)]),_:1}),c(v(k),{field:"name",header:"Namespace"},{body:i(({data:s})=>[l("div",pe,[w(s.name).name=="XPX"?(n(),d("img",fe)):w(s.name).name=="XAR"?(n(),d("img",_e)):w(s.name).name=="METX"?(n(),d("img",ge)):s.name=="-"?(n(),d("div",he)):(n(),d("img",ve)),w(s.name).registered?(n(),d("div",we,m(w(s.name).name),1)):(n(),d("div",ye,m(s.name),1))])]),_:1}),c(v(k),{field:"amount",header:"Balance"},{body:i(({data:s})=>[l("div",null,m(s.amount),1)]),_:1}),c(v(k),{field:"creator",header:"Creator"},{body:i(({data:s})=>[s.isCreator?(n(),d("img",xe)):(n(),d("img",ke))]),_:1}),c(v(k),{header:"Actions "},{body:i(({data:s})=>[l("img",{src:re,class:"w-4 h-4 cursor-pointer ml-2 mt-0.5",onClick:g=>z(s.i),onMouseover:g=>B(s.i),onMouseout:H},null,40,be),y.value[s.i]?(n(),d("div",Ae,[l("div",Pe,[s.isCreator?(n(),T(t,{key:0,to:{name:"ViewServicesAssetsModifySupplyChange",params:{assetId:s.id,address:p.address}},class:"block hover:bg-gray-100 transition duration-200 p-2 z-20"},{default:i(()=>[h(m(e.$t("general.modifySupply")),1)]),_:2},1032,["to"])):C("",!0),s.isCreator?(n(),T(t,{key:1,to:{name:"ViewServicesAssetsLinkToNamespace",params:{assetId:s.id,address:p.address}},class:"block hover:bg-gray-100 transition duration-200 p-2 z-20"},{default:i(()=>[h(m(e.$t("general.linkToNamespace")),1)]),_:2},1032,["to"])):C("",!0),c(t,{to:{name:"ViewAssetMetadata",params:{assetId:s.id,address:p.address}}},{default:i(()=>[Ie]),_:2},1032,["to"])])])):C("",!0)]),_:1})]),_:1},8,["value","loading"]),l("div",Ce,[c(t,{to:{name:"ViewTransferCreate"},class:"bg-blue-primary px-5 py-2 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center"},{default:i(()=>[Me,h(m(e.$t("general.transfer")),1)]),_:1}),c(t,{to:{name:"ViewServicesMainnetSwap"},class:"bg-blue-primary px-5 py-2 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center"},{default:i(()=>[Ne,h(m(e.$t("general.swap")),1)]),_:1}),c(t,{to:{name:"ViewServicesAssetsCreate"},class:"bg-blue-primary px-5 py-2 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center"},{default:i(()=>[Se,h(m(e.$t("asset.createNewAsset")),1)]),_:1})])])])])}}});export{qe as default};
