import{d as H,g as b,A as m,D as C,r as V,o as w,f as M,e as s,l as r,b as i,t as l,s as h,v as f,i as U,x as n,_ as E}from"./index-d2e8ccc1.js";import{_ as R}from"./chevron_left-0423cb29.js";import{A as L,_ as D,a as $}from"./AccountTabs.vue_vue_type_script_setup_true_lang-8844b832.js";import{_ as F}from"./icon-plus-7207f329.js";import{s as _,a as Q}from"./column.esm-15667edd.js";import{U as B}from"./UTF8-35cb612a.js";import"./jdenticon-module-59aa2fb9.js";import"./functions-35769730.js";import"./TextInput-729dd071.js";import"./TextInputClean-7f026065.js";import"./icon-key-5b3f7dda.js";const O={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},Z={class:"border-2 border-t-0"},z={class:"flex cursor-pointer items-center pt-3 px-3"},W={class:"text-blue-primary text-xs"},j={class:"border border-blue-primary p-4 bg-blue-100 flex flex-col rounded mt-5 mx-6 mb-5"},q={class:"text-black text-sm font-bold"},G={class:"text-black text-sm font-bold"},J={class:"flex"},X={key:0,class:"ml-3 text-gray-400 font-semibold"},Y={key:0,class:"flex"},ee={class:"text-xs"},te=H({__name:"ViewAssetMetadata",props:{assetId:String,address:String},setup(o){const y=o,A=b("-"),N=async()=>{let e=await m.chainAPI.assetAPI.getMosaicsNames([new n.MosaicId(y.assetId)]);A.value=e[0].names[0]?e[0].names[0].name:"-"},g=b([]),v=b(""),S=async()=>{let e=await m.chainAPI.accountAPI.getAccountInfo(n.Address.createFromRawAddress(y.address));v.value=e.publicKey},P=e=>new Promise(t=>setTimeout(t,e)),I=e=>(e.endsWith("00")&&(e=e.substring(0,e.length-2),e=I(e)),e),x=e=>{e=I(e);let t=n.Convert.hexToUint8(e);return B.isNotUTF8(t)||(e=n.Convert.decodeHexToUtf8(e)),e},T=async()=>{let e=new n.MetadataQueryParams;e.metadataType=n.MetadataType.MOSAIC,e.pageSize=100,e.pageNumber=1,e.targetId=y.assetId,e.targetKey=v.value;let t=await m.chainAPI.metadataAPI.searchMetadatas(e);for(let a=0;a<t.metadataEntries.length;a++){let d=t.metadataEntries;g.value.push({scopedMetadataKeyUtf8:d[a].scopedMetadataKey.toHex()==x(d[a].scopedMetadataKey.toHex())?null:x(d[a].scopedMetadataKey.toHex()),scopedMetadataKeyHex:d[a].scopedMetadataKey.toHex(),value:d[a].value})}let p=t.pagination.totalPages;await P(250);for(let a=2;a<=p;a++){let d=new n.MetadataQueryParams;d.metadataType=n.MetadataType.MOSAIC,d.pageSize=100,d.pageNumber=a,d.targetId=y.assetId,d.targetKey=v.value;let k=await m.chainAPI.metadataAPI.searchMetadatas(d);for(let c=0;c<k.metadataEntries.length;c++){let u=k.metadataEntries;g.value.push({scopedMetadataKeyUtf8:u[c].scopedMetadataKey.toHex()==x(u[c].scopedMetadataKey.toHex())?null:x(u[c].scopedMetadataKey.toHex()),scopedMetadataKeyHex:u[c].scopedMetadataKey.toHex(),value:u[c].value}),await P(250)}}},K=async()=>{await S(),await N(),T()};if(m.isReady)K();else{let e=C(m,t=>{t.isReady&&(K(),e())})}return(e,t)=>{const p=V("router-link");return w(),M("div",null,[s("div",O,[r(L,{address:o.address,class:"mb-6"},null,8,["address"]),r(D,{address:o.address,selected:"assets"},null,8,["address"]),s("div",Z,[r(p,{to:{name:"ViewAccountAssets",params:{address:o.address}}},{default:i(()=>[s("div",z,[t[0]||(t[0]=s("img",{src:R},null,-1)),s("div",W,l(e.$t("general.back")),1)])]),_:1},8,["to"]),s("div",j,[s("div",null,[t[1]||(t[1]=s("div",{class:"uppercase text-blue-primary font-semibold text-xxs"},"ASSET ID",-1)),s("div",q,l(o.assetId),1)]),s("div",null,[t[2]||(t[2]=s("div",{class:"uppercase text-blue-primary font-semibold text-xxs mt-3"},"Namespace",-1)),s("div",G,l(A.value),1)])]),r(f(Q),{value:g.value,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink  RowsPerPageDropdown",rowsPerPageOptions:[10,20,30,40,50],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",responsiveLayout:"scroll"},{empty:i(()=>[h(l(e.$t("general.noRecord")),1)]),loading:i(()=>[h(l(e.$t("dashboard.fetchingTx")),1)]),default:i(()=>[r(f(_),{field:"scopedMetadataKey",header:"Scoped Metadata Key",style:{"`wideScreen?'min-width":"200px'?'width: 200px'  `"}},{body:i(({data:a})=>[s("div",J,[s("div",null,l(a.scopedMetadataKeyHex),1),a.scopedMetadataKeyUtf8?(w(),M("div",X,"hex")):U("",!0)]),a.scopedMetadataKeyUtf8?(w(),M("div",Y,[s("div",null,l(a.scopedMetadataKeyUtf8),1),t[3]||(t[3]=s("div",{class:"ml-3 text-gray-400 font-semibold"},"utf-8",-1))])):U("",!0)]),_:1}),r(f(_),{field:"currentValue",header:"Current Value",style:{"`wideScreen?'min-width":"180px'?'width: 180px'`"}},{body:i(({data:a})=>[s("span",ee,l(a.value),1)]),_:1}),r(f(_),{field:"action",header:"Action",style:{"`wideScreen?'min-width":"180px'?'width: 180px'`"}},{body:i(({data:a})=>[r(p,{to:{name:"ViewUpdateAssetMetadata",params:{targetId:o.assetId,scopedMetadataKey:a.scopedMetadataKeyUtf8?a.scopedMetadataKeyUtf8:a.scopedMetadataKeyHex,address:o.address}}},{default:i(()=>t[4]||(t[4]=[s("img",{src:$,title:"Update Metadata",class:"inline-block w-3 h-3 text-black cursor-pointer ml-1"},null,-1)])),_:2},1032,["to"])]),_:1})]),_:1},8,["value"]),r(p,{to:{name:"ViewUpdateAssetMetadata",params:{targetId:o.assetId,address:o.address}}},{default:i(()=>t[5]||(t[5]=[s("button",{class:"mx-6 my-4 blue-btn py-3 px-3 flex items-center"},[s("img",{src:F,class:"inline-block w-4 h-4 mr-2"}),h("Create New Asset Metadata")],-1)])),_:1},8,["to"])])])])}}});const ue=E(te,[["__scopeId","data-v-0826d830"]]);export{ue as default};
