import{_ as ne,k as F,o as d,b as u,f as y,e as s,s as C,z as Q,t as n,T as Pe,A as $e,g as pe,r as c,a as j,B as w,E as k,O as Ut,W as ae,w as M,n as q,P as le,H as W,u as Je,c as _,v as Dt,Q as jt,d as Ve,I as Rt,R as Ye,S as Le,l as Kt,F as xe,i as Ee,q as Wt,K as Ht,U as Fe,m as qt,V as Xt,p as zt,j as Qt}from"./index-f81de996.js";import{P as Zt}from"./PasswordInput-0dd59ef4.js";import{S as Gt,M as Jt,a as Yt}from"./MultisigInput-762ef6d2.js";import{T as es}from"./TextInput-3c8a9d79.js";import{a as Ge}from"./accountUtils-becb344d.js";import{N as ts}from"./namespaceUtils-99657550.js";import{t as Ne}from"./jdenticon-module-7161194d.js";import{S as ss}from"./SelectAccountAndContact-3ddeaa9f.js";import{A as ls}from"./AddressInputClean-175e18ca.js";import{_ as Be}from"./proximax-logo-ecfc3767.js";import{_ as Me,a as as}from"./icon-new-page-link-270844f6.js";import"./icon-red-x-a5511f99.js";import"./icon-green-tick-1b766454.js";const ns={props:["placeholder","errorMessage","options","modelValue","disableOptions","index"],emits:["update:modelValue","show-mosaic-selection","remove-mosaic-selected"],name:"MosaicInput",data(){return{selectedMosaic:this.modelValue,label:["label"],selectErr:!1,selectModel:0,displayClearIcon:!1}},methods:{clearSelection:function(){this.selectModel=0,this.$emit("remove-mosaic-selected",{index:this.index}),this.selectErr=!0,this.displayClearIcon=!1},makeSelection:function(t){t==null?this.clearSelection():(this.$emit("update:modelValue",t.val),this.$emit("show-mosaic-selection",{index:this.index}),this.selectErr=!1,this.displayClearIcon=!0)}},watch:{"disableOptions.length":{handler:function(t,a){if(a-1==t){for(let m in this.disableOptions)if(m==this.index)if(this.disableOptions[this.index].id==0)this.selectedMosaic=0;else{const e=this.options.findIndex(v=>v.val===this.disableOptions[this.index].id);this.selectedMosaic=this.options[e]}}},deep:!0}},mounted(){this.emitter.on("CLEAR_SELECT",t=>{this.selectModel=t,this.selectErr=!1,this.displayClearIcon=!1})}},os={class:"h-5 text-left"},is={class:"text-xs text-blue-400"},rs={class:"select mb-3",style:{position:"relative"}},cs={key:0},ds={style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},us={class:"text-tsm text-gray-400"},ms={key:1},vs={style:{display:"flex","justify-content":"space-between"}},gs={class:"text-sm"},fs={class:"text-tsm text-gray-500"};function ps(t,a,m,e,v,p){const o=F("Dropdown");return d(),u("div",null,[y(" showing blue text of select assets "),s("div",os,[C(Pe,{"enter-active-class":"animate__animated animate__fadeInUp"},{default:Q(()=>[s("span",is,n(m.placeholder),1)]),_:1})]),y(" for the dropdown "),s("div",rs,[C(o,{modelValue:v.selectedMosaic,"onUpdate:modelValue":a[0]||(a[0]=r=>v.selectedMosaic=r),options:this.options,style:{width:"100%"},showClear:!0,filter:!0,filterFields:v.label,optionLabel:"text","option-disabled":"disabled",placeholder:this.placeholder,onChange:a[1]||(a[1]=r=>p.makeSelection(r.value)),virtualScrollerOptions:{itemSize:32,scrollHeight:"flex",style:"max-height: "+(this.options.length*32+35)+"px;"}},{value:Q(r=>[r.value?(d(),u("div",cs,[s("div",ds,[$e(n(r.value.label)+" ",1),s("span",us," ("+n(r.value.balance)+")",1)])])):(d(),u("span",ms,n(r.placeholder),1))]),option:Q(r=>[s("div",vs,[s("span",gs,n(r.option.label),1),s("span",fs,n(r.option.balance),1)])]),_:1},8,["modelValue","options","filterFields","placeholder","virtualScrollerOptions"])])])}const bs=ne(ns,[["render",ps],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/transfer/components/MosaicInput.vue"]]),hs={props:["placeholder","errorMessage","icon","showError","modelValue","msgOpt","disabled","limit","remainingChar"],emits:["update:modelValue"],name:"TransferTextareaInput",setup(t){const m=pe().appContext.config.globalProperties.emitter,e=c(0),v=c(""),p=c("border border-gray-300"),o=c(!1);j(()=>t.remainingChar,h=>{e.value=h});const r=h=>{if(t.msgOpt=="regular")h.target.value.length>t.limit&&(h.returnValue=!1,h.preventDefault&&h.preventDefault());else{var T=h||window.event;if(T.type==="paste")P=T.clipboardData.getData("text/plain");else{var P=T.keyCode||T.which;P=String.fromCharCode(P)}var $=/[0-9A-Fa-f]|\./;(!$.test(P)||h.target.value.length>t.limit)&&(T.returnValue=!1,T.preventDefault&&T.preventDefault())}},b=()=>{o.value||(p.value="border-2 border-blue-primary")},A=()=>{p.value="border-2 border-gray-300",o.value=!1};return m.on("CLEAR_TEXTAREA",h=>{e.value=h}),m.on("CLEAR_TEXT",h=>{v.value=h,o.value=!1,p.value="border border-gray-300"}),{inputText:v,textErr:o,borderColor:p,countChar:r,remainingLength:e,clickInputText:b,blurInputText:A}}},ys={class:"rounded-md bg-white flex border"},_s=["value","disabled","placeholder"],ws=s("div",{class:"w-1 flex-none"},null,-1),xs={class:"float-right mt-1 text-tsm text-gray-800"},Ms={class:"h-3 mb-2"},ks={key:0,class:"error error-text text-left"};function As(t,a,m,e,v,p){return d(),u("div",null,[s("div",ys,[s("textarea",{value:m.modelValue,disabled:m.disabled==1,onInput:a[0]||(a[0]=o=>{e.countChar(o),t.$emit("update:modelValue",o.target.value)}),rows:"2",class:"w-full text-gray-500 px-2 py-1 outline-none bg-white text-xs",placeholder:m.placeholder.toUpperCase(),onClick:a[1]||(a[1]=o=>e.clickInputText()),onBlur:a[2]||(a[2]=o=>e.blurInputText())},null,40,_s),ws]),s("div",xs,n(e.remainingLength)+"/"+n(m.limit),1),s("div",Ms,[e.textErr||m.showError?(d(),u("div",ks,n(m.errorMessage),1)):y("v-if",!0)])])}const Cs=ne(hs,[["render",As],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/transfer/components/TransferTextareaInput.vue"]]);async function Ts(t){return await ae.getAccInfo(t).then(m=>m.publicAccount)}const Is=async(t,a,m,e,v,p,o,r,b)=>{if(!ae.verifyWalletPassword(M.currentLoggedInWallet.name,q.chainNetworkName,p))return!1;const h=q.currentNetworkProfile.generationHash;let T=k.networkType;const P=t;let $=parseFloat(a)*Math.pow(10,k.nativeToken.divisibility),H=[];$>0&&H.push(new w.Mosaic(new w.MosaicId(k.nativeToken.assetId),w.UInt64.fromUint(Number($)))),e.length>0&&e.forEach((g,E)=>{g.amount>0&&H.push(new w.Mosaic(new w.MosaicId(g.id),w.UInt64.fromUint(Number(g.amount*Math.pow(10,v[E])))))});let x=k.buildTxn,S,L;if(!r)S=M.currentLoggedInWallet.accounts.find(g=>g.publicKey===o);else{S=M.currentLoggedInWallet.accounts.find(E=>E.address===r);let g=o;L=w.PublicAccount.createFromPublicKey(g,T)}let G=ae.decryptPrivateKey(new w.Password(p),S.encrypted,S.iv),B;if(b){let g=await Ts(P);B=w.EncryptedMessage.create(m,g,G)}else B=w.PlainMessage.create(m);let D=x.transferBuilder().recipient(w.Address.createFromRawAddress(P)).mosaics(H).message(B).build();const I=w.Account.createFromPrivateKey(G,T,1);if(r){let g=M.currentLoggedInWallet.accounts.find(ve=>ve.address==r),E=ae.decryptPrivateKey(new w.Password(p),g.encrypted,g.iv),X=w.Account.createFromPrivateKey(E,T,1);const J=[D.toAggregateV1(L)],ke=x.aggregateBonded(J),V=X.preV2Sign(ke,h),Y=le.lockFundTx(V),de=X.preV2Sign(Y,h);le.announceLF_AND_addAutoAnnounceABT(de,V)}else{const g=I.preV2Sign(D,h);le.announceTransaction(g)}return!0},et="0".repeat(64),tt=w.PublicAccount.createFromPublicKey(et,k.networkType).address.plain(),st=(t,a)=>{let m=[];return parseInt(t)>0&&m.push(new w.Mosaic(new w.MosaicId(k.nativeToken.assetId),w.UInt64.fromUint(Number(t)))),a.length>0&&a.forEach((e,v)=>{parseInt(e.amount)>0&&m.push(new w.Mosaic(new w.MosaicId(e.id),w.UInt64.fromUint(Number(e.amount))))}),m},Ss=(t,a,m,e)=>{let v=k.buildTxn,p=st(a,m),r=[v.transferBuilder().recipient(w.Address.createFromRawAddress(tt)).mosaics(p).message(e?w.EncryptedMessage.create(t,w.PublicAccount.createFromPublicKey("0".repeat(64),k.networkType),"0".repeat(64)):w.PlainMessage.create(t)).build().toAggregateV1(w.PublicAccount.createFromPublicKey(et,k.networkType))],b=v.aggregateBondedBuilder().innerTransactions(r).build();return W.amountFormatterSimple(b.maxFee.compact(),k.nativeToken.divisibility)},Fs=(t,a,m,e)=>{let v=k.buildTxn,p=st(a,m),o=v.transferBuilder().recipient(w.Address.createFromRawAddress(tt)).mosaics(p).message(e?w.EncryptedMessage.create(t,w.PublicAccount.createFromPublicKey("0".repeat(64),k.networkType),"0".repeat(64)):w.PlainMessage.create(t)).build();return W.amountFormatterSimple(o.maxFee.compact(),k.nativeToken.divisibility)},we=Ut({calculate_fee:Fs,calculate_aggregate_fee:Ss}),Ns={name:"SignInModal",props:{toggleModal:Boolean,saveAddress:String},setup(t){const{t:a}=Je(),e=pe().appContext.config.globalProperties.emitter,v=c(""),p=c(t.saveAddress),o=c(""),r=c(""),b=c(!0),A=c(!0),h=c(!1),T=_(()=>!(b.value&&v.value!="")),P=_(()=>!b.value&&p.value!=""),$=c(!1),H=async B=>{try{let D=await k.chainAPI.accountAPI.getAccountInfo(w.Address.createFromRawAddress(B));D.publicKey=="0000000000000000000000000000000000000000000000000000000000000000"?o.value=null:o.value=D.publicKey}catch{o.value=null}},x=async()=>{v.value!==""&&p.value!==""&&(M.currentLoggedInWallet.contacts.find(D=>D.name==v.value)?r.value=a("addressBook.nameExist"):(await H(p.value),M.currentLoggedInWallet.addAddressBook(new jt(v.value,p.value,"-none-",o.value)),M.wallets.saveMyWalletOnlytoLocalStorage(M.currentLoggedInWallet),r.value="",h.value=!0))},S=()=>v.value="",L=()=>{e.emit("CLOSE_CONTACT_MODAL",!1)},G=()=>A.value=!1;return j(()=>t.saveAddress,()=>p.value=t.saveAddress),{err:r,contactName:v,address:p,disableSave:T,showAddErr:P,showNameErr:$,SaveContact:x,isAddContactQues:A,closeModal:L,proceed:G,clearInput:S,isSuccessAdded:h}},components:{TextInput:es}},Ls={key:0,class:"popup-outer fixed flex z-50",style:{top:"110px !important"}},Es={class:"modal-popup-box"},Ps={class:"delete-position"},$s={key:0,class:"w-104"},Vs={class:"text-md text-center my-5"},Bs={key:1,class:"w-104"},Os={class:"default-title font-bold mt-4 text-center"},Us={class:"w-full"},Ds={key:0,class:"error error_box mb-5"},js={class:"mt-4 text-center"},Rs=["disabled"],Ks=["disabled"],Ws={key:2,class:"w-104"},Hs={class:"text-md my-5"},qs={key:0,class:"fixed inset-0 bg-opacity-90 bg-gray-100 z-20"};function Xs(t,a,m,e,v,p){const o=F("font-awesome-icon"),r=F("TextInput");return d(),u("div",null,[C(Pe,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:Q(()=>[m.toggleModal?(d(),u("div",Ls,[s("div",Es,[s("div",Ps,[C(o,{icon:"times",class:"delete-icon-style",onClick:a[0]||(a[0]=b=>{e.isAddContactQues=!0,e.closeModal()})})]),e.isAddContactQues&&!e.isSuccessAdded?(d(),u("div",$s,[s("h1",Vs,n(t.$t("transfer.addContacts")),1),s("div",{type:"button",class:"blue-btn py-2 font-semibold cursor-pointer text-center ml-auto mr-auto w-7/12",onClick:a[1]||(a[1]=b=>e.proceed())},n(t.$t("general.yes")),1),s("div",{type:"button",class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:a[2]||(a[2]=b=>e.closeModal())},n(t.$t("general.no")),1)])):y("v-if",!0),!e.isAddContactQues&&!e.isSuccessAdded?(d(),u("div",Bs,[s("h1",Os,n(t.$t("transfer.addContacts")),1),s("form",{onSubmit:a[7]||(a[7]=Dt((...b)=>t.create&&t.create(...b),["prevent"])),class:"mt-4"},[s("fieldset",Us,[e.err!=""?(d(),u("div",Ds,n(e.err),1)):y("v-if",!0),C(r,{class:"mb-3",placeholder:t.$t("general.name"),errorMessage:t.$t("general.nameRequired"),modelValue:e.contactName,"onUpdate:modelValue":a[3]||(a[3]=b=>e.contactName=b),icon:"id-card-alt",showError:e.showNameErr},null,8,["placeholder","errorMessage","modelValue","showError"]),C(r,{placeholder:t.$t("general.address"),modelValue:e.address,"onUpdate:modelValue":a[4]||(a[4]=b=>e.address=b),icon:"wallet",showError:e.showAddErr,disabled:!0},null,8,["placeholder","modelValue","showError"]),s("div",js,[y(` <button type="button" class="default-btn mr-5 focus:outline-none" @click="clearInput()">
                    {{$t('signin.clear')}}
                  </button> `),s("button",{type:"submit",class:"blue-btn py-2 font-semibold cursor-pointer text-center ml-auto mr-auto w-7/12",disabled:e.disableSave,onClick:a[5]||(a[5]=b=>e.SaveContact())},n(t.$t("general.save")),9,Rs),s("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",disabled:e.disableSave,onClick:a[6]||(a[6]=b=>e.isAddContactQues=!0)},n(t.$t("general.cancel")),9,Ks)])])],32)])):y("v-if",!0),e.isSuccessAdded?(d(),u("div",Ws,[s("h1",Hs,n(t.$t("transfer.successfullySaved",{name:e.contactName})),1)])):y("v-if",!0)])])):y("v-if",!0)]),_:1}),y(' <div @click="toggleModal = !toggleModal" v-if="toggleModal" class="fixed inset-0 bg-opacity-90 bg-blue-primary"></div> '),m.toggleModal?(d(),u("div",qs)):y("v-if",!0)])}const zs=ne(Ns,[["render",Xs],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/transfer/components/AddContactModal.vue"]]),Qs={name:"ConfirmSendModal",props:["toggleModal"],setup(){const a=pe().appContext.config.globalProperties.emitter;return{closeConfirmModal:()=>{a.emit("CLOSE_CONFIRM_SEND_MODAL",!1)},proceedSend:()=>{a.emit("CONFIRM_PROCEED_SEND",!0)}}}},Zs={key:0,class:"popup-outer fixed flex z-50"},Gs={class:"modal-popup-box"},Js={class:"delete-position"},Ys={class:"w-92"},el={class:"text-center"},tl={class:"mt-3"};function sl(t,a,m,e,v,p){const o=F("font-awesome-icon");return d(),u("div",null,[C(Pe,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:Q(()=>[m.toggleModal?(d(),u("div",Zs,[s("div",Gs,[s("div",Js,[C(o,{icon:"times",class:"delete-icon-style",onClick:a[0]||(a[0]=r=>{e.closeConfirmModal()})})]),s("div",Ys,[s("div",el,n(t.$t("transfer.proceedWithZero")),1),s("div",tl,[s("div",{onClick:a[1]||(a[1]=r=>e.proceedSend()),class:"blue-btn py-2 font-semibold cursor-pointer text-center ml-auto mr-auto w-7/12"},n(t.$t("general.confirm")),1),s("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:a[2]||(a[2]=r=>e.closeConfirmModal())},n(t.$t("general.cancel")),1)])])])])):y("v-if",!0)]),_:1}),m.toggleModal?(d(),u("div",{key:0,onClick:a[3]||(a[3]=r=>{e.closeConfirmModal()}),class:"fixed inset-0 bg-opacity-90 bg-gray-100 z-20"})):y("v-if",!0)])}const ll=ne(Qs,[["render",sl],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/transfer/components/ConfirmSendModal.vue"]]),al=Ve({name:"SelectInputAccount",emits:["select-account","update:modelValue"],props:["modelValue","selectDefault","initiateBy"],setup(t){const a=c(!1),e=pe().appContext.config.globalProperties.emitter;let v=new Rt("ThemeStyleConfig");v.init();let p=v.jdenticonConfig;const o=_(()=>{if(M.currentLoggedInWallet){var x=[];return M.currentLoggedInWallet.accounts.forEach(L=>{x.push({value:L.address,label:M.currentLoggedInWallet.convertAddressToName(L.address,!0),isMultiSig:!!L.getDirectParentMultisig().length})}),x.filter(L=>L.isMultiSig==!1)}else return[]}),r=c(!0),b=c(""),A=c(""),h={label:b.value,value:A.value},T=c(Ne(A,25,p)),P=(x,S)=>{e.emit("select-account",S),b.value,h.label=x,A.value,h.value=S,T.value=Ne(S,25,p),a.value=!a.value},$=c(""),H=_(()=>{const x=$.value.toLowerCase();return $.value==""?o.value:o.value.filter(S=>Object.values(S).some(L=>String(L).toLowerCase().includes(x)))});return{selectAccount:P,selectedAddress:A,selectedAccountInfo:h,selectedImg:T,accounts:o,toggleSelection:a,selectedAccount:b,jdenticonConfig:p,toSvg:Ne,filterQuery:$,filteredAccounts:H,placeholder:r}}}),nl={class:"w-full"},ol={key:0,class:"account-item-value account-item"},il={class:"flex"},rl=["innerHTML"],cl={class:"flex flex-col ml-2 text-left"},dl={key:0,class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}},ul={key:1,class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}},ml={key:2,class:"mt-2 text-base"},vl={class:"mt-2 text-base font-bold"},gl={class:"account-item"},fl={class:"flex"},pl=["innerHTML"],bl={class:"text-base ml-2 font-semibold"};function hl(t,a,m,e,v,p){const o=F("Dropdown");return d(),u("div",nl,[C(o,{modelValue:t.selectedAccountInfo,"onUpdate:modelValue":a[0]||(a[0]=r=>t.selectedAccountInfo=r),style:{width:"100%"},options:t.filteredAccounts,filter:!0,optionLabel:"label",emptyFilterMessage:" ",onChange:a[1]||(a[1]=r=>{t.selectAccount(r.value.label,r.value.value),t.$emit("update:modelValue",r.value.value),t.$emit("select-account",r.value.value),t.placeholder=!1}),class:"h-16 mt-0"},{value:Q(r=>[r.value?(d(),u("div",ol,[s("div",il,[s("div",{innerHTML:t.selectedImg},null,8,rl),s("div",cl,[t.initiateBy?(d(),u("div",dl,n(t.$t("general.initiateBy")),1)):(d(),u("div",ul,n(t.$t("transfer.transferFrom"))+" OR Select Signing Account to initiate Multisig",1)),t.placeholder?(d(),u("div",ml,n(t.$t("general.selectAccount")),1)):y("v-if",!0),s("div",vl,n(r.value.label),1)])])])):y("v-if",!0)]),option:Q(r=>[s("div",gl,[s("div",fl,[s("div",{innerHTML:t.toSvg(r.option.value,20,t.jdenticonConfig)},null,8,pl),s("div",bl,n(r.option.label),1)])])]),_:1},8,["modelValue","options"])])}const yl=ne(al,[["render",hl],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/components/SelectInputAccountTransfer.vue"]]),_l={class:"border border-gray-200 px-2 py-1 rounded-md"},wl={class:"flex justify-between"},xl={class:"flex flex-col"},Ml={class:"uppercase font-light text-gray-500 text-txs text-left mb-2"},kl={class:"flex w-full"},Al={key:0,src:Be,class:"h-5 w-5 mt-0.5"},Cl=["value","data-maska","placeholder"],Tl=["disabled"],Il=Ve({__name:"TransferInputClean",props:{modelValue:{type:String,required:!0},decimal:{type:Number,required:!0},placeholder:{type:String,required:!0},toolTip:{type:String,required:!1},disabled:{type:Boolean,required:!1},showError:{type:Boolean,required:!1},logo:{type:Boolean,required:!1},balance:{type:Number,required:!1}},emits:["update:modelValue","show-error","clickedMaxAvailable"],setup(t){const a=t,m=()=>{let v="0";return a.decimal>0&&(v=v+"."+"9".repeat(a.decimal)),v},e={preProcess:v=>v.replace(/,/g,""),postProcess:v=>{if(!v)return"";let p=0;return a.decimal>0&&(p=1+a.decimal-(v.includes(".")?v.length-v.indexOf("."):0)),Intl.NumberFormat("en-US",{minimumFractionDigits:a.decimal}).format(parseFloat(v)).slice(0,p?-p:void 0)}};return(v,p)=>{const o=Ye("maska");return d(),u("div",{class:Kt(t.disabled?"opacity-50":"")},[s("div",_l,[s("div",wl,[s("div",xl,[s("div",Ml,n(t.placeholder),1),s("div",kl,[t.logo?(d(),u("img",Al)):y("v-if",!0),Le(s("input",{value:t.modelValue,class:"supply_input","data-maska":m(),"data-maska-tokens":"0:\\d:multiple|9:\\d:optional",placeholder:t.placeholder,onInput:p[0]||(p[0]=r=>v.$emit("update:modelValue",parseFloat(r.target.value.replace(/,/g,"")).toString()))},null,40,Cl),[[o,void 0,e]])])]),t.logo?(d(),u("button",{key:0,disabled:t.disabled==!0,class:"w-24 cursor-pointer focus:outline-none text-blue-primary text-xs font-bold",onClick:p[1]||(p[1]=r=>v.$emit("clickedMaxAvailable",!0))},n(v.$t("swap.maxAmount")),9,Tl)):y("v-if",!0)])])],2)}}});const Sl=ne(Il,[["__scopeId","data-v-03ac6095"],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/transfer/components/TransferInputClean.vue"]]),Fl={key:0,class:"font-bold text-xs text-blue-primary uppercase"},Nl={key:1,class:"font-bold text-xs text-blue-primary uppercase"},Ll={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 text-gray-200 my-1"},El={class:"font-semibold text-xxs mt-2 lg:col-span-2 col-span-3 text-blue-primary uppercase"},Pl=["innerHTML"],$l={class:"flex"},Vl={class:"ml-1 text-blue-400 font-bold"},Bl=s("img",{src:Be,class:"ml-1 h-5 w-5 mt-0.5"},null,-1),Ol={key:2,class:"mt-2 grid bg-yellow-50 p-3 rounded-md"},Ul={class:"flex gap-2"},Dl=s("img",{src:Me,class:"w-5 h-5"},null,-1),jl={class:"flex-cols"},Rl={class:"text-txs"},Kl=["href"],Wl=s("img",{src:as,class:"w-3 h-3 ml-2 inline-block"},null,-1),Hl={key:3,class:"mt-2 grid bg-yellow-50 p-3 rounded-md"},ql={class:"flex gap-2"},Xl=s("img",{src:Me,class:"w-5 h-5"},null,-1),zl={class:"text-txs"},Ql={key:4,class:"mt-2 grid bg-yellow-50 p-3 rounded-md"},Zl={class:"flex gap-2"},Gl=s("img",{src:Me,class:"w-5 h-5"},null,-1),Jl={class:"text-txs"},Yl={key:5,class:"mt-2 bg-yellow-50 p-3 rounded-md mb-2"},ea={class:"flex items-center gap-2"},ta=s("img",{src:Me,class:"w-5 h-5"},null,-1),sa={class:"text-txs"},la=s("div",{class:"border-b-2 border-gray-600 mt-2"},null,-1),aa={key:6,class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},na={class:"font-semibold lg:col-span-2 col-span-3"},oa={key:0,class:"lg:col-span-2 col-span-3 ml-auto"},ia={key:1,class:"lg:col-span-2 col-span-3 ml-auto"},ra={class:"ml-1 text-blue-400"},ca={key:7},da={key:0,class:"lg:col-span-4 col-span-6 ml-auto"},ua={key:1,class:"lg:col-span-4 col-span-6 ml-auto"},ma=["index"],va={key:8,class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},ga={class:"font-semibold lg:col-span-2 col-span-3"},fa=["innerHTML"],pa={class:"ml-1 text-blue-400"},ba={key:9,class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},ha={class:"font-semibold lg:col-span-2 col-span-3"},ya=["innerHTML"],_a={class:"ml-1 text-blue-400"},wa={key:10},xa={key:0,class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},Ma={class:"font-semibold lg:col-span-2 col-span-3"},ka=["innerHTML"],Aa={class:"ml-1 text-blue-400"},Ca={key:1,class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},Ta={class:"font-semibold lg:col-span-2 col-span-3"},Ia=["innerHTML"],Sa={class:"ml-1 text-blue-400"},Fa={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between border-gray-600 border-b items-center text-gray-200 text-xs py-2"},Na={class:"font-semibold lg:col-span-2 col-span-3"},La=["innerHTML"],Ea={class:"ml-1 text-blue-400"},Pa={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between border-gray-600 text-white text-xs pt-3"},$a={class:"font-bold uppercase lg:col-span-2 col-span-3"},Va=["innerHTML"],Ba={class:"ml-1 mt-0.5 text-blue-400"},Oa={key:0,class:"lg:col-span-4 col-span-6 ml-auto"},Ua={key:1,class:"lg:col-span-4 col-span-6 ml-auto"},Da=["index"],ja={key:11},Ra={key:0},Ka={class:"font-bold text-xs text-blue-primary uppercase pt-3"},Wa={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 text-gray-200 my-1"},Ha={class:"font-semibold text-xxs mt-2 lg:col-span-2 col-span-3 text-blue-primary uppercase"},qa={class:"ml-auto font-bold lg:col-span-2 col-span-3"},Xa={class:"flex"},za={class:"ml-1 text-blue-400 font-bold"},Qa=s("img",{src:Be,class:"ml-1 h-5 w-5 mt-0.5"},null,-1),Za=s("div",{class:"border-b-2 border-gray-600 mt-2"},null,-1),Ga={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},Ja={class:"font-semibold lg:col-span-2 col-span-3"},Ya=["innerHTML"],en={class:"ml-1 text-blue-400"},tn={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},sn={class:"font-semibold lg:col-span-2 col-span-3"},ln=["innerHTML"],an={class:"ml-1 text-blue-400"},nn={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between border-gray-600 border-b items-center text-gray-200 text-xs py-2"},on={class:"font-semibold lg:col-span-2 col-span-3"},rn=["innerHTML"],cn={class:"ml-1 text-blue-400"},dn={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between border-gray-600 text-white text-xs pt-3"},un={class:"font-bold uppercase lg:col-span-2 col-span-3"},mn=["innerHTML"],vn={class:"ml-1 mt-0.5 text-blue-400"},gn=Ve({__name:"TransactionFeeDisplayTransfer",props:{transactionFee:{type:Number,required:!0},lockFundCurrency:{type:Number,required:!1},lockFundTxFee:{type:Number,required:!1},totalFeeFormatted:{type:String,required:!0},selectedAccAdd:{type:String,required:!0},balance:{type:String,required:!0},sendXPX:String,selectedMultisigAdd:{type:String,required:!1},checkCosignBalance:String,selectedMosaic:Object,mosaicsCreated:Object,assetRentalFeeCurrency:String,namespaceRentalFeeCurrency:String,fundStatus:Boolean,isMultisig:Boolean,isCosigner:Boolean,onPartial:Boolean,isMultisigAlready:Boolean,lockFundCurrencyConvert:String,lockFundTxFeeConvert:String,noNamespace:Boolean},setup(t){const a=_(()=>k.nativeToken.label),m=o=>{let r=o.toString().split(".");return r[1]!=null?'<span class="font-semibold text-sm">'+r[0]+'</span>.<span class="font-semibold text-xs">'+r[1]+"</span>":'<span class="font-semibold text-sm">'+r[0]+"</span>"},e=o=>{if(o.length<=7)return o;{let r=o.slice(0,3),b=o.slice(-4);return r+"..."+b}},v=_(()=>p.value==168&&q.chainNetworkName=="Sirius Testnet 1"?"https://bctestnetfaucet.xpxsirius.io/#/":p.value==168&&q.chainNetworkName=="Sirius Testnet 2"?"https://bctestnet2faucet.xpxsirius.io/#/":""),p=_(()=>k.networkType);return(o,r)=>(d(),u(xe,null,[t.selectedMultisigAdd.length==0?(d(),u("div",Fl,n(o.$t("general.signerAcc")),1)):(d(),u("div",Nl,n(o.$t("general.multisigAcc")),1)),s("div",Ll,[s("div",El,n(o.$t("general.currentBalance")),1),s("span",{class:"ml-auto lg:col-span-2 col-span-3",innerHTML:m(t.balance)},null,8,Pl),s("div",$l,[s("div",Vl,n(a.value),1),Bl])]),t.fundStatus?(d(),u("div",Ol,[s("div",Ul,[Dl,s("div",jl,[s("div",Rl,n(o.$t("general.insufficientBalanceWarning",{tokenName:a.value})),1),p.value==168?(d(),u("a",{key:0,class:"text-xs text-blue-primary font-semibold underline",href:v.value,target:"_blank"},[$e(n(o.$t("general.topUp",{tokenName:a.value})),1),Wl],8,Kl)):y("v-if",!0)])])])):y("v-if",!0),t.onPartial?(d(),u("div",Hl,[s("div",ql,[Xl,s("div",zl,n(o.$t("general.hasPartial")),1)])])):y("v-if",!0),t.isMultisigAlready?(d(),u("div",Ql,[s("div",Zl,[Gl,s("div",Jl,n(o.$t("multisig.alreadyMultisig")),1)])])):y("v-if",!0),t.noNamespace?(d(),u("div",Yl,[s("div",ea,[ta,s("div",sa,n(o.$t("namespace.noNamespace")),1)])])):y("v-if",!0),la,t.sendXPX?(d(),u("div",aa,[s("div",na,n(o.$t("transfer.transferAmount")),1),isNaN(parseFloat(t.sendXPX))?(d(),u("div",oa,"0")):(d(),u("div",ia,n(t.sendXPX),1)),s("div",ra,n(a.value),1)])):y("v-if",!0),t.selectedMultisigAdd.length>0&&t.selectedMosaic?(d(),u("div",ca,[(d(!0),u(xe,null,Ee(t.mosaicsCreated,(b,A)=>(d(),u("div",{class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs",key:A},[isNaN(parseFloat(t.selectedMosaic[A].amount))?(d(),u("div",da,"0")):(d(),u("div",ua,n(t.selectedMosaic[A].amount),1)),s("div",{class:"ml-1 text-blue-400",index:A},n(e(t.selectedMosaic[A].namespace)),9,ma)]))),128))])):y("v-if",!0),t.assetRentalFeeCurrency?(d(),u("div",va,[s("div",ga,n(o.$t("general.assetRentalFee")),1),s("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:m(t.assetRentalFeeCurrency)},null,8,fa),s("div",pa,n(a.value),1)])):y("v-if",!0),t.namespaceRentalFeeCurrency?(d(),u("div",ba,[s("div",ha,n(o.$t("general.namespacerentalFee")),1),s("div",{class:"ml-auto lg:col-span-2 col-span-3",innerHTML:m(t.namespaceRentalFeeCurrency)},null,8,ya),s("div",_a,n(a.value),1)])):y("v-if",!0),t.selectedMultisigAdd.length==0?(d(),u("div",wa,[t.lockFundCurrencyConvert?(d(),u("div",xa,[s("div",Ma,n(o.$t("general.lockFund")),1),s("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:m(t.lockFundCurrencyConvert)},null,8,ka),s("div",Aa,n(a.value),1)])):y("v-if",!0),t.lockFundTxFeeConvert?(d(),u("div",Ca,[s("div",Ta,n(o.$t("general.lockFundTxFee")),1),s("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:m(t.lockFundTxFeeConvert)},null,8,Ia),s("div",Sa,n(a.value),1)])):y("v-if",!0),s("div",Fa,[s("div",Na,n(o.$t("general.transactionFee")),1),s("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:m(t.transactionFee)},null,8,La),s("div",Ea,n(a.value),1)]),s("div",Pa,[s("div",$a,n(o.$t("general.total")),1),s("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:m(t.totalFeeFormatted)},null,8,Va),s("div",Ba,n(a.value),1)]),(d(!0),u(xe,null,Ee(t.mosaicsCreated,(b,A)=>(d(),u("div",{class:"lg:grid lg:grid-cols-5 grid grid-cols-7 text-white text-xs",key:A},[isNaN(parseFloat(t.selectedMosaic[A].amount))?(d(),u("div",Oa,"0")):(d(),u("div",Ua,n(t.selectedMosaic[A].amount),1)),s("div",{class:"ml-1 text-blue-400",index:A},n(e(t.selectedMosaic[A].namespace)),9,Da)]))),128))])):(d(),u("div",ja,[t.selectedMultisigAdd.length>0?(d(),u("div",Ra,[s("div",Ka,n(o.$t("general.signerAcc")),1),s("div",Wa,[s("div",Ha,n(o.$t("general.currentBalance")),1),s("span",qa,n(t.checkCosignBalance),1),s("div",Xa,[s("div",za,n(a.value),1),Qa])]),Za,s("div",Ga,[s("div",Ja,n(o.$t("general.aggregateFee")),1),s("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:m(t.transactionFee)},null,8,Ya),s("div",en,n(a.value),1)]),s("div",tn,[s("div",sn,n(o.$t("general.lockFund")),1),s("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:m(t.lockFundCurrency??0)},null,8,ln),s("div",an,n(a.value),1)]),s("div",nn,[s("div",on,n(o.$t("general.lockFundTxFee")),1),s("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:m(t.lockFundTxFee??0)},null,8,rn),s("div",cn,n(a.value),1)]),s("div",dn,[s("div",un,n(o.$t("general.total")),1),s("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:m(t.totalFeeFormatted)},null,8,mn),s("div",vn,n(a.value),1)])])):y("v-if",!0)]))],64))}}),fn=ne(gn,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/services/components/TransactionFeeDisplayTransfer.vue"]]);const pn={name:"ViewTransferCreate",components:{AddressInputClean:ls,SelectInputAccountTransfer:yl,SelectAccountAndContact:ss,TransferInputClean:Sl,TransferTextareaInput:Cs,PasswordInput:Zt,AddContactModal:zs,ConfirmSendModal:ll,MosaicInput:bs,TransactionFeeDisplayTransfer:fn,SelectMultisigInput:Gt,MultisigInput:Jt},setup(){const t=Wt(),a=_(()=>k.nativeToken.label),m=c(!1),e=c(!1),{t:v}=Je(),o=pe().appContext.config.globalProperties.emitter,r=c(!1),b=c([]),A=c("0"),h=c(""),T=c({}),P=c({}),$=c(),H=c("regular"),x=c(""),S=c(""),L=c(""),G=c(!1),B=c(""),D=c(!1),I=c([]),g=c([]),E=c([]),X=c([]),J=c([]),ke=c([]),V=c("0"),Y=c(!0),de=c(!1),ve=c(!1),oe=c(""),at=M.currentLoggedInWallet,R=c(!1),nt=_(()=>R.value),Oe=_(()=>R.value),ot=_(()=>R.value),it=_(()=>R.value),rt=_(()=>R.value),ct=_(()=>R.value),dt=_(()=>R.value),Ae=c(!1),ut=c(""),mt=k.networkType,vt=_(()=>Ht.buildAPIEndpoint(q.selectedAPIEndpoint,q.currentNetworkProfile.httpPort)),gt=M.currentLoggedInWallet?M.currentLoggedInWallet.name:"",ft=_(()=>q.currentNetworkProfile.network.currency.name),Ce=_(()=>W.convertToExact(q.currentNetworkProfileConfig.lockedFundsPerAggregate,k.nativeToken.divisibility)),pt=_(()=>W.convertToCurrency(q.currentNetworkProfileConfig.lockedFundsPerAggregate,k.nativeToken.divisibility)),be=_(()=>q.currentNetworkProfile?W.convertToExact(le.getLockFundFee(),k.nativeToken.divisibility):0),Te=_(()=>Ce.value+be.value),ie=_(()=>q.currentNetworkProfileConfig.maxMessageSize-1),bt="^[0-9A-Za-z]{40}$",ht="^[0-9A-Za-z-]{46}$",ee=c(0),Z=c(!0),yt="^[^ ]{8,}$",_t=c(!1),te=c(!1),ge=c(""),O=c(""),ue=c(""),he=c(""),U=c(""),fe=c(""),Ie=c(""),wt=_(()=>!!U.value),Ue=c([]),ye=_(()=>{if(!M.currentLoggedInWallet)return[];let l=M.currentLoggedInWallet.accounts.map(f=>({name:f.name,balance:f.balance,address:f.address,publicKey:f.publicKey,isMultisig:!!f.getDirectParentMultisig().length})),i=M.currentLoggedInWallet.others.filter(f=>f.type==="MULTISIG").map(f=>({name:f.name,balance:f.balance,address:f.address,publicKey:f.publicKey,isMultisig:!0}));return l.concat(i)}),se=c(U.value?we.calculate_aggregate_fee(x.value,V.value,I.value):we.calculate_fee(x.value,V.value,I.value)),De=_(()=>{let l=Fe(oe.value)?Fe(oe.value).balance:0;return W.toCurrencyFormat(l)}),re=c(0),xt=_(()=>ye.value.length>1),je=_(()=>{if(!M.currentLoggedInWallet)return[];const l=M.currentLoggedInWallet;var i=[],f=0;return i.push({key:"0",label:v("general.ownerAcc"),selectable:!1,children:[]}),ye.value.forEach(N=>{i[0].children.push({key:"0-"+f.toString(),label:N.name,data:w.Address.createFromRawAddress(N.address).pretty()}),f++}),f=0,i.push({key:"1",label:v("general.contact"),selectable:!1,children:[]}),l.contacts!=null&&l.contacts.forEach(N=>{i[1].children.push({key:"1-"+f.toString(),label:N.name,data:w.Address.createFromRawAddress(N.address).pretty()}),f++}),i}),Re=_(()=>{const l=M.currentLoggedInWallet;if(!l)return[];let i=l.accounts.find(z=>z.address==O.value);if(!i)return[];var N=i.multisigInfo.filter(z=>z.level<0).map((z,Ot)=>({key:Ot.toString(),label:l.contacts.find(ce=>ce.address==ae.createAddressFromPublicKey(z.publicKey,k.networkType).plain())?l.contacts.find(ce=>ce.address==ae.createAddressFromPublicKey(z.publicKey,k.networkType).plain()).name:l.accounts.find(ce=>ce.publicKey==z.publicKey)?l.accounts.find(ce=>ce.publicKey==z.publicKey).name:"MULTISIG-"+ae.createAddressFromPublicKey(z.publicKey,k.networkType).plain().slice(-4),data:z.publicKey,selectable:!0}));return N}),Mt=_(()=>Re.value.length!=0),kt=l=>{Ke(),m.value=!1,h.value=l.data,T.value[l.key]=!0,l.selectable=!1},At=l=>{e.value=!1,U.value=ae.createAddressFromPublicKey(l.data,k.networkType).plain(),he.value=l.label,fe.value=l.data,oe.value=O.value,P.value[l.key]=!0},Ke=()=>{Object.keys(T.value).length!==0&&($.value=Object.keys(T.value)[0].split("-"),je.value[$.value[0]].children[$.value[1]].selectable=!0,T.value={})};let We=async()=>{let l=await Yt.scanAsset(ue.value);l.length>0?re.value=l[0].amount:re.value=0;let i=l.slice(1);Ue.value=i.map((f,N)=>({val:f.id,balance:W.toCurrencyFormat(f.amount,f.divisibility),label:f.label,id:N+1,divisibility:f.divisibility,disabled:!1}))};const Se=()=>{A.value="0",S.value="",h.value="",Y.value=!0,x.value="",V.value="0",o.emit("CLEAR_SELECT",0),I.value=[],g.value=[],X.value=[],J.value=[],r.value=!1},Ct=()=>{x.value="",o.emit("CLEAR_TEXTAREA",0)},Tt=l=>{h.value=l},He=async()=>{if(V.value=="0"&&!ve.value)de.value=!0;else{let l;U.value&&(l=oe.value),await Is(h.value.toUpperCase(),V.value,x.value,I.value,J.value,S.value,ue.value,l,B.value)?(L.value="",Ge.checkAvailableContact(h.value)?(t.push({name:"ViewAccountPendingTransactions",params:{address:O.value}}),Se()):D.value=!0,ve.value=!1):L.value=v("general.walletPasswordInvalid",{name:M.currentLoggedInWallet.name})}},It=_(()=>{if(Oe.value)return!0;{let l;return M.currentLoggedInWallet?l=M.currentLoggedInWallet.accounts.find(i=>i.name==ge.value)||M.currentLoggedInWallet.others.find(i=>i.name==ge.value):l=void 0,l!=null&&l.assets!=null?l.assets.length==0||g.value.length==K.value.length:!0}}),qe=l=>isNaN(parseFloat(l))?0:parseFloat(l),Xe=_(()=>{let l=k.nativeToken.divisibility;return U.value?l==0?Math.trunc(parseFloat(se.value)+be.value+Ce.value):Math.round((parseFloat(se.value)+be.value+Ce.value)*Math.pow(10,l))/Math.pow(10,l):l==0?Math.trunc(qe(parseFloat(V.value.replace(/,/g,"")))+parseFloat(se.value)):Math.round((qe(parseFloat(V.value.replace(/,/g,"")))+parseFloat(se.value))*Math.pow(10,l))/Math.pow(10,l)}),St=_(()=>{if(!O.value)return 0;let l=k.nativeToken.divisibility;return U.value?W.convertNumberMinimumFormat(re.value,l):W.convertNumberMinimumFormat(re.value-parseFloat(se.value),l)}),ze=_(()=>O.value?U.value?V.value>re.value||!b.value.every(l=>l==!1):Xe.value>re.value||!b.value.every(l=>l==!1):!1),Ft=_(()=>!(S.value.match(yt)&&!Z.value&&h.value.length>0&&b.value.every(l=>l==!1)&&!ze.value&&!te.value)),K=_(()=>Ue.value);for(let l=0;l<K.value.length;l++)b.value.push(!1);const Nt=()=>{g.value.push(0),I.value.push({id:0,amount:"0",namespace:""})},Lt=async l=>{let i=await k.chainAPI.assetAPI.getMosaicsNames([new w.MosaicId(l)]);Ie.value=i[0].names[0]?i[0].names[0].name:void 0},Et=l=>{let i=K.value.find(f=>f.val==I.value[l.index].id);for(let f in K.value)K.value[f].disabled=!1;K.value.forEach(f=>I.value.some(N=>{f.val==N.id&&(f.disabled=!0)})),Lt(i.val),I.value[l.index].namespace=Ie.value?Ie.value:i.val,I.value[l.index].amount="0",J.value[l.index]=i.divisibility,o.emit("CLOSE_MOSAIC_INSUFFICIENT_ERR",!1)},Pt=l=>{I.value[l.index]!=null&&I.value[l.index].id!=0&&(K.value[K.value.findIndex(i=>i.val===I.value[l.index].id)].disabled=!1),I.value.splice(l.index,1),b.value.splice(l.index,1),J.value.splice(l.index,1),g.value.splice(l.index,1)},$t=l=>{let f=(M.currentLoggedInWallet.accounts.find(N=>N.address===O.value)||M.currentLoggedInWallet.others.find(N=>N.address===O.value)).assets.find(N=>N.idHex==K.value[l].val);return f!=null?f.amount:0};j(O,()=>{U.value="",he.value=""}),j([O,U],()=>{const l=Fe(O.value);U.value?ue.value=fe.value:ue.value=l?l.publicKey:"",We(),me(),b.value=[];for(let i=0;i<K.value.length;i++)b.value.push(!1);if(U.value){const i=at.accounts.find(f=>f.address==O.value);i&&(oe.value=i.address),parseFloat(De.value.replace(/,/g,""))<Te.value?R.value=!0:R.value=!1}else R.value=!1}),j(fe,()=>{ue.value=fe.value}),j(oe,(l,i)=>{l!=i&&(ye.value.find(f=>f.address==l).balance<Te.value+Number(se.value)?(Ae.value=!0,R.value=!0):(Ae.value=!1,R.value=!1))}),j(h,l=>{_e(l),l.length==40||l.length==46?(_e(l),Qe()):Z.value=!0});const Qe=()=>{if(M.currentLoggedInWallet)try{let l=W.createAddress(h.value);W.checkAddressNetwork(l,mt)?(_e(h.value),Z.value=!1):Z.value=!0}catch{try{let i=W.createNamespaceId(h.value);Ze(i).then(f=>{h.value=f.plain(),Z.value=!1,_e(h.value)}).catch(f=>{Z.value=!0})}catch{Z.value=!0}}},_e=l=>{l.match(ht)||l.match(bt)?Ge.verifyPublicKey(h.value).then(i=>Y.value=i).catch(i=>Y.value=!0):(Y.value=!0,Z.value=!0)},Ze=async l=>await ts.getLinkedAddress(l,vt.value),Vt=()=>{V.value=St.value.toString()},me=()=>{se.value=U.value?we.calculate_aggregate_fee(x.value,V.value,I.value,encryptedMsgvalue):we.calculate_fee(x.value,V.value,I.value,B.value)};j(ge,(l,i)=>{l!=i&&(Ke(),h.value="",me())}),j(V,(l,i)=>{l!=i&&me()}),j(x,(l,i)=>{l!=i&&(me(),B.value&&x.value?ee.value=le.getFakeEncryptedMessageSize(x.value):ee.value=le.getPlainMessageSize(x.value),x.value.length>ie.value||ee.value>ie.value?te.value=!0:te.value=!1)});const Bt=l=>{let i=K.value.find(f=>f.val==l);return i?parseFloat(i.balance.replace(/,/g,"")):0};return j(Y,l=>{l||(B.value="")}),j(B,l=>{me(),l?x.value&&(ee.value=le.getFakeEncryptedMessageSize(x.value),x.value.length>ie.value||ee.value>ie.value?te.value=!0:te.value=!1):(ee.value=le.getPlainMessageSize(x.value),x.value.length>ie.value||ee.value>ie.value?te.value=!0:te.value=!1)}),j(()=>[...I.value],l=>{me();for(let i=0;i<l.length;i++)l[i].amount>Bt(l[i].id)?b.value[i]=!0:b.value[i]=!1},{deep:!0}),o.on("CLOSE_MULTISIG",()=>{U.value="",he.value=""}),o.on("CLOSE_CONTACT_MODAL",l=>{D.value=l,t.push({name:"ViewAccountPendingTransactions",params:{address:O.value}}),Se()}),o.on("select-account",l=>{ge.value=M.currentLoggedInWallet.accounts.find(i=>i.address==l)?M.currentLoggedInWallet.accounts.find(i=>i.address==l).name:M.currentLoggedInWallet.others.find(i=>i.address==l).name,O.value=l,I.value=[],g.value=[],X.value=[],J.value=[]}),o.on("CLOSE_CONFIRM_SEND_MODAL",l=>{de.value=l}),o.on("CONFIRM_PROCEED_SEND",l=>{l&&(ve.value=l,de.value=!1,He())}),{showAssetBalanceErr:b,totalFee:Xe,contacts:je,onNodeSelect:kt,selectedNode:T,toggleContact:m,moreThanOneAccount:xt,showMenu:G,selectedAccName:ge,selectedAccAdd:O,showAddressError:Z,balance:re,showBalanceErr:ze,err:L,recipientInput:h,namespace:ut,sendXPX:V,messageText:x,msgOption:H,showContactSelection:r,selectContact:A,walletPassword:S,disableCreate:Ft,clearInput:Se,showPasswdError:_t,updateAdd:Tt,addMosaicsButton:It,clearMsg:Ct,accounts:ye,encryptedMsgDisable:Y,encryptedMsg:B,makeTransfer:He,togglaAddContact:D,displayMosaicsOption:Nt,selectedMosaic:I,mosaicsCreated:g,mosaicsSelected:E,mosaics:K,selectedMosaicAmount:X,getSelectedMosaicBalance:$t,mosaicSupplyDivisibility:J,updateMosaic:Et,currentlySelectedMosaic:ke,removeMosaic:Pt,toggleConfirm:de,effectiveFee:se,cosignAddress:oe,disableRecipient:nt,checkRecipient:Qe,disableSupply:Oe,disableRegularMsg:ot,disableHexMsg:it,disableEncryptMsg:rt,disableMsgInput:ct,disablePassword:dt,cosignerBalanceInsufficient:Ae,messageLimit:ie,remainingChar:ee,lockFundCurrency:pt,currencyName:ft,lockFundTxFee:be,lockFundTotalFee:Te,walletName:gt,checkNamespace:Ze,currentNativeTokenName:a,showLimitErr:te,checkCosignBalance:De,displayAssetId:l=>{let i=l.toString(),f=i.slice(0,3),N=i.slice(-4);return f+"..."+N},toggleMultisig:e,selectedNodeMultisig:P,selectedAccPublicKey:ue,selectedMultisigName:he,selectedMultisigAdd:U,selectedMultisigPublicKey:fe,selectableMultisig:Re,onNodeSelectMultisig:At,scanDistributorAsset:We,haveSelectableMultisig:Mt,initiateBy:wt,updateAmountToMax:Vt}}},lt=t=>(zt("data-v-78445887"),t=t(),Qt(),t),bn={class:"w-10/12 ml-auto mr-auto mt-5"},hn={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},yn={class:"xl:col-span-2 p-12"},_n={class:"text-sm font-semibold"},wn={key:0,class:"error error_box mb-5"},xn={key:1,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},Mn={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},kn={class:"inline-block text-xs"},An=lt(()=>s("div",{class:"mt-4"},null,-1)),Cn={class:"flex gap-1"},Tn={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},In={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},Sn={key:2,class:"error text-tsm text-left mt-2 mb-5 ml-4"},Fn={key:3,class:"mt-3"},Nn={class:"flex mt-3 gap-1"},Ln={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},En={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},Pn=["disabled"],$n={key:4,class:"mb-5"},Vn=["disabled"],Bn={for:"encryptedMsg",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},On={class:"bg-navy-primary py-6 px-6 xl:col-span-1"},Un=lt(()=>s("div",{class:"mt-5"},null,-1)),Dn={class:"font-semibold text-xs text-white mb-1.5"},jn=["disabled"],Rn={class:"text-center"};function Kn(t,a,m,e,v,p){const o=F("AddContactModal"),r=F("ConfirmSendModal"),b=F("font-awesome-icon"),A=F("SelectInputAccountTransfer"),h=F("SelectMultisigInput"),T=F("Sidebar"),P=F("MultisigInput"),$=F("AddressInputClean"),H=F("SelectAccountAndContact"),x=F("MosaicInput"),S=F("TransferInputClean"),L=F("TransferTextareaInput"),G=F("TransactionFeeDisplayTransfer"),B=F("PasswordInput"),D=F("router-link"),I=Ye("debounce");return d(),u("div",null,[C(o,{toggleModal:e.togglaAddContact,saveAddress:e.recipientInput},null,8,["toggleModal","saveAddress"]),C(r,{toggleModal:e.toggleConfirm},null,8,["toggleModal"]),s("div",bn,[s("div",hn,[s("div",yn,[s("div",_n,n(t.$t("transfer.newTransfer")),1),e.err!=""?(d(),u("div",wn,n(e.err),1)):y("v-if",!0),e.showBalanceErr?(d(),u("div",xn,[s("div",Mn,[C(b,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),s("div",kn,n(t.$t("general.insufficientBalance")),1)])):y("v-if",!0),An,s("div",Cn,[C(A,{modelValue:e.selectedAccAdd,"onUpdate:modelValue":a[0]||(a[0]=g=>e.selectedAccAdd=g),initiateBy:e.initiateBy},null,8,["modelValue","initiateBy"]),e.haveSelectableMultisig?(d(),u("div",{key:0,onClick:a[1]||(a[1]=g=>e.toggleMultisig=!e.toggleMultisig),class:"border rounded-md cursor-pointer flex flex-col justify-around p-2 h-16 w-18 mt-auto"},[C(b,{icon:"id-card-alt",class:"text-blue-primary ml-auto mr-auto"}),s("div",Tn,n(t.$t("general.select")),1),s("div",In,n(t.$t("general.multisig")),1)])):y("v-if",!0)]),y(" Pop Up when select icon is clicked "),C(T,{visible:e.toggleMultisig,"onUpdate:visible":a[3]||(a[3]=g=>e.toggleMultisig=g),baseZIndex:1e4,position:"full"},{default:Q(()=>[C(h,{account:e.selectableMultisig,selectedNode:e.selectedNodeMultisig,onNodeSelect:a[2]||(a[2]=g=>e.onNodeSelectMultisig(g))},null,8,["account","selectedNode"])]),_:1},8,["visible"]),e.cosignerBalanceInsufficient?(d(),u("div",Sn,n(t.$t("general.insufficientBalance")),1)):y("v-if",!0),e.selectedMultisigAdd?(d(),u("div",Fn,[C(P,{"select-default-address":e.selectedMultisigAdd,"select-default-name":e.selectedMultisigName},null,8,["select-default-address","select-default-name"])])):y("v-if",!0),s("div",Nn,[Le(C($,{placeholder:t.$t("transfer.transferPlaceholder"),modelValue:e.recipientInput,"onUpdate:modelValue":a[4]||(a[4]=g=>e.recipientInput=g),showError:e.showAddressError,disabled:e.disableRecipient},null,8,["placeholder","modelValue","showError","disabled"]),[[I,e.checkRecipient,"1000"]]),s("div",{onClick:a[5]||(a[5]=g=>e.toggleContact=!e.toggleContact),class:"border rounded-md cursor-pointer flex flex-col justify-around p-2 h-16 w-18"},[C(b,{icon:"id-card-alt",class:"text-blue-primary ml-auto mr-auto"}),s("div",Ln,n(t.$t("general.select")),1),s("div",En,n(t.$t("general.contact")),1)])]),y(" Pop Up when select icon is clicked "),C(T,{visible:e.toggleContact,"onUpdate:visible":a[6]||(a[6]=g=>e.toggleContact=g),baseZIndex:1e4,position:"full"},{default:Q(()=>[C(H,{contacts:e.contacts,selectedNode:e.selectedNode,onNodeSelect:e.onNodeSelect},null,8,["contacts","selectedNode","onNodeSelect"])]),_:1},8,["visible"]),(d(!0),u(xe,null,Ee(e.mosaicsCreated,(g,E)=>(d(),u("div",{key:E},[C(x,{placeholder:t.$t("transfer.selectAsset"),errorMessage:"",modelValue:e.selectedMosaic[E].id,"onUpdate:modelValue":X=>e.selectedMosaic[E].id=X,index:E,options:e.mosaics,disableOptions:e.selectedMosaic,onShowMosaicSelection:e.updateMosaic,onRemoveMosaicSelected:e.removeMosaic},null,8,["placeholder","modelValue","onUpdate:modelValue","index","options","disableOptions","onShowMosaicSelection","onRemoveMosaicSelected"]),e.selectedMosaic[E].id!=0?(d(),qt(S,{key:0,modelValue:e.selectedMosaic[E].amount,"onUpdate:modelValue":X=>e.selectedMosaic[E].amount=X,placeholder:t.$t("transfer.assetAmount"),type:"text",showError:e.showAssetBalanceErr[E],decimal:e.mosaicSupplyDivisibility[E]},null,8,["modelValue","onUpdate:modelValue","placeholder","showError","decimal"])):y("v-if",!0)]))),128)),s("div",null,[s("button",{class:"my-2 font-semibold text-xs text-blue-primary outline-none focus:outline-none disabled:opacity-50",disabled:e.addMosaicsButton||e.mosaics.length==0,onClick:a[7]||(a[7]=(...g)=>e.displayMosaicsOption&&e.displayMosaicsOption(...g))}," + "+n(t.$t("transfer.addAssets")),9,Pn)]),C(S,{modelValue:e.sendXPX,"onUpdate:modelValue":a[8]||(a[8]=g=>e.sendXPX=g),balance:Number(e.balance),placeholder:t.$t("transfer.transferAmount"),logo:!0,type:"text",showError:e.showBalanceErr,onClickedMaxAvailable:a[9]||(a[9]=g=>e.updateAmountToMax()),decimal:6,disabled:e.disableSupply},null,8,["modelValue","balance","placeholder","showError","disabled"]),C(L,{class:"pt-4",placeholder:t.$t("general.message"),errorMessage:t.$t("general.limitExceed"),modelValue:e.messageText,"onUpdate:modelValue":a[10]||(a[10]=g=>e.messageText=g),remainingChar:e.remainingChar,showError:e.showLimitErr,limit:e.messageLimit,icon:"comment",msgOpt:e.msgOption,disabled:e.disableMsgInput},null,8,["placeholder","errorMessage","modelValue","remainingChar","showError","limit","msgOpt","disabled"]),e.encryptedMsgDisable?y("v-if",!0):(d(),u("div",$n,[Le(s("input",{id:"encryptedMsg",type:"checkbox",value:"encryptedMsg","onUpdate:modelValue":a[11]||(a[11]=g=>e.encryptedMsg=g),disabled:e.disableEncryptMsg==1},null,8,Vn),[[Xt,e.encryptedMsg]]),s("label",Bn,n(t.$t("transfer.enableEncryption")),1)]))]),s("div",On,[C(G,{"send-x-p-x":e.sendXPX,"selected-mosaic":e.selectedMosaic,"mosaics-created":e.mosaicsCreated,"transaction-fee":e.effectiveFee,"total-fee-formatted":String(e.totalFee),"selected-multisig-add":e.selectedMultisigAdd,"check-cosign-balance":e.checkCosignBalance,"lock-fund-currency":e.lockFundCurrency,"lock-fund-tx-fee":e.lockFundTxFee,balance:String(e.balance),"selected-acc-add":e.selectedAccAdd},null,8,["send-x-p-x","selected-mosaic","mosaics-created","transaction-fee","total-fee-formatted","selected-multisig-add","check-cosign-balance","lock-fund-currency","lock-fund-tx-fee","balance","selected-acc-add"]),Un,s("div",Dn,n(t.$t("general.enterPasswordContinue")),1),C(B,{placeholder:t.$t("general.enterPassword"),errorMessage:t.$t("general.passwordRequired"),showError:e.showPasswdError,modelValue:e.walletPassword,"onUpdate:modelValue":a[12]||(a[12]=g=>e.walletPassword=g),icon:"lock",class:"mt-5 mb-3",disabled:e.disablePassword},null,8,["placeholder","errorMessage","showError","modelValue","disabled"]),s("button",{type:"submit",class:"w-full blue-btn px-3 py-3 disabled:opacity-50 disabled:cursor-auto",disabled:e.disableCreate,onClick:a[13]||(a[13]=g=>e.makeTransfer())},n(t.$t("general.transfer")),9,jn),s("div",Rn,[C(D,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white underline"},{default:Q(()=>[$e(n(t.$t("general.cancel")),1)]),_:1})])])])])])}const ao=ne(pn,[["render",Kn],["__scopeId","data-v-78445887"],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/transfer/views/ViewTransferCreate.vue"]]);export{ao as default};
