import{_ as be,u as pe,c as p,E as ye,r as a,aY as ke,n as M,D as ge,k as H,o,b as l,e as t,t as n,A as d,l as c,f as u,s as v,m as y,z as O}from"./index-f81de996.js";import{T as _e}from"./TextInputClean-1671b736.js";import{c as Se}from"./functions-ee8fa276.js";import{S as W}from"./swapUtils-aa3c3f04.js";import{_ as Te}from"./bsc-e621c678.js";import{_ as Ce}from"./icon-metamask-fox-25ba78e6.js";import{W as Me,_ as X}from"./icon-connected-4cd757bc.js";import"./jspdf.es.min-b2c6edd1.js";import"./qrcode-f6eb3cfa.js";const He={name:"ViewServicesMainnetSwapCheckSiriusToBSC",components:{TextInputClean:_e},setup(){const{t:s}=pe(),i=p(()=>ye.nativeToken.label),w=a(!0);window.ethereum&&(window.ethereum.isMetaMask||(w.value=!1));let e=new ke(M.chainNetworkName);e.init();const I=a([]),N=a("");(async()=>{try{I.value=await W.getSwapTokenList(e.swap_XPX_BSC_URL),k.value=""}catch{k.value=s("swap.serviceDown")}})(),window.ethereum&&(window.ethereum.isMetaMask||(w.value=!1));const h=()=>{window.ethereum&&(A(),window.ethereum.isMetaMask||(w.value=!1))},T="^[0-9A-Za-z]{64}$",f=a(""),m=p(()=>!f.value.match(T)&&f.value.length>0);let G=e.BSCChainId,Y=e.BSCNetworkName;const V=a(!1),g=a(!1),x=a(null),Z=a(""),J=W.getOutgoing_BSCCheckStatus_URL(e.swap_SERVICE_URL),K=e.BSCScanUrl,Q=p(()=>K+S.value);let j;const A=()=>{typeof window.ethereum<"u"?(j=new Me(window.ethereum),j.getSigner(),V.value=!0,g.value=!!ethereum.isConnected(),ethereum.request({method:"eth_accounts"}).then(E).catch(r=>{console.error(r)}),ethereum.request({method:"eth_chainId"}).then(r=>{B(r)}).catch(r=>{console.error(r)}),ethereum.on("accountsChanged",$),ethereum.on("chainChanged",r=>{B(r)})):console.log("MetaMask not installed")};A();function E(r){r.length===0?x.value="":r[0]!==x.value&&(x.value=r[0]),g.value=!!ethereum.isConnected()}function $(r){window.ethereum.isMetaMask&&(r.length===0?x.value="":r[0]!==x.value&&(x.value=r[0],k.value="")),g.value=!!ethereum.isConnected()}function B(r){Z.value=r,G===parseInt(r)?_.value="":_.value=s("swap.selectNetworkToSwap",{network:Y})}const ee=()=>{window.ethereum.isMetaMask==null?w.value=!1:(w.value=!0,ethereum.request({method:"eth_requestAccounts"}).then(E).catch(r=>{r.code===4001?console.log("Please connect to MetaMask."):r.code=="-32002"&&(k.value=s("swap.approveTransaction"))}))},P=a(!1),R=a(!1),D=a(!1),U=a(!1),te=a(!1),se=a(!1),ne=a(!1),oe=ge(),re=r=>{let b=document.getElementById(r).getAttribute("copyValue"),xe=document.getElementById(r).getAttribute("copySubject");Se(b),oe.add({severity:"info",summary:xe+" "+s("general.copied"),detail:b,group:"br-custom",life:3e3})},L=a(1),ae=a(!1),ie=a(!1),le=a(!0),ce=a(""),_=a(""),k=a(""),de=p(()=>!(!_.value&&!(m.value&&f.value.length>0)&&f.value.length>0)),C=a(!1),ue=()=>{L.value=2,setTimeout(()=>P.value=!0,1e3),setTimeout(()=>{(async()=>await ve())()},2e3)};let me=M.currentNetworkProfile.chainExplorer.url+"/"+M.currentNetworkProfile.chainExplorer.hashRoute+"/";const he=p(()=>me+f.value);a(!1);const fe=a(!1),q=a(!1),S=a(!1),F=a(!1),z=a(!0),ve=async()=>{f.value;try{const r=await fetch(J+f.value,{method:"GET",headers:{"Content-Type":"application/json"}});if(R.value=!0,r.status==200){const b=await r.json();S.value=b.fulfillTransaction?b.fulfillTransaction:"",N.value=b.type,setTimeout(async()=>{D.value=!0,S.value||(F.value=!0),setTimeout(async()=>{setTimeout(()=>U.value=!0,1e3),setTimeout(()=>z.value=!1,1e3)},1e3)},1e3)}else C.value=!0}catch{C.value=!0}},we=p(()=>q.value?fe.value?s("swap.txNotFound"):s("swap.txFailed"):F.value?s("swap.transactionPending",{network:s("swap.bsc")}):s("swap.txSuccessful",{network:s("swap.bsc")}));return{recheckMetamask:h,err:_,isInstallMetamask:V,connectMetamask:ee,isMetamaskConnected:g,currentAccount:x,copy:re,currentPage:L,isDisabledValidate:le,siriusAddress:ce,showSiriusAddressErr:ae,disableSiriusAddress:ie,sendRequest:ue,isDisabledCheck:de,step1:P,step2:R,step3:D,step4:U,step5:te,step6:se,step7:ne,siriusTxnLink:he,serviceErr:k,verifyMetaMaskPlugin:w,showTxnHashError:m,siriusTxnHash:f,isInvalidSiriusTxnHash:C,isInvalidRemoteTxnHash:q,remoteTxnLink:Q,remoteTxnHash:S,txtRemoteTxnSummary:we,isDisabled:z,currentNativeTokenName:i}}},Ie={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},Ne={class:"mt-6 p-6 border filter shadow-lg text-center"},Ve={class:"text-md"},je={class:"text-xs my-3 mb-5 sm:mb-10"},Ae=t("img",{src:Te,class:"mr-2 h-5 inline-block"},null,-1),Ee={class:"flex my-10"},Be={class:"flex-none"},Pe={class:"flex border border-gray-300 rounded-md filter shadow-md"},Re={class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},De=t("div",{class:"flex-grow self-center md:mx-4 h-0.5 bg-gray-100"},null,-1),Ue={class:"flex-none"},Le={class:"flex border border-gray-300 rounded-md filter shadow-md"},qe={class:"px-4 sm:px-10 self-center text-xxs sm:text-xs hidden md:inline-block lg:hidden xl:inline-block"},Fe={key:0},ze={class:"text-lg my-7 font-bold"},Oe={key:0,class:"error error_box mb-5"},We={key:2,class:"bg-yellow-200 text-yellow-900 text-tsm p-3 mb-5 rounded-2xl"},Xe={class:"my-2"},Ge={href:"https://bit.ly/3mVayCu",target:"_new",class:"text-blue-primary"},Ye={key:3,class:"error error_box mb-5"},Ze={key:4,class:"error error_box mb-5"},Je={class:"font-bold text-xs text-left mb-1"},Ke={class:"mb-5 mt-3 text-left"},Qe={class:"bg-blue-primary px-3 py-2 w-20 text-white font-bold rounded-r border border-blue-primary cursor-auto"},$e={class:"text-gray-500 ml-3 text-tsm"},et={class:"mb-5 md:flex md:justify-between border border-gray-200 rounded"},tt={class:"flex justify-left"},st=t("div",{class:"w-18 flex items-center justify-center py-5 sm:h-20"},[t("img",{src:Ce,class:"w-8 h-8 inline-block"})],-1),nt={class:"text-left flex items-center"},ot={class:"text-xxs uppercase text-blue-primary font-bold mb-1"},rt={class:"font-bold text-black text-tsm break-all mr-2"},at={key:0,class:"border-l border-gray-200 text-green-500 font-semibold text-xxs w-16 lg:w-20 flex items-center justify-center uppercase"},it=t("img",{src:X,class:"inline-block"},null,-1),lt={class:"border-l border-gray-200 text-blue-primary text-tsm font-bold w-16 lg:w-20 flex justify-center items-center"},ct={key:0},dt={key:1},ut={href:"https://metamask.io/",target:"_new"},mt={class:"md:hidden"},ht={key:0,class:"border-t border-gray-200 text-green-500 font-semibold text-xxs uppercase p-2"},ft=t("div",{class:"flex items-center justify-center"},[t("img",{src:X,class:"inline-block mr-2 w-4 h-4"}),d(" Connected ")],-1),vt=[ft],wt={class:"border-t border-gray-200 text-blue-primary text-tsm font-bold p-3"},xt={key:0},bt={key:1},pt={href:"https://metamask.io/",target:"_new"},yt={class:"mt-10 text-center"},kt=["disabled"],gt={key:1},_t={class:"text-lg my-7"},St={class:"flex border-b border-gray-300 p-3"},Tt={class:"flex-none"},Ct={class:"flex h-full justify-center"},Mt={class:"flex border-b border-gray-300 p-3"},Ht={class:"flex-none"},It={class:"flex h-full justify-center"},Nt={key:0,class:"mt-2"},Vt={key:0,class:"bg-yellow-100 py-2 px-5 mt-1 rounded-xl flex"},jt=["href","copyValue","copySubject"],At={class:"flex-none"},Et={key:1,class:"mt-2 text-sm text-gray-700"},Bt={class:"flex border-b border-gray-300 p-3"},Pt={class:"flex-none"},Rt={class:"flex h-full justify-center"},Dt={class:"flex border-b border-gray-300 p-3"},Ut={class:"flex-none"},Lt={class:"flex h-full justify-center"},qt={key:0,class:"mt-2"},Ft={key:0,class:"bg-yellow-100 py-2 px-5 mt-1 rounded-xl flex"},zt=["href","copyValue","copySubject"],Ot={class:"flex-none"},Wt={key:1,class:"mt-2 text-xs md:text-sm text-gray-700"},Xt={href:"https://t.me/proximaxhelpdesk",target:"_new",class:"text-blue-primary font-bold underline"},Gt={class:"mt-10 text-center"};function Yt(s,i,w,e,I,N){const h=H("font-awesome-icon"),T=H("TextInputClean"),f=H("router-link");return o(),l("div",null,[t("div",Ie,[t("div",Ne,[t("div",Ve,n(s.$t("swap.mainNetworkSwap")),1),t("div",je,[Ae,d(n(s.$t("general.check"))+" "+n(s.$t("swap.swapSiriusToBsc")),1)]),t("div",Ee,[t("div",Be,[t("div",Pe,[t("div",{class:c(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage>=1?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:c(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=1?"text-white":"text-gray-400"}`])},"1",2)],2),t("div",Re,n(s.$t("swap.inputInfo")),1)])]),De,t("div",Ue,[t("div",Le,[t("div",{class:c(["flex w-6 h-6 sm:w-10 sm:h-10",`${e.currentPage>=2?"bg-yellow-500":"bg-gray-300"}`])},[t("div",{class:c(["self-center inline-block text-center w-full text-txs sm:text-sm font-bold",`${e.currentPage>=2?"text-white":"text-gray-400"}`])},"2",2)],2),t("div",qe,n(s.$t("swap.validation")),1)])])]),e.currentPage==1?(o(),l("div",Fe,[t("div",ze,n(s.$t("swap.checkSwapStatus")),1),e.isInstallMetamask?u("v-if",!0):(o(),l("div",Oe,n(s.$t("swap.noMetamask")),1)),e.isInstallMetamask?u("v-if",!0):(o(),l("button",{key:1,onClick:i[0]||(i[0]=m=>e.recheckMetamask()),class:"text-xs blue-btn p-2 mb-3"},"Recheck MetaMask")),e.verifyMetaMaskPlugin?u("v-if",!0):(o(),l("div",We,[d(n(s.$t("swap.noOtherExtension"))+" ",1),t("b",null,n(s.$t("swap.metamask")),1),d("."),t("div",Xe,[d(n(s.$t("swap.referTo")),1),t("a",Ge,[d(n(s.$t("swap.walkthrough")),1),v(h,{icon:"external-link-alt",class:"text-blue-primary w-3 h-3 self-center inline-block ml-1"})]),d(n(s.$t("swap.forMoreDetails")),1)]),d(n(s.$t("swap.refreshMsg")),1)])),e.serviceErr?(o(),l("div",Ye,n(e.serviceErr),1)):u("v-if",!0),e.err!=""?(o(),l("div",Ze,n(e.err),1)):u("v-if",!0),t("p",Je,n(s.$t("dashboard.type")),1),t("div",Ke,[t("button",{class:"border px-3 py-2 w-20 text-blue-primary font-bold rounded-l cursor-pointer hover:border-blue-primary hover:bg-blue-50 transition-all duration-200",onClick:i[1]||(i[1]=m=>s.$router.push({name:"ViewServicesMainnetSwapCheckBSCToSirius"}))},n(s.$t("general.in")),1),t("button",Qe,n(s.$t("general.out")),1),d(),t("span",$e,n(s.$t("swap.siriusToBsc")),1)]),t("div",et,[t("div",tt,[st,t("div",nt,[t("div",null,[t("div",ot,n(s.$t("swap.fromMetamaskAddress")),1),t("div",rt,n(e.isMetamaskConnected?e.currentAccount?e.currentAccount:s.$t("swap.connected"):s.$t("swap.notConnected")),1)])])]),t("div",{class:c(["md:grid hidden",e.currentAccount?"grid-cols-2":"grid-cols-1"])},[e.currentAccount?(o(),l("div",at,[t("div",null,[it,t("div",null,n(s.$t("swap.connected")),1)])])):u("v-if",!0),t("div",lt,[e.isInstallMetamask?(o(),l("div",ct,[e.currentAccount?(o(),l("div",{key:1,class:"cursor-pointer",onClick:i[3]||(i[3]=m=>e.connectMetamask())},n(s.$t("general.change")),1)):(o(),l("div",{key:0,class:"cursor-pointer",onClick:i[2]||(i[2]=m=>e.connectMetamask())},n(s.$t("swap.connect")),1))])):(o(),l("div",dt,[t("a",ut,n(s.$t("general.download")),1)]))])],2),t("div",mt,[e.currentAccount?(o(),l("div",ht,vt)):u("v-if",!0),t("div",wt,[e.isInstallMetamask?(o(),l("div",xt,[e.currentAccount?(o(),l("div",{key:1,class:"cursor-pointer",onClick:i[5]||(i[5]=m=>e.connectMetamask())},n(s.$t("general.change")),1)):(o(),l("div",{key:0,class:"cursor-pointer",onClick:i[4]||(i[4]=m=>e.connectMetamask())},n(s.$t("swap.connect")),1))])):(o(),l("div",bt,[t("a",pt,n(s.$t("general.download")),1)]))])])]),v(T,{placeholder:s.$t("swap.transactionHash",{network:"SIRIUS"}),errorMessage:s.$t("swap.enterValidHash"),modelValue:e.siriusTxnHash,"onUpdate:modelValue":i[6]||(i[6]=m=>e.siriusTxnHash=m),showError:e.showTxnHashError,class:"w-full"},null,8,["placeholder","errorMessage","modelValue","showError"]),t("div",yt,[t("button",{onClick:i[7]||(i[7]=m=>s.$router.push({name:"ViewServicesMainnetSwap"})),class:"text-black font-bold text-xs mr-5 focus:outline-none disabled:opacity-50"},n(s.$t("general.cancel")),1),t("button",{type:"submit",class:"default-btn focus:outline-none disabled:opacity-50",disabled:e.isDisabledCheck,onClick:i[8]||(i[8]=m=>e.sendRequest())},n(s.$t("swap.checkStatus")),9,kt)])])):u("v-if",!0),e.currentPage==2?(o(),l("div",gt,[t("div",_t,[t("div",{class:c(["font-bold text-left text-xs md:text-sm",e.step1?"text-gray-700":"text-gray-300"])},n(s.$t("swap.checkStep1",{network:s.$t("swap.sirius")})),3),t("div",St,[t("div",Tt,[t("div",{class:c(["rounded-full border w-6 h-6 transition-all duration-500",e.step1?"border-blue-primary":"border-gray-300"])},[t("div",Ct,[v(h,{icon:"check",class:c([e.step1?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block transition-all duration-500"])},null,8,["class"])])],2)]),t("div",{class:c(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step1?"text-gray-700":"text-gray-300"])},n(s.$t("swap.checkingStatus",{network:s.$t("swap.sirius")})),3)]),t("div",Mt,[t("div",Ht,[t("div",{class:c(["rounded-full border w-6 h-6 transition-all duration-500",e.isInvalidSiriusTxnHash?"border-red-primary":e.step2?"border-blue-primary":"border-gray-300"])},[t("div",It,[e.isInvalidSiriusTxnHash?(o(),y(h,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block transition-all duration-500"})):(o(),y(h,{key:1,icon:"check",class:c([e.step2?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block transition-all duration-500"])},null,8,["class"]))])],2)]),t("div",{class:c(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step2?"text-gray-700":"text-gray-300"])},[d(n(e.isInvalidSiriusTxnHash?s.$t("swap.txNotFound"):s.$t("swap.txSuccessful",{network:s.$t("swap.sirius")}))+" ",1),!e.isInvalidSiriusTxnHash&&e.step2?(o(),l("div",Nt,[e.siriusTxnHash?(o(),l("div",Vt,[t("a",{href:e.siriusTxnLink,target:"_new",class:c([e.isInvalidSiriusTxnHash?"text-gray-300":"text-blue-primary","flex-grow break-all text-tsm self-center hover:underline"]),id:"siriusTx",copyValue:e.siriusTxnHash,copySubject:s.$t("swap.transactionHash",{network:s.$t("swap.sirius")})},[v(h,{icon:"external-link-alt",class:"text-blue-primary w-3 h-3 self-center inline-block mr-2"}),d(n(e.siriusTxnHash),1)],10,jt),t("div",At,[e.step2?(o(),y(h,{key:0,icon:"copy",onClick:i[9]||(i[9]=m=>e.copy("siriusTx")),class:"w-5 h-5 text-blue-primary cursor-pointer self-center ml-3 absoltue top-2 hover:opacity-90 duration-800 transition-all"})):u("v-if",!0)])])):u("v-if",!0)])):u("v-if",!0),e.isInvalidSiriusTxnHash&&e.step2?(o(),l("div",Et,[d(n(s.$t("swap.hashNotFound",[s.$t("swap.sirius"),s.$t("swap.bsc")]))+" ",1),v(f,{to:{name:"ViewServicesMainnetSwapCheckBSCToSirius"},class:"bg-blue-primary text-white py-2 px-5 rounded-2xl w-24 block text-center my-3 font-bold"},{default:O(()=>[d(n(s.$t("general.swap")),1)]),_:1})])):u("v-if",!0)],2)]),t("div",{class:c(["font-bold text-left text-xs md:text-sm mt-4",e.step3?"text-gray-700":"text-gray-300"])},n(s.$t("swap.checkOutgoingStep2")),3),t("div",Bt,[t("div",Pt,[t("div",{class:c(["rounded-full border w-6 h-6",e.step3?"border-blue-primary":"border-gray-300"])},[t("div",Rt,[v(h,{icon:"check",class:c([e.step3?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block"])},null,8,["class"])])],2)]),t("div",{class:c(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step3?"text-gray-700":"text-gray-300"])},n(s.$t("swap.checkingStatus",{network:s.$t("swap.bsc")})),3)]),t("div",Dt,[t("div",Ut,[t("div",{class:c(["rounded-full border w-6 h-6 transition-all duration-500",e.isInvalidRemoteTxnHash&&e.step4?"border-red-primary":e.step4?"border-blue-primary":"border-gray-300"])},[t("div",Lt,[e.isInvalidRemoteTxnHash&&e.step4?(o(),y(h,{key:0,icon:"times",class:"text-red-primary w-3 h-3 self-center inline-block transition-all duration-500"})):(o(),y(h,{key:1,icon:"check",class:c([e.step4?"text-blue-primary":"text-gray-300","w-3 h-3 self-center inline-block transition-all duration-500"])},null,8,["class"]))])],2)]),t("div",{class:c(["flex-grow text-left text-xs md:text-sm ml-3 self-center transition-all duration-500",e.step4?"text-gray-700":"text-gray-300"])},[d(n(e.txtRemoteTxnSummary)+" ",1),!e.isInvalidRemoteTxnHash&&e.step4?(o(),l("div",qt,[e.remoteTxnHash?(o(),l("div",Ft,[t("a",{href:e.remoteTxnLink,target:"_new",class:c([e.isInvalidRemoteTxnHash?"text-gray-300":"text-blue-primary","flex-grow break-all text-tsm self-center hover:underline"]),id:"remoteTx",copyValue:e.remoteTxnHash,copySubject:s.$t("swap.transactionHash",{network:s.$t("swap.bsc")})},[v(h,{icon:"external-link-alt",class:"text-blue-primary w-3 h-3 self-center inline-block mr-2"}),d(n(e.remoteTxnHash),1)],10,zt),t("div",Ot,[e.step4?(o(),y(h,{key:0,icon:"copy",onClick:i[10]||(i[10]=m=>e.copy("remoteTx")),class:"w-5 h-5 text-blue-primary cursor-pointer self-center ml-3 absoltue top-2 hover:opacity-90 duration-800 transition-all"})):u("v-if",!0)])])):u("v-if",!0)])):u("v-if",!0),e.isInvalidRemoteTxnHash&&e.step4?(o(),l("div",Wt,[d(n(s.$t("swap.hashNotFound2"))+" ",1),t("a",Xt,n(s.$t("home.helpdesk")),1),d(". ")])):u("v-if",!0)],2)])]),t("div",Gt,[v(f,{to:{name:"ViewServicesMainnetSwap"},class:c(["default-btn focus:outline-none w-40 inline-block",e.isDisabled?"opacity-50":""]),is:e.isDisabled?"span":"router-link",tag:"button"},{default:O(()=>[d(n(s.$t("general.done")),1)]),_:1},8,["class","is"])])])):u("v-if",!0)])])])}const os=be(He,[["render",Yt],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/services/submodule/mainnetSwap/submodule2/bsc/views/ViewServicesMainnetSwapCheckSiriusToBSC.vue"]]);export{os as default};
