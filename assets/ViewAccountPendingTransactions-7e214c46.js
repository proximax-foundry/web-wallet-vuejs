import{d as k,H as r,c as y,w as o,g as c,D as F,A as l,z as u,r as Q,o as _,f as B,e as m,l as d,b as w,s as h,x as D,B as O}from"./index-5ab99b99.js";import{A as V,_ as N}from"./AccountTabs.vue_vue_type_script_setup_true_lang-60bd4ad1.js";import{_ as W}from"./PendingDataTable.vue_vue_type_script_setup_true_lang-771a388e.js";import{D as S}from"./dashboardService-5d423b98.js";import"./jdenticon-module-3d0ed466.js";import"./functions-bdc73ff4.js";import"./TextInput-42211d7d.js";import"./TextInputClean-2db3f025.js";import"./icon-key-5b3f7dda.js";import"./icon-message-e27d55b6.js";import"./icon-proximax-logo-gray-c2486ce1.js";import"./column.esm-097ca995.js";const E={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},M={class:"flex my-2 gap-5 flex-none text-xs md:text-sm"},Z=k({__name:"ViewAccountPendingTransactions",props:{address:String},setup(s){const i=s;let b=r.createTransactionFieldOrder(r.getQueryParamOrder_v2().DESC,r.getTransactionSortField().BLOCK);const n=y(()=>{if(!o.currentLoggedInWallet)return null;let a=o.currentLoggedInWallet.accounts.find(e=>e.address==i.address)||o.currentLoggedInWallet.others.find(e=>e.address==i.address);return a||null}),g=c([]),p=c([]),f=c([]),A=y(()=>g.value.concat(f.value).concat(p.value));let T=new S(o.currentLoggedInWallet,n.value),x=r.getTransactionGroupType(),L=async()=>{if(!n.value)return;let a=r.createTransactionQueryParams();a.pageSize=1,a.address=n.value.address,a.embedded=!0,a.updateFieldOrder(b);let e=await T.searchTxns(x.UNCONFIRMED,a),t=await T.formatUnconfirmedMixedTxns(e.transactions);g.value=t},P=async()=>{if(!n.value)return;let a=new S(o.currentLoggedInWallet,n.value),e=r.createTransactionQueryParams();e.pageSize=100,e.address=n.value.address;let t=await a.searchTxns(x.PARTIAL,e),v=await a.formatPartialMixedTxns(t.transactions);p.value=v},C=()=>{if(!n.value)return;let a=[];u.autoAnnounceSignedTransaction.forEach(e=>{let t=D.TransactionMapping.createFromPayload(e.signedTransaction.payload);(O.castToAggregate(t).innerTransactions.find(I=>I.signer.address.plain()==i.address)!=null||e.signedTransaction.signer==n.value.publicKey)&&a.push({type:"Aggregate Bonded",hash:e.signedTransaction.hash,deadline:t.deadline.value,groupType:"In Queue",recipient:"",sender:"",amount:"",message:"",sda:""})}),f.value=a};return F([l.txnActivityLog,l.txnCosignLog,l.txnSwapLog,u.autoAnnounceSignedTransaction,()=>u.aggregateBondedTxLength],async()=>{await L(),await P(),C()},{immediate:!0,deep:!0}),(a,e)=>{const t=Q("router-link");return _(),B("div",null,[m("div",E,[d(V,{address:s.address,class:"mb-6"},null,8,["address"]),d(N,{address:s.address,selected:"txn"},null,8,["address"]),m("div",M,[d(t,{to:{name:"ViewAccountConfirmedTransactions",params:{address:s.address}},class:"border opacity-60 hover:opacity-100 cursor-pointer rounded-md text-white py-2 px-4",style:{background:"#007cff"}},{default:w(()=>e[0]||(e[0]=[h("Confirmed")])),_:1},8,["to"]),e[2]||(e[2]=m("div",{class:"border rounded-md text-white py-2 px-5",style:{background:"#f3a91d"}}," Pending ",-1)),d(t,{to:{name:"ViewAccountFailedTransactions",params:{address:s.address}},class:"border opacity-60 hover:opacity-100 cursor-pointer rounded-md text-white py-2 px-5",style:{background:"#dc143c"}},{default:w(()=>e[1]||(e[1]=[h("Failed")])),_:1},8,["to"])]),d(W,{transaction:A.value,class:"mt-3"},null,8,["transaction"])])])}}});export{Z as default};
