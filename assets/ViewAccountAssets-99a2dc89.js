import{d as $,u as H,r as w,l as E,o as l,b as d,e as c,m as n,y as g,$ as j,F as z,a4 as D,a as K,i as O,v as m,x as k,t as _,n as N,B as A,z as S,H as U}from"./index-6982070c.js";import{_ as W}from"./proximax-logo-ecfc3767.js";import{_ as q}from"./xarcade-logo-c4d3fd5c.js";import{_ as G}from"./metx-logo-27f23eae.js";import{_ as J}from"./icon-proximax-logo-gray-c2486ce1.js";import{_ as Q}from"./icon-green-tick-1b766454.js";import{_ as Y}from"./icon-red-x-a5511f99.js";import{_ as Z}from"./icon-plus-7207f329.js";import{A as ee,_ as se}from"./AccountTabs.vue_vue_type_script_setup_true_lang-fdee24d4.js";import{s as v,a as te}from"./column.esm-d9b2dbc9.js";import{_ as re}from"./icon-more-options-3f3cfda9.js";import"./jdenticon-module-6c808149.js";import"./functions-0a4df64c.js";import"./TextInput-d29f3cc5.js";import"./TextInputClean-64285474.js";import"./icon-key-5b3f7dda.js";const ae="/web-wallet-vuejs/assets/icon-transfer-white-08654b1d.svg",oe="/web-wallet-vuejs/assets/icon-swap-2df39ab1.svg",V=$({__name:"AssetAction",props:{address:{},id:{},isCreator:{type:Boolean}},setup(a){const{t:x}=H(),p=w(),f=E(),P=w([{visible:a.isCreator,label:x("general.modifySupply"),command:()=>{f.push({name:"ViewServicesAssetsModifySupplyChange",params:{assetId:a.id,address:a.address}})}},{visible:a.isCreator,label:x("general.linkToNamespace"),command:()=>{f.push({name:"ViewServicesAssetsLinkToNamespace",params:{assetId:a.id,address:a.address}})}},{visible:!0,label:"View Metadata",command:()=>{f.push({name:"ViewAssetMetadata",params:{assetId:a.id,address:a.address}})}}]),I=u=>{p.value.toggle(u)};return(u,L)=>(l(),d(z,null,[c("img",{src:re,class:"w-4 h-4 cursor-pointer ml-2 mt-0.5",onClick:I}),n(g(j),{ref_key:"menu",ref:p,model:P.value,popup:!0},null,8,["model"])],64))}}),ne={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},ie={class:"border-2 border-t-0"},le=["href"],de={class:"text-blue-primary uppercase w-min-max text-xs mt-1.5 cursor-pointertext-blue-primary pr-7"},ce={class:"flex items-center pr-7"},me={key:0,src:W,class:"inline-block h-7 w-7 mr-2 border-2 rounded-3xl"},ue={key:1,src:q,class:"inline-block h-7 w-7 mr-2 border-2 rounded-3xl"},pe={key:2,src:G,class:"inline-block h-7 w-7 mr-2 border-2 rounded-3xl"},fe={key:3},_e={key:4,src:J,class:"inline-block h-6 w-6 mr-2"},ge={key:5,class:"inline-block text-xs ml-2 mt-1"},we={key:6,class:"inline-block text-xs ml-2 cursor-pointer mt-1"},he={key:0,src:Q,class:"h-5 w-5"},xe={key:1,src:Y,class:"h-5 w-5"},ye={key:0},ve={key:1},be={class:"flex my-3 px-6 flex-col w-full ml-auto mr-auto gap-2 sm:flex-row sm:items-center"},ke=c("img",{src:ae,class:"inline-block w-4 h-4 mt-0.5 cursor-pointer mr-1"},null,-1),Ae=c("img",{src:oe,class:"w-4 h-4 inline-block relative mr-1"},null,-1),Pe=c("img",{src:Z,class:"inline-block w-4 h-4 mr-2"},null,-1),ze=$({__name:"ViewAccountAssets",props:{address:String},setup(a){const x=a,p=s=>s=="prx.xpx"?{name:"XPX",registered:!0}:s=="prx.metx"?{name:"METX",registered:!0}:s=="xarcade.xar"?{name:"XAR",registered:!0}:{name:s,registered:!1},f=w({page:0,rows:10}),P=w(),I=s=>{f.value.rows=s},u=w([]),L=s=>N.currentNetworkProfile?N.currentNetworkProfile.chainExplorer.url+"/"+N.currentNetworkProfile.chainExplorer.assetInfoRoute+"/"+s:"",X=async()=>{try{return(await A.chainAPI.accountAPI.getAccountInfo(S.Address.createFromRawAddress(x.address))).mosaics.map((o,t)=>({i:t,id:o.id.toHex(),amount:o.amount.compact().toString(),name:"",isCreator:!1,isLoaded:!1}))}catch{return[]}},R=D(),h=w(!1);R.run(()=>{const s=w(!1),o=K(A,async t=>{t.isReady&&!s.value&&(h.value=!0,u.value=await X(),s.value=!0,M(),h.value=!1,o(),R.stop())},{immediate:!0})});const B=s=>{const{page:o,rows:t}=s;f.value={page:o,rows:t},M()},M=async()=>{var T;h.value=!0;const{page:s,rows:o}=f.value,t=[];for(let r=0;r<o;r++){const i=s*o+r;if(!u.value[i]||u.value[i].isLoaded)continue;const y=u.value[i];t.push(new S.MosaicId(y.id))}if(!t.length){h.value=!1;return}const e=await A.chainAPI.assetAPI.getMosaicsNames(t),b=await A.chainAPI.assetAPI.getMosaics(t),C={};t.forEach((r,i)=>{C[r.toHex()]=i}),b.sort((r,i)=>{const y=C[r.mosaicId.toHex()],F=C[i.mosaicId.toHex()];return y-F});for(let r=0;r<t.length;r++){const i=u.value.find(y=>y.id==t[r].toHex());i.name=((T=e[r].names[0])==null?void 0:T.name)??"-",i.amount=U.toCurrencyFormat(parseFloat(i.amount)/Math.pow(10,b[r].divisibility),b[r].divisibility),i.isCreator=b[r].owner.address.plain()==S.Address.createFromRawAddress(x.address).plain(),i.isLoaded=!0}h.value=!1};return(s,o)=>{const t=O("router-link");return l(),d("div",null,[c("div",ne,[n(ee,{address:a.address,class:"mb-6"},null,8,["address"]),n(se,{address:a.address,selected:"assets"},null,8,["address"]),c("div",ie,[n(g(te),{value:u.value,paginator:!0,rows:10,dataKey:"id",ref_key:"dt",ref:P,onPage:o[0]||(o[0]=e=>B(e)),"onUpdate:rows":o[1]||(o[1]=e=>I(e)),loading:h.value,rowsPerPageOptions:[10,20,30,40,50],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink  RowsPerPageDropdown",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",responsiveLayout:"scroll"},{empty:m(()=>[k(" No assets found. ")]),default:m(()=>[n(g(v),{field:"id",header:"Asset ID"},{body:m(({data:e})=>[c("a",{href:L(e.id),target:"_new",class:"col-span-2"},[c("div",de,_(e.id),1)],8,le)]),_:1}),n(g(v),{field:"name",header:"Namespace"},{body:m(({data:e})=>[c("div",ce,[p(e.name).name=="XPX"?(l(),d("img",me)):p(e.name).name=="XAR"?(l(),d("img",ue)):p(e.name).name=="METX"?(l(),d("img",pe)):e.name=="-"?(l(),d("div",fe)):(l(),d("img",_e)),p(e.name).registered?(l(),d("div",ge,_(p(e.name).name),1)):(l(),d("div",we,_(e.name),1))])]),_:1}),n(g(v),{field:"amount",header:"Balance"},{body:m(({data:e})=>[c("div",null,_(e.amount),1)]),_:1}),n(g(v),{field:"creator",header:"Creator"},{body:m(({data:e})=>[e.isCreator?(l(),d("img",he)):(l(),d("img",xe))]),_:1}),n(g(v),{header:"Actions "},{body:m(({data:e})=>[e.isCreator?(l(),d("div",ye,[n(V,{address:a.address,id:e.id,"is-creator":!0},null,8,["address","id"])])):(l(),d("div",ve,[n(V,{address:a.address,id:e.id,"is-creator":!1},null,8,["address","id"])]))]),_:1})]),_:1},8,["value","loading"]),c("div",be,[n(t,{to:{name:"ViewTransferCreate"},class:"bg-blue-primary px-5 py-2 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center"},{default:m(()=>[ke,k(_(s.$t("general.transfer")),1)]),_:1}),n(t,{to:{name:"ViewServicesMainnetSwap"},class:"bg-blue-primary px-5 py-2 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center"},{default:m(()=>[Ae,k(_(s.$t("general.swap")),1)]),_:1}),n(t,{to:{name:"ViewServicesAssetsCreate"},class:"bg-blue-primary px-5 py-2 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center"},{default:m(()=>[Pe,k(_(s.$t("asset.createNewAsset")),1)]),_:1})])])])])}}});export{ze as default};
