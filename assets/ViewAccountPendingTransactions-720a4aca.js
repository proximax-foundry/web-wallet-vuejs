import{d as Q,H as s,c as u,w as d,r as m,G as w,J as i,a as g,E as b,ah as V,k as D,o as E,b as O,e as p,s as c,z as S,A,B as R,P as W,_ as N}from"./index-389b4023.js";import{A as M,a as U}from"./AccountTabs-6a1ff422.js";import{P as z}from"./PendingDataTable-7898dc39.js";import"./jdenticon-module-fee33dc7.js";import"./functions-8fa37af4.js";import"./TextInput-1a41f229.js";import"./TextInputClean-4b373888.js";import"./icon-key-5b3f7dda.js";import"./icon-message-e27d55b6.js";import"./icon-proximax-logo-gray-c2486ce1.js";import"./column.esm-8122027a.js";const G={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},j={class:"flex my-2 gap-5 flex-none text-xs md:text-sm"},H=p("div",{class:"border rounded-md text-white py-2 px-5",style:{background:"#f3a91d"}},"Pending",-1),K=Q({__name:"ViewAccountPendingTransactions",props:{address:String},setup(r){const l=r;let P=s.createTransactionFieldOrder(s.getQueryParamOrder_v2().DESC,s.getTransactionSortField().BLOCK);const n=u(()=>{if(!d.currentLoggedInWallet)return null;let e=d.currentLoggedInWallet.accounts.find(a=>a.address==l.address)||d.currentLoggedInWallet.others.find(a=>a.address==l.address);return e||null}),T=m([]),f=m([]),x=m([]),_=u(()=>T.value.concat(x.value).concat(f.value));let v=new w(d.currentLoggedInWallet,n.value),h=s.getTransactionGroupType(),C=async()=>{if(!n.value)return;let e=s.createTransactionQueryParams();e.pageSize=1,e.address=n.value.address,e.embedded=!0,e.updateFieldOrder(P);let a=await v.searchTxns(h.UNCONFIRMED,e),t=await v.formatUnconfirmedMixedTxns(a.transactions);T.value=t},k=async()=>{if(!n.value)return;let e=new w(d.currentLoggedInWallet,n.value),a=s.createTransactionQueryParams();a.pageSize=100,a.address=n.value.address;let t=await e.searchTxns(h.PARTIAL,a),y=await e.formatPartialMixedTxns(t.transactions);f.value=y},F=()=>{if(!n.value)return;let e=[];i.autoAnnounceSignedTransaction.forEach(a=>{let t=R.TransactionMapping.createFromPayload(a.signedTransaction.payload);(W.castToAggregate(t).innerTransactions.find(B=>B.signer.address.plain()==l.address)!=null||a.signedTransaction.signer==n.value.publicKey)&&e.push({type:"Aggregate Bonded",hash:a.signedTransaction.hash,deadline:t.deadline.value,groupType:"In Queue",recipient:"",sender:"",amount:"",message:"",sda:""})}),x.value=e};const I=[i.unconfirmedTransactions,i.autoAnnounceSignedTransaction,i.confirmedTransactions];g([...I],()=>{o()});const L=u(()=>i.aggregateBondedTxLength);g(L,()=>{o()});const o=async()=>{await C(),await k(),F()};if(b.isReady)o();else{let e=g(b,a=>{a.isReady&&(o(),e())})}return V(()=>{setInterval(()=>{o()},1e3)}),(e,a)=>{const t=D("router-link");return E(),O("div",null,[p("div",G,[c(M,{address:r.address,class:"mb-6"},null,8,["address"]),c(U,{address:r.address,selected:"txn"},null,8,["address"]),p("div",j,[c(t,{to:{name:"ViewAccountConfirmedTransactions",params:{address:r.address}},class:"border opacity-60 hover:opacity-100 cursor-pointer rounded-md text-white py-2 px-4",style:{background:"#007CFF"}},{default:S(()=>[A("Confirmed")]),_:1},8,["to"]),H,c(t,{to:{name:"ViewAccountFailedTransactions",params:{address:r.address}},class:"border opacity-60 hover:opacity-100 cursor-pointer rounded-md text-white py-2 px-5",style:{background:"#DC143C"}},{default:S(()=>[A("Failed")]),_:1},8,["to"])]),c(z,{transaction:_.value,class:"mt-3"},null,8,["transaction"])])])}}}),re=N(K,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/views/ViewAccountPendingTransactions.vue"]]);export{re as default};
