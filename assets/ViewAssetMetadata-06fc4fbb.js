import{d as C,r as g,B as m,a as V,i as E,o as b,b as w,e as a,m as r,v as i,t as n,x as I,y as f,f as U,I as R,J as L,z as c,_ as $}from"./index-c6fbb434.js";import{_ as B}from"./chevron_left-0423cb29.js";import{A as D,_ as F,a as Q}from"./AccountTabs.vue_vue_type_script_setup_true_lang-5c3ad6b6.js";import{_ as z}from"./icon-plus-7207f329.js";import{s as M,a as O}from"./column.esm-a2a4d52d.js";import{U as Z}from"./UTF8-7cdf8104.js";import"./jdenticon-module-e10ef9f6.js";import"./functions-55ca5bfa.js";import"./TextInput-2b290268.js";import"./TextInputClean-0ef3e161.js";import"./icon-key-5b3f7dda.js";const p=s=>(R("data-v-0826d830"),s=s(),L(),s),W={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},J={class:"border-2 border-t-0"},j={class:"flex cursor-pointer items-center pt-3 px-3"},q=p(()=>a("img",{src:B},null,-1)),G={class:"text-blue-primary text-xs"},X={class:"border border-blue-primary p-4 bg-blue-100 flex flex-col rounded mt-5 mx-6 mb-5"},Y=p(()=>a("div",{class:"uppercase text-blue-primary font-semibold text-xxs"},"ASSET ID",-1)),ee={class:"text-black text-sm font-bold"},te=p(()=>a("div",{class:"uppercase text-blue-primary font-semibold text-xxs mt-3"},"Namespace",-1)),ae={class:"text-black text-sm font-bold"},se={class:"flex"},de={key:0,class:"ml-3 text-gray-400 font-semibold"},oe={key:0,class:"flex"},re=p(()=>a("div",{class:"ml-3 text-gray-400 font-semibold"},"utf-8",-1)),ie={class:"text-xs"},ne=p(()=>a("img",{src:Q,title:"Update Metadata",class:"inline-block w-3 h-3 text-black cursor-pointer ml-1"},null,-1)),ce=p(()=>a("button",{class:"mx-6 my-4 blue-btn py-3 px-3 flex items-center"},[a("img",{src:z,class:"inline-block w-4 h-4 mr-2"}),I("Create New Asset Metadata")],-1)),le=C({__name:"ViewAssetMetadata",props:{assetId:String,address:String},setup(s){const x=s,A=g("-"),N=async()=>{let e=await m.chainAPI.assetAPI.getMosaicsNames([new c.MosaicId(x.assetId)]);A.value=e[0].names[0]?e[0].names[0].name:"-"},h=g([]),v=g(""),T=async()=>{let e=await m.chainAPI.accountAPI.getAccountInfo(c.Address.createFromRawAddress(x.address));v.value=e.publicKey},P=e=>new Promise(o=>setTimeout(o,e)),K=e=>(e.endsWith("00")&&(e=e.substring(0,e.length-2),e=K(e)),e),_=e=>{e=K(e);let o=c.Convert.hexToUint8(e);return Z.isNotUTF8(o)||(e=c.Convert.decodeHexToUtf8(e)),e},H=async()=>{let e=new c.MetadataQueryParams;e.metadataType=c.MetadataType.MOSAIC,e.pageSize=100,e.pageNumber=1,e.targetId=x.assetId,e.targetKey=v.value;let o=await m.chainAPI.metadataAPI.searchMetadatas(e);for(let t=0;t<o.metadataEntries.length;t++){let d=o.metadataEntries;h.value.push({scopedMetadataKeyUtf8:d[t].scopedMetadataKey.toHex()==_(d[t].scopedMetadataKey.toHex())?null:_(d[t].scopedMetadataKey.toHex()),scopedMetadataKeyHex:d[t].scopedMetadataKey.toHex(),value:d[t].value})}let u=o.pagination.totalPages;await P(250);for(let t=2;t<=u;t++){let d=new c.MetadataQueryParams;d.metadataType=c.MetadataType.MOSAIC,d.pageSize=100,d.pageNumber=t,d.targetId=x.assetId,d.targetKey=v.value;let k=await m.chainAPI.metadataAPI.searchMetadatas(d);for(let l=0;l<k.metadataEntries.length;l++){let y=k.metadataEntries;h.value.push({scopedMetadataKeyUtf8:y[l].scopedMetadataKey.toHex()==_(y[l].scopedMetadataKey.toHex())?null:_(y[l].scopedMetadataKey.toHex()),scopedMetadataKeyHex:y[l].scopedMetadataKey.toHex(),value:y[l].value}),await P(250)}}},S=async()=>{await T(),await N(),H()};if(m.isReady)S();else{let e=V(m,o=>{o.isReady&&(S(),e())})}return(e,o)=>{const u=E("router-link");return b(),w("div",null,[a("div",W,[r(D,{address:s.address,class:"mb-6"},null,8,["address"]),r(F,{address:s.address,selected:"assets"},null,8,["address"]),a("div",J,[r(u,{to:{name:"ViewAccountAssets",params:{address:s.address}}},{default:i(()=>[a("div",j,[q,a("div",G,n(e.$t("general.back")),1)])]),_:1},8,["to"]),a("div",X,[a("div",null,[Y,a("div",ee,n(s.assetId),1)]),a("div",null,[te,a("div",ae,n(A.value),1)])]),r(f(O),{value:h.value,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink  RowsPerPageDropdown",rowsPerPageOptions:[10,20,30,40,50],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",responsiveLayout:"scroll"},{empty:i(()=>[I(n(e.$t("general.noRecord")),1)]),loading:i(()=>[I(n(e.$t("dashboard.fetchingTx")),1)]),default:i(()=>[r(f(M),{field:"scopedMetadataKey",header:"Scoped Metadata Key",style:{"`wideScreen?'min-width":"200px'?'width: 200px'  `"}},{body:i(({data:t})=>[a("div",se,[a("div",null,n(t.scopedMetadataKeyHex),1),t.scopedMetadataKeyUtf8?(b(),w("div",de,"hex")):U("",!0)]),t.scopedMetadataKeyUtf8?(b(),w("div",oe,[a("div",null,n(t.scopedMetadataKeyUtf8),1),re])):U("",!0)]),_:1}),r(f(M),{field:"currentValue",header:"Current Value",style:{"`wideScreen?'min-width":"180px'?'width: 180px'`"}},{body:i(({data:t})=>[a("span",ie,n(t.value),1)]),_:1}),r(f(M),{field:"action",header:"Action",style:{"`wideScreen?'min-width":"180px'?'width: 180px'`"}},{body:i(({data:t})=>[r(u,{to:{name:"ViewUpdateAssetMetadata",params:{targetId:s.assetId,scopedMetadataKey:t.scopedMetadataKeyUtf8?t.scopedMetadataKeyUtf8:t.scopedMetadataKeyHex,address:s.address}}},{default:i(()=>[ne]),_:2},1032,["to"])]),_:1})]),_:1},8,["value"]),r(u,{to:{name:"ViewUpdateAssetMetadata",params:{targetId:s.assetId,address:s.address}}},{default:i(()=>[ce]),_:1},8,["to"])])])])}}});const we=$(le,[["__scopeId","data-v-0826d830"]]);export{we as default};
