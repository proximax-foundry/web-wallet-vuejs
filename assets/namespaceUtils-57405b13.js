import{B as f,z as N,a9 as L,n as b,w as d,E as w,W as P,S as h,aX as y}from"./index-f674c724.js";const r=class{static async getLinkedMosaic(t,n){return await new y(n).namespaceAPI.getLinkedMosaicId(t)}static async getLinkedAddress(t,n){return await new y(n).namespaceAPI.getLinkedAddress(t)}static getCosignerList(t){const n=d.currentLoggedInWallet.accounts.find(i=>i.address==t),s=d.currentLoggedInWallet.others.find(i=>i.address==t);let o=n?n.getDirectParentMultisig():[],u=s?s.getDirectParentMultisig():[];if(o.length>0||u.length>0){const i=d.currentLoggedInWallet.accounts.filter(e=>{if(o.indexOf(e.publicKey)>=0||u.indexOf(e.publicKey)>=0)return!0});let l=[];return i.length>0&&i.forEach(e=>{l.push({name:e.name,address:e.address,balance:e.balance})}),{list:l}}else return{list:[]}}};r.rootNamespaceTransaction=(a,t)=>f.buildTxn.registerRootNamespace(a,N.UInt64.fromUint(r.calculateDuration(t)));r.subNamespaceTransaction=(a,t)=>f.buildTxn.registersubNamespace(a,t);r.getRootNamespaceTransactionFee=a=>r.rootNamespaceTransaction(a,10).maxFee.compact();r.getSubNamespaceTransactionFee=(a,t)=>r.subNamespaceTransaction(t,a).maxFee.compact();r.calculateDuration=a=>{let t=new L(b.chainNetworkName);t.init();let n=parseInt(t.blockGenerationTargetTime),s=60*60*24/n;return Math.floor(a*s)};r.listNamespaces=a=>{const t=d.currentLoggedInWallet.accounts.find(e=>e.address===a),n=t?t.namespaces.filter(e=>e.active===!0):[],s=d.currentLoggedInWallet.others.find(e=>e.address===a),o=s?s.namespaces.filter(e=>e.active===!0):[],u=n.length,i=o.length;let l=[];return u+i>0&&(u>0&&n.forEach(e=>{const c=e.name.split(".");let g;if(c.length>2?g=!0:g=!1,typeof e.endHeight=="string"){l.push({value:e.name,label:e.name,disabled:g,level:c});return}e.endHeight-f.readBlockHeight>0&&l.push({value:e.name,label:e.name,disabled:g,level:c})}),i>0&&o.forEach(e=>{const c=e.name.split(".");let g;if(c.length>2?g=!0:g=!1,typeof e.endHeight=="string"){l.push({value:e.name,label:e.name,disabled:g,level:c});return}e.endHeight-w.currentBlock>0&&l.push({value:e.name,label:e.name,disabled:g,level:c})}),l.sort((e,c)=>e.label>c.label?1:e.label<c.label?-1:0),l.sort((e,c)=>e.level>c.level?1:e.level<c.level?-1:0)),l};r.listRootNamespaces=a=>{const t=d.currentLoggedInWallet.accounts.find(e=>e.address===a),n=t?t.namespaces.filter(e=>e.active===!0):[],s=d.currentLoggedInWallet.others.find(e=>e.address===a),o=s?s.namespaces.filter(e=>e.active===!0):[],u=n.length,i=o.length;let l=[];return u+i>0&&(u>0&&n.forEach(e=>{const c=e.name.split(".");let g=!1;c.length==1&&l.push({value:e.name,label:e.name,disabled:g,level:c})}),i>0&&o.forEach(e=>{const c=e.name.split(".");let g=!1;c.length==1&&l.push({value:e.name,label:e.name,disabled:g,level:c})}),l.sort((e,c)=>e.label>c.label?1:e.label<c.label?-1:0)),l};r.getSenderAccount=(a,t)=>{const n=N.Address.createFromRawAddress(a),s=d.currentLoggedInWallet.accounts.find(l=>l.address==n.plain()),o=P.createPassword(t);let u=P.decryptPrivateKey(o,s.encrypted,s.iv);return N.Account.createFromPrivateKey(u,f.networkType,1)};r.createRootNamespace=(a,t,n,s)=>{let o=r.rootNamespaceTransaction(n,s),i=r.getSenderAccount(a,t).preV2Sign(o,b.currentNetworkProfile.generationHash);return h.announceTransaction(i),i.hash};r.createSubNamespace=(a,t,n,s)=>{let o=r.subNamespaceTransaction(s,n),i=r.getSenderAccount(a,t).preV2Sign(o,b.currentNetworkProfile.generationHash);h.announceTransaction(i)};r.createRootNamespaceMultisig=(a,t,n,s,o)=>{let u=f.buildTxn,i=r.rootNamespaceTransaction(n,s);const l=r.getSenderAccount(a,t),e=d.currentLoggedInWallet.accounts.find(p=>p.address===o),c=d.currentLoggedInWallet.others.find(p=>p.address===o),g=e?e.publicKey:c.publicKey,T=N.PublicAccount.createFromPublicKey(g,f.networkType),A=[i.toAggregateV1(T)],k=u.aggregateBonded(A),m=l.preV2Sign(k,b.currentNetworkProfile.generationHash);let S=h.lockFundTx(m),x=l.preV2Sign(S,b.currentNetworkProfile.generationHash);h.announceLF_AND_addAutoAnnounceABT(x,m)};r.createSubNamespaceMultisig=(a,t,n,s,o)=>{let u=f.buildTxn,i=r.subNamespaceTransaction(s,n);const l=r.getSenderAccount(a,t),e=d.currentLoggedInWallet.accounts.find(p=>p.address===o),c=d.currentLoggedInWallet.others.find(p=>p.address===o),g=e?e.publicKey:c.publicKey,T=N.PublicAccount.createFromPublicKey(g,f.networkType),A=[i.toAggregateV1(T)],k=u.aggregateBonded(A),m=l.preV2Sign(k,b.currentNetworkProfile.generationHash);let S=h.lockFundTx(m),x=l.preV2Sign(S,b.currentNetworkProfile.generationHash);h.announceLF_AND_addAutoAnnounceABT(x,m)};r.extendNamespace=(a,t,n,s)=>{let o=r.rootNamespaceTransaction(n,s),i=r.getSenderAccount(a,t).preV2Sign(o,b.currentNetworkProfile.generationHash);h.announceTransaction(i)};r.extendNamespaceMultisig=(a,t,n,s,o)=>{let u=f.buildTxn,i=r.rootNamespaceTransaction(n,s);const l=r.getSenderAccount(a,t),e=d.currentLoggedInWallet.accounts.find(p=>p.address===o),c=d.currentLoggedInWallet.others.find(p=>p.address===o),g=e?e.publicKey:c.publicKey,T=N.PublicAccount.createFromPublicKey(g,f.networkType),A=[i.toAggregateV1(T)],k=u.aggregateBonded(A),m=l.preV2Sign(k,b.currentNetworkProfile.generationHash);let S=h.lockFundTx(m),x=l.preV2Sign(S,b.currentNetworkProfile.generationHash);h.announceLF_AND_addAutoAnnounceABT(x,m)};let D=r;export{D as N};
