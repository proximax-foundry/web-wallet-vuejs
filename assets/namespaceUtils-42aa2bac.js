import{E as b,B as A,ae as w,n as h,w as d,J as v,W as y,P as m,aB as L}from"./index-a7feb194.js";const g=class{static async getLinkedMosaic(t,n){return await new L(n).namespaceAPI.getLinkedMosaicId(t)}static async getLinkedAddress(t,n){return await new L(n).namespaceAPI.getLinkedAddress(t)}static getCosignerList(t){const n=d.currentLoggedInWallet.accounts.find(i=>i.address==t),r=d.currentLoggedInWallet.others.find(i=>i.address==t);let s=n?n.getDirectParentMultisig():[],o=r?r.getDirectParentMultisig():[];if(s.length>0||o.length>0){const i=d.currentLoggedInWallet.accounts.filter(a=>{if(s.indexOf(a.publicKey)>=0||o.indexOf(a.publicKey)>=0)return!0});let l=[];return i.length>0&&i.forEach(a=>{l.push({name:a.name,address:a.address,balance:a.balance})}),{list:l}}else return{list:[]}}};let p=g;p.rootNamespaceTransaction=(t,n)=>b.buildTxn.registerRootNamespace(t,A.UInt64.fromUint(g.calculateDuration(n)));p.subNamespaceTransaction=(t,n)=>b.buildTxn.registersubNamespace(t,n);p.getRootNamespaceTransactionFee=t=>g.rootNamespaceTransaction(t,10).maxFee.compact();p.getSubNamespaceTransactionFee=(t,n)=>g.subNamespaceTransaction(n,t).maxFee.compact();p.calculateDuration=t=>{let n=new w(h.chainNetworkName);n.init();let r=parseInt(n.blockGenerationTargetTime),s=60*60*24/r;return Math.floor(t*s)};p.listNamespaces=t=>{const n=d.currentLoggedInWallet.accounts.find(e=>e.address===t),r=n?n.namespaces.filter(e=>e.active===!0):[],s=d.currentLoggedInWallet.others.find(e=>e.address===t),o=s?s.namespaces.filter(e=>e.active===!0):[],i=r.length,l=o.length;let a=[];return i+l>0&&(i>0&&r.forEach(e=>{const c=e.name.split(".");let u;if(c.length>2?u=!0:u=!1,typeof e.endHeight=="string"){a.push({value:e.name,label:e.name,disabled:u,level:c});return}e.endHeight-b.readBlockHeight>0&&a.push({value:e.name,label:e.name,disabled:u,level:c})}),l>0&&o.forEach(e=>{const c=e.name.split(".");let u;if(c.length>2?u=!0:u=!1,typeof e.endHeight=="string"){a.push({value:e.name,label:e.name,disabled:u,level:c});return}e.endHeight-v.currentBlock>0&&a.push({value:e.name,label:e.name,disabled:u,level:c})}),a.sort((e,c)=>e.label>c.label?1:e.label<c.label?-1:0),a.sort((e,c)=>e.level>c.level?1:e.level<c.level?-1:0)),a};p.listRootNamespaces=t=>{const n=d.currentLoggedInWallet.accounts.find(e=>e.address===t),r=n?n.namespaces.filter(e=>e.active===!0):[],s=d.currentLoggedInWallet.others.find(e=>e.address===t),o=s?s.namespaces.filter(e=>e.active===!0):[],i=r.length,l=o.length;let a=[];return i+l>0&&(i>0&&r.forEach(e=>{const c=e.name.split(".");let u=!1;c.length==1&&a.push({value:e.name,label:e.name,disabled:u,level:c})}),l>0&&o.forEach(e=>{const c=e.name.split(".");let u=!1;c.length==1&&a.push({value:e.name,label:e.name,disabled:u,level:c})}),a.sort((e,c)=>e.label>c.label?1:e.label<c.label?-1:0)),a};p.getSenderAccount=(t,n)=>{const r=A.Address.createFromRawAddress(t),s=d.currentLoggedInWallet.accounts.find(a=>a.address==r.plain()),o=y.createPassword(n);let i=y.decryptPrivateKey(o,s.encrypted,s.iv);return A.Account.createFromPrivateKey(i,b.networkType,1)};p.createRootNamespace=(t,n,r,s)=>{let o=g.rootNamespaceTransaction(r,s),l=g.getSenderAccount(t,n).preV2Sign(o,h.currentNetworkProfile.generationHash);return m.announceTransaction(l),l.hash};p.createSubNamespace=(t,n,r,s)=>{let o=g.subNamespaceTransaction(s,r),l=g.getSenderAccount(t,n).preV2Sign(o,h.currentNetworkProfile.generationHash);m.announceTransaction(l)};p.createRootNamespaceMultisig=(t,n,r,s,o)=>{let i=b.buildTxn,l=g.rootNamespaceTransaction(r,s);const a=g.getSenderAccount(t,n),e=d.currentLoggedInWallet.accounts.find(f=>f.address===o),c=d.currentLoggedInWallet.others.find(f=>f.address===o),u=e?e.publicKey:c.publicKey,N=A.PublicAccount.createFromPublicKey(u,b.networkType),k=[l.toAggregateV1(N)],S=i.aggregateBonded(k),T=a.preV2Sign(S,h.currentNetworkProfile.generationHash);let x=m.lockFundTx(T),P=a.preV2Sign(x,h.currentNetworkProfile.generationHash);m.announceLF_AND_addAutoAnnounceABT(P,T)};p.createSubNamespaceMultisig=(t,n,r,s,o)=>{let i=b.buildTxn,l=g.subNamespaceTransaction(s,r);const a=g.getSenderAccount(t,n),e=d.currentLoggedInWallet.accounts.find(f=>f.address===o),c=d.currentLoggedInWallet.others.find(f=>f.address===o),u=e?e.publicKey:c.publicKey,N=A.PublicAccount.createFromPublicKey(u,b.networkType),k=[l.toAggregateV1(N)],S=i.aggregateBonded(k),T=a.preV2Sign(S,h.currentNetworkProfile.generationHash);let x=m.lockFundTx(T),P=a.preV2Sign(x,h.currentNetworkProfile.generationHash);m.announceLF_AND_addAutoAnnounceABT(P,T)};p.extendNamespace=(t,n,r,s)=>{let o=g.rootNamespaceTransaction(r,s),l=g.getSenderAccount(t,n).preV2Sign(o,h.currentNetworkProfile.generationHash);m.announceTransaction(l)};p.extendNamespaceMultisig=(t,n,r,s,o)=>{let i=b.buildTxn,l=g.rootNamespaceTransaction(r,s);const a=g.getSenderAccount(t,n),e=d.currentLoggedInWallet.accounts.find(f=>f.address===o),c=d.currentLoggedInWallet.others.find(f=>f.address===o),u=e?e.publicKey:c.publicKey,N=A.PublicAccount.createFromPublicKey(u,b.networkType),k=[l.toAggregateV1(N)],S=i.aggregateBonded(k),T=a.preV2Sign(S,h.currentNetworkProfile.generationHash);let x=m.lockFundTx(T),P=a.preV2Sign(x,h.currentNetworkProfile.generationHash);m.announceLF_AND_addAutoAnnounceABT(P,T)};export{p as N};
