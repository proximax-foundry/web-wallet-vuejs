import{_ as V,j as A,g as d,c as W,w as o,f as P,e as r,l as g,b as x,t as u,i as C,k as T,W as i,n as L,A as h,ad as S,r as v,o as k,s as E}from"./index-d2e8ccc1.js";import{T as K}from"./TextInput-729dd071.js";import{_ as M}from"./PasswordInput.vue_vue_type_script_setup_true_lang-3f480d29.js";import{_ as $}from"./chevron_left-0423cb29.js";const B={name:"ViewAccountCreate",components:{TextInput:K,PasswordInput:M},setup(){const{t:a}=A(),e=d(!1),s=d(""),t=d(""),f=d(!1),y="^[^ ]{8,}$",m=T(),p=W(()=>!(t.value.match(y)&&s.value.length!="")),n=o.currentLoggedInWallet?o.currentLoggedInWallet.name:"";return{walletState:o,err:e,create:()=>{if(!o.currentLoggedInWallet)return;const _=o.currentLoggedInWallet.accounts.find(w=>w.name==s.value);if(_)e.value=a("account.nameTaken"),console.log(_);else{var b=i.verifyWalletPassword(o.currentLoggedInWallet.name,L.chainNetworkName,t.value);if(b==-1)e.value=a("account.failCreate");else if(b==0)e.value=a("general.walletPasswordInvalid",{name:n});else{let w=i.createPassword(t.value);const c=i.generateNewAccount(h.networkType),I=i.createAccountSimpleFromPrivateKey(s.value,w,c.privateKey,h.networkType);let N=new S(s.value,c.publicKey,c.address.plain(),"pass:bip32",I.encryptedPrivateKey.encryptedKey,I.encryptedPrivateKey.iv);o.currentLoggedInWallet.accounts.push(N),o.wallets.saveMyWalletOnlytoLocalStorage(o.currentLoggedInWallet),m.push({name:"ViewAccountDetails",params:{address:c.address.address,accountCreated:!0}})}}},accountName:s,walletPassword:t,showPasswdError:f,disableCreate:p,clearInput:()=>{s.value="",t.value=""},walletName:n}}},U={class:"flex cursor-pointer"},j={class:"border w-8/12 ml-auto mr-auto mt-6 filter shadow-lg"},D={class:"text-lg text-center font-bold mt-10"},R={key:0,class:"error error_box mb-2 w-8/12 ml-auto mr-auto"},q={class:"w-8/12 ml-auto mr-auto mt-3"},F={class:"flex justify-center"},O=["disabled"];function z(a,e,s,t,f,y){const m=v("router-link"),p=v("TextInput"),n=v("PasswordInput");return k(),P("div",null,[r("div",U,[e[3]||(e[3]=r("img",{src:$},null,-1)),g(m,{to:{name:"ViewAccountCreateSelectType"},class:"text-blue-primary text-xs mt-0.5"},{default:x(()=>[E(u(a.$t("general.back")),1)]),_:1})]),r("div",j,[r("div",D,u(a.$t("general.createNewAcc")),1),t.err!=""?(k(),P("div",R,u(t.err),1)):C("",!0),r("div",q,[g(p,{placeholder:a.$t("account.namePlaceholder"),errorMessage:a.$t("account.enterAccountName"),modelValue:t.accountName,"onUpdate:modelValue":e[0]||(e[0]=l=>t.accountName=l),icon:"wallet"},null,8,["placeholder","errorMessage","modelValue"]),g(n,{class:"mt-3",placeholder:a.$t("general.enterPassword"),errorMessage:a.$t("general.passwordRequired"),showError:t.showPasswdError,icon:"lock",modelValue:t.walletPassword,"onUpdate:modelValue":e[1]||(e[1]=l=>t.walletPassword=l)},null,8,["placeholder","errorMessage","showError","modelValue"])]),r("div",F,[r("button",{type:"submit",class:"mt-3 blue-btn py-2 px-8 disabled:opacity-50",onClick:e[2]||(e[2]=l=>t.create()),disabled:t.disableCreate},u(a.$t("general.create")),9,O)]),e[4]||(e[4]=r("div",{class:"mt-10"},null,-1))])])}const Y=V(B,[["render",z]]);export{Y as default};
