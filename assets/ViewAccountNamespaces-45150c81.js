import{d as E,r as A,a9 as K,aa as O,g as D,k as z,o as r,b as _,s as h,z as i,A as f,m as x,e as s,t as p,C as v,f as u,n as M,p as B,j as R,_ as T,c as L,w as S,B as F,E as V,a as G}from"./index-8ffe16f8.js";import{_ as U}from"./icon-plus-7207f329.js";import{A as q,a as J}from"./AccountTabs-f9b8fa99.js";import{_ as j}from"./icon-green-tick-1b766454.js";import{_ as H}from"./icon-red-x-a5511f99.js";import{_ as $}from"./icon-more-options-3f3cfda9.js";import{s as w,a as Q}from"./column.esm-f85fdded.js";import"./jdenticon-module-4b08f1ac.js";import"./functions-00a97599.js";import"./TextInput-1e124e7b.js";import"./TextInputClean-36bb88e0.js";import"./icon-key-5b3f7dda.js";const y=o=>(B("data-v-e76bf6a6"),o=o(),R(),o),X=y(()=>s("div",{class:"uppercase text-xxs font-bold mb-1"},"ID",-1)),Y={class:"uppercase cursor-pointer font-bold text-txs"},Z=["href"],ee={class:"uppercase inline-block text-xs mt-1.5 cursor-pointer text-blue-primary pr-7"},se=y(()=>s("div",{class:"uppercase text-xxs text-gray-300 font-bold mb-1 mt-5"},"Namespace",-1)),te={class:"flex items-center"},ae={class:"uppercase font-bold text-txs mr-2"},ne=y(()=>s("div",{class:"uppercase text-xxs text-gray-300 font-bold mb-1 mt-5"},"Linked Asset/Address",-1)),oe={class:"uppercase font-bold text-txs truncate"},re=y(()=>s("div",{class:"uppercase text-xxs text-gray-300 font-bold mb-1"},"Expiry",-1)),ie={class:"uppercase font-bold text-txs"},le=y(()=>s("div",{class:"uppercase text-xxs text-gray-300 font-bold mb-1 mt-5"},"Active",-1)),ce={class:"uppercase font-bold text-txs"},de={key:0,src:j,class:"h-5 w-5 ml-1"},ue={key:1,src:H,class:"h-5 w-5 ml-1"},pe=y(()=>s("div",{class:"uppercase text-xxs text-gray-300 font-bold mb-1 mt-5"},"Actions",-1)),me=["onClick","onMouseover"],ve={key:1,class:"w-36 absolute rounded-sm shadow-lg bg-white focus:outline-none z-10 text-left"},_e={class:"my-2"},fe=["href"],he={class:"min-w-min uppercase inline-block text-xs mt-1.5 cursor-pointer text-blue-primary pr-7"},ge={class:"truncate"},xe={key:0,src:j,class:"h-5 w-5 ml-1"},we={key:1,src:H,class:"h-5 w-5 ml-1"},be=["onClick","onMouseover"],ke={key:0,class:"w-36 absolute rounded-sm shadow-lg bg-white focus:outline-none z-10 text-left"},ye={class:"my-2"},Ae=E({__name:"NamespaceDataTable",props:{namespaces:Array,address:String},setup(o){const l=A(!1),m=()=>{window.innerWidth<1024?l.value=!1:l.value=!0};m(),K(()=>{window.removeEventListener("resize",m)}),O(()=>{window.addEventListener("resize",m)});const c=e=>M.currentNetworkProfile?M.currentNetworkProfile.chainExplorer.url+"/"+M.currentNetworkProfile.chainExplorer.namespaceInfoRoute+"/"+e:"",d=A([]),b=A(0),I=e=>{b.value=e,d.value[e]=!d.value[e]};D().appContext.config.globalProperties.emitter.on("PAGE_CLICK",()=>{for(var e=0;e<d.value.length;)e!=b.value&&(d.value[e]=!1),e++});const C=e=>{b.value=e},t=()=>{b.value=-1};return(e,n)=>{const g=z("router-link");return r(),_("div",null,[h(v(Q),{value:o.namespaces,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink  RowsPerPageDropdown",rowsPerPageOptions:[10,20,30,40,50],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",responsiveLayout:"scroll"},{empty:i(()=>[f(" No namespaces found. ")]),loading:i(()=>[f(" Loading namespaces data. Please wait. ")]),default:i(()=>[l.value?u("v-if",!0):(r(),x(v(w),{key:0,style:{width:"200px"},headerClass:"hidden"},{body:i(({data:a})=>[s("div",null,[X,s("div",Y,[s("a",{href:c(a.id),target:"_new",class:"col-span-2"},[s("div",ee,p(a.id),1)],8,Z)])]),s("div",null,[se,s("div",te,[s("div",ae,p(a.name),1)])]),s("div",null,[ne,s("div",oe,p(a.linkedAssetAddress),1)])]),_:1})),l.value?u("v-if",!0):(r(),x(v(w),{key:1,style:{width:"200px"},headerClass:"hidden"},{body:i(({data:a,index:k})=>[s("div",null,[re,s("div",ie,p(a.expiringBlock),1)]),s("div",null,[le,s("div",ce,[a.isActive?(r(),_("img",de)):(r(),_("img",ue))])]),s("div",null,[pe,a.isActive?(r(),_("img",{key:0,src:$,class:"w-4 h-4 cursor-pointer inline-block ml-2 mt-0.5",onClick:P=>I(k),onMouseover:P=>C(k),onMouseout:t},null,40,me)):u("v-if",!0),d.value[k]?(r(),_("div",ve,[s("div",_e,[h(g,{to:{name:"ViewServicesNamespaceExtend",params:{address:o.address,namespaceId:a.id}},class:"block hover:bg-gray-100 transition duration-200 p-2 z-20"},{default:i(()=>[f(p(e.$t("general.extendDuration")),1)]),_:2},1032,["to"]),h(g,{to:{name:"ViewNamespaceMetadata",params:{namespaceId:a.name,address:o.address}},class:"block hover:bg-gray-100 transition duration-200 p-2 z-20"},{default:i(()=>[f("View Metadata")]),_:2},1032,["to"])])])):u("v-if",!0)])]),_:1})),l.value?(r(),x(v(w),{key:2,field:"id",header:"ID"},{body:i(({data:a})=>[s("a",{href:c(a.id),target:"_new",class:"col-span-2"},[s("div",he,p(a.id),1)],8,fe)]),_:1})):u("v-if",!0),l.value?(r(),x(v(w),{key:3,field:"name",header:"Name"},{body:i(({data:a})=>[f(p(a.name),1)]),_:1})):u("v-if",!0),l.value?(r(),x(v(w),{key:4,field:"linked",header:"Linked Asset/Address"},{body:i(({data:a})=>[s("div",ge,p(a.linkedAssetAddress),1)]),_:1})):u("v-if",!0),l.value?(r(),x(v(w),{key:5,field:"expiry",header:"Expiry"},{body:i(({data:a})=>[f(p(a.expiringBlock),1)]),_:1})):u("v-if",!0),l.value?(r(),x(v(w),{key:6,field:"active",header:"Active"},{body:i(({data:a})=>[a.isActive?(r(),_("img",xe)):(r(),_("img",we))]),_:1})):u("v-if",!0),l.value?(r(),x(v(w),{key:7,field:"actions",header:"Actions"},{body:i(({data:a,index:k})=>[s("img",{src:$,class:"w-4 h-4 cursor-pointer inline-block ml-2 mt-0.5",onClick:P=>I(k),onMouseover:P=>C(k),onMouseout:t},null,40,be),d.value[k]?(r(),_("div",ke,[s("div",ye,[h(g,{to:{name:"ViewServicesNamespaceExtend",params:{address:o.address,namespaceId:a.id}},class:"block hover:bg-gray-100 transition duration-200 p-2 z-20"},{default:i(()=>[f(p(e.$t("general.extendDuration")),1)]),_:2},1032,["to"]),h(g,{to:{name:"ViewNamespaceMetadata",params:{namespaceId:a.name,address:o.address}},class:"block hover:bg-gray-100 transition duration-200 p-2 z-20"},{default:i(()=>[f("View Metadata")]),_:2},1032,["to"])])])):u("v-if",!0)]),_:1})):u("v-if",!0)]),_:1},8,["value"])])}}});const Ie=T(Ae,[["__scopeId","data-v-e76bf6a6"],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/components/NamespaceDataTable.vue"]]),Ne=o=>(B("data-v-6f9d89e1"),o=o(),R(),o),Ce={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},Pe={class:"border-2 border-t-0 pb-3"},Me=Ne(()=>s("img",{src:U,class:"inline-block mr-2"},null,-1)),Le=E({__name:"ViewAccountNamespaces",props:{address:String},setup(o){const l=o,m=L(()=>{if(!S.currentLoggedInWallet)return null;let t=S.currentLoggedInWallet.accounts.find(e=>e.address==l.address)||S.currentLoggedInWallet.others.find(e=>e.address==l.address);return t||null});L(()=>m.value?!!m.value.getDirectParentMultisig().length:!1);const c=A([]),d=A([]),b=L(()=>{if(!m.value)return;let t=[];for(let e=0;e<m.value.namespaces.length;e++){let n=m.value.namespaces[e];t.push({name:n.name,id:n.idHex,linkedAssetAddress:n.linkedId!=""?n.linkType==2?F.Address.createFromRawAddress(n.linkedId).pretty():n.linkedId:"-",expiringBlock:n.endHeight,isActive:I(n.name)?!0:!!(n.endHeight??0>V.readBlockHeight)})}return t}),I=t=>!!t.includes("prx"),N=async()=>{for(let t=0;t<b.value.length;t++)d.value.push(!1),c.value.push(!1)};if(V.isReady)N();else{let t=G(V,e=>{e.isReady&&(N(),t())})}return D().appContext.config.globalProperties.emitter.on("PAGE_CLICK",()=>{if(d.value.every(t=>t==!1)&&c.value.includes(!0))for(let t=0;t<c.value.length;t++)c.value[t]=!1;else if(d.value.includes(!0)&&c.value.includes(!0)){let t=[],e=[];if(d.value.filter((n,g)=>{n==!0&&t.push(g)}),c.value.filter((n,g)=>{n==!0&&e.push(g)}),t!=e){for(let n=0;n<c.value.length;n++)c.value[n]=!1;c.value[t[0]]=!0}}}),(t,e)=>{const n=z("router-link");return r(),_("div",null,[s("div",Ce,[h(q,{address:o.address,class:"mb-6"},null,8,["address"]),h(J,{address:o.address,selected:"namespaces"},null,8,["address"]),s("div",Pe,[h(Ie,{namespaces:b.value,address:o.address},null,8,["namespaces","address"]),h(n,{to:{name:"ViewServicesNamespaceCreate"},class:"mt-2 bg-blue-primary py-3 mx-6 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center w-52"},{default:i(()=>[Me,f(p(t.$t("namespace.registerNewNamespace")),1)]),_:1})])])])}}});const Ke=T(Le,[["__scopeId","data-v-6f9d89e1"],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/views/ViewAccountNamespaces.vue"]]);export{Ke as default};
