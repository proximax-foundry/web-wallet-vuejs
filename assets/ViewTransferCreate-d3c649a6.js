import{_ as Z,k as S,o as d,b as u,f as y,e as s,s as A,z as Q,t as n,T as Pe,A as Ve,d as be,r as c,m as Je,g as me,a as D,B as k,E as I,O as Dt,W as ne,w as M,n as q,P as ae,H as W,u as Ye,c as _,v as Kt,Q as Rt,I as et,R as tt,S as Ee,l as Wt,F as Me,i as $e,q as Ht,K as qt,U as Le,V as Xt,p as zt,j as Qt}from"./index-6f8cb997.js";import{P as Zt}from"./PasswordInput-9f38dd8f.js";import{T as Gt}from"./TextInput-ad4723ce.js";import{a as Ge}from"./accountUtils-be1a01ef.js";import{N as Jt}from"./namespaceUtils-ba708bf3.js";import{t as ke}from"./jdenticon-module-34ed8adb.js";import{S as Yt}from"./SelectAccountAndContact-d53254f9.js";import{A as es}from"./AddressInputClean-694ef510.js";import{_ as Be}from"./proximax-logo-ecfc3767.js";import{S as ts}from"./sirius-6476672a.js";import{_ as Ae,a as ss}from"./icon-new-page-link-270844f6.js";import"./icon-red-x-a5511f99.js";import"./icon-green-tick-1b766454.js";const ls={props:["placeholder","errorMessage","options","modelValue","disableOptions","index"],emits:["update:modelValue","show-mosaic-selection","remove-mosaic-selected"],name:"MosaicInput",data(){return{selectedMosaic:this.modelValue,label:["label"],selectErr:!1,selectModel:0,displayClearIcon:!1}},methods:{clearSelection:function(){this.selectModel=0,this.$emit("remove-mosaic-selected",{index:this.index}),this.selectErr=!0,this.displayClearIcon=!1},makeSelection:function(t){t==null?this.clearSelection():(this.$emit("update:modelValue",t.val),this.$emit("show-mosaic-selection",{index:this.index}),this.selectErr=!1,this.displayClearIcon=!0)}},watch:{"disableOptions.length":{handler:function(t,a){if(a-1==t){for(let m in this.disableOptions)if(m==this.index)if(this.disableOptions[this.index].id==0)this.selectedMosaic=0;else{const e=this.options.findIndex(v=>v.val===this.disableOptions[this.index].id);this.selectedMosaic=this.options[e]}}},deep:!0}},mounted(){this.emitter.on("CLEAR_SELECT",t=>{this.selectModel=t,this.selectErr=!1,this.displayClearIcon=!1})}},as={class:"h-5 text-left"},ns={class:"text-xs text-blue-400"},os={class:"select mb-3",style:{position:"relative"}},is={key:0},rs={style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},cs={class:"text-tsm text-gray-400"},ds={key:1},us={style:{display:"flex","justify-content":"space-between"}},ms={class:"text-sm"},vs={class:"text-tsm text-gray-500"};function gs(t,a,m,e,v,g){const o=S("Dropdown");return d(),u("div",null,[y(" showing blue text of select assets "),s("div",as,[A(Pe,{"enter-active-class":"animate__animated animate__fadeInUp"},{default:Q(()=>[s("span",ns,n(m.placeholder),1)]),_:1})]),y(" for the dropdown "),s("div",os,[A(o,{modelValue:v.selectedMosaic,"onUpdate:modelValue":a[0]||(a[0]=r=>v.selectedMosaic=r),options:this.options,style:{width:"100%"},showClear:!0,filter:!0,filterFields:v.label,optionLabel:"text","option-disabled":"disabled",placeholder:this.placeholder,onChange:a[1]||(a[1]=r=>g.makeSelection(r.value)),virtualScrollerOptions:{itemSize:32,scrollHeight:"flex",style:"max-height: "+(this.options.length*32+35)+"px;"}},{value:Q(r=>[r.value?(d(),u("div",is,[s("div",rs,[Ve(n(r.value.label)+" ",1),s("span",cs," ("+n(r.value.balance)+")",1)])])):(d(),u("span",ds,n(r.placeholder),1))]),option:Q(r=>[s("div",us,[s("span",ms,n(r.option.label),1),s("span",vs,n(r.option.balance),1)])]),_:1},8,["modelValue","options","filterFields","placeholder","virtualScrollerOptions"])])])}const fs=Z(ls,[["render",gs],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/transfer/components/MosaicInput.vue"]]),ps=be({__name:"SelectMultisigInput",props:{account:{type:Array,required:!0},selectedNode:{type:Object,required:!0}},emits:["node-select"],setup(t,{emit:a}){const m=c({}),e=o=>{a("node-select",o)},v=o=>{m.value[o.key]=!0},g=()=>{m.value={}};return(o,r)=>{const b=S("Tree");return d(),Je(b,{value:t.account,selectionMode:"single","onUpdate:selectionKeys":t.selectedNode,expandedKeys:m.value,filter:!0,filterMode:"strict",onNodeSelect:e,onNodeExpand:v,onNodeCollapse:g},null,8,["value","onUpdate:selectionKeys","expandedKeys"])}}}),bs=Z(ps,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/components/SelectMultisigInput.vue"]]),hs={props:["placeholder","errorMessage","icon","showError","modelValue","msgOpt","disabled","limit","remainingChar"],emits:["update:modelValue"],name:"TransferTextareaInput",setup(t){const m=me().appContext.config.globalProperties.emitter,e=c(0),v=c(""),g=c("border border-gray-300"),o=c(!1);D(()=>t.remainingChar,h=>{e.value=h});const r=h=>{if(t.msgOpt=="regular")h.target.value.length>t.limit&&(h.returnValue=!1,h.preventDefault&&h.preventDefault());else{var C=h||window.event;if(C.type==="paste")$=C.clipboardData.getData("text/plain");else{var $=C.keyCode||C.which;$=String.fromCharCode($)}var P=/[0-9A-Fa-f]|\./;(!P.test($)||h.target.value.length>t.limit)&&(C.returnValue=!1,C.preventDefault&&C.preventDefault())}},b=()=>{o.value||(g.value="border-2 border-blue-primary")},x=()=>{g.value="border-2 border-gray-300",o.value=!1};return m.on("CLEAR_TEXTAREA",h=>{e.value=h}),m.on("CLEAR_TEXT",h=>{v.value=h,o.value=!1,g.value="border border-gray-300"}),{inputText:v,textErr:o,borderColor:g,countChar:r,remainingLength:e,clickInputText:b,blurInputText:x}}},ys={class:"rounded-md bg-white flex border"},_s=["value","disabled","placeholder"],ws=s("div",{class:"w-1 flex-none"},null,-1),xs={class:"float-right mt-1 text-tsm text-gray-800"},Ms={class:"h-3 mb-2"},ks={key:0,class:"error error-text text-left"};function As(t,a,m,e,v,g){return d(),u("div",null,[s("div",ys,[s("textarea",{value:m.modelValue,disabled:m.disabled==1,onInput:a[0]||(a[0]=o=>{e.countChar(o),t.$emit("update:modelValue",o.target.value)}),rows:"2",class:"w-full text-gray-500 px-2 py-1 outline-none bg-white text-xs",placeholder:m.placeholder.toUpperCase(),onClick:a[1]||(a[1]=o=>e.clickInputText()),onBlur:a[2]||(a[2]=o=>e.blurInputText())},null,40,_s),ws]),s("div",xs,n(e.remainingLength)+"/"+n(m.limit),1),s("div",Ms,[e.textErr||m.showError?(d(),u("div",ks,n(m.errorMessage),1)):y("v-if",!0)])])}const Cs=Z(hs,[["render",As],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/transfer/components/TransferTextareaInput.vue"]]);async function Is(t){return await ne.getAccInfo(t).then(m=>m.publicAccount)}const Ts=async(t,a,m,e,v,g,o,r,b)=>{if(!ne.verifyWalletPassword(M.currentLoggedInWallet.name,q.chainNetworkName,g))return!1;const h=q.currentNetworkProfile.generationHash;let C=I.networkType;const $=t;let P=parseFloat(a)*Math.pow(10,I.nativeToken.divisibility),H=[];P>0&&H.push(new k.Mosaic(new k.MosaicId(I.nativeToken.assetId),k.UInt64.fromUint(Number(P)))),e.length>0&&e.forEach((f,E)=>{f.amount>0&&H.push(new k.Mosaic(new k.MosaicId(f.id),k.UInt64.fromUint(Number(f.amount*Math.pow(10,v[E])))))});let w=I.buildTxn,F,L;if(!r)F=M.currentLoggedInWallet.accounts.find(f=>f.publicKey===o);else{F=M.currentLoggedInWallet.accounts.find(E=>E.address===r);let f=o;L=k.PublicAccount.createFromPublicKey(f,C)}let J=ne.decryptPrivateKey(new k.Password(g),F.encrypted,F.iv),B;if(b){let f=await Is($);B=k.EncryptedMessage.create(m,f,J)}else B=k.PlainMessage.create(m);let U=w.transferBuilder().recipient(k.Address.createFromRawAddress($)).mosaics(H).message(B).build();const T=k.Account.createFromPrivateKey(J,C,1);if(r){let f=M.currentLoggedInWallet.accounts.find(ve=>ve.address==r),E=ne.decryptPrivateKey(new k.Password(g),f.encrypted,f.iv),X=k.Account.createFromPrivateKey(E,C,1);const Y=[U.toAggregateV1(L)],Ce=w.aggregateBonded(Y),V=X.preV2Sign(Ce,h),ee=ae.lockFundTx(V),de=X.preV2Sign(ee,h);ae.announceLF_AND_addAutoAnnounceABT(de,V)}else{const f=T.preV2Sign(U,h);ae.announceTransaction(f)}return!0},st="0".repeat(64),lt=k.PublicAccount.createFromPublicKey(st,I.networkType).address.plain(),at=(t,a)=>{let m=[];return parseInt(t)>0&&m.push(new k.Mosaic(new k.MosaicId(I.nativeToken.assetId),k.UInt64.fromUint(Number(t)))),a.length>0&&a.forEach((e,v)=>{parseInt(e.amount)>0&&m.push(new k.Mosaic(new k.MosaicId(e.id),k.UInt64.fromUint(Number(e.amount))))}),m},Ss=(t,a,m)=>{let e=I.buildTxn,v=at(a,m),o=[e.transferBuilder().recipient(k.Address.createFromRawAddress(lt)).mosaics(v).message(k.PlainMessage.create(t)).build().toAggregateV1(k.PublicAccount.createFromPublicKey(st,I.networkType))],r=e.aggregateBondedBuilder().innerTransactions(o).build();return W.amountFormatterSimple(r.maxFee.compact(),I.nativeToken.divisibility)},Fs=(t,a,m)=>{let e=I.buildTxn,v=at(a,m),g=e.transferBuilder().recipient(k.Address.createFromRawAddress(lt)).mosaics(v).message(k.PlainMessage.create(t)).build();return W.amountFormatterSimple(g.maxFee.compact(),I.nativeToken.divisibility)},xe=Dt({calculate_fee:Fs,calculate_aggregate_fee:Ss}),Ns={name:"SignInModal",props:{toggleModal:Boolean,saveAddress:String},setup(t){const{t:a}=Ye(),e=me().appContext.config.globalProperties.emitter,v=c(""),g=c(t.saveAddress),o=c(""),r=c(""),b=c(!0),x=c(!0),h=c(!1),C=_(()=>!(b.value&&v.value!="")),$=_(()=>!b.value&&g.value!=""),P=c(!1),H=async B=>{try{let U=await I.chainAPI.accountAPI.getAccountInfo(k.Address.createFromRawAddress(B));U.publicKey=="0000000000000000000000000000000000000000000000000000000000000000"?o.value=null:o.value=U.publicKey}catch{o.value=null}},w=async()=>{v.value!==""&&g.value!==""&&(M.currentLoggedInWallet.contacts.find(U=>U.name==v.value)?r.value=a("addressBook.nameExist"):(await H(g.value),M.currentLoggedInWallet.addAddressBook(new Rt(v.value,g.value,"-none-",o.value)),M.wallets.saveMyWalletOnlytoLocalStorage(M.currentLoggedInWallet),r.value="",h.value=!0))},F=()=>v.value="",L=()=>{e.emit("CLOSE_CONTACT_MODAL",!1)},J=()=>x.value=!1;return D(()=>t.saveAddress,()=>g.value=t.saveAddress),{err:r,contactName:v,address:g,disableSave:C,showAddErr:$,showNameErr:P,SaveContact:w,isAddContactQues:x,closeModal:L,proceed:J,clearInput:F,isSuccessAdded:h}},components:{TextInput:Gt}},Ls={key:0,class:"popup-outer fixed flex z-50",style:{top:"110px !important"}},Es={class:"modal-popup-box"},$s={class:"delete-position"},Ps={key:0,class:"w-104"},Vs={class:"text-md text-center my-5"},Bs={key:1,class:"w-104"},Os={class:"default-title font-bold mt-4 text-center"},js={class:"w-full"},Us={key:0,class:"error error_box mb-5"},Ds={class:"mt-4 text-center"},Ks=["disabled"],Rs=["disabled"],Ws={key:2,class:"w-104"},Hs={class:"text-md my-5"},qs={key:0,class:"fixed inset-0 bg-opacity-90 bg-gray-100 z-20"};function Xs(t,a,m,e,v,g){const o=S("font-awesome-icon"),r=S("TextInput");return d(),u("div",null,[A(Pe,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:Q(()=>[m.toggleModal?(d(),u("div",Ls,[s("div",Es,[s("div",$s,[A(o,{icon:"times",class:"delete-icon-style",onClick:a[0]||(a[0]=b=>{e.isAddContactQues=!0,e.closeModal()})})]),e.isAddContactQues&&!e.isSuccessAdded?(d(),u("div",Ps,[s("h1",Vs,n(t.$t("transfer.addContacts")),1),s("div",{type:"button",class:"blue-btn py-2 font-semibold cursor-pointer text-center ml-auto mr-auto w-7/12",onClick:a[1]||(a[1]=b=>e.proceed())},n(t.$t("general.yes")),1),s("div",{type:"button",class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:a[2]||(a[2]=b=>e.closeModal())},n(t.$t("general.no")),1)])):y("v-if",!0),!e.isAddContactQues&&!e.isSuccessAdded?(d(),u("div",Bs,[s("h1",Os,n(t.$t("transfer.addContacts")),1),s("form",{onSubmit:a[7]||(a[7]=Kt((...b)=>t.create&&t.create(...b),["prevent"])),class:"mt-4"},[s("fieldset",js,[e.err!=""?(d(),u("div",Us,n(e.err),1)):y("v-if",!0),A(r,{class:"mb-3",placeholder:t.$t("general.name"),errorMessage:t.$t("general.nameRequired"),modelValue:e.contactName,"onUpdate:modelValue":a[3]||(a[3]=b=>e.contactName=b),icon:"id-card-alt",showError:e.showNameErr},null,8,["placeholder","errorMessage","modelValue","showError"]),A(r,{placeholder:t.$t("general.address"),modelValue:e.address,"onUpdate:modelValue":a[4]||(a[4]=b=>e.address=b),icon:"wallet",showError:e.showAddErr,disabled:!0},null,8,["placeholder","modelValue","showError"]),s("div",Ds,[y(` <button type="button" class="default-btn mr-5 focus:outline-none" @click="clearInput()">
                    {{$t('signin.clear')}}
                  </button> `),s("button",{type:"submit",class:"blue-btn py-2 font-semibold cursor-pointer text-center ml-auto mr-auto w-7/12",disabled:e.disableSave,onClick:a[5]||(a[5]=b=>e.SaveContact())},n(t.$t("general.save")),9,Ks),s("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",disabled:e.disableSave,onClick:a[6]||(a[6]=b=>e.isAddContactQues=!0)},n(t.$t("general.cancel")),9,Rs)])])],32)])):y("v-if",!0),e.isSuccessAdded?(d(),u("div",Ws,[s("h1",Hs,n(t.$t("transfer.successfullySaved",{name:e.contactName})),1)])):y("v-if",!0)])])):y("v-if",!0)]),_:1}),y(' <div @click="toggleModal = !toggleModal" v-if="toggleModal" class="fixed inset-0 bg-opacity-90 bg-blue-primary"></div> '),m.toggleModal?(d(),u("div",qs)):y("v-if",!0)])}const zs=Z(Ns,[["render",Xs],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/transfer/components/AddContactModal.vue"]]),Qs={name:"ConfirmSendModal",props:["toggleModal"],setup(){const a=me().appContext.config.globalProperties.emitter;return{closeConfirmModal:()=>{a.emit("CLOSE_CONFIRM_SEND_MODAL",!1)},proceedSend:()=>{a.emit("CONFIRM_PROCEED_SEND",!0)}}}},Zs={key:0,class:"popup-outer fixed flex z-50"},Gs={class:"modal-popup-box"},Js={class:"delete-position"},Ys={class:"w-92"},el={class:"text-center"},tl={class:"mt-3"};function sl(t,a,m,e,v,g){const o=S("font-awesome-icon");return d(),u("div",null,[A(Pe,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:Q(()=>[m.toggleModal?(d(),u("div",Zs,[s("div",Gs,[s("div",Js,[A(o,{icon:"times",class:"delete-icon-style",onClick:a[0]||(a[0]=r=>{e.closeConfirmModal()})})]),s("div",Ys,[s("div",el,n(t.$t("transfer.proceedWithZero")),1),s("div",tl,[s("div",{onClick:a[1]||(a[1]=r=>e.proceedSend()),class:"blue-btn py-2 font-semibold cursor-pointer text-center ml-auto mr-auto w-7/12"},n(t.$t("general.confirm")),1),s("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:a[2]||(a[2]=r=>e.closeConfirmModal())},n(t.$t("general.cancel")),1)])])])])):y("v-if",!0)]),_:1}),m.toggleModal?(d(),u("div",{key:0,onClick:a[3]||(a[3]=r=>{e.closeConfirmModal()}),class:"fixed inset-0 bg-opacity-90 bg-gray-100 z-20"})):y("v-if",!0)])}const ll=Z(Qs,[["render",sl],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/transfer/components/ConfirmSendModal.vue"]]),al=be({name:"SelectInputAccount",emits:["select-account","update:modelValue"],props:["modelValue","selectDefault","initiateBy"],setup(t){const a=c(!1),e=me().appContext.config.globalProperties.emitter;let v=new et("ThemeStyleConfig");v.init();let g=v.jdenticonConfig;const o=_(()=>{if(M.currentLoggedInWallet){var w=[];return M.currentLoggedInWallet.accounts.forEach(L=>{w.push({value:L.address,label:M.currentLoggedInWallet.convertAddressToName(L.address,!0),isMultiSig:!!L.getDirectParentMultisig().length})}),w.filter(L=>L.isMultiSig==!1)}else return[]}),r=c(!0),b=c(""),x=c(""),h={label:b.value,value:x.value},C=c(ke(x,25,g)),$=(w,F)=>{e.emit("select-account",F),b.value,h.label=w,x.value,h.value=F,C.value=ke(F,25,g),a.value=!a.value},P=c(""),H=_(()=>{const w=P.value.toLowerCase();return P.value==""?o.value:o.value.filter(F=>Object.values(F).some(L=>String(L).toLowerCase().includes(w)))});return{selectAccount:$,selectedAddress:x,selectedAccountInfo:h,selectedImg:C,accounts:o,toggleSelection:a,selectedAccount:b,jdenticonConfig:g,toSvg:ke,filterQuery:P,filteredAccounts:H,placeholder:r}}}),nl={class:"w-full"},ol={key:0,class:"account-item-value account-item"},il={class:"flex"},rl=["innerHTML"],cl={class:"flex flex-col ml-2 text-left"},dl={key:0,class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}},ul={key:1,class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}},ml={key:2,class:"mt-2 text-base"},vl={class:"mt-2 text-base font-bold"},gl={class:"account-item"},fl={class:"flex"},pl=["innerHTML"],bl={class:"text-base ml-2 font-semibold"};function hl(t,a,m,e,v,g){const o=S("Dropdown");return d(),u("div",nl,[A(o,{modelValue:t.selectedAccountInfo,"onUpdate:modelValue":a[0]||(a[0]=r=>t.selectedAccountInfo=r),style:{width:"100%"},options:t.filteredAccounts,filter:!0,optionLabel:"label",emptyFilterMessage:" ",onChange:a[1]||(a[1]=r=>{t.selectAccount(r.value.label,r.value.value),t.$emit("update:modelValue",r.value.value),t.$emit("select-account",r.value.value),t.placeholder=!1}),class:"h-16 mt-0"},{value:Q(r=>[r.value?(d(),u("div",ol,[s("div",il,[s("div",{innerHTML:t.selectedImg},null,8,rl),s("div",cl,[t.initiateBy?(d(),u("div",dl,n(t.$t("general.initiateBy")),1)):(d(),u("div",ul,n(t.$t("transfer.transferFrom"))+" OR Select Signing Account to initiate Multisig",1)),t.placeholder?(d(),u("div",ml,n(t.$t("general.selectAccount")),1)):y("v-if",!0),s("div",vl,n(r.value.label),1)])])])):y("v-if",!0)]),option:Q(r=>[s("div",gl,[s("div",fl,[s("div",{innerHTML:t.toSvg(r.option.value,20,t.jdenticonConfig)},null,8,pl),s("div",bl,n(r.option.label),1)])])]),_:1},8,["modelValue","options"])])}const yl=Z(al,[["render",hl],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/components/SelectInputAccountTransfer.vue"]]),_l={class:"border border-gray-200 px-2 py-1 rounded-md"},wl={class:"flex justify-between"},xl={class:"flex flex-col"},Ml={class:"uppercase font-light text-gray-500 text-txs text-left mb-2"},kl={class:"flex w-full"},Al={key:0,src:Be,class:"h-5 w-5 mt-0.5"},Cl=["value","data-maska","placeholder"],Il=["disabled"],Tl=be({__name:"TransferInputClean",props:{modelValue:{type:String,required:!0},decimal:{type:Number,required:!0},placeholder:{type:String,required:!0},toolTip:{type:String,required:!1},disabled:{type:Boolean,required:!1},showError:{type:Boolean,required:!1},logo:{type:Boolean,required:!1},balance:{type:Number,required:!1}},emits:["update:modelValue","show-error","clickedMaxAvailable"],setup(t){const a=t,m=()=>{let v="0";return a.decimal>0&&(v=v+"."+"9".repeat(a.decimal)),v},e={preProcess:v=>v.replace(/,/g,""),postProcess:v=>{if(!v)return"";let g=0;return a.decimal>0&&(g=1+a.decimal-(v.includes(".")?v.length-v.indexOf("."):0)),Intl.NumberFormat("en-US",{minimumFractionDigits:a.decimal}).format(parseFloat(v)).slice(0,g?-g:void 0)}};return(v,g)=>{const o=tt("maska");return d(),u("div",{class:Wt(t.disabled?"opacity-50":"")},[s("div",_l,[s("div",wl,[s("div",xl,[s("div",Ml,n(t.placeholder),1),s("div",kl,[t.logo?(d(),u("img",Al)):y("v-if",!0),Ee(s("input",{value:t.modelValue,class:"supply_input","data-maska":m(),"data-maska-tokens":"0:\\d:multiple|9:\\d:optional",placeholder:t.placeholder,onInput:g[0]||(g[0]=r=>v.$emit("update:modelValue",parseFloat(r.target.value.replace(/,/g,"")).toString()))},null,40,Cl),[[o,void 0,e]])])]),t.logo?(d(),u("button",{key:0,disabled:t.disabled==!0,class:"w-24 cursor-pointer focus:outline-none text-blue-primary text-xs font-bold",onClick:g[1]||(g[1]=r=>v.$emit("clickedMaxAvailable",!0))},n(v.$t("swap.maxAmount")),9,Il)):y("v-if",!0)])])],2)}}});const Sl=Z(Tl,[["__scopeId","data-v-03ac6095"],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/transfer/components/TransferInputClean.vue"]]),Fl={class:"w-full h-16 mt-0 border border-gray-200 px-2 py-2 rounded-md"},Nl={class:"flex"},Ll=["innerHTML"],El={class:"flex flex-col ml-2 text-left"},$l={class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}},Pl={class:"mt-2 text-base font-bold"},Vl={class:"ml-auto mt-auto mb-auto mr-6"},Bl=be({__name:"MultisigInput",props:{selectDefaultAddress:{type:String,required:!0},selectDefaultName:{type:String,required:!0}},setup(t){const a=t,e=me().appContext.config.globalProperties.emitter;let v=new et("ThemeStyleConfig");v.init();let g=c(v.jdenticonConfig);const o=_(()=>ke(a.selectDefaultAddress,25,g.value)),r=()=>{e.emit("CLOSE_MULTISIG")};return(b,x)=>{const h=S("font-awesome-icon");return d(),u("div",Fl,[s("div",Nl,[s("div",{innerHTML:o.value},null,8,Ll),s("div",El,[s("div",$l,n(b.$t("transfer.transferFrom"))+" "+n(b.$t("general.multisig")),1),s("div",Pl,n(t.selectDefaultName),1)]),s("div",Vl,[A(h,{icon:"times",class:"delete-icon-style",onClick:x[0]||(x[0]=C=>r())})])])])}}}),Ol=Z(Bl,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/components/MultisigInput.vue"]]),jl={key:0,class:"font-bold text-xs text-blue-primary uppercase"},Ul={key:1,class:"font-bold text-xs text-blue-primary uppercase"},Dl={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 text-gray-200 my-1"},Kl={class:"font-semibold text-xxs mt-2 lg:col-span-2 col-span-3 text-blue-primary uppercase"},Rl=["innerHTML"],Wl={class:"flex"},Hl={class:"ml-1 text-blue-400 font-bold"},ql=s("img",{src:Be,class:"ml-1 h-5 w-5 mt-0.5"},null,-1),Xl={key:2,class:"mt-2 grid bg-yellow-50 p-3 rounded-md"},zl={class:"flex gap-2"},Ql=s("img",{src:Ae,class:"w-5 h-5"},null,-1),Zl={class:"flex-cols"},Gl={class:"text-txs"},Jl=["href"],Yl=s("img",{src:ss,class:"w-3 h-3 ml-2 inline-block"},null,-1),ea={key:3,class:"mt-2 grid bg-yellow-50 p-3 rounded-md"},ta={class:"flex gap-2"},sa=s("img",{src:Ae,class:"w-5 h-5"},null,-1),la={class:"text-txs"},aa={key:4,class:"mt-2 grid bg-yellow-50 p-3 rounded-md"},na={class:"flex gap-2"},oa=s("img",{src:Ae,class:"w-5 h-5"},null,-1),ia={class:"text-txs"},ra={key:5,class:"mt-2 bg-yellow-50 p-3 rounded-md mb-2"},ca={class:"flex items-center gap-2"},da=s("img",{src:Ae,class:"w-5 h-5"},null,-1),ua={class:"text-txs"},ma=s("div",{class:"border-b-2 border-gray-600 mt-2"},null,-1),va={key:6,class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},ga={class:"font-semibold lg:col-span-2 col-span-3"},fa={key:0,class:"lg:col-span-2 col-span-3 ml-auto"},pa={key:1,class:"lg:col-span-2 col-span-3 ml-auto"},ba={class:"ml-1 text-blue-400"},ha={key:7},ya={key:0,class:"lg:col-span-4 col-span-6 ml-auto"},_a={key:1,class:"lg:col-span-4 col-span-6 ml-auto"},wa=["index"],xa={key:8,class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},Ma={class:"font-semibold lg:col-span-2 col-span-3"},ka=["innerHTML"],Aa={class:"ml-1 text-blue-400"},Ca={key:9,class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},Ia={class:"font-semibold lg:col-span-2 col-span-3"},Ta=["innerHTML"],Sa={class:"ml-1 text-blue-400"},Fa={key:10},Na={key:0,class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},La={class:"font-semibold lg:col-span-2 col-span-3"},Ea=["innerHTML"],$a={class:"ml-1 text-blue-400"},Pa={key:1,class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},Va={class:"font-semibold lg:col-span-2 col-span-3"},Ba=["innerHTML"],Oa={class:"ml-1 text-blue-400"},ja={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between border-gray-600 border-b items-center text-gray-200 text-xs py-2"},Ua={class:"font-semibold lg:col-span-2 col-span-3"},Da=["innerHTML"],Ka={class:"ml-1 text-blue-400"},Ra={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between border-gray-600 text-white text-xs pt-3"},Wa={class:"font-bold uppercase lg:col-span-2 col-span-3"},Ha=["innerHTML"],qa={class:"ml-1 mt-0.5 text-blue-400"},Xa={key:0,class:"lg:col-span-4 col-span-6 ml-auto"},za={key:1,class:"lg:col-span-4 col-span-6 ml-auto"},Qa=["index"],Za={key:11},Ga={key:0},Ja={class:"font-bold text-xs text-blue-primary uppercase pt-3"},Ya={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 text-gray-200 my-1"},en={class:"font-semibold text-xxs mt-2 lg:col-span-2 col-span-3 text-blue-primary uppercase"},tn={class:"ml-auto font-bold lg:col-span-2 col-span-3"},sn={class:"flex"},ln={class:"ml-1 text-blue-400 font-bold"},an=s("img",{src:Be,class:"ml-1 h-5 w-5 mt-0.5"},null,-1),nn=s("div",{class:"border-b-2 border-gray-600 mt-2"},null,-1),on={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},rn={class:"font-semibold lg:col-span-2 col-span-3"},cn=["innerHTML"],dn={class:"ml-1 text-blue-400"},un={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs pt-2"},mn={class:"font-semibold lg:col-span-2 col-span-3"},vn=["innerHTML"],gn={class:"ml-1 text-blue-400"},fn={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between border-gray-600 border-b items-center text-gray-200 text-xs py-2"},pn={class:"font-semibold lg:col-span-2 col-span-3"},bn=["innerHTML"],hn={class:"ml-1 text-blue-400"},yn={class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between border-gray-600 text-white text-xs pt-3"},_n={class:"font-bold uppercase lg:col-span-2 col-span-3"},wn=["innerHTML"],xn={class:"ml-1 mt-0.5 text-blue-400"},Mn=be({__name:"TransactionFeeDisplayTransfer",props:{transactionFee:{type:Number,required:!0},lockFundCurrency:{type:Number,required:!1},lockFundTxFee:{type:Number,required:!1},totalFeeFormatted:{type:String,required:!0},selectedAccAdd:{type:String,required:!0},balance:{type:String,required:!0},sendXPX:String,selectedMultisigAdd:{type:String,required:!1},checkCosignBalance:String,selectedMosaic:Object,mosaicsCreated:Object,assetRentalFeeCurrency:String,namespaceRentalFeeCurrency:String,fundStatus:Boolean,isMultisig:Boolean,isCosigner:Boolean,onPartial:Boolean,isMultisigAlready:Boolean,lockFundCurrencyConvert:String,lockFundTxFeeConvert:String,noNamespace:Boolean},setup(t){const a=_(()=>I.nativeToken.label),m=o=>{let r=o.toString().split(".");return r[1]!=null?'<span class="font-semibold text-sm">'+r[0]+'</span>.<span class="font-semibold text-xs">'+r[1]+"</span>":'<span class="font-semibold text-sm">'+r[0]+"</span>"},e=o=>{if(o.length<=7)return o;{let r=o.slice(0,3),b=o.slice(-4);return r+"..."+b}},v=_(()=>g.value==168&&q.chainNetworkName=="Sirius Testnet 1"?"https://bctestnetfaucet.xpxsirius.io/#/":g.value==168&&q.chainNetworkName=="Sirius Testnet 2"?"https://bctestnet2faucet.xpxsirius.io/#/":""),g=_(()=>I.networkType);return(o,r)=>(d(),u(Me,null,[t.selectedMultisigAdd.length==0?(d(),u("div",jl,n(o.$t("general.signerAcc")),1)):(d(),u("div",Ul,n(o.$t("general.multisigAcc")),1)),s("div",Dl,[s("div",Kl,n(o.$t("general.currentBalance")),1),s("span",{class:"ml-auto lg:col-span-2 col-span-3",innerHTML:m(t.balance)},null,8,Rl),s("div",Wl,[s("div",Hl,n(a.value),1),ql])]),t.fundStatus?(d(),u("div",Xl,[s("div",zl,[Ql,s("div",Zl,[s("div",Gl,n(o.$t("general.insufficientBalanceWarning",{tokenName:a.value})),1),g.value==168?(d(),u("a",{key:0,class:"text-xs text-blue-primary font-semibold underline",href:v.value,target:"_blank"},[Ve(n(o.$t("general.topUp",{tokenName:a.value})),1),Yl],8,Jl)):y("v-if",!0)])])])):y("v-if",!0),t.onPartial?(d(),u("div",ea,[s("div",ta,[sa,s("div",la,n(o.$t("general.hasPartial")),1)])])):y("v-if",!0),t.isMultisigAlready?(d(),u("div",aa,[s("div",na,[oa,s("div",ia,n(o.$t("multisig.alreadyMultisig")),1)])])):y("v-if",!0),t.noNamespace?(d(),u("div",ra,[s("div",ca,[da,s("div",ua,n(o.$t("namespace.noNamespace")),1)])])):y("v-if",!0),ma,t.sendXPX?(d(),u("div",va,[s("div",ga,n(o.$t("transfer.transferAmount")),1),isNaN(parseFloat(t.sendXPX))?(d(),u("div",fa,"0")):(d(),u("div",pa,n(t.sendXPX),1)),s("div",ba,n(a.value),1)])):y("v-if",!0),t.selectedMultisigAdd.length>0&&t.selectedMosaic?(d(),u("div",ha,[(d(!0),u(Me,null,$e(t.mosaicsCreated,(b,x)=>(d(),u("div",{class:"lg:grid lg:grid-cols-5 grid grid-cols-7 justify-between items-center text-gray-200 text-xs",key:x},[isNaN(parseFloat(t.selectedMosaic[x].amount))?(d(),u("div",ya,"0")):(d(),u("div",_a,n(t.selectedMosaic[x].amount),1)),s("div",{class:"ml-1 text-blue-400",index:x},n(e(t.selectedMosaic[x].namespace)),9,wa)]))),128))])):y("v-if",!0),t.assetRentalFeeCurrency?(d(),u("div",xa,[s("div",Ma,n(o.$t("general.assetRentalFee")),1),s("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:m(t.assetRentalFeeCurrency)},null,8,ka),s("div",Aa,n(a.value),1)])):y("v-if",!0),t.namespaceRentalFeeCurrency?(d(),u("div",Ca,[s("div",Ia,n(o.$t("general.namespacerentalFee")),1),s("div",{class:"ml-auto lg:col-span-2 col-span-3",innerHTML:m(t.namespaceRentalFeeCurrency)},null,8,Ta),s("div",Sa,n(a.value),1)])):y("v-if",!0),t.selectedMultisigAdd.length==0?(d(),u("div",Fa,[t.lockFundCurrencyConvert?(d(),u("div",Na,[s("div",La,n(o.$t("general.lockFund")),1),s("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:m(t.lockFundCurrencyConvert)},null,8,Ea),s("div",$a,n(a.value),1)])):y("v-if",!0),t.lockFundTxFeeConvert?(d(),u("div",Pa,[s("div",Va,n(o.$t("general.lockFundTxFee")),1),s("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:m(t.lockFundTxFeeConvert)},null,8,Ba),s("div",Oa,n(a.value),1)])):y("v-if",!0),s("div",ja,[s("div",Ua,n(o.$t("general.transactionFee")),1),s("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:m(t.transactionFee)},null,8,Da),s("div",Ka,n(a.value),1)]),s("div",Ra,[s("div",Wa,n(o.$t("general.total")),1),s("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:m(t.totalFeeFormatted)},null,8,Ha),s("div",qa,n(a.value),1)]),(d(!0),u(Me,null,$e(t.mosaicsCreated,(b,x)=>(d(),u("div",{class:"lg:grid lg:grid-cols-5 grid grid-cols-7 text-white text-xs",key:x},[isNaN(parseFloat(t.selectedMosaic[x].amount))?(d(),u("div",Xa,"0")):(d(),u("div",za,n(t.selectedMosaic[x].amount),1)),s("div",{class:"ml-1 text-blue-400",index:x},n(e(t.selectedMosaic[x].namespace)),9,Qa)]))),128))])):(d(),u("div",Za,[t.selectedMultisigAdd.length>0?(d(),u("div",Ga,[s("div",Ja,n(o.$t("general.signerAcc")),1),s("div",Ya,[s("div",en,n(o.$t("general.currentBalance")),1),s("span",tn,n(t.checkCosignBalance),1),s("div",sn,[s("div",ln,n(a.value),1),an])]),nn,s("div",on,[s("div",rn,n(o.$t("general.aggregateFee")),1),s("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:m(t.transactionFee)},null,8,cn),s("div",dn,n(a.value),1)]),s("div",un,[s("div",mn,n(o.$t("general.lockFund")),1),s("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:m(t.lockFundCurrency??0)},null,8,vn),s("div",gn,n(a.value),1)]),s("div",fn,[s("div",pn,n(o.$t("general.lockFundTxFee")),1),s("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:m(t.lockFundTxFee??0)},null,8,bn),s("div",hn,n(a.value),1)]),s("div",yn,[s("div",_n,n(o.$t("general.total")),1),s("div",{class:"lg:col-span-2 col-span-3 ml-auto",innerHTML:m(t.totalFeeFormatted)},null,8,wn),s("div",xn,n(a.value),1)])])):y("v-if",!0)]))],64))}}),kn=Z(Mn,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/services/components/TransactionFeeDisplayTransfer.vue"]]);const An={name:"ViewTransferCreate",components:{AddressInputClean:es,SelectInputAccountTransfer:yl,SelectAccountAndContact:Yt,TransferInputClean:Sl,TransferTextareaInput:Cs,PasswordInput:Zt,AddContactModal:zs,ConfirmSendModal:ll,MosaicInput:fs,TransactionFeeDisplayTransfer:kn,SelectMultisigInput:bs,MultisigInput:Ol},setup(){const t=Ht(),a=_(()=>I.nativeToken.label),m=c(!1),e=c(!1),{t:v}=Ye(),o=me().appContext.config.globalProperties.emitter,r=c(!1),b=c([]),x=c("0"),h=c(""),C=c({}),$=c({}),P=c(),H=c("regular"),w=c(""),F=c(""),L=c(""),J=c(!1),B=c(""),U=c(!1),T=c([]),f=c([]),E=c([]),X=c([]),Y=c([]),Ce=c([]),V=c("0"),ee=c(!0),de=c(!1),ve=c(!1),oe=c(""),ot=M.currentLoggedInWallet,K=c(!1),it=_(()=>K.value),Oe=_(()=>K.value),rt=_(()=>K.value),ct=_(()=>K.value),dt=_(()=>K.value),ut=_(()=>K.value),mt=_(()=>K.value),Ie=c(!1),vt=c(""),gt=I.networkType,ft=_(()=>qt.buildAPIEndpoint(q.selectedAPIEndpoint,q.currentNetworkProfile.httpPort)),pt=M.currentLoggedInWallet?M.currentLoggedInWallet.name:"",bt=_(()=>q.currentNetworkProfile.network.currency.name),Te=_(()=>W.convertToExact(q.currentNetworkProfileConfig.lockedFundsPerAggregate,I.nativeToken.divisibility)),ht=_(()=>W.convertToCurrency(q.currentNetworkProfileConfig.lockedFundsPerAggregate,I.nativeToken.divisibility)),he=_(()=>q.currentNetworkProfile?W.convertToExact(ae.getLockFundFee(),I.nativeToken.divisibility):0),Se=_(()=>Te.value+he.value),ie=_(()=>q.currentNetworkProfileConfig.maxMessageSize-1),yt="^[0-9A-Za-z]{40}$",_t="^[0-9A-Za-z-]{46}$",te=c(0),G=c(!0),wt="^[^ ]{8,}$",xt=c(!1),se=c(!1),ge=c(""),O=c(""),ue=c(""),ye=c(""),j=c(""),fe=c(""),Fe=c(""),Mt=_(()=>!!j.value),je=c([]),_e=_(()=>{if(!M.currentLoggedInWallet)return[];let l=M.currentLoggedInWallet.accounts.map(p=>({name:p.name,balance:p.balance,address:p.address,publicKey:p.publicKey,isMultisig:!!p.getDirectParentMultisig().length})),i=M.currentLoggedInWallet.others.filter(p=>p.type==="MULTISIG").map(p=>({name:p.name,balance:p.balance,address:p.address,publicKey:p.publicKey,isMultisig:!0}));return l.concat(i)}),le=c(j.value?xe.calculate_aggregate_fee(w.value,V.value,T.value):xe.calculate_fee(w.value,V.value,T.value)),Ue=_(()=>{let l=Le(oe.value)?Le(oe.value).balance:0;return W.toCurrencyFormat(l)}),re=c(0),kt=_(()=>_e.value.length>1),De=_(()=>{if(!M.currentLoggedInWallet)return[];const l=M.currentLoggedInWallet;var i=[],p=0;return i.push({key:"0",label:v("general.ownerAcc"),selectable:!1,children:[]}),_e.value.forEach(N=>{i[0].children.push({key:"0-"+p.toString(),label:N.name,data:k.Address.createFromRawAddress(N.address).pretty()}),p++}),p=0,i.push({key:"1",label:v("general.contact"),selectable:!1,children:[]}),l.contacts!=null&&l.contacts.forEach(N=>{i[1].children.push({key:"1-"+p.toString(),label:N.name,data:k.Address.createFromRawAddress(N.address).pretty()}),p++}),i}),Ke=_(()=>{const l=M.currentLoggedInWallet;if(!l)return[];let i=l.accounts.find(z=>z.address==O.value);if(!i)return[];var N=i.multisigInfo.filter(z=>z.level<0).map((z,Ut)=>({key:Ut.toString(),label:l.contacts.find(ce=>ce.address==ne.createAddressFromPublicKey(z.publicKey,I.networkType).plain())?l.contacts.find(ce=>ce.address==ne.createAddressFromPublicKey(z.publicKey,I.networkType).plain()).name:l.accounts.find(ce=>ce.publicKey==z.publicKey)?l.accounts.find(ce=>ce.publicKey==z.publicKey).name:"MULTISIG-"+ne.createAddressFromPublicKey(z.publicKey,I.networkType).plain().slice(-4),data:z.publicKey,selectable:!0}));return N}),At=_(()=>Ke.value.length!=0),Ct=l=>{Re(),m.value=!1,h.value=l.data,C.value[l.key]=!0,l.selectable=!1},It=l=>{e.value=!1,j.value=ne.createAddressFromPublicKey(l.data,I.networkType).plain(),ye.value=l.label,fe.value=l.data,oe.value=O.value,$.value[l.key]=!0},Re=()=>{Object.keys(C.value).length!==0&&(P.value=Object.keys(C.value)[0].split("-"),De.value[P.value[0]].children[P.value[1]].selectable=!0,C.value={})};let We=async()=>{let l=await ts.scanAsset(ue.value);l.length>0?re.value=l[0].amount:re.value=0;let i=l.slice(1);je.value=i.map((p,N)=>({val:p.id,balance:W.toCurrencyFormat(p.amount,p.divisibility),label:p.label,id:N+1,divisibility:p.divisibility,disabled:!1}))};const Ne=()=>{x.value="0",F.value="",h.value="",ee.value=!0,w.value="",V.value="0",o.emit("CLEAR_SELECT",0),T.value=[],f.value=[],X.value=[],Y.value=[],r.value=!1},Tt=()=>{w.value="",o.emit("CLEAR_TEXTAREA",0)},St=l=>{h.value=l},He=async()=>{if(V.value=="0"&&!ve.value)de.value=!0;else{let l;j.value&&(l=oe.value),await Ts(h.value.toUpperCase(),V.value,w.value,T.value,Y.value,F.value,ue.value,l,B.value)?(L.value="",Ge.checkAvailableContact(h.value)?(t.push({name:"ViewAccountPendingTransactions",params:{address:O.value}}),Ne()):U.value=!0,ve.value=!1):L.value=v("general.walletPasswordInvalid",{name:M.currentLoggedInWallet.name})}},Ft=_(()=>{if(Oe.value)return!0;{let l;return M.currentLoggedInWallet?l=M.currentLoggedInWallet.accounts.find(i=>i.name==ge.value)||M.currentLoggedInWallet.others.find(i=>i.name==ge.value):l=void 0,l!=null&&l.assets!=null?l.assets.length==0||f.value.length==R.value.length:!0}}),qe=l=>isNaN(parseFloat(l))?0:parseFloat(l),Xe=_(()=>{let l=I.nativeToken.divisibility;return j.value?l==0?Math.trunc(parseFloat(le.value)+he.value+Te.value):Math.round((parseFloat(le.value)+he.value+Te.value)*Math.pow(10,l))/Math.pow(10,l):l==0?Math.trunc(qe(parseFloat(V.value.replace(/,/g,"")))+parseFloat(le.value)):Math.round((qe(parseFloat(V.value.replace(/,/g,"")))+parseFloat(le.value))*Math.pow(10,l))/Math.pow(10,l)}),Nt=_(()=>{if(!O.value)return 0;let l=I.nativeToken.divisibility;return j.value?W.convertNumberMinimumFormat(re.value,l):W.convertNumberMinimumFormat(re.value-parseFloat(le.value),l)}),ze=_(()=>O.value?j.value?V.value>re.value||!b.value.every(l=>l==!1):Xe.value>re.value||!b.value.every(l=>l==!1):!1),Lt=_(()=>!(F.value.match(wt)&&!G.value&&h.value.length>0&&b.value.every(l=>l==!1)&&!ze.value&&!se.value)),R=_(()=>je.value);for(let l=0;l<R.value.length;l++)b.value.push(!1);const Et=()=>{f.value.push(0),T.value.push({id:0,amount:"0",namespace:""})},$t=async l=>{let i=await I.chainAPI.assetAPI.getMosaicsNames([new k.MosaicId(l)]);Fe.value=i[0].names[0]?i[0].names[0].name:void 0},Pt=l=>{let i=R.value.find(p=>p.val==T.value[l.index].id);for(let p in R.value)R.value[p].disabled=!1;R.value.forEach(p=>T.value.some(N=>{p.val==N.id&&(p.disabled=!0)})),$t(i.val),T.value[l.index].namespace=Fe.value?Fe.value:i.val,T.value[l.index].amount="0",Y.value[l.index]=i.divisibility,o.emit("CLOSE_MOSAIC_INSUFFICIENT_ERR",!1)},Vt=l=>{T.value[l.index]!=null&&T.value[l.index].id!=0&&(R.value[R.value.findIndex(i=>i.val===T.value[l.index].id)].disabled=!1),T.value.splice(l.index,1),b.value.splice(l.index,1),Y.value.splice(l.index,1),f.value.splice(l.index,1)},Bt=l=>{let p=(M.currentLoggedInWallet.accounts.find(N=>N.address===O.value)||M.currentLoggedInWallet.others.find(N=>N.address===O.value)).assets.find(N=>N.idHex==R.value[l].val);return p!=null?p.amount:0};D(O,()=>{j.value="",ye.value=""}),D([O,j],()=>{const l=Le(O.value);j.value?ue.value=fe.value:ue.value=l?l.publicKey:"",We(),pe(),b.value=[];for(let i=0;i<R.value.length;i++)b.value.push(!1);if(j.value){const i=ot.accounts.find(p=>p.address==O.value);i&&(oe.value=i.address),parseFloat(Ue.value.replace(/,/g,""))<Se.value?K.value=!0:K.value=!1}else K.value=!1}),D(fe,()=>{ue.value=fe.value}),D(oe,(l,i)=>{l!=i&&(_e.value.find(p=>p.address==l).balance<Se.value+Number(le.value)?(Ie.value=!0,K.value=!0):(Ie.value=!1,K.value=!1))}),D(h,l=>{we(l),l.length==40||l.length==46?(we(l),Qe()):G.value=!0});const Qe=()=>{if(M.currentLoggedInWallet)try{let l=W.createAddress(h.value);W.checkAddressNetwork(l,gt)?(we(h.value),G.value=!1):G.value=!0}catch{try{let i=W.createNamespaceId(h.value);Ze(i).then(p=>{h.value=p.plain(),G.value=!1,we(h.value)}).catch(p=>{G.value=!0})}catch{G.value=!0}}},we=l=>{l.match(_t)||l.match(yt)?Ge.verifyPublicKey(h.value).then(i=>ee.value=i).catch(i=>ee.value=!0):(ee.value=!0,G.value=!0)},Ze=async l=>await Jt.getLinkedAddress(l,ft.value),Ot=()=>{V.value=Nt.value.toString()},pe=()=>{le.value=j.value?xe.calculate_aggregate_fee(w.value,V.value,T.value):xe.calculate_fee(w.value,V.value,T.value)};D(ge,(l,i)=>{l!=i&&(Re(),h.value="",pe())}),D(V,(l,i)=>{l!=i&&pe()}),D(w,(l,i)=>{l!=i&&(pe(),B.value&&w.value?te.value=ae.getFakeEncryptedMessageSize(w.value):te.value=ae.getPlainMessageSize(w.value),w.value.length>ie.value||te.value>ie.value?se.value=!0:se.value=!1)});const jt=l=>{let i=R.value.find(p=>p.val==l);return i?parseFloat(i.balance.replace(/,/g,"")):0};return D(ee,l=>{l||(B.value="")}),D(B,l=>{l?w.value&&(te.value=ae.getFakeEncryptedMessageSize(w.value),w.value.length>ie.value||te.value>ie.value?se.value=!0:se.value=!1):(te.value=ae.getPlainMessageSize(w.value),w.value.length>ie.value||te.value>ie.value?se.value=!0:se.value=!1)}),D(()=>[...T.value],l=>{pe();for(let i=0;i<l.length;i++)l[i].amount>jt(l[i].id)?b.value[i]=!0:b.value[i]=!1},{deep:!0}),o.on("CLOSE_MULTISIG",()=>{j.value="",ye.value=""}),o.on("CLOSE_CONTACT_MODAL",l=>{U.value=l,t.push({name:"ViewAccountPendingTransactions",params:{address:O.value}}),Ne()}),o.on("select-account",l=>{ge.value=M.currentLoggedInWallet.accounts.find(i=>i.address==l)?M.currentLoggedInWallet.accounts.find(i=>i.address==l).name:M.currentLoggedInWallet.others.find(i=>i.address==l).name,O.value=l,T.value=[],f.value=[],X.value=[],Y.value=[]}),o.on("CLOSE_CONFIRM_SEND_MODAL",l=>{de.value=l}),o.on("CONFIRM_PROCEED_SEND",l=>{l&&(ve.value=l,de.value=!1,He())}),{showAssetBalanceErr:b,totalFee:Xe,contacts:De,onNodeSelect:Ct,selectedNode:C,toggleContact:m,moreThanOneAccount:kt,showMenu:J,selectedAccName:ge,selectedAccAdd:O,showAddressError:G,balance:re,showBalanceErr:ze,err:L,recipientInput:h,namespace:vt,sendXPX:V,messageText:w,msgOption:H,showContactSelection:r,selectContact:x,walletPassword:F,disableCreate:Lt,clearInput:Ne,showPasswdError:xt,updateAdd:St,addMosaicsButton:Ft,clearMsg:Tt,accounts:_e,encryptedMsgDisable:ee,encryptedMsg:B,makeTransfer:He,togglaAddContact:U,displayMosaicsOption:Et,selectedMosaic:T,mosaicsCreated:f,mosaicsSelected:E,mosaics:R,selectedMosaicAmount:X,getSelectedMosaicBalance:Bt,mosaicSupplyDivisibility:Y,updateMosaic:Pt,currentlySelectedMosaic:Ce,removeMosaic:Vt,toggleConfirm:de,effectiveFee:le,cosignAddress:oe,disableRecipient:it,checkRecipient:Qe,disableSupply:Oe,disableRegularMsg:rt,disableHexMsg:ct,disableEncryptMsg:dt,disableMsgInput:ut,disablePassword:mt,cosignerBalanceInsufficient:Ie,messageLimit:ie,remainingChar:te,lockFundCurrency:ht,currencyName:bt,lockFundTxFee:he,lockFundTotalFee:Se,walletName:pt,checkNamespace:Ze,currentNativeTokenName:a,showLimitErr:se,checkCosignBalance:Ue,displayAssetId:l=>{let i=l.toString(),p=i.slice(0,3),N=i.slice(-4);return p+"..."+N},toggleMultisig:e,selectedNodeMultisig:$,selectedAccPublicKey:ue,selectedMultisigName:ye,selectedMultisigAdd:j,selectedMultisigPublicKey:fe,selectableMultisig:Ke,onNodeSelectMultisig:It,scanDistributorAsset:We,haveSelectableMultisig:At,initiateBy:Mt,updateAmountToMax:Ot}}},nt=t=>(zt("data-v-78445887"),t=t(),Qt(),t),Cn={class:"w-10/12 ml-auto mr-auto mt-5"},In={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},Tn={class:"xl:col-span-2 p-12"},Sn={class:"text-sm font-semibold"},Fn={key:0,class:"error error_box mb-5"},Nn={key:1,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},Ln={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},En={class:"inline-block text-xs"},$n=nt(()=>s("div",{class:"mt-4"},null,-1)),Pn={class:"flex gap-1"},Vn={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},Bn={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},On={key:2,class:"error text-tsm text-left mt-2 mb-5 ml-4"},jn={key:3,class:"mt-3"},Un={class:"flex mt-3 gap-1"},Dn={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},Kn={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},Rn=["disabled"],Wn={key:4,class:"mb-5"},Hn=["disabled"],qn={for:"encryptedMsg",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},Xn={class:"bg-navy-primary py-6 px-6 xl:col-span-1"},zn=nt(()=>s("div",{class:"mt-5"},null,-1)),Qn={class:"font-semibold text-xs text-white mb-1.5"},Zn=["disabled"],Gn={class:"text-center"};function Jn(t,a,m,e,v,g){const o=S("AddContactModal"),r=S("ConfirmSendModal"),b=S("font-awesome-icon"),x=S("SelectInputAccountTransfer"),h=S("SelectMultisigInput"),C=S("Sidebar"),$=S("MultisigInput"),P=S("AddressInputClean"),H=S("SelectAccountAndContact"),w=S("MosaicInput"),F=S("TransferInputClean"),L=S("TransferTextareaInput"),J=S("TransactionFeeDisplayTransfer"),B=S("PasswordInput"),U=S("router-link"),T=tt("debounce");return d(),u("div",null,[A(o,{toggleModal:e.togglaAddContact,saveAddress:e.recipientInput},null,8,["toggleModal","saveAddress"]),A(r,{toggleModal:e.toggleConfirm},null,8,["toggleModal"]),s("div",Cn,[s("div",In,[s("div",Tn,[s("div",Sn,n(t.$t("transfer.newTransfer")),1),e.err!=""?(d(),u("div",Fn,n(e.err),1)):y("v-if",!0),e.showBalanceErr?(d(),u("div",Nn,[s("div",Ln,[A(b,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),s("div",En,n(t.$t("general.insufficientBalance")),1)])):y("v-if",!0),$n,s("div",Pn,[A(x,{modelValue:e.selectedAccAdd,"onUpdate:modelValue":a[0]||(a[0]=f=>e.selectedAccAdd=f),initiateBy:e.initiateBy},null,8,["modelValue","initiateBy"]),e.haveSelectableMultisig?(d(),u("div",{key:0,onClick:a[1]||(a[1]=f=>e.toggleMultisig=!e.toggleMultisig),class:"border rounded-md cursor-pointer flex flex-col justify-around p-2 h-16 w-18 mt-auto"},[A(b,{icon:"id-card-alt",class:"text-blue-primary ml-auto mr-auto"}),s("div",Vn,n(t.$t("general.select")),1),s("div",Bn,n(t.$t("general.multisig")),1)])):y("v-if",!0)]),y(" Pop Up when select icon is clicked "),A(C,{visible:e.toggleMultisig,"onUpdate:visible":a[3]||(a[3]=f=>e.toggleMultisig=f),baseZIndex:1e4,position:"full"},{default:Q(()=>[A(h,{account:e.selectableMultisig,selectedNode:e.selectedNodeMultisig,onNodeSelect:a[2]||(a[2]=f=>e.onNodeSelectMultisig(f))},null,8,["account","selectedNode"])]),_:1},8,["visible"]),e.cosignerBalanceInsufficient?(d(),u("div",On,n(t.$t("general.insufficientBalance")),1)):y("v-if",!0),e.selectedMultisigAdd?(d(),u("div",jn,[A($,{"select-default-address":e.selectedMultisigAdd,"select-default-name":e.selectedMultisigName},null,8,["select-default-address","select-default-name"])])):y("v-if",!0),s("div",Un,[Ee(A(P,{placeholder:t.$t("transfer.transferPlaceholder"),modelValue:e.recipientInput,"onUpdate:modelValue":a[4]||(a[4]=f=>e.recipientInput=f),showError:e.showAddressError,disabled:e.disableRecipient},null,8,["placeholder","modelValue","showError","disabled"]),[[T,e.checkRecipient,"1000"]]),s("div",{onClick:a[5]||(a[5]=f=>e.toggleContact=!e.toggleContact),class:"border rounded-md cursor-pointer flex flex-col justify-around p-2 h-16 w-18"},[A(b,{icon:"id-card-alt",class:"text-blue-primary ml-auto mr-auto"}),s("div",Dn,n(t.$t("general.select")),1),s("div",Kn,n(t.$t("general.contact")),1)])]),y(" Pop Up when select icon is clicked "),A(C,{visible:e.toggleContact,"onUpdate:visible":a[6]||(a[6]=f=>e.toggleContact=f),baseZIndex:1e4,position:"full"},{default:Q(()=>[A(H,{contacts:e.contacts,selectedNode:e.selectedNode,onNodeSelect:e.onNodeSelect},null,8,["contacts","selectedNode","onNodeSelect"])]),_:1},8,["visible"]),(d(!0),u(Me,null,$e(e.mosaicsCreated,(f,E)=>(d(),u("div",{key:E},[A(w,{placeholder:t.$t("transfer.selectAsset"),errorMessage:"",modelValue:e.selectedMosaic[E].id,"onUpdate:modelValue":X=>e.selectedMosaic[E].id=X,index:E,options:e.mosaics,disableOptions:e.selectedMosaic,onShowMosaicSelection:e.updateMosaic,onRemoveMosaicSelected:e.removeMosaic},null,8,["placeholder","modelValue","onUpdate:modelValue","index","options","disableOptions","onShowMosaicSelection","onRemoveMosaicSelected"]),e.selectedMosaic[E].id!=0?(d(),Je(F,{key:0,modelValue:e.selectedMosaic[E].amount,"onUpdate:modelValue":X=>e.selectedMosaic[E].amount=X,placeholder:t.$t("transfer.assetAmount"),type:"text",showError:e.showAssetBalanceErr[E],decimal:e.mosaicSupplyDivisibility[E]},null,8,["modelValue","onUpdate:modelValue","placeholder","showError","decimal"])):y("v-if",!0)]))),128)),s("div",null,[s("button",{class:"my-2 font-semibold text-xs text-blue-primary outline-none focus:outline-none disabled:opacity-50",disabled:e.addMosaicsButton||e.mosaics.length==0,onClick:a[7]||(a[7]=(...f)=>e.displayMosaicsOption&&e.displayMosaicsOption(...f))}," + "+n(t.$t("transfer.addAssets")),9,Rn)]),A(F,{modelValue:e.sendXPX,"onUpdate:modelValue":a[8]||(a[8]=f=>e.sendXPX=f),balance:Number(e.balance),placeholder:t.$t("transfer.transferAmount"),logo:!0,type:"text",showError:e.showBalanceErr,onClickedMaxAvailable:a[9]||(a[9]=f=>e.updateAmountToMax()),decimal:6,disabled:e.disableSupply},null,8,["modelValue","balance","placeholder","showError","disabled"]),A(L,{class:"pt-4",placeholder:t.$t("general.message"),errorMessage:t.$t("general.limitExceed"),modelValue:e.messageText,"onUpdate:modelValue":a[10]||(a[10]=f=>e.messageText=f),remainingChar:e.remainingChar,showError:e.showLimitErr,limit:e.messageLimit,icon:"comment",msgOpt:e.msgOption,disabled:e.disableMsgInput},null,8,["placeholder","errorMessage","modelValue","remainingChar","showError","limit","msgOpt","disabled"]),e.encryptedMsgDisable?y("v-if",!0):(d(),u("div",Wn,[Ee(s("input",{id:"encryptedMsg",type:"checkbox",value:"encryptedMsg","onUpdate:modelValue":a[11]||(a[11]=f=>e.encryptedMsg=f),disabled:e.disableEncryptMsg==1},null,8,Hn),[[Xt,e.encryptedMsg]]),s("label",qn,n(t.$t("transfer.enableEncryption")),1)]))]),s("div",Xn,[A(J,{"send-x-p-x":e.sendXPX,"selected-mosaic":e.selectedMosaic,"mosaics-created":e.mosaicsCreated,"transaction-fee":e.effectiveFee,"total-fee-formatted":String(e.totalFee),"selected-multisig-add":e.selectedMultisigAdd,"check-cosign-balance":e.checkCosignBalance,"lock-fund-currency":e.lockFundCurrency,"lock-fund-tx-fee":e.lockFundTxFee,balance:String(e.balance),"selected-acc-add":e.selectedAccAdd},null,8,["send-x-p-x","selected-mosaic","mosaics-created","transaction-fee","total-fee-formatted","selected-multisig-add","check-cosign-balance","lock-fund-currency","lock-fund-tx-fee","balance","selected-acc-add"]),zn,s("div",Qn,n(t.$t("general.enterPasswordContinue")),1),A(B,{placeholder:t.$t("general.enterPassword"),errorMessage:t.$t("general.passwordRequired"),showError:e.showPasswdError,modelValue:e.walletPassword,"onUpdate:modelValue":a[12]||(a[12]=f=>e.walletPassword=f),icon:"lock",class:"mt-5 mb-3",disabled:e.disablePassword},null,8,["placeholder","errorMessage","showError","modelValue","disabled"]),s("button",{type:"submit",class:"w-full blue-btn px-3 py-3 disabled:opacity-50 disabled:cursor-auto",disabled:e.disableCreate,onClick:a[13]||(a[13]=f=>e.makeTransfer())},n(t.$t("general.transfer")),9,Zn),s("div",Gn,[A(U,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white underline"},{default:Q(()=>[Ve(n(t.$t("general.cancel")),1)]),_:1})])])])])])}const go=Z(An,[["render",Jn],["__scopeId","data-v-78445887"],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/transfer/views/ViewTransferCreate.vue"]]);export{go as default};
