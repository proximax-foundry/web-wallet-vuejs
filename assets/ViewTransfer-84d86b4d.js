import{d as le,L as Le,r as P,c as E,i as ee,o as A,b as T,m as $,v as se,e as s,t as _,f as U,y as ce,z as a,B as n,M as xe,O as te,j as we,_ as Ae,x as ke,F as Ie,P as Re,Q as Ke,R as Oe,W as ae,w as K,n as X,S as D,T as De,h as Te,u as qe,a as Y,H as O,A as We,l as ze,g as He,k as be,U as je}from"./index-101c1a50.js";import{_ as Xe,a as Ze,b as Ge,c as Qe}from"./TxnSummary.vue_vue_type_script_setup_true_lang-c0bc9a89.js";import{_ as Je}from"./SelectAccountAndContact.vue_vue_type_style_index_0_lang-ee086651.js";import{_ as Ye}from"./proximax-logo-ecfc3767.js";import{_ as et}from"./PasswordInput.vue_vue_type_script_setup_true_lang-33ecb86a.js";import{_ as tt}from"./icon-red-x-a5511f99.js";import{_ as at}from"./icon-green-tick-1b766454.js";import{T as me}from"./transactionState-730de40e.js";import"./jdenticon-module-0d5e08d8.js";const st={key:0},lt={class:"flex justify-between"},nt={class:"flex flex-col ml-2 text-left"},ot=s("div",{class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}}," Selected Asset",-1),rt={class:"mt-1 text-tsm font-bold"},it={class:"mt-1 text-tsm font-bold"},ct={class:"account-item"},ut={class:"flex justify-between"},dt={class:"mt-1 text-tsm font-bold"},mt={class:"mt-1 text-tsm font-bold"},vt=le({__name:"SelectInputAsset",props:{index:{type:Number,required:!0},assetOptions:{type:Object,required:!0},selectedAssets:{type:Object,required:!1}},emits:["select-asset","update:modelValue"],setup(o){const r=o,u=[{namespace:"prx.xpx",name:"XPX"},{namespace:"prx.metx",name:"METX"},{namespace:"xarcade.xar",name:"XAR"}],d=b=>{const f=u.find(w=>w.namespace==b);return f?f.name:b},{assetOptions:l,selectedAssets:i,index:m}=Le(r),x=P(!1),R=E(()=>{const b=new Set(i.value.map(f=>f.id));return l.value.filter(f=>!b.has(f.id))}),V=async b=>{if(x.value)return;x.value=!0;const{first:f,last:w}=b,v=[];for(let p=f;p<w;p++)l.value[p].hasUpdated||v.push(new a.MosaicId(l.value[p].id));if(!v.length){x.value=!1;return}const k=await n.chainAPI.assetAPI.getMosaicsNames(v),y=await n.chainAPI.assetAPI.getMosaics(v);let g=0,M=0;const S=new Map;k.forEach((p,c)=>{S.set(p.mosaicId.toHex(),c)}),y.sort((p,c)=>{const L=S.get(p.mosaicId.toHex()),q=S.get(c.mosaicId.toHex());return L-q});for(let p=f;p<w;p++){if(!k[g])continue;const c=l.value.find(L=>L.id==k[g].mosaicId.toHex());c&&(c.namespace=k[g].names.length?k[g].names[0].name:"",c.balance=c.balance/Math.pow(10,y[M].divisibility),c.divisibility=y[M].divisibility,c.hasUpdated=!0,g++,M++)}x.value=!1},C=b=>{if(b==null){i.value.splice(m.value,1);return}i.value[m.value].balance=b.balance,i.value[m.value].id=b.id,i.value[m.value].namespace=b.namespace,i.value[m.value].divisibility=b.divisibility,i.value[m.value].amount="0"};return(b,f)=>{const w=ee("Dropdown");return A(),T("div",null,[$(w,{showClear:!0,modelValue:ce(i)[ce(m)],"onUpdate:modelValue":f[0]||(f[0]=v=>ce(i)[ce(m)]=v),style:{width:"100%"},options:R.value,filter:!0,filterFields:["id","namespace"],emptyFilterMessage:" ",placeholder:"Select Asset",virtualScrollerOptions:{lazy:!0,onLazyLoad:V,showLoader:!0,loading:x.value,delay:0,itemSize:38},onChange:f[1]||(f[1]=v=>{var k;C(v.value),b.$emit("update:modelValue",(k=v.value)==null?void 0:k.value)})},{value:se(v=>[v.value.id?(A(),T("div",st,[s("div",lt,[s("div",nt,[ot,s("div",rt,_(d(v.value.namespace==""?v.value.id:v.value.namespace)),1)]),s("div",it,"Balance: "+_(v.value.balance),1)])])):U("",!0)]),option:se(v=>[s("div",ct,[s("div",ut,[s("div",dt,_(d(v.option.namespace==""?v.option.id:v.option.namespace)),1),s("div",mt,"Balance: "+_(v.option.balance),1)])])]),_:1},8,["modelValue","options","virtualScrollerOptions"])])}}}),pt={class:"border border-gray-200 px-2 py-1 rounded-md"},ft={class:"flex justify-between"},gt={class:"flex flex-col"},yt={class:"uppercase font-light text-gray-500 text-txs text-left mb-2"},bt={class:"flex w-full"},ht={key:0,src:Ye,class:"h-5 w-5 mt-0.5"},_t=["value","data-maska","placeholder"],xt=["disabled"],wt=le({__name:"TransferInputClean",props:{modelValue:{type:String,required:!0},decimal:{type:Number,required:!0},placeholder:{type:String,required:!0},toolTip:{type:String,required:!1},disabled:{type:Boolean,required:!1},showError:{type:Boolean,required:!1},logo:{type:Boolean,required:!1},balance:{type:Number,required:!1}},emits:["update:modelValue","show-error","clickedMaxAvailable"],setup(o){const r=o,u=()=>{let l="0";return r.decimal>0&&(l=l+"."+"9".repeat(r.decimal)),l},d={preProcess:l=>l.replace(/,/g,""),postProcess:l=>{if(!l)return"";let i=0;return r.decimal>0&&(i=1+r.decimal-(l.includes(".")?l.length-l.indexOf("."):0)),Intl.NumberFormat("en-US",{minimumFractionDigits:r.decimal}).format(parseFloat(l)).slice(0,i?-i:void 0)}};return(l,i)=>{const m=xe("maska");return A(),T("div",{class:we(o.disabled?"opacity-50":"")},[s("div",pt,[s("div",ft,[s("div",gt,[s("div",yt,_(o.placeholder),1),s("div",bt,[o.logo?(A(),T("img",ht)):U("",!0),te(s("input",{value:o.modelValue,class:"supply_input","data-maska":u(),"data-maska-tokens":"0:\\d:multiple|9:\\d:optional",placeholder:o.placeholder,onInput:i[0]||(i[0]=x=>l.$emit("update:modelValue",parseFloat(x.target.value.replace(/,/g,"")).toString()))},null,40,_t),[[m,void 0,d]])])]),o.logo?(A(),T("button",{key:0,disabled:o.disabled==!0,class:"w-24 cursor-pointer focus:outline-none text-blue-primary text-xs font-bold",onClick:i[1]||(i[1]=x=>l.$emit("clickedMaxAvailable",!0))},_(l.$t("swap.maxAmount")),9,xt)):U("",!0)])])],2)}}});const he=Ae(wt,[["__scopeId","data-v-ac217733"]]),At={class:"rounded-md bg-white flex border mt-3"},kt=["value","placeholder"],It=s("div",{class:"w-1 flex-none"},null,-1),Tt={class:"text-gray-800"},Mt=le({__name:"TextAreaInput",props:{modelValue:{type:String,required:!1},currentBytes:{type:Number,required:!0},limit:{type:Number,required:!0},placeholder:{type:String,required:!0}},emits:["update:modelValue"],setup(o){return(r,u)=>(A(),T(Ie,null,[s("div",At,[s("textarea",{value:o.modelValue,onInput:u[0]||(u[0]=d=>r.$emit("update:modelValue",d.target.value)),rows:"2",class:"w-full text-gray-500 px-2 py-1 outline-none bg-white text-xs",placeholder:o.placeholder.toUpperCase()},null,40,kt),It]),s("div",{class:we(["float-right mt-1 text-tsm",o.currentBytes>o.limit?"text-red-500":"text-gray-800"])},[ke(_(o.currentBytes)+" ",1),s("span",Tt,"/"+_(o.limit),1)],2)],64))}}),Pt={class:"border border-gray-200 px-2 py-2 rounded-md w-full"},$t={class:"flex gap-2"},Ft={class:"flex flex-col w-full"},Vt={class:"uppercase text-gray-500 font-light text-xxs text-left"},Ct={key:0,class:"flex flex-col ml-auto justify-center mt-1"},St=s("img",{src:tt,class:"h-5 w-5 mr-auto ml-auto"},null,-1),Nt={class:"text-xxs text-red-400 font-bold uppercase"},Et={key:1,class:"flex flex-col ml-auto justify-center mt-1"},Bt=s("img",{src:at,class:"h-5 w-5 mr-auto ml-auto"},null,-1),Ut={class:"text-xxs text-green-400 font-bold uppercase"},_e=le({__name:"FieldValidationInput",props:Re({placeholder:{},showError:{}},{modelValue:{}}),emits:["update:modelValue"],setup(o){const r=Ke(o,"modelValue");return(u,d)=>(A(),T("div",Pt,[s("div",$t,[s("div",Ft,[s("div",Vt,_(u.placeholder),1),te(s("input",{type:"text","onUpdate:modelValue":d[0]||(d[0]=l=>r.value=l),class:"w-full font-semibold text-tsm outline-none mt-1"},null,512),[[Oe,r.value]])]),u.showError&&r.value.length!=0?(A(),T("div",Ct,[St,s("div",Nt,_(u.$t("general.invalid")),1)])):u.showError?U("",!0):(A(),T("div",Et,[Bt,s("div",Ut,_(u.$t("general.valid")),1)]))])]))}});const Me="0".repeat(64),Pe=a.PublicAccount.createFromPublicKey(Me,n.networkType).address.plain(),$e=(o,r)=>{let u=[];return parseInt(o)>0&&u.push(new a.Mosaic(new a.MosaicId(n.nativeToken.assetId),a.UInt64.fromUint(Number(o)))),r.length>0&&r.forEach(d=>{parseInt(d.amount)>0&&u.push(new a.Mosaic(new a.MosaicId(d.id),a.UInt64.fromUint(Number(d.amount))))}),u};class Z{}Z.createTransaction=async(o,r,u,d,l,i,m,x,R)=>{if(!ae.verifyWalletPassword(K.currentLoggedInWallet.name,X.chainNetworkName,l))return!1;const C=X.currentNetworkProfile.generationHash;let b=n.networkType,f=parseFloat(r)*Math.pow(10,n.nativeToken.divisibility),w=[];f>0&&w.push(new a.Mosaic(new a.MosaicId(n.nativeToken.assetId),a.UInt64.fromUint(Number(f)))),d.length>0&&d.forEach(c=>{c.amount>0&&w.push(new a.Mosaic(new a.MosaicId(c.id),a.UInt64.fromUint(Number(c.amount*Math.pow(10,c.divisibility)))))});let v=n.buildTxn,k,y;if(!m)k=K.currentLoggedInWallet.accounts.find(c=>c.address===i);else{k=K.currentLoggedInWallet.accounts.find(L=>L.address===i);const c=await n.chainAPI.accountAPI.getAccountInfo(a.Address.createFromRawAddress(m));y=a.PublicAccount.createFromPublicKey(c.publicKey,b)}let g=ae.decryptPrivateKey(new a.Password(l),k.encrypted,k.iv),M;if(x&&u.length>0)try{const c=await n.chainAPI.accountAPI.getAccountInfo(a.Address.createFromRawAddress(o));M=a.EncryptedMessage.create(u,c.publicAccount,g)}catch{M=a.EncryptedMessage.create(u,a.PublicAccount.createFromPublicKey(R,n.networkType),g)}else M=a.PlainMessage.create(u);let S=v.transferBuilder().recipient(a.Address.createFromRawAddress(o)).mosaics(w).message(M).build();const p=a.Account.createFromPrivateKey(g,b,1);if(m){let c=K.currentLoggedInWallet.accounts.find(Q=>Q.address==i),L=ae.decryptPrivateKey(new a.Password(l),c.encrypted,c.iv),q=a.Account.createFromPrivateKey(L,b,1);const ne=[S.toAggregateV1(y)],W=await n.chainAPI.nodeAPI.getNodeTime(),oe=v.aggregateBonded(ne,new a.UInt64(W.sendTimeStamp)),z=q.preV2Sign(oe,C),G=D.lockFundTx(z),re=q.preV2Sign(G,C);D.announceLF_AND_addAutoAnnounceABT(re,z)}else{const c=p.preV2Sign(S,C);D.announceTransaction(c)}return!0};Z.calculateAggregateFee=(o,r,u,d)=>{let l=n.buildTxn,i=$e(r,u),x=[l.transferBuilder().recipient(a.Address.createFromRawAddress(Pe)).mosaics(i).message(d&&o.length>0?a.EncryptedMessage.create(o,a.PublicAccount.createFromPublicKey("0".repeat(64),n.networkType),"0".repeat(64)):a.PlainMessage.create(o)).build().toAggregateV1(a.PublicAccount.createFromPublicKey(Me,n.networkType))];return l.aggregateBondedBuilder().innerTransactions(x).build().maxFee.compact()/Math.pow(10,n.nativeToken.divisibility)};Z.calculateFee=(o,r,u,d)=>{let l=n.buildTxn,i=$e(r,u);return l.transferBuilder().recipient(a.Address.createFromRawAddress(Pe)).mosaics(i).message(d&&o.length>0?a.EncryptedMessage.create(o,a.PublicAccount.createFromPublicKey("0".repeat(64),n.networkType),"0".repeat(64)):a.PlainMessage.create(o)).build().maxFee.compact()/Math.pow(10,n.nativeToken.divisibility)};const Lt={name:"ConfirmSendModal",props:["toggleModal"],setup(){const r=Te().appContext.config.globalProperties.emitter;return{closeConfirmModal:()=>{r.emit("CLOSE_CONFIRM_SEND_MODAL",!1)},proceedSend:()=>{r.emit("CONFIRM_PROCEED_SEND",!0)}}}},Rt={key:0,class:"popup-outer fixed flex z-50"},Kt={class:"modal-popup-box"},Ot={class:"delete-position"},Dt={class:"w-92"},qt={class:"text-center"},Wt={class:"mt-3"};function zt(o,r,u,d,l,i){const m=ee("font-awesome-icon");return A(),T("div",null,[$(De,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:se(()=>[u.toggleModal?(A(),T("div",Rt,[s("div",Kt,[s("div",Ot,[$(m,{icon:"times",class:"delete-icon-style",onClick:r[0]||(r[0]=x=>{d.closeConfirmModal()})})]),s("div",Dt,[s("div",qt,_(o.$t("transfer.proceedWithZero")),1),s("div",Wt,[s("div",{onClick:r[1]||(r[1]=x=>d.proceedSend()),class:"blue-btn py-2 font-semibold cursor-pointer text-center ml-auto mr-auto w-7/12"},_(o.$t("general.confirm")),1),s("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:r[2]||(r[2]=x=>d.closeConfirmModal())},_(o.$t("general.cancel")),1)])])])])):U("",!0)]),_:1}),u.toggleModal?(A(),T("div",{key:0,onClick:r[3]||(r[3]=x=>{d.closeConfirmModal()}),class:"fixed inset-0 bg-opacity-90 bg-gray-100 z-20"})):U("",!0)])}const Ht=Ae(Lt,[["render",zt]]),jt={class:"w-10/12 ml-auto mr-auto mt-5"},Xt={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},Zt={class:"xl:col-span-2 p-12"},Gt={key:0,class:"mb-3 rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},Qt={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},Jt={class:"inline-block text-xs"},Yt={class:"text-sm font-semibold"},ea={class:"flex gap-1 mt-3 items-center"},ta={key:1,class:"mt-3"},aa=s("div",{class:"text-blue-primary font-semibold uppercase mt-3 text-xxs"},"Transfer to",-1),sa={class:"flex mt-1 gap-1"},la={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},na={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},oa={key:3,class:"h-3"},ra={key:4,class:"mb-5"},ia={for:"encryptedMsg",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},ca={class:"bg-navy-primary py-6 px-6 xl:col-span-1"},ua={class:"font-semibold text-xs text-white mb-1.5"},da=["disabled"],ma={class:"text-center"},va="^[0-9A-Za-z]{40}$",pa="^[0-9A-Za-z-]{46}$",fa="^[^ ]{8,}$",Ia=le({__name:"ViewTransfer",setup(o){const r=Te(),{t:u}=qe(),d=r.appContext.config.globalProperties.emitter,l=P(null),i=P(null),m=P(null),x=P(!1),R=P(!1),V=P(""),C=P(!1),b=P(!1),f=P(""),w=P(!0),v=P(!0),k=P([]),y=P([]),g=P("0"),M=P(0),S=P(""),p=P(""),c=P(0),L=E(()=>!(f.value.match(fa)&&!w.value&&!ne.value&&W.value<=oe.value&&q.value)),q=E(()=>!(b.value&&C.value&&W.value>0&&v.value));Y(y,e=>{for(let t=0;t<e.length;t++)isNaN(parseFloat(e[t].amount))&&(e[t].amount="0")},{deep:!0}),Y(g,e=>{isNaN(parseFloat(e))&&(g.value="0")});const ne=E(()=>m.value?l.value?parseFloat(g.value)>M.value||!y.value.every(e=>parseFloat(e.amount)<=e.balance)?!0:Q.value>c.value:Q.value>M.value||!y.value.every(e=>parseFloat(e.amount)<=e.balance):!1),W=E(()=>p.value.length==0?0:C.value?D.getFakeEncryptedMessageSize(p.value):D.getPlainMessageSize(p.value)),oe=E(()=>{var e;return((e=X)==null?void 0:e.currentNetworkProfileConfig.maxMessageSize)-1}),z=E(()=>{var e;return O.convertToExact((e=X)==null?void 0:e.currentNetworkProfileConfig.lockedFundsPerAggregate,n.nativeToken.divisibility)}),G=E(()=>X.currentNetworkProfile?O.convertToExact(D.getLockFundFee(),n.nativeToken.divisibility):0),re=E(()=>{if(!m.value)return 0;let e=n.nativeToken.divisibility;return l.value?O.convertNumberMinimumFormat(M.value,e):O.convertNumberMinimumFormat(M.value-H.value,e)}),Q=E(()=>{let e=n.nativeToken.divisibility;return l.value?e==0?Math.trunc(H.value+G.value+z.value):Math.round((H.value+G.value+z.value)*Math.pow(10,e))/Math.pow(10,e):e==0?Math.trunc(parseFloat(g.value.replace(/,/g,""))+H.value):Math.round((parseFloat(g.value.replace(/,/g,""))+H.value)*Math.pow(10,e))/Math.pow(10,e)}),H=E(()=>{const e=y.value.map(t=>({id:t.id,amount:t.amount}));return e.push({id:n.nativeToken.assetId,amount:g.value}),l.value?Z.calculateAggregateFee(p.value,g.value,e,C.value):m.value?Z.calculateFee(p.value,g.value,e,C.value):0}),Fe=()=>{g.value=re.value.toString(),g.value=re.value.toString()},ve=()=>{m.value=null,f.value="",V.value="",C.value=!1,p.value="",g.value="0",d.emit("CLEAR_SELECT",0),y.value=[],l.value=null,S.value=""},pe=We(),fe=ze(),Ve=async()=>{if(!await Z.createTransaction(V.value,g.value,p.value,y.value.map(t=>({id:t.id,amount:parseFloat(t.amount),divisibility:t.divisibility})),f.value,m.value,l.value,C.value,S.value)){pe.add({severity:"error",summary:"Error",detail:"Password is incorrect",group:"br-custom",life:1e3});return}fe.push({name:"ViewAccountPendingTransactions",params:{address:m.value}}),ve()},Ce=async()=>{if(ae.verifyWalletPassword(K.currentLoggedInWallet.name,X.chainNetworkName,f.value)){let t=parseFloat(g.value)*Math.pow(10,n.nativeToken.divisibility),h=[],F=y.value.map(N=>({id:N.id,amount:parseFloat(N.amount),divisibility:N.divisibility}));t>0&&h.push(new a.Mosaic(new a.MosaicId(n.nativeToken.assetId),a.UInt64.fromUint(Number(t)))),F.length>0&&F.forEach(N=>{N.amount>0&&h.push(new a.Mosaic(new a.MosaicId(N.id),a.UInt64.fromUint(Number(N.amount*Math.pow(10,N.divisibility)))))});let j=n.buildTxn,J=K.currentLoggedInWallet.accounts.find(N=>N.address===m.value),I=ae.decryptPrivateKey(new a.Password(f.value),J.encrypted,J.iv),B;if(C.value&&p.value.length>0)try{const N=await n.chainAPI.accountAPI.getAccountInfo(a.Address.createFromRawAddress(V.value));B=a.EncryptedMessage.create(p.value,N.publicAccount,I)}catch{B=a.EncryptedMessage.create(p.value,a.PublicAccount.createFromPublicKey(S.value,n.networkType),I)}else B=a.PlainMessage.create(p.value);let ie=j.transferBuilder().recipient(a.Address.createFromRawAddress(V.value)).mosaics(h).message(B).build();const de=await n.chainAPI.nodeAPI.getNodeTime();let ye=D.signTxnWithPassword(m.value,l.value,f.value,ie,void 0,new a.UInt64(de.sendTimeStamp));me.lockHashPayload=ye.hashLockTxnPayload,me.transactionPayload=ye.txnPayload,me.selectedAddress=m.value,fe.push({name:"ViewConfirmTransaction"}),ve()}else{pe.add({severity:"error",summary:"Error",detail:"Password is incorrect",group:"br-custom",life:1e3});return}},Se=async()=>{if(n.chainAPI)try{const e=await n.chainAPI.accountAPI.getAccountInfo(a.Address.createFromRawAddress(m.value)),t=e.mosaics.findIndex(h=>h.id.toHex()==n.nativeToken.assetId);t!=-1?(c.value=e.mosaics[t].amount.compact()/Math.pow(10,n.nativeToken.divisibility),e.mosaics.splice(t,1)):c.value=0}catch{c.value=0}},ue=async e=>{if(n.chainAPI&&e){k.value=[];try{const t=await n.chainAPI.accountAPI.getAccountInfo(a.Address.createFromRawAddress(e)),h=t.mosaics.findIndex(F=>F.id.toHex()==n.nativeToken.assetId);h!=-1?(M.value=t.mosaics[h].amount.compact()/Math.pow(10,n.nativeToken.divisibility),t.mosaics.splice(h,1)):M.value=0;for(let F=0;F<t.mosaics.length;F++){const j=t.mosaics[F];k.value.push({id:j.id.toHex(),balance:j.amount.compact(),divisibility:0,namespace:"",hasUpdated:!1})}}catch{k.value=[],M.value=0}}};Y(m,async(e,t)=>{k.value=[],y.value=[],e==null?(M.value=0,i.value=null,l.value=null):e!=t&&(i.value=null,l.value=null,await ue(e))}),Y(l,async(e,t)=>{k.value=[],y.value=[],e==null&&(c.value=0,i.value=null,l.value=null,await ue(m.value)),e!=t&&(await Se(),await ue(e))}),d.on("select-account",e=>{m.value=e}),d.on("select-multisig-account",e=>{i.value=e.label,l.value=e.value}),d.on("CLOSE_MULTISIG",()=>{i.value=null,l.value=null}),d.on("CLOSE_CONFIRM_SEND_MODAL",e=>{R.value=e}),d.on("CONFIRM_PROCEED_SEND",e=>{e&&(R.value=!1,Ve())});const Ne=e=>{x.value=!1,V.value=e.data},Ee=E(()=>{const e=K.currentLoggedInWallet;if(!e)return[];const t=[...e.accounts,...e.others];return e.contacts.length?[{key:"0",label:u("general.ownerAcc"),selectable:!1,children:t.map((h,F)=>({key:"0-"+F.toString(),label:h.name,data:a.Address.createFromRawAddress(h.address).pretty(),selectable:!0}))},{key:"1",label:u("general.contact"),selectable:!1,children:e.contacts.map((h,F)=>({key:"1-"+F.toString(),label:h.name,data:a.Address.createFromRawAddress(h.address).pretty(),selectable:!0}))}]:[{key:"0",label:u("general.ownerAcc"),selectable:!1,children:t.map((h,F)=>({key:"0-"+F.toString(),label:h.name,data:a.Address.createFromRawAddress(h.address).pretty(),selectable:!0}))}]});Y([V,w],e=>{if(e[0].match(pa)||e[0].match(va)){if(!e[1]){Be();return}ge()}else w.value=!0});const Be=()=>{n.chainAPI.accountAPI.getAccountInfo(a.Address.createFromRawAddress(V.value)).then(e=>{b.value=e.publicKey=="0".repeat(64)}).catch(e=>b.value=!0)},Ue=()=>{try{a.PublicAccount.createFromPublicKey(S.value,n.networkType).address.plain()==a.Address.createFromRawAddress(V.value).plain()&&(v.value=!1)}catch{v.value=!0}},ge=()=>{if(K.currentLoggedInWallet)try{let e=O.createAddress(V.value);O.checkAddressNetwork(e,n.networkType)?w.value=!1:w.value=!0}catch{try{let t=O.createNamespaceId(V.value);n.chainAPI.namespaceAPI.getLinkedAddress(t).then(h=>{V.value=h.plain(),w.value=!1}).catch(h=>{w.value=!0})}catch{w.value=!0}}};return(e,t)=>{const h=ee("Sidebar"),F=ee("font-awesome-icon"),j=ee("router-link"),J=xe("debounce");return A(),T("div",null,[$(h,{visible:x.value,"onUpdate:visible":t[0]||(t[0]=I=>x.value=I),baseZIndex:1e4,position:"full"},{default:se(()=>[$(Je,{contacts:Ee.value,onNodeSelect:Ne},null,8,["contacts"])]),_:1},8,["visible"]),$(Ht,{toggleModal:R.value},null,8,["toggleModal"]),s("div",jt,[s("div",Xt,[s("div",Zt,[ne.value?(A(),T("div",Gt,[s("div",Qt,[$(F,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),s("div",Jt,_(e.$t("general.insufficientBalance")),1)])):U("",!0),s("div",Yt,_(e.$t("transfer.newTransfer")),1),s("div",ea,[$(Xe,{type:"transfer"}),$(Ze,{"selected-address":m.value},null,8,["selected-address"])]),l.value?(A(),T("div",ta,[$(Ge,{"select-default-address":l.value,"select-default-name":i.value,type:"transfer"},null,8,["select-default-address","select-default-name"])])):U("",!0),aa,s("div",sa,[te($(_e,{placeholder:e.$t("transfer.transferPlaceholder"),modelValue:V.value,"onUpdate:modelValue":t[1]||(t[1]=I=>V.value=I),showError:w.value},null,8,["placeholder","modelValue","showError"]),[[J,ge,"1000"]]),s("div",{onClick:t[2]||(t[2]=I=>x.value=!x.value),class:"border rounded-md cursor-pointer flex flex-col justify-center p-1.5"},[$(F,{icon:"id-card-alt",class:"text-blue-primary ml-auto mr-auto"}),s("div",la,_(e.$t("general.select")),1),s("div",na,_(e.$t("general.contact")),1)])]),(A(!0),T(Ie,null,He(y.value,(I,B)=>{var ie;return A(),T("div",{key:B},[$(vt,{class:"mt-3","asset-options":k.value,index:B,"selected-assets":y.value},null,8,["asset-options","index","selected-assets"]),((ie=y.value[B].id)==null?void 0:ie.length)==16?(A(),be(he,{key:0,class:"mt-3",modelValue:y.value[B].amount,"onUpdate:modelValue":de=>y.value[B].amount=de,placeholder:e.$t("transfer.assetAmount"),type:"text",decimal:y.value[B].divisibility},null,8,["modelValue","onUpdate:modelValue","placeholder","decimal"])):U("",!0)])}),128)),y.value.length!=k.value.length?(A(),T("button",{key:2,class:"my-2 font-semibold text-xs text-blue-primary outline-none focus:outline-none disabled:opacity-50",onClick:t[3]||(t[3]=I=>y.value.push({id:null,balance:0,amount:"0",namespace:"",divisibility:0}))}," + "+_(e.$t("transfer.addAssets")),1)):(A(),T("div",oa)),$(he,{modelValue:g.value,"onUpdate:modelValue":t[4]||(t[4]=I=>g.value=I),balance:M.value,placeholder:e.$t("transfer.transferAmount"),logo:!0,type:"text",onClickedMaxAvailable:t[5]||(t[5]=I=>Fe()),decimal:6},null,8,["modelValue","balance","placeholder"]),$(Mt,{modelValue:p.value,"onUpdate:modelValue":t[6]||(t[6]=I=>p.value=I),limit:oe.value,placeholder:e.$t("general.message"),"current-bytes":W.value},null,8,["modelValue","limit","placeholder","current-bytes"]),w.value?U("",!0):(A(),T("div",ra,[te(s("input",{id:"encryptedMsg",type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=I=>C.value=I)},null,512),[[je,C.value]]),s("label",ia,_(e.$t("transfer.enableEncryption")),1)])),!w.value&&b.value&&C.value&&W.value>0?te((A(),be(_e,{key:5,placeholder:"Recipient Public Key",modelValue:S.value,"onUpdate:modelValue":t[8]||(t[8]=I=>S.value=I),showError:v.value},null,8,["modelValue","showError"])),[[J,Ue,"1000"]]):U("",!0)]),s("div",ca,[$(Qe,{"signer-native-token-balance":c.value,"native-amount":g.value,"native-token-balance":M.value,"lock-fund":z.value,"lock-fund-tx-fee":G.value,"selected-multisig-address":l.value,"txn-fee":H.value,"total-fee":Q.value,"selected-assets":y.value},null,8,["signer-native-token-balance","native-amount","native-token-balance","lock-fund","lock-fund-tx-fee","selected-multisig-address","txn-fee","total-fee","selected-assets"]),s("div",ua,_(e.$t("general.enterPasswordContinue")),1),$(et,{placeholder:e.$t("general.enterPassword"),errorMessage:e.$t("general.passwordRequired"),modelValue:f.value,"onUpdate:modelValue":t[9]||(t[9]=I=>f.value=I),icon:"lock",class:"mt-5 mb-3"},null,8,["placeholder","errorMessage","modelValue"]),s("button",{type:"submit",class:"w-full blue-btn px-3 py-3 disabled:opacity-50 disabled:cursor-auto",disabled:L.value,onClick:t[10]||(t[10]=I=>Ce())},_(e.$t("general.transfer")),9,da),s("div",ma,[$(j,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white underline"},{default:se(()=>[ke(_(e.$t("general.cancel")),1)]),_:1})])])])])])}}});export{Ia as default};
