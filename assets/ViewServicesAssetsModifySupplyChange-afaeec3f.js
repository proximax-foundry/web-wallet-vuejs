import{_ as ue,o as n,b as r,e,t as l,f as T,a6 as xe,u as ke,l as Se,A as we,c as o,B as b,r as g,n as I,H as y,R as Te,w as $,aj as H,D as Ce,an as j,a as k,b5 as de,i as D,S as Me,m as S,x as w,P as E,ab as Fe,F as Ae,g as Ne,v as Le,z as W}from"./index-63d33769.js";import{_ as Ie}from"./PasswordInput.vue_vue_type_script_setup_true_lang-739fdc90.js";import{S as Ve}from"./SupplyInputClean-72b0cb82.js";import{_ as Be}from"./TransactionFeeDisplay.vue_vue_type_script_setup_true_lang-d6784f3b.js";import{A as ee}from"./assetsUtils-de55705d.js";import{t as De}from"./jdenticon-module-ba46c3b9.js";import{M as Ee}from"./multisigUtils-8fba2426.js";import{T as R}from"./transactionState-3f56cc59.js";import{_ as Pe}from"./icon-asset-2a9ae6ea.js";import{_ as z}from"./icon-info-8b4f1351.js";import"./proximax-logo-ecfc3767.js";const Ue={props:{placeholder:String,errorMessage:String,showError:Boolean,modelValue:String,title:String,disabled:Boolean},emits:["update:modelValue"],name:"SelectModificationType",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},watch:{showError:function(s){s?(this.borderColor="border-2 border-red-primary",this.textErr=!0):(this.borderColor="border-2 border-gray-300",this.textErr=!1)}}},He={class:"border border-gray-200 px-2 py-1 h-14 rounded-md"},je={class:"uppercase text-gray-500 text-txs text-left mb-2"},We={class:"flex items-center"},Re=["value","disabled","checked"],ze={for:"increase",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},qe=["value","disabled","checked"],Oe={for:"decrease",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},Ye={class:"h-3 mb-2"},Ze={key:0,class:"error error-text text-left"};function Ge(s,i,v,t,f,q){return n(),r("div",null,[e("div",He,[e("div",je,l(v.title),1),e("div",We,[e("input",{id:"increase",type:"radio",name:"modificationType",value:v.modelValue,disabled:v.disabled,class:"h-5 w-5",onChange:i[0]||(i[0]=p=>s.$emit("update:modelValue","increase")),checked:v.modelValue=="increase"},null,40,Re),e("label",ze,l(s.$t("general.increase")),1),e("input",{id:"decrease",type:"radio",name:"modificationType",value:v.modelValue,disabled:v.disabled,class:"h-5 w-5",onChange:i[1]||(i[1]=p=>s.$emit("update:modelValue","decrease")),checked:v.modelValue=="decrease"},null,40,qe),e("label",Oe,l(s.$t("general.decrease")),1)])]),e("div",Ye,[f.textErr||v.showError?(n(),r("div",Ze,l(v.errorMessage),1)):T("",!0)])])}const Je=ue(Ue,[["render",Ge]]),Qe={name:"ViewServicesAssetsModifySupplyChange",directives:{tooltip:xe},components:{PasswordInput:Ie,SupplyInputClean:Ve,SelectModificationType:Je,TransactionFeeDisplay:Be},props:{assetId:String,address:String},setup(s){ke();const i=Se();we();let v=9e14;const t=o(()=>b.nativeToken.label),f=g(!1),q=g(""),p=g(!1),C=g(!1),M=g(!1),O=g(!1),Y=g(!1),m=g(""),c=o(()=>b.nativeToken.label),Z=o(()=>I.currentNetworkProfileConfig?y.convertToExact(I.currentNetworkProfileConfig.lockedFundsPerAggregate,b.nativeToken.divisibility):0),ve=o(()=>I.currentNetworkProfileConfig?y.convertToCurrency(I.currentNetworkProfileConfig.lockedFundsPerAggregate,b.nativeToken.divisibility):0),te=o(()=>I.currentNetworkProfile?y.convertToExact(Te.getLockFundFee(),b.nativeToken.divisibility):0),G=o(()=>Z.value+te.value),me=o(()=>!(h.value>0&&!f.value&&!X.value&!Q.value)),ge=o(()=>d.value?d.value.name:""),F=o(()=>d.value?d.value.address:""),se=o(()=>d.value?d.value.balance:0),ae=o(()=>{if(d.value)return y.toCurrencyFormat(d.value.balance,b.nativeToken.divisibility)}),h=g("0"),le=y.createAddress(s.address).plain();let d=o(()=>$.currentLoggedInWallet?$.currentLoggedInWallet.accounts.find(a=>a.address==le)||$.currentLoggedInWallet.others.find(a=>a.address==le):null);const fe=g(H(F.value));let oe=new Ce("ThemeStyleConfig");oe.init();const be=g(De(s.address,40,oe.jdenticonConfig)),A=g("increase");let J=9e14;const u=o(()=>d.value?d.value.assets.find(a=>a.idHex===s.assetId):null),V=o(()=>u.value?u.value.amount:0),ie=o(()=>u.value?u.value.idHex:""),pe=o(()=>u.value?u.value.transferable:!1),ne=o(()=>u.value?u.value.supplyMutable:!1),P=o(()=>u.value?u.value.divisibility:0),x=o(()=>u.value?u.value.supply/Math.pow(10,u.value.divisibility):0),_=o(()=>{if(!d.value)return{hasCosigner:!1,cosignerList:[]};if(I.currentNetworkProfileConfig){let a=Ee.getCosignerInWallet(d.value?d.value.publicKey:""),U=[];return a.cosignerList.forEach(L=>{U.push({publicKey:L,name:j(L).name,balance:j(L).balance,address:j(L).address})}),a.cosignerList=U,{hasCosigner:a.hasCosigner,cosignerList:a.cosignerList}}else return{hasCosigner:!1,cosignerList:[]}});m.value=_.value.cosignerList.length>0?_.value.cosignerList[0].address:"",k(_,a=>{a.cosignerList.length>0&&(m.value=a.cosignerList.length>0?_.value.cosignerList[0].address:"")});const Q=o(()=>_.value.cosignerList.length==0&&H(F.value)),re=o(()=>{let a=de(m.value)?de(m.value).balance:0;return y.toCurrencyFormat(a)}),X=o(()=>m.value.length<=0?se.value<B.value:Number(re.value)<B.value+G.value),K=o(()=>_.value.cosignerList.length>0?_.value.cosignerList.length>1?m.value:j(_.value.cosignerList[0].publicKey).address:""),ye=o(()=>b.isReady?y.convertToCurrency(ee.getMosaicSupplyChangeTransactionFee(s.assetId,A.value,parseFloat(h.value),P.value),b.nativeToken.divisibility):"0"),B=o(()=>b.isReady?y.convertToExact(ee.getMosaicSupplyChangeTransactionFee(s.assetId,A.value,parseFloat(h.value),P.value),b.nativeToken.divisibility):0);k(ne,a=>{a?(M.value=!1,C.value=!1,p.value=!1):(M.value=!0,C.value=!0,p.value=!0)},{immediate:!0});const he=()=>{const a=b.buildTxn;let U=A.value=="increase"?W.MosaicSupplyType.Increase:W.MosaicSupplyType.Decrease,L=a.buildMosaicSupplyChange(new W.MosaicId(ie.value),U,W.UInt64.fromUint(ee.addZeros(P.value,Number(h.value))));K.value?(R.selectedAddress=K.value,R.selectedMultisigAddress=F.value):R.selectedAddress=F.value,R.unsignedTransactionPayload=L.serialize(),i.push({name:"ViewConfirmTransaction"})};k(A,a=>{a=="increase"?f.value=parseFloat(h.value)>J-x.value:x.value==V.value?f.value=parseFloat(h.value)>x.value-1:f.value=parseFloat(h.value)>V.value-1}),k(h,a=>{A.value=="increase"?f.value=parseFloat(a)>J-x.value:x.value==V.value?f.value=parseFloat(a)>x.value-1:f.value=parseFloat(a)>V.value-1});const ce=o(()=>H(F.value)?parseFloat(G.value)+B.value:B.value),_e=o(()=>y.amountFormatterSimple(ce.value,0)),N=a=>{p.value=a,C.value=a,M.value=a};return k(ce,a=>{ae.value<a?N(!0):N(!1)}),k(X,a=>{N(!!a)}),k(Q,a=>{N(!!a)}),{currentNativeTokenName:t,selectedAccName:ge,selectedAccAdd:F,balance:ae,balanceNumber:se,showNoBalance:X,lockFundTxFee:te,lockFundCurrency:ve,lockFundTotalFee:G,totalFeeFormatted:_e,showSupplyErr:f,err:q,disableModify:me,showPasswdError:O,supply:h,disabledPassword:p,disabledSupply:C,currencyName:c,isMultiSig:H,isMultiSigBool:fe,selectAsset:ie,selectIncreaseDecrease:A,modifyAsset:he,transactionFee:ye,transactionFeeExact:B,assetSupply:x,assetAmount:V,assetDivisibility:P,assetTransferable:pe,assetMutable:ne,getMultiSigCosigner:_,cosignerBalanceInsufficient:Y,cosignerAddress:m,cosigner:K,isNotCosigner:Q,disabledSelectIncreaseDecrease:M,Helper:y,svgString:be,maxAmount:v,maxAssetSupply:J,checkCosignBalance:re}}},Xe={class:"w-10/12 ml-auto mr-auto"},Ke={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},$e={class:"xl:col-span-2 p-6 lg:p-12"},et={class:"lg:flex lg:justify-between lg:items-center"},tt={class:"font-semibold mb-4 inline-block mt-1"},st={class:"flex items-center"},at=["innerHTML"],lt={class:"ml-2"},ot={class:"text-blue-primary text-xxs font-bold uppercase mb-1"},it={class:"font-bold text-black text-sm"},nt={key:0,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},rt={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},ct=e("div",{class:"inline-block text-xs"},"Asset is immutable",-1),dt={key:1,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},ut={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},vt={class:"inline-block text-xs"},mt={key:2,class:"rounded-md bg-yellow-200 w-full p-2 flex items-center justify-center"},gt={class:"rounded-full w-5 h-5 bg-yellow-100 inline-block relative mr-2"},ft={class:"inline-block text-xs"},bt={key:3,class:"error error_box"},pt={class:"text-right w-full"},yt={key:0,class:"inline-block"},ht={class:"text-tsm text-left mt-3"},_t={key:0,class:"font-bold"},xt={key:0,class:"error"},kt={key:1,class:"font-bold"},St=["value"],wt={key:2,class:"error"},Tt={class:"border border-blue-primary p-4 bg-blue-100 flex items-center rounded mt-5"},Ct=e("img",{src:Pe},null,-1),Mt={class:"ml-1"},Ft={class:"uppercase text-blue-primary font-semibold text-xxs"},At={class:"text-black text-sm font-bold"},Nt={class:"border border-gray-200 p-4 rounded mt-5"},Lt={class:"lg:grid lg:grid-cols-2"},It={class:"my-3"},Vt={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Bt={src:z,class:"inline-block ml-2 relative",style:{top:"-1px"}},Dt={class:"text-black font-bold text-sm"},Et={class:"my-3"},Pt={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Ut={src:z,class:"inline-block ml-2 relative",style:{top:"-1px"}},Ht={class:"text-black font-bold text-sm"},jt={class:"my-3"},Wt={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Rt={src:z,class:"inline-block ml-2 relative",style:{top:"-1px"}},zt={class:"uppercase text-black font-bold text-sm"},qt={class:"my-3"},Ot={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Yt={src:z,class:"inline-block ml-2 relative",style:{top:"-1px"}},Zt={class:"uppercase text-black font-bold text-sm"},Gt={class:"lg:grid lg:grid-cols-2 mt-5"},Jt={class:"bg-navy-primary py-6 px-12 xl:col-span-1"},Qt=["disabled"],Xt={class:"text-center"};function Kt(s,i,v,t,f,q){const p=D("font-awesome-icon"),C=D("SelectModificationType"),M=D("SupplyInputClean"),O=D("TransactionFeeDisplay"),Y=D("router-link"),m=Me("tooltip");return n(),r("div",null,[e("div",Xe,[e("div",Ke,[e("div",$e,[e("div",et,[e("div",tt,l(s.$t("asset.modifyAssetSupply")),1),e("div",st,[e("div",{innerHTML:t.svgString,class:"inline-block"},null,8,at),e("div",lt,[e("div",ot,l(s.$t("asset.assetCreatedBy")),1),e("div",it,l(t.selectedAccName),1)])])]),t.assetMutable?T("",!0):(n(),r("div",nt,[e("div",rt,[S(p,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),ct])),t.showNoBalance?(n(),r("div",dt,[e("div",ut,[S(p,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),e("div",vt,l(s.$t("general.insufficientBalance")),1)])):t.isNotCosigner?(n(),r("div",mt,[e("div",gt,[S(p,{icon:"exclamation",class:"text-yellow-500 h-3 w-3 absolute",style:{top:"5px",left:"7px"}})]),e("div",ft,l(s.$t("general.noCosigner")),1)])):T("",!0),t.err!=""?(n(),r("div",bt,l(t.err),1)):T("",!0),e("div",pt,[t.getMultiSigCosigner.cosignerList.length>0?(n(),r("div",yt,[e("div",ht,[w(l(s.$t("general.initiateBy"))+": ",1),t.getMultiSigCosigner.cosignerList.length==1?(n(),r("span",_t,[w(l(t.getMultiSigCosigner.cosignerList[0].name)+" ("+l(s.$t("general.balance"))+": "+l(t.Helper.amountFormatterSimple(t.getMultiSigCosigner.cosignerList[0].balance,0))+" "+l(t.currentNativeTokenName)+") ",1),t.getMultiSigCosigner.cosignerList[0].balance<t.lockFundTotalFee?(n(),r("span",xt,"- "+l(s.$t("general.insufficientBalance")),1)):T("",!0)])):(n(),r("span",kt,[E(e("select",{"onUpdate:modelValue":i[0]||(i[0]=c=>t.cosignerAddress=c)},[(n(!0),r(Ae,null,Ne(t.getMultiSigCosigner.cosignerList,(c,Z)=>(n(),r("option",{value:c.address,key:Z},l(c.name)+" ("+l(s.$t("general.balance"))+": "+l(c.balance)+" "+l(t.currentNativeTokenName)+")",9,St))),128))],512),[[Fe,t.cosignerAddress]])])),t.cosignerBalanceInsufficient?(n(),r("div",wt,"- "+l(s.$t("general.insufficientBalance")),1)):T("",!0)])])):T("",!0)]),e("div",Tt,[Ct,e("div",Mt,[e("div",Ft,l(s.$t("general.assetId")),1),e("div",At,l(t.selectAsset),1)])]),e("div",Nt,[e("div",Lt,[e("div",It,[e("div",Vt,[w(l(s.$t("asset.currentSupply")),1),E(e("img",Bt,null,512),[[m,{value:"<tiptext>"+s.$t("asset.supplyMsg2")+"<br>"+s.$t("asset.supplyMsg3")+"</tiptext>",escape:!1},void 0,{bottom:!0}]])]),e("div",Dt,l(t.assetAmount),1)]),e("div",Et,[e("div",Pt,[w(l(s.$t("general.divisibility")),1),E(e("img",Ut,null,512),[[m,{value:"<tiptext>"+s.$t("asset.divisibilityMsg4")+"<br><br>"+s.$t("asset.divisibilityMsg2")+"<br>"+s.$t("asset.divisibilityMsg3")+"</tiptext>",escape:!1},void 0,{bottom:!0}]])]),e("div",Ht,l(t.assetDivisibility),1)]),e("div",jt,[e("div",Wt,[w(l(s.$t("general.transferable")),1),E(e("img",Rt,null,512),[[m,{value:"<tiptext>"+s.$t("asset.transferableMsg")+"</tiptext>",escape:!1},void 0,{bottom:!0}]])]),e("div",zt,l(t.assetTransferable?s.$t("general.yes"):s.$t("general.no")),1)]),e("div",qt,[e("div",Ot,[w(l(s.$t("general.supplyMutable")),1),E(e("img",Yt,null,512),[[m,{value:"<tiptext>"+s.$t("asset.supplyMutableMsg")+"</tiptext>",escape:!1},void 0,{bottom:!0}]])]),e("div",Zt,l(t.assetMutable?s.$t("general.yes"):s.$t("general.no")),1)])])]),e("div",Gt,[S(C,{title:s.$t("asset.modificationType"),class:"lg:mr-4",modelValue:t.selectIncreaseDecrease,"onUpdate:modelValue":i[1]||(i[1]=c=>t.selectIncreaseDecrease=c)},null,8,["title","modelValue"]),S(M,{disabled:t.showNoBalance||t.isNotCosigner,modelValue:t.supply,"onUpdate:modelValue":i[2]||(i[2]=c=>t.supply=c),balance:t.maxAssetSupply-t.assetSupply.value,placeholder:s.$t("asset.quantityOf",{value:t.selectIncreaseDecrease}),type:"text",icon:"coins",showError:t.showSupplyErr,errorMessage:t.selectIncreaseDecrease=="increase"?" The total asset supply should not exceed 900T":" You have exceeded the maximum value for decrease asset supply.",decimal:Number(t.assetDivisibility),class:"lg:ml-4"},null,8,["disabled","modelValue","balance","placeholder","showError","errorMessage","decimal"])])]),e("div",Jt,[S(O,{"transaction-fee":t.transactionFee,"total-fee-formatted":t.totalFeeFormatted,"get-multi-sig-cosigner":t.getMultiSigCosigner,"check-cosign-balance":t.checkCosignBalance,"lock-fund-currency":t.lockFundCurrency,"lock-fund-tx-fee":String(t.lockFundTxFee),balance:t.balance,"selected-acc-add":t.selectedAccAdd},null,8,["transaction-fee","total-fee-formatted","get-multi-sig-cosigner","check-cosign-balance","lock-fund-currency","lock-fund-tx-fee","balance","selected-acc-add"]),e("button",{type:"submit",class:"mt-3 w-full blue-btn py-4 disabled:opacity-50 disabled:cursor-auto text-white",disabled:t.disableModify,onClick:i[3]||(i[3]=(...c)=>t.modifyAsset&&t.modifyAsset(...c))},l(s.$t("asset.modifyAssetSupply")),9,Qt),e("div",Xt,[S(Y,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white border-b-2 border-white"},{default:Le(()=>[w(l(s.$t("general.cancel")),1)]),_:1})])])])])])}const ds=ue(Qe,[["render",Kt]]);export{ds as default};
