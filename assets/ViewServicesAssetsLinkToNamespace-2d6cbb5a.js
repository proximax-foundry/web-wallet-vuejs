import{_ as le,o,b as n,e as t,t as a,f as y,d as Ae,r,c as d,z as H,F as ye,g as ke,j as fe,h as Le,a5 as Fe,u as Me,l as $e,A as Ie,B as g,n as L,H as m,S as te,ai as se,b5 as he,w as F,D as Pe,am as q,a as B,i as W,M as Ve,m as M,x as $,O as U,aa as Ee,v as Be,W as We}from"./index-8a270fd9.js";import{_ as De}from"./PasswordInput.vue_vue_type_script_setup_true_lang-133d9fe7.js";import{A as I}from"./assetsUtils-c90d9267.js";import{_ as Ue}from"./delete-8b454e7f.js";import{_ as He}from"./TransactionFeeDisplay.vue_vue_type_script_setup_true_lang-e2d933f1.js";import{t as je}from"./jdenticon-module-e8bbf2b2.js";import{M as ze}from"./multisigUtils-7e8c1c9b.js";import{T as ae}from"./transactionState-74c0b1e9.js";import{_ as Re}from"./icon-asset-2a9ae6ea.js";import{_ as O}from"./icon-info-8b4f1351.js";import"./proximax-logo-ecfc3767.js";const qe={props:{placeholder:String,errorMessage:String,showError:Boolean,modelValue:String,title:String,disabled:Boolean},emits:["update:modelValue"],name:"SelectLinkType",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},watch:{showError:function(e){e?(this.borderColor="border-2 border-red-primary",this.textErr=!0):(this.borderColor="border-2 border-gray-300",this.textErr=!1)}}},Oe={class:"border border-gray-200 px-2 py-1 h-14 rounded-md"},Ge={class:"uppercase text-gray-500 text-txs text-left mb-2"},Je={class:"flex items-center"},Qe=["value","disabled","checked"],Xe={for:"link",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},Ye=["value","disabled","checked"],Ze={for:"unlink",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},Ke={class:"h-3 mb-2"},et={key:0,class:"error error-text text-left"};function tt(e,i,v,s,b,N){return o(),n("div",null,[t("div",Oe,[t("div",Ge,a(v.title),1),t("div",Je,[t("input",{id:"link",type:"radio",name:"linkType",value:v.modelValue,disabled:v.disabled,class:"h-5 w-5",onChange:i[0]||(i[0]=c=>e.$emit("update:modelValue","link")),checked:v.modelValue=="link"},null,40,Qe),t("label",Xe,a(e.$t("general.link")),1),t("input",{id:"unlink",type:"radio",name:"linkType",value:v.modelValue,disabled:v.disabled,class:"h-5 w-5",onChange:i[1]||(i[1]=c=>e.$emit("update:modelValue","unlink")),checked:v.modelValue=="unlink"},null,40,Ye),t("label",Ze,a(e.$t("general.unlink")),1)])]),t("div",Ke,[b.textErr||v.showError?(o(),n("div",et,a(v.errorMessage),1)):y("",!0)])])}const st=le(qe,[["render",tt]]),at=Ae({emits:["select-account","update:modelValue"],name:"SelectInputNamespace",props:["modelValue","action","address","assetId"],setup(e){const i=r(!1);Le().appContext.config.globalProperties.emitter;const s=r(""),b=c=>{s.value=c.value,i.value=!i.value},N=d(()=>I.listActiveNamespacesToLink(e.assetId,H.Address.createFromRawAddress(e.address).plain(),e.action));return{selectNamespace:b,namespaces:N,toggleSelection:i,selectedNamespace:s}}}),lt={class:"relative"},ot={class:"flex"},nt={class:"flex flex-col ml-2 text-left"},it={class:"text-blue-primary font-semibold text-xxs mb-1 uppercase",style:{"line-height":"9px"}},rt={key:0,class:"mt-1 text-tsm font-bold"},ct={key:1,class:"text-tsm font-bold"},dt={key:0,class:"text-xxs ml-auto cursor-pointer text-blue-primary font-semibold mt-auto mb-auto"},ut={key:1,class:"text-xxs ml-auto cursor-pointer text-blue-primary font-semibold mt-auto mb-auto"},mt={class:"relative"},vt={key:0,class:"absolute border border-t-0 w-full z-50 bg-white max-h-40 overflow-auto px-3 filter drop-shodow-xl"},gt={key:0,class:"pl-2 pt-4 text-xxs text-gray-400 uppercase"},pt={key:1,class:"text-xxs pt-2 pl-2 pb-2"},bt=["onClick"],ft={key:0,class:"cursor-pointer text-blue-primary text-xxs mt-0.5 ml-auto font-semibold uppercase"},ht={key:1,class:"text-gray-300 text-xxs mt-0.5 ml-auto uppercase"},yt={key:2,class:"text-gray-500 text-xxs mt-0.5 ml-auto uppercase"};function kt(e,i,v,s,b,N){return o(),n("div",lt,[t("div",{onClick:i[1]||(i[1]=c=>e.toggleSelection=!e.toggleSelection),class:"border ml-auto mr-auto py-3 px-2 cursor-pointer rounded-md w-full h-14"},[t("div",ot,[t("div",nt,[t("div",it,a(e.$t("general.namespace")),1),e.selectedNamespace!=""?(o(),n("div",rt,a(e.selectedNamespace),1)):(o(),n("div",ct,a(e.$t("namespace.selectNamespace")),1))]),!e.toggleSelection&&e.selectedNamespace==""?(o(),n("div",dt,a(e.$t("general.select")),1)):y("",!0),!e.toggleSelection&&e.selectedNamespace!=""?(o(),n("div",ut,a(e.$t("general.change")),1)):y("",!0),e.toggleSelection?(o(),n("img",{key:2,onClick:i[0]||(i[0]=c=>e.selectedNamespace=""),src:Ue,class:"h-5 w-5 ml-auto cursor-pointer text-blue-primary font-semibold mt-auto mb-auto"})):y("",!0)])]),t("div",mt,[e.toggleSelection?(o(),n("div",vt,[e.namespaces.length>0?(o(),n("div",gt,a(e.$t("namespace.selectNamespace")),1)):(o(),n("div",pt,a(e.$t("general.listEmpty")),1)),(o(!0),n(ye,null,ke(e.namespaces,(c,A)=>(o(),n("div",{key:A,class:fe(["px-2 py-3 flex items-center",[A!=e.namespaces.length-1?"border-b border-gray-200":"",c.disabled?"":"cursor-pointer"]]),onClick:j=>{e.selectNamespace(c),e.$emit("update:modelValue",e.selectedNamespace)}},[t("div",{class:fe(["text-xs truncate",c.disabled?"text-gray-300":"text-black font-semibold"])},a(c.label),3),c.label!=e.selectedNamespace&&!c.disabled?(o(),n("div",ft,a(e.$t("general.select")),1)):c.disabled?(o(),n("div",ht,a(e.$t("general.disabled")),1)):(o(),n("div",yt,a(e.$t("general.current")),1))],10,bt))),128))])):y("",!0)])])}const _t=le(at,[["render",kt]]),xt={name:"ViewServicesAssetsLinkToNamespace",directives:{tooltip:Fe},components:{PasswordInput:De,SelectLinkType:st,SelectInputNamespace:_t,TransactionFeeDisplay:He},props:{assetId:String,address:String},setup(e){const{t:i}=Me(),v=$e();Ie();const s=d(()=>g.nativeToken.label),b=r(""),N=r(""),c=r(!1),A=r(!1),j="^[^ ]{8,}$",G=r(!1),J=r(!1),k=r(""),P=d(()=>g.nativeToken.label),u=d(()=>L.currentNetworkProfileConfig?m.convertToExact(L.currentNetworkProfileConfig.lockedFundsPerAggregate,g.nativeToken.divisibility):0),Q=d(()=>L.currentNetworkProfileConfig?m.convertToCurrency(L.currentNetworkProfileConfig.lockedFundsPerAggregate,g.nativeToken.divisibility):0),oe=d(()=>L.currentNetworkProfile?m.convertToExact(te.getLockFundFee(),g.nativeToken.divisibility):0),X=d(()=>u.value+oe.value),_e=d(()=>!(b.value.match(j)&&z.value!="")),ne=r(""),p=r(m.createAddress(e.address).plain()),Y=r(""),Z=r(0),xe=r(se(p.value)),ie=d(()=>{let l=he(k.value)?he(k.value).balance:0;return m.toCurrencyFormat(l)}),re=d(()=>k.value.length<=0?Z.value<C.value:Number(ie.value)<C.value+X.value),ce=d(()=>_.value.cosignerList.length==0&&se(p.value)),V=r("0");let f=d(()=>F.currentLoggedInWallet?F.currentLoggedInWallet.accounts.find(l=>l.address==p.value)||F.currentLoggedInWallet.others.find(l=>l.address==p.value):null);f.value&&(ne.value=f.value.name,p.value=f.value.address,Y.value=m.toCurrencyFormat(f.value.balance,g.nativeToken.divisibility),Z.value=f.value.balance);let de=new Pe("ThemeStyleConfig");de.init();const we=r(je(e.address,40,de.jdenticonConfig)),h=r(""),w=r(0),ue=r(0),me=r(0),ve=r(!1),ge=r(!1),T=r("link"),z=r("");if(f.value){let l=f.value.assets.find(S=>S.idHex===e.assetId);l!=null&&(h.value=l.idHex,ve.value=l.transferable,ge.value=l.supplyMutable,w.value=l.divisibility,ue.value=m.convertToCurrency(l.supply,l.divisibility),me.value=l.amount)}const R=r("0.000000"),C=r(0),_=d(()=>{if(!f.value)return{hasCosigner:!1,cosignerList:[]};if(L.currentNetworkProfileConfig){let l=ze.getCosignerInWallet(f.value?f.value.publicKey:""),S=[];return l.cosignerList.forEach(x=>{S.push({publicKey:x,name:q(x).name,balance:q(x).balance,address:q(x).address})}),l.cosignerList=S,{hasCosigner:l.hasCosigner,cosignerList:l.cosignerList}}else return{hasCosigner:!1,cosignerList:[]}}),K=d(()=>_.value.cosignerList.length>0?_.value.cosignerList.length>1?k.value:q(_.value.cosignerList[0].publicKey).address:"");k.value=_.value.cosignerList.length>0?_.value.cosignerList[0].address:"",B(_,l=>{l.cosignerList.length>0&&(k.value=l.cosignerList.length>0?_.value.cosignerList[0].address:"")});try{R.value=m.convertToCurrency(I.getMosaicSupplyChangeTransactionFee(h.value,T.value,V.value,w.value),g.nativeToken.divisibility),C.value=m.convertToExact(I.getMosaicSupplyChangeTransactionFee(h.value,T.value,V.value,w.value),g.nativeToken.divisibility)}catch(l){console.log(l)}const Te=()=>{if(!We.verifyWalletPassword(F.currentLoggedInWallet.name,L.chainNetworkName,b.value)){N.value=i("general.walletPasswordInvalid",{name:F.currentLoggedInWallet.name});return}let S,x={};if(T.value=="link")S=h.value;else{let ee=F.currentLoggedInWallet.accounts.find(D=>D.address==p.value);ee||(ee=F.currentLoggedInWallet.others.find(D=>D.address==p.value)),S=ee.namespaces.find(D=>D.name===z.value).linkedId}const Se=g.buildTxn;let Ne=T.value=="link"?H.AliasActionType.Link:H.AliasActionType.Unlink;const be=Se.assetAlias(Ne,new H.NamespaceId(z.value),new H.MosaicId(S));K.value?x=te.signTxnWithPassword(K.value,p.value,b.value,be):x=te.signTxnWithPassword(p.value,null,b.value,be),ae.lockHashPayload=x.hashLockTxnPayload,ae.transactionPayload=x.txnPayload,ae.selectedAddress=p.value,v.push({name:"ViewConfirmTransaction"})};B(T,l=>{R.value=m.convertToCurrency(I.getMosaicSupplyChangeTransactionFee(h.value,l,V.value,w.value),g.nativeToken.divisibility),C.value=m.convertToExact(I.getMosaicSupplyChangeTransactionFee(h.value,l,V.value,w.value),g.nativeToken.divisibility)}),B(V,l=>{h.value&&(R.value=m.convertToCurrency(I.getMosaicSupplyChangeTransactionFee(h.value,T.value,l,w.value),g.nativeToken.divisibility),C.value=m.convertToExact(I.getMosaicSupplyChangeTransactionFee(h.value,T.value,l,w.value),g.nativeToken.divisibility))});const pe=d(()=>se(p.value)?parseFloat(X.value)+C.value:C.value),Ce=d(()=>m.amountFormatterSimple(pe.value,0)),E=l=>{c.value=l,A.value=l};return B(pe,l=>{Y.value<l?E(!0):E(!1)}),B(re,l=>{E(!!l)}),B(ce,l=>{E(!!l)}),{currentNativeTokenName:s,selectedAccName:ne,selectedAccAdd:p,balance:Y,balanceNumber:Z,showNoBalance:re,lockFundTxFee:oe,lockFundCurrency:Q,lockFundTotalFee:X,totalFeeFormatted:Ce,err:N,walletPassword:b,disableCreate:_e,showPasswdError:G,supply:V,disabledPassword:c,currencyName:P,isMultiSigBool:xe,selectAsset:h,selectAction:T,linkNamespace:Te,transactionFee:R,transactionFeeExact:C,assetSupply:ue,assetAmount:me,assetDivisibility:w,assetTransferable:ve,assetMutable:ge,selectNamespace:z,getMultiSigCosigner:_,cosignerBalanceInsufficient:J,cosignerAddress:k,cosigner:K,isNotCosigner:ce,disabledSelectAction:A,Helper:m,svgString:we,checkCosignBalance:ie}}},wt={class:"w-10/12 ml-auto mr-auto"},Tt={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},Ct={class:"xl:col-span-2 p-6 lg:p-12"},St={class:"lg:flex lg:justify-between lg:items-center"},Nt={class:"font-semibold mb-4 inline-block mt-1"},At={class:"flex items-center"},Lt=["innerHTML"],Ft={class:"ml-2"},Mt={class:"text-blue-primary text-xxs font-bold uppercase mb-1"},$t={class:"font-bold text-black text-sm"},It={key:0,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},Pt={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},Vt={class:"inline-block text-xs"},Et={key:1,class:"rounded-md bg-yellow-200 w-full p-2 flex items-center justify-center"},Bt={class:"rounded-full w-5 h-5 bg-yellow-100 inline-block relative mr-2"},Wt={class:"inline-block text-xs"},Dt={key:2,class:"error error_box"},Ut={class:"text-right w-full"},Ht={key:0,class:"inline-block"},jt={class:"text-tsm text-left mt-3"},zt={key:0,class:"font-bold"},Rt={key:0,class:"error"},qt={key:1,class:"font-bold"},Ot=["value"],Gt={key:2,class:"error"},Jt={class:"border border-blue-primary p-4 bg-blue-100 flex items-center rounded mt-5"},Qt=t("img",{src:Re},null,-1),Xt={class:"ml-1"},Yt={class:"uppercase text-blue-primary font-semibold text-xxs"},Zt={class:"text-black text-sm font-bold"},Kt={class:"border border-gray-200 p-4 rounded mt-5"},es={class:"lg:grid lg:grid-cols-2"},ts={class:"my-3"},ss={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},as={src:O,class:"inline-block ml-2 relative",style:{top:"-1px"}},ls={class:"text-black font-bold text-sm"},os={class:"my-3"},ns={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},is={src:O,class:"inline-block ml-2 relative",style:{top:"-1px"}},rs={class:"text-black font-bold text-sm"},cs={class:"my-3"},ds={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},us={src:O,class:"inline-block ml-2 relative",style:{top:"-1px"}},ms={class:"uppercase text-black font-bold text-sm"},vs={class:"my-3"},gs={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},ps={src:O,class:"inline-block ml-2 relative",style:{top:"-1px"}},bs={class:"uppercase text-black font-bold text-sm"},fs={class:"lg:grid lg:grid-cols-2 mt-5"},hs={class:"bg-navy-primary py-6 px-12 xl:col-span-1"},ys={class:"text-xs text-white mt-5 mb-1.5"},ks=["disabled"],_s={class:"text-center"};function xs(e,i,v,s,b,N){const c=W("font-awesome-icon"),A=W("SelectLinkType"),j=W("SelectInputNamespace"),G=W("TransactionFeeDisplay"),J=W("PasswordInput"),k=W("router-link"),P=Ve("tooltip");return o(),n("div",null,[t("div",wt,[t("div",Tt,[t("div",Ct,[t("div",St,[t("div",Nt,a(e.$t("general.linkToNamespace")),1),t("div",At,[t("div",{innerHTML:s.svgString,class:"inline-block"},null,8,Lt),t("div",Ft,[t("div",Mt,a(e.$t("asset.assetCreatedBy")),1),t("div",$t,a(s.selectedAccName),1)])])]),s.showNoBalance?(o(),n("div",It,[t("div",Pt,[M(c,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),t("div",Vt,a(e.$t("general.insufficientBalance")),1)])):s.isNotCosigner?(o(),n("div",Et,[t("div",Bt,[M(c,{icon:"exclamation",class:"text-yellow-500 h-3 w-3 absolute",style:{top:"5px",left:"7px"}})]),t("div",Wt,a(e.$t("general.noCosigner")),1)])):y("",!0),s.err!=""?(o(),n("div",Dt,a(s.err),1)):y("",!0),t("div",Ut,[s.getMultiSigCosigner.cosignerList.length>0?(o(),n("div",Ht,[t("div",jt,[$(a(e.$t("general.initiateBy"))+": ",1),s.getMultiSigCosigner.cosignerList.length==1?(o(),n("span",zt,[$(a(s.getMultiSigCosigner.cosignerList[0].name)+" ("+a(e.$t("general.balance"))+": "+a(s.Helper.amountFormatterSimple(s.getMultiSigCosigner.cosignerList[0].balance,0))+" "+a(s.currentNativeTokenName)+") ",1),s.getMultiSigCosigner.cosignerList[0].balance<s.lockFundTotalFee?(o(),n("span",Rt,"- "+a(e.$t("general.insufficientBalance")),1)):y("",!0)])):(o(),n("span",qt,[U(t("select",{"onUpdate:modelValue":i[0]||(i[0]=u=>s.cosignerAddress=u)},[(o(!0),n(ye,null,ke(s.getMultiSigCosigner.cosignerList,(u,Q)=>(o(),n("option",{value:u.address,key:Q},a(u.name)+" ("+a(e.$t("general.balance"))+": "+a(u.balance)+" "+a(s.currentNativeTokenName)+")",9,Ot))),128))],512),[[Ee,s.cosignerAddress]])])),s.cosignerBalanceInsufficient?(o(),n("div",Gt,"- "+a(e.$t("general.insufficientBalance")),1)):y("",!0)])])):y("",!0)]),t("div",Jt,[Qt,t("div",Xt,[t("div",Yt,a(e.$t("general.assetId")),1),t("div",Zt,a(s.selectAsset),1)])]),t("div",Kt,[t("div",es,[t("div",ts,[t("div",ss,[$(a(e.$t("asset.currentSupply")),1),U(t("img",as,null,512),[[P,{value:"<tiptext>"+e.$t("asset.supplyMsg2")+"<br>"+e.$t("asset.supplyMsg3")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),t("div",ls,a(s.assetAmount),1)]),t("div",os,[t("div",ns,[$(a(e.$t("general.divisibility")),1),U(t("img",is,null,512),[[P,{value:"<tiptext>"+e.$t("asset.divisibilityMsg4")+"<br><br>"+e.$t("asset.divisibilityMsg2")+"<br>"+e.$t("asset.divisibilityMsg3")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),t("div",rs,a(s.assetDivisibility),1)]),t("div",cs,[t("div",ds,[$(a(e.$t("general.transferable")),1),U(t("img",us,null,512),[[P,{value:"<tiptext>"+e.$t("asset.transferableMsg")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),t("div",ms,a(s.assetTransferable?e.$t("general.yes"):e.$t("general.no")),1)]),t("div",vs,[t("div",gs,[$(a(e.$t("general.supplyMutable")),1),U(t("img",ps,null,512),[[P,{value:"<tiptext>"+e.$t("asset.supplyMutableMsg")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),t("div",bs,a(s.assetMutable?e.$t("general.yes"):e.$t("general.no")),1)])])]),t("div",fs,[M(A,{title:e.$t("asset.modificationType"),class:"lg:mr-4",modelValue:s.selectAction,"onUpdate:modelValue":i[1]||(i[1]=u=>s.selectAction=u),disabled:s.disabledSelectAction},null,8,["title","modelValue","disabled"]),M(j,{action:s.selectAction,modelValue:s.selectNamespace,"onUpdate:modelValue":i[2]||(i[2]=u=>s.selectNamespace=u),address:s.selectedAccAdd,assetId:s.selectAsset},null,8,["action","modelValue","address","assetId"])])]),t("div",hs,[M(G,{"transaction-fee":s.transactionFee,"total-fee-formatted":s.totalFeeFormatted,"get-multi-sig-cosigner":s.getMultiSigCosigner,"check-cosign-balance":s.checkCosignBalance,"lock-fund-currency":s.lockFundCurrency,"lock-fund-tx-fee":String(s.lockFundTxFee),balance:s.balance,"selected-acc-add":s.selectedAccAdd},null,8,["transaction-fee","total-fee-formatted","get-multi-sig-cosigner","check-cosign-balance","lock-fund-currency","lock-fund-tx-fee","balance","selected-acc-add"]),t("div",ys,a(e.$t("general.enterPasswordContinue")),1),M(J,{placeholder:e.$t("general.password"),errorMessage:e.$t("general.passwordRequired"),showError:s.showPasswdError,modelValue:s.walletPassword,"onUpdate:modelValue":i[3]||(i[3]=u=>s.walletPassword=u),disabled:s.disabledPassword},null,8,["placeholder","errorMessage","showError","modelValue","disabled"]),t("button",{type:"submit",class:"mt-3 w-full blue-btn py-4 disabled:opacity-50 disabled:cursor-auto text-white",disabled:s.disableCreate,onClick:i[4]||(i[4]=(...u)=>s.linkNamespace&&s.linkNamespace(...u))},a(s.selectAction=="link"?e.$t("general.linkToNamespace"):e.$t("namespace.unlinkNamespace")),9,ks),t("div",_s,[M(k,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white border-b-2 border-white"},{default:Be(()=>[$(a(e.$t("general.cancel")),1)]),_:1})])])])])])}const Ps=le(xt,[["render",xs]]);export{Ps as default};
