import{A as L,E as O,ah as ze,ai as Qe,n as te,aj as $e,d as Ae,r as S,k as Se,o as k,m as rt,_ as Ne,I as ot,c as z,b as B,e as u,t as P,s as ee,i as Ge,ak as lt,al as g,u as at,w as K,am as ut,W as ue,H as ve,R as ct,a as Fe,f as q,z as ke,C as x,B as Pe,af as Ve,an as qe,F as je,h as Ue,ao as ft,ap as Te,p as dt,j as mt}from"./index-66465054.js";import{M as _t}from"./multisigUtils-92b434e7.js";import{t as ht}from"./jdenticon-module-c04e1b21.js";import{P as gt}from"./PasswordInput-a318f025.js";import{S as pt}from"./SelectInputAccount-5a1723bb.js";let bt=[{namespace:"prx.xpx",name:"XPX"},{namespace:"prx.metx",name:"METX"},{namespace:"xarcade.xar",name:"XAR"}];class me{static createAccount(e){return L.Account.createFromPrivateKey(e,O.networkType,1)}static async scanAsset(e){let l=L.PublicAccount.createFromPublicKey(e,O.networkType);try{let t=await O.chainAPI.accountAPI.getAccountInfo(l.address),i=t.mosaics.map(c=>c.id),n=await O.chainAPI.assetAPI.getMosaics(i),s=await O.chainAPI.assetAPI.getMosaicsNames(i);return t.mosaics.map(c=>{let f=c.id.toHex(),b=n.find(y=>y.mosaicId.toHex()===f).divisibility,_=s.find(y=>y.mosaicId.toHex()===f).names,T=_.length?_[0].name:"",I=bt.find(y=>y.namespace===T),R={id:f,amount:b?c.amount.compact()/Math.pow(10,b):c.amount.compact(),divisibility:b,namespaceName:T};return R.label=I?I.name:R.namespaceName?R.namespaceName:R.id.toUpperCase(),R})}catch{return[]}}static createDistributeAggregateTransactions(e,l,t,i){let n=L.PublicAccount.createFromPublicKey(e,O.networkType),s=[],r=Math.ceil(l.length/t),c=[],f=Math.pow(10,i.divisibility),b=i.namespaceName?new L.NamespaceId(i.namespaceName):new L.MosaicId(i.id);for(let _=0;_<l.length;++_){let T=ze(Qe(l[_].amount),f),I=Number(T.toString()),R;l[_].publicKeyOrAddress.length===64?R=L.PublicAccount.createFromPublicKey(l[_].publicKeyOrAddress,O.networkType).address:R=L.Address.createFromRawAddress(l[_].publicKeyOrAddress);let y=new L.Mosaic(b,L.UInt64.fromUint(I)),F;l[_].message?F=L.PlainMessage.create(l[_].message):F=L.EmptyMessage;let N=O.buildTxn.transfer(R,F,[y]);c.push(N)}for(let _=0;_<r;++_){let T=_*t,I=(_+1)*t,R=c.slice(T,I),y=[];for(let N=0;N<R.length;++N)y.push(R[N].toAggregateV1(n));let F=O.buildTxn.aggregateBonded(y);s.push(F)}return s}static getLockFundTransactionFee(){const e=te.currentNetworkProfileConfig.lockedFundsPerAggregate??0;let l=new L.TransactionHash("0".repeat(64),L.TransactionType.AGGREGATE_BONDED_V1);return O.buildTxn.hashLock(new L.Mosaic(new L.NamespaceId("prx.xpx"),L.UInt64.fromUint(e)),L.UInt64.fromUint($e.getABTMaxSafeDuration()),l).maxFee.compact()}static async signAllAbtAndAnnounce(e,l){const t=te.currentNetworkProfileConfig.lockedFundsPerAggregate;let i=[],n=[],s=[],r=[];for(let b=0;b<e.length;++b){let _=l.preV2Sign(e[b],te.currentNetworkProfile.generationHash);i.push(_);let T=O.buildTxn.hashLock(new L.Mosaic(new L.NamespaceId(O.nativeToken.fullNamespace.trim()),L.UInt64.fromUint(t)),L.UInt64.fromUint($e.getABTMaxSafeDuration()),_),I=l.preV2Sign(T,te.currentNetworkProfile.generationHash);n.push(I),s.push({txnHash:_.hash,block:null}),s.push({txnHash:I.hash,block:null}),r.push({txnHash:_.hash,hashLockHash:I.hash})}let c=!1;for(let b=0;b<n.length;++b)await O.chainAPI.transactionAPI.announce(n[b]);console.log("All LockHash Txn announced, pending ABT announcement...");let f=[];for(;!c;){await new Promise(I=>setTimeout(I,15e3)),console.log("Checking LockHash Txn confirmation...");let _=await O.chainAPI.chainAPI.getBlockchainHeight(),T=i.filter(I=>!f.includes(I.hash));for(let I=0;I<T.length;++I){let R=r.find(F=>F.txnHash===T[I].hash).hashLockHash,y=await O.chainAPI.transactionAPI.getTransactionStatus(R);if(y.group===L.TransactionGroupType.CONFIRMED){let F=y.height.compact(),N=s.find(p=>p.txnHash===R);N.block=F,_>=N.block+1&&(await O.chainAPI.transactionAPI.announceAggregateBonded(T[I]),f.push(T[I].hash))}}f.length===i.length&&(c=!0)}return f}}const vt=Ae({__name:"SelectMultisigInput",props:{account:{type:Array,required:!0},selectedMultisig:{type:Object,required:!0}},emits:["select"],setup(o,{emit:e}){const l=S({}),t=s=>{e("select",s)},i=s=>{l.value[s.key]=!0},n=()=>{l.value={}};return(s,r)=>{const c=Se("Tree");return k(),rt(c,{value:o.account,selectionMode:"single","onUpdate:selectionKeys":o.selectedMultisig,expandedKeys:l.value,filter:!0,filterMode:"strict",onNodeSelect:t,onNodeExpand:i,onNodeCollapse:n},null,8,["value","onUpdate:selectionKeys","expandedKeys"])}}}),yt=Ne(vt,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/components/SelectMultisigInput.vue"]]),wt={class:"w-full h-16 mt-0 border border-gray-200 px-2 py-2 rounded-md"},It={class:"flex"},xt=["innerHTML"],St={class:"flex flex-col ml-2 text-left"},At={class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}},Nt={class:"mt-2 text-base font-bold"},Ot={class:"ml-auto mt-auto mb-auto mr-6"},kt=Ae({__name:"MultisigInput",props:{selectDefaultAddress:{type:String,required:!0},selectDefaultName:{type:String,required:!0}},setup(o){const e=o,t=Ge().appContext.config.globalProperties.emitter;let i=new ot("ThemeStyleConfig");i.init();let n=S(i.jdenticonConfig);const s=z(()=>ht(e.selectDefaultAddress,25,n.value)),r=()=>{t.emit("CLOSE_MULTISIG")};return(c,f)=>{const b=Se("font-awesome-icon");return k(),B("div",wt,[u("div",It,[u("div",{innerHTML:s.value},null,8,xt),u("div",St,[u("div",At,P(c.$t("transfer.transferFrom"))+" "+P(c.$t("general.multisig")),1),u("div",Nt,P(o.selectDefaultName),1)]),u("div",Ot,[ee(b,{icon:"times",class:"delete-icon-style",onClick:f[0]||(f[0]=_=>r())})])])])}}}),Tt=Ne(kt,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/components/MultisigInput.vue"]]);var Ct=lt();const We=function(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)};class A extends Error{constructor(e,l,t,...i){Array.isArray(l)&&(l=l.join(" ").trim()),super(l),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,A),this.code=e;for(const n of i)for(const s in n){const r=n[s];this[s]=g.Buffer.isBuffer(r)?r.toString(t.encoding):r==null?r:JSON.parse(JSON.stringify(r))}}}const Xe=function(o){const e=[];for(let l=0,t=o.length;l<t;l++){const i=o[l];if(i==null||i===!1)e[l]={disabled:!0};else if(typeof i=="string")e[l]={name:i};else if(We(i)){if(typeof i.name!="string")throw new A("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${l}`,"when column is an object literal"]);e[l]=i}else throw new A("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(i)} at position ${l}`])}return e};class He{constructor(e=100){this.size=e,this.length=0,this.buf=g.Buffer.allocUnsafe(e)}prepend(e){if(g.Buffer.isBuffer(e)){const l=this.length+e.length;if(l>=this.size&&(this.resize(),l>=this.size))throw Error("INVALID_BUFFER_STATE");const t=this.buf;this.buf=g.Buffer.allocUnsafe(this.size),e.copy(this.buf,0),t.copy(this.buf,e.length),this.length+=e.length}else{const l=this.length++;l===this.size&&this.resize();const t=this.clone();this.buf[0]=e,t.copy(this.buf,1,0,l)}}append(e){const l=this.length++;l===this.size&&this.resize(),this.buf[l]=e}clone(){return g.Buffer.from(this.buf.slice(0,this.length))}resize(){const e=this.length;this.size=this.size*2;const l=g.Buffer.allocUnsafe(this.size);this.buf.copy(l,0,0,e),this.buf=l}toString(e){return e?this.buf.slice(0,this.length).toString(e):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}}const Dt=12,Et=13,Lt=10,Bt=32,Rt=9,Mt=function(o){return{bomSkipped:!1,bufBytesStart:0,castField:o.cast_function,commenting:!1,error:void 0,enabled:o.from_line===1,escaping:!1,escapeIsQuote:g.Buffer.isBuffer(o.escape)&&g.Buffer.isBuffer(o.quote)&&g.Buffer.compare(o.escape,o.quote)===0,expectedRecordLength:Array.isArray(o.columns)?o.columns.length:void 0,field:new He(20),firstLineToHeaders:o.cast_first_line_to_header,needMoreDataSize:Math.max(o.comment!==null?o.comment.length:0,...o.delimiter.map(e=>e.length),o.quote!==null?o.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new He(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:o.record_delimiter.length===0?0:Math.max(...o.record_delimiter.map(e=>e.length)),trimChars:[g.Buffer.from(" ",o.encoding)[0],g.Buffer.from("	",o.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[g.Buffer.from(g.Buffer.from([Et],"utf8").toString(),o.encoding),g.Buffer.from(g.Buffer.from([Lt],"utf8").toString(),o.encoding),g.Buffer.from(g.Buffer.from([Dt],"utf8").toString(),o.encoding),g.Buffer.from(g.Buffer.from([Bt],"utf8").toString(),o.encoding),g.Buffer.from(g.Buffer.from([Rt],"utf8").toString(),o.encoding)]}},$t=function(o){return o.replace(/([A-Z])/g,function(e,l){return"_"+l.toLowerCase()})},Je=function(o){const e={};for(const t in o)e[$t(t)]=o[t];if(e.encoding===void 0||e.encoding===!0)e.encoding="utf8";else if(e.encoding===null||e.encoding===!1)e.encoding=null;else if(typeof e.encoding!="string"&&e.encoding!==null)throw new A("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(e.encoding)}`],e);if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)throw new A("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,",`got ${JSON.stringify(e.bom)}`],e);if(e.cast_function=null,e.cast===void 0||e.cast===null||e.cast===!1||e.cast==="")e.cast=void 0;else if(typeof e.cast=="function")e.cast_function=e.cast,e.cast=!0;else if(e.cast!==!0)throw new A("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(e.cast)}`],e);if(e.cast_date===void 0||e.cast_date===null||e.cast_date===!1||e.cast_date==="")e.cast_date=!1;else if(e.cast_date===!0)e.cast_date=function(t){const i=Date.parse(t);return isNaN(i)?t:new Date(i)};else if(typeof e.cast_date!="function")throw new A("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(e.cast_date)}`],e);if(e.cast_first_line_to_header=null,e.columns===!0)e.cast_first_line_to_header=void 0;else if(typeof e.columns=="function")e.cast_first_line_to_header=e.columns,e.columns=!0;else if(Array.isArray(e.columns))e.columns=Xe(e.columns);else if(e.columns===void 0||e.columns===null||e.columns===!1)e.columns=!1;else throw new A("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(e.columns)}`],e);if(e.group_columns_by_name===void 0||e.group_columns_by_name===null||e.group_columns_by_name===!1)e.group_columns_by_name=!1;else{if(e.group_columns_by_name!==!0)throw new A("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",`got ${JSON.stringify(e.group_columns_by_name)}`],e);if(e.columns===!1)throw new A("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],e)}if(e.comment===void 0||e.comment===null||e.comment===!1||e.comment==="")e.comment=null;else if(typeof e.comment=="string"&&(e.comment=g.Buffer.from(e.comment,e.encoding)),!g.Buffer.isBuffer(e.comment))throw new A("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(e.comment)}`],e);const l=JSON.stringify(e.delimiter);if(Array.isArray(e.delimiter)||(e.delimiter=[e.delimiter]),e.delimiter.length===0)throw new A("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${l}`],e);if(e.delimiter=e.delimiter.map(function(t){if(t==null||t===!1)return g.Buffer.from(",",e.encoding);if(typeof t=="string"&&(t=g.Buffer.from(t,e.encoding)),!g.Buffer.isBuffer(t)||t.length===0)throw new A("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${l}`],e);return t}),e.escape===void 0||e.escape===!0?e.escape=g.Buffer.from('"',e.encoding):typeof e.escape=="string"?e.escape=g.Buffer.from(e.escape,e.encoding):(e.escape===null||e.escape===!1)&&(e.escape=null),e.escape!==null&&!g.Buffer.isBuffer(e.escape))throw new Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(e.escape)}`);if(e.from===void 0||e.from===null)e.from=1;else if(typeof e.from=="string"&&/\d+/.test(e.from)&&(e.from=parseInt(e.from)),Number.isInteger(e.from)){if(e.from<0)throw new Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(o.from)}`)}else throw new Error(`Invalid Option: from must be an integer, got ${JSON.stringify(e.from)}`);if(e.from_line===void 0||e.from_line===null)e.from_line=1;else if(typeof e.from_line=="string"&&/\d+/.test(e.from_line)&&(e.from_line=parseInt(e.from_line)),Number.isInteger(e.from_line)){if(e.from_line<=0)throw new Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(o.from_line)}`)}else throw new Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(o.from_line)}`);if(e.ignore_last_delimiters===void 0||e.ignore_last_delimiters===null)e.ignore_last_delimiters=!1;else if(typeof e.ignore_last_delimiters=="number")e.ignore_last_delimiters=Math.floor(e.ignore_last_delimiters),e.ignore_last_delimiters===0&&(e.ignore_last_delimiters=!1);else if(typeof e.ignore_last_delimiters!="boolean")throw new A("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(e.ignore_last_delimiters)}`],e);if(e.ignore_last_delimiters===!0&&e.columns===!1)throw new A("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],e);if(e.info===void 0||e.info===null||e.info===!1)e.info=!1;else if(e.info!==!0)throw new Error(`Invalid Option: info must be true, got ${JSON.stringify(e.info)}`);if(e.max_record_size===void 0||e.max_record_size===null||e.max_record_size===!1)e.max_record_size=0;else if(!(Number.isInteger(e.max_record_size)&&e.max_record_size>=0))if(typeof e.max_record_size=="string"&&/\d+/.test(e.max_record_size))e.max_record_size=parseInt(e.max_record_size);else throw new Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(e.max_record_size)}`);if(e.objname===void 0||e.objname===null||e.objname===!1)e.objname=void 0;else if(g.Buffer.isBuffer(e.objname)){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty buffer");e.encoding===null||(e.objname=e.objname.toString(e.encoding))}else if(typeof e.objname=="string"){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty string")}else if(typeof e.objname!="number")throw new Error(`Invalid Option: objname must be a string or a buffer, got ${e.objname}`);if(e.objname!==void 0){if(typeof e.objname=="number"){if(e.columns!==!1)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(e.columns===!1)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index")}if(e.on_record===void 0||e.on_record===null)e.on_record=void 0;else if(typeof e.on_record!="function")throw new A("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(e.on_record)}`],e);if(e.quote===null||e.quote===!1||e.quote==="")e.quote=null;else if(e.quote===void 0||e.quote===!0?e.quote=g.Buffer.from('"',e.encoding):typeof e.quote=="string"&&(e.quote=g.Buffer.from(e.quote,e.encoding)),!g.Buffer.isBuffer(e.quote))throw new Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(e.quote)}`);if(e.raw===void 0||e.raw===null||e.raw===!1)e.raw=!1;else if(e.raw!==!0)throw new Error(`Invalid Option: raw must be true, got ${JSON.stringify(e.raw)}`);if(e.record_delimiter===void 0)e.record_delimiter=[];else if(typeof e.record_delimiter=="string"||g.Buffer.isBuffer(e.record_delimiter)){if(e.record_delimiter.length===0)throw new A("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);e.record_delimiter=[e.record_delimiter]}else if(!Array.isArray(e.record_delimiter))throw new A("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);if(e.record_delimiter=e.record_delimiter.map(function(t,i){if(typeof t!="string"&&!g.Buffer.isBuffer(t))throw new A("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${i},`,`got ${JSON.stringify(t)}`],e);if(t.length===0)throw new A("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${i},`,`got ${JSON.stringify(t)}`],e);return typeof t=="string"&&(t=g.Buffer.from(t,e.encoding)),t}),typeof e.relax_column_count!="boolean")if(e.relax_column_count===void 0||e.relax_column_count===null)e.relax_column_count=!1;else throw new Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(e.relax_column_count)}`);if(typeof e.relax_column_count_less!="boolean")if(e.relax_column_count_less===void 0||e.relax_column_count_less===null)e.relax_column_count_less=!1;else throw new Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(e.relax_column_count_less)}`);if(typeof e.relax_column_count_more!="boolean")if(e.relax_column_count_more===void 0||e.relax_column_count_more===null)e.relax_column_count_more=!1;else throw new Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(e.relax_column_count_more)}`);if(typeof e.relax_quotes!="boolean")if(e.relax_quotes===void 0||e.relax_quotes===null)e.relax_quotes=!1;else throw new Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(e.relax_quotes)}`);if(typeof e.skip_empty_lines!="boolean")if(e.skip_empty_lines===void 0||e.skip_empty_lines===null)e.skip_empty_lines=!1;else throw new Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(e.skip_empty_lines)}`);if(typeof e.skip_records_with_empty_values!="boolean")if(e.skip_records_with_empty_values===void 0||e.skip_records_with_empty_values===null)e.skip_records_with_empty_values=!1;else throw new Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(e.skip_records_with_empty_values)}`);if(typeof e.skip_records_with_error!="boolean")if(e.skip_records_with_error===void 0||e.skip_records_with_error===null)e.skip_records_with_error=!1;else throw new Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(e.skip_records_with_error)}`);if(e.rtrim===void 0||e.rtrim===null||e.rtrim===!1)e.rtrim=!1;else if(e.rtrim!==!0)throw new Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(e.rtrim)}`);if(e.ltrim===void 0||e.ltrim===null||e.ltrim===!1)e.ltrim=!1;else if(e.ltrim!==!0)throw new Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(e.ltrim)}`);if(e.trim===void 0||e.trim===null||e.trim===!1)e.trim=!1;else if(e.trim!==!0)throw new Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(e.trim)}`);if(e.trim===!0&&o.ltrim!==!1?e.ltrim=!0:e.ltrim!==!0&&(e.ltrim=!1),e.trim===!0&&o.rtrim!==!1?e.rtrim=!0:e.rtrim!==!0&&(e.rtrim=!1),e.to===void 0||e.to===null)e.to=-1;else if(typeof e.to=="string"&&/\d+/.test(e.to)&&(e.to=parseInt(e.to)),Number.isInteger(e.to)){if(e.to<=0)throw new Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(o.to)}`)}else throw new Error(`Invalid Option: to must be an integer, got ${JSON.stringify(o.to)}`);if(e.to_line===void 0||e.to_line===null)e.to_line=-1;else if(typeof e.to_line=="string"&&/\d+/.test(e.to_line)&&(e.to_line=parseInt(e.to_line)),Number.isInteger(e.to_line)){if(e.to_line<=0)throw new Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(o.to_line)}`)}else throw new Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(o.to_line)}`);return e},Ke=function(o){return o.every(e=>e==null||e.toString&&e.toString().trim()==="")},Ft=13,Pt=10,_e={utf8:g.Buffer.from([239,187,191]),utf16le:g.Buffer.from([255,254])},Vt=function(o={}){const e={bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},l=Je(o);return{info:e,original_options:o,options:l,state:Mt(l),__needMoreData:function(t,i,n){if(n)return!1;const{encoding:s,escape:r,quote:c}=this.options,{quoting:f,needMoreDataSize:b,recordDelimiterMaxLength:_}=this.state,T=i-t-1,I=Math.max(b,_===0?g.Buffer.from(`\r
`,s).length:_,f?(r===null?0:r.length)+c.length:0,f?c.length+_:0);return T<I},parse:function(t,i,n,s){const{bom:r,encoding:c,from_line:f,ltrim:b,max_record_size:_,raw:T,relax_quotes:I,rtrim:R,skip_empty_lines:y,to:F,to_line:N}=this.options;let{comment:p,escape:v,quote:C,record_delimiter:se}=this.options;const{bomSkipped:le,previousBuf:re,rawBuffer:he,escapeIsQuote:ce}=this.state;let w;if(re===void 0)if(t===void 0){s();return}else w=t;else re!==void 0&&t===void 0?w=re:w=g.Buffer.concat([re,t]);if(le===!1)if(r===!1)this.state.bomSkipped=!0;else if(w.length<3){if(i===!1){this.state.previousBuf=w;return}}else{for(const D in _e)if(_e[D].compare(w,0,_e[D].length)===0){const Q=_e[D].length;this.state.bufBytesStart+=Q,w=w.slice(Q),this.options=Je({...this.original_options,encoding:D}),{comment:p,escape:v,quote:C}=this.options;break}this.state.bomSkipped=!0}const X=w.length;let h;for(h=0;h<X&&!this.__needMoreData(h,X,i);h++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1),N!==-1&&this.info.lines>N){this.state.stop=!0,s();return}this.state.quoting===!1&&se.length===0&&this.__autoDiscoverRecordDelimiter(w,h)&&(se=this.options.record_delimiter);const D=w[h];if(T===!0&&he.append(D),(D===Ft||D===Pt)&&this.state.wasRowDelimiter===!1&&(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(v!==null&&this.state.quoting===!0&&this.__isEscape(w,h,D)&&h+v.length<X)if(ce){if(this.__isQuote(w,h+v.length)){this.state.escaping=!0,h+=v.length-1;continue}}else{this.state.escaping=!0,h+=v.length-1;continue}if(this.state.commenting===!1&&this.__isQuote(w,h))if(this.state.quoting===!0){const M=w[h+C.length],Z=R&&this.__isCharTrimable(w,h+C.length),ie=p!==null&&this.__compareBytes(p,w,h+C.length,M),Y=this.__isDelimiter(w,h+C.length,M),fe=se.length===0?this.__autoDiscoverRecordDelimiter(w,h+C.length):this.__isRecordDelimiter(M,w,h+C.length);if(v!==null&&this.__isEscape(w,h,D)&&this.__isQuote(w,h+v.length))h+=v.length-1;else if(!M||Y||fe||ie||Z){this.state.quoting=!1,this.state.wasQuoting=!0,h+=C.length-1;continue}else if(I===!1){const oe=this.__error(new A("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(M)}"`,`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(oe!==void 0)return oe}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(C),h+=C.length-1}else if(this.state.field.length!==0){if(I===!1){const M=this.__infoField(),Z=Object.keys(_e).map(Y=>_e[Y].equals(this.state.field.toString())?Y:!1).filter(Boolean)[0],ie=this.__error(new A("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(M.column)} at line ${M.lines}, value is ${JSON.stringify(this.state.field.toString(c))}`,Z?`(${Z} bom)`:void 0],this.options,M,{field:this.state.field}));if(ie!==void 0)return ie}}else{this.state.quoting=!0,h+=C.length-1;continue}if(this.state.quoting===!1){const M=this.__isRecordDelimiter(D,w,h);if(M!==0){if(this.state.commenting&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0)this.info.comment_lines++;else{if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=f){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),h+=M-1;continue}if(y===!0&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0){this.info.empty_lines++,h+=M-1;continue}this.info.bytes=this.state.bufBytesStart+h;const fe=this.__onField();if(fe!==void 0)return fe;this.info.bytes=this.state.bufBytesStart+h+M;const oe=this.__onRecord(n);if(oe!==void 0)return oe;if(F!==-1&&this.info.records>=F){this.state.stop=!0,s();return}}this.state.commenting=!1,h+=M-1;continue}if(this.state.commenting)continue;if((p===null?0:this.__compareBytes(p,w,h,D))!==0){this.state.commenting=!0;continue}const ie=this.__isDelimiter(w,h,D);if(ie!==0){this.info.bytes=this.state.bufBytesStart+h;const Y=this.__onField();if(Y!==void 0)return Y;h+=ie-1;continue}}}if(this.state.commenting===!1&&_!==0&&this.state.record_length+this.state.field.length>_)return this.__error(new A("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${_}`,`at line ${this.info.lines}`],this.options,this.__infoField()));const Q=b===!1||this.state.quoting===!0||this.state.field.length!==0||!this.__isCharTrimable(w,h),ae=R===!1||this.state.wasQuoting===!1;if(Q===!0&&ae===!0)this.state.field.append(D);else{if(R===!0&&!this.__isCharTrimable(w,h))return this.__error(new A("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()));Q===!1&&(h+=this.__isCharTrimable(w,h)-1);continue}}if(i===!0)if(this.state.quoting===!0){const D=this.__error(new A("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField()));if(D!==void 0)return D}else if(this.state.wasQuoting===!0||this.state.record.length!==0||this.state.field.length!==0){this.info.bytes=this.state.bufBytesStart+h;const D=this.__onField();if(D!==void 0)return D;const Q=this.__onRecord(n);if(Q!==void 0)return Q}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.bufBytesStart+=h,this.state.previousBuf=w.slice(h);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(t){const{columns:i,group_columns_by_name:n,encoding:s,info:r,from:c,relax_column_count:f,relax_column_count_less:b,relax_column_count_more:_,raw:T,skip_records_with_empty_values:I}=this.options,{enabled:R,record:y}=this.state;if(R===!1)return this.__resetRecord();const F=y.length;if(i===!0){if(I===!0&&Ke(y)){this.__resetRecord();return}return this.__firstLineToColumns(y)}if(i===!1&&this.info.records===0&&(this.state.expectedRecordLength=F),F!==this.state.expectedRecordLength){const N=i===!1?new A("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${F} on line ${this.info.lines}`],this.options,this.__infoField(),{record:y}):new A("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${i.length},`,`got ${F} on line ${this.info.lines}`],this.options,this.__infoField(),{record:y});if(f===!0||b===!0&&F<this.state.expectedRecordLength||_===!0&&F>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=N;else{const p=this.__error(N);if(p)return p}}if(I===!0&&Ke(y)){this.__resetRecord();return}if(this.state.recordHasError===!0){this.__resetRecord(),this.state.recordHasError=!1;return}if(this.info.records++,c===1||this.info.records>=c){const{objname:N}=this.options;if(i!==!1){const p={};for(let v=0,C=y.length;v<C;v++)i[v]===void 0||i[v].disabled||(n===!0&&p[i[v].name]!==void 0?Array.isArray(p[i[v].name])?p[i[v].name]=p[i[v].name].concat(y[v]):p[i[v].name]=[p[i[v].name],y[v]]:p[i[v].name]=y[v]);if(T===!0||r===!0){const v=Object.assign({record:p},T===!0?{raw:this.state.rawBuffer.toString(s)}:{},r===!0?{info:this.__infoRecord()}:{}),C=this.__push(N===void 0?v:[p[N],v],t);if(C)return C}else{const v=this.__push(N===void 0?p:[p[N],p],t);if(v)return v}}else if(T===!0||r===!0){const p=Object.assign({record:y},T===!0?{raw:this.state.rawBuffer.toString(s)}:{},r===!0?{info:this.__infoRecord()}:{}),v=this.__push(N===void 0?p:[y[N],p],t);if(v)return v}else{const p=this.__push(N===void 0?y:[y[N],y],t);if(p)return p}}this.__resetRecord()},__firstLineToColumns:function(t){const{firstLineToHeaders:i}=this.state;try{const n=i===void 0?t:i.call(null,t);if(!Array.isArray(n))return this.__error(new A("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(n)}`],this.options,this.__infoField(),{headers:n}));const s=Xe(n);this.state.expectedRecordLength=s.length,this.options.columns=s,this.__resetRecord();return}catch(n){return n}},__resetRecord:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){const{cast:t,encoding:i,rtrim:n,max_record_size:s}=this.options,{enabled:r,wasQuoting:c}=this.state;if(r===!1)return this.__resetField();let f=this.state.field.toString(i);if(n===!0&&c===!1&&(f=f.trimRight()),t===!0){const[b,_]=this.__cast(f);if(b!==void 0)return b;f=_}this.state.record.push(f),s!==0&&typeof f=="string"&&(this.state.record_length+=f.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(t,i){const{on_record:n}=this.options;if(n!==void 0){const s=this.__infoRecord();try{t=n.call(null,t,s)}catch(r){return r}if(t==null)return}i(t)},__cast:function(t){const{columns:i,relax_column_count:n}=this.options;if(Array.isArray(i)===!0&&n&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(this.state.castField!==null)try{const r=this.__infoField();return[void 0,this.state.castField.call(null,t,r)]}catch(r){return[r]}if(this.__isFloat(t))return[void 0,parseFloat(t)];if(this.options.cast_date!==!1){const r=this.__infoField();return[void 0,this.options.cast_date.call(null,t,r)]}return[void 0,t]},__isCharTrimable:function(t,i){return((s,r)=>{const{timchars:c}=this.state;e:for(let f=0;f<c.length;f++){const b=c[f];for(let _=0;_<b.length;_++)if(b[_]!==s[r+_])continue e;return b.length}return 0})(t,i)},__isFloat:function(t){return t-parseFloat(t)+1>=0},__compareBytes:function(t,i,n,s){if(t[0]!==s)return 0;const r=t.length;for(let c=1;c<r;c++)if(t[c]!==i[n+c])return 0;return r},__isDelimiter:function(t,i,n){const{delimiter:s,ignore_last_delimiters:r}=this.options;if(r===!0&&this.state.record.length===this.options.columns.length-1)return 0;if(r!==!1&&typeof r=="number"&&this.state.record.length===r-1)return 0;e:for(let c=0;c<s.length;c++){const f=s[c];if(f[0]===n){for(let b=1;b<f.length;b++)if(f[b]!==t[i+b])continue e;return f.length}}return 0},__isRecordDelimiter:function(t,i,n){const{record_delimiter:s}=this.options,r=s.length;e:for(let c=0;c<r;c++){const f=s[c],b=f.length;if(f[0]===t){for(let _=1;_<b;_++)if(f[_]!==i[n+_])continue e;return f.length}}return 0},__isEscape:function(t,i,n){const{escape:s}=this.options;if(s===null)return!1;const r=s.length;if(s[0]===n){for(let c=0;c<r;c++)if(s[c]!==t[i+c])return!1;return!0}return!1},__isQuote:function(t,i){const{quote:n}=this.options;if(n===null)return!1;const s=n.length;for(let r=0;r<s;r++)if(n[r]!==t[i+r])return!1;return!0},__autoDiscoverRecordDelimiter:function(t,i){const{encoding:n}=this.options,s=[g.Buffer.from(`\r
`,n),g.Buffer.from(`
`,n),g.Buffer.from("\r",n)];e:for(let r=0;r<s.length;r++){const c=s[r].length;for(let f=0;f<c;f++)if(s[r][f]!==t[i+f])continue e;return this.options.record_delimiter.push(s[r]),this.state.recordDelimiterMaxLength=s[r].length,s[r].length}return 0},__error:function(t){const{encoding:i,raw:n,skip_records_with_error:s}=this.options,r=typeof t=="string"?new Error(t):t;if(s){this.state.recordHasError=!0,this.options.on_skip!==void 0&&this.options.on_skip(r,n?this.state.rawBuffer.toString(i):void 0);return}else return r},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){const{columns:t,raw:i,encoding:n}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:t===!0,index:this.state.record.length,raw:i?this.state.rawBuffer.toString(n):void 0}},__infoField:function(){const{columns:t}=this.options,i=Array.isArray(t);return{...this.__infoRecord(),column:i===!0?t.length>this.state.record.length?t[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}};class qt extends Ct.Transform{constructor(e={}){super({readableObjectMode:!0,...e,encoding:null}),this.api=Vt(e),this.api.options.on_skip=(l,t)=>{this.emit("skip",l,t)},this.state=this.api.state,this.options=this.api.options,this.info=this.api.info}_transform(e,l,t){if(this.state.stop===!0)return;const i=this.api.parse(e,!1,n=>{this.push(n)},()=>{this.push(null),this.on("end",this.destroy)});i!==void 0&&(this.state.stop=!0),t(i)}_flush(e){if(this.state.stop===!0)return;const l=this.api.parse(void 0,!0,t=>{this.push(t)},()=>{this.push(null),this.on("end",this.destroy)});e(l)}}const jt=function(){let o,e,l;for(const i in arguments){const n=arguments[i],s=typeof n;if(o===void 0&&(typeof n=="string"||g.Buffer.isBuffer(n)))o=n;else if(e===void 0&&We(n))e=n;else if(l===void 0&&s==="function")l=n;else throw new A("CSV_INVALID_ARGUMENT",["Invalid argument:",`got ${JSON.stringify(n)} at index ${i}`],e||{})}const t=new qt(e);if(l){const i=e===void 0||e.objname===void 0?[]:{};t.on("readable",function(){let n;for(;(n=this.read())!==null;)e===void 0||e.objname===void 0?i.push(n):i[n[0]]=n[1]}),t.on("error",function(n){l(n,void 0,t.api.__infoDataSet())}),t.on("end",function(){l(void 0,i,t.api.__infoDataSet())})}if(o!==void 0){const i=function(){t.write(o),t.end()};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}return t},ye=o=>(dt("data-v-9c2da484"),o=o(),mt(),o),Ut={class:"container"},Ht={class:"p-2"},Jt={class:"flex gap-1"},Kt={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},zt={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},Qt={key:0,class:"error error_box",role:"alert"},Gt={key:1,class:"mt-3"},Wt={class:"p-2"},Xt={class:"flex flex-col-reverse"},Zt={key:0,class:"error error_box"},Yt={key:0},ei={style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},ti={class:"text-tsm text-gray-400"},ii={key:1},ni={style:{display:"flex","justify-content":"space-between"}},si={class:"text-sm"},ri={class:"text-tsm text-gray-500"},oi=ye(()=>u("label",{class:"font-medium text-gray-400",for:"floatingSelect"},"Sirius Digital Asset",-1)),li={class:"p-2"},ai={class:"flex flex-col-reverse"},ui=ye(()=>u("label",{class:"font-medium text-gray-400",for:"floatingSelect"},"Transactions per aggregate",-1)),ci={class:"p-2"},fi={class:"border rounded-md border-gray-200 mb-3 w-full"},di={key:0,class:"error error_box"},mi={class:"p-2"},_i={key:0,class:"error error_box",role:"alert"},hi={key:1,class:"error error_box",role:"alert"},gi={key:2,class:"error error_box",role:"alert"},pi={key:0,class:"p-2 overflow-auto"},bi={class:"table table-auto w-full"},vi=ft('<div class="table-header-group" data-v-9c2da484><div class="table-row" data-v-9c2da484><div class="table-cell border-b-2 font-semibold p-4 pt-0 pb-3" data-v-9c2da484>Recipient (Public Key or Address)</div><div class="table-cell border-b-2 font-semibold p-4 pt-0 pb-3" data-v-9c2da484>Amount</div><div class="table-cell border-b-2 font-semibold p-4 pt-0 pb-3" data-v-9c2da484>Message</div></div></div>',1),yi={class:"table-row-group"},wi={class:"table-cell border-b p-4 pt-0 pb-3"},Ii={class:"table-cell border-b p-4 pt-0 pb-3"},xi={class:"table-cell border-b p-4 pt-0 pb-3"},Si={class:"p-2"},Ai={class:"mb-3 w-full px-2 py-1"},Ni=ye(()=>u("div",{class:"font-semibold"},"Enter your password to continue",-1)),Oi={key:0,class:"error error_box"},ki=["disabled"],Ti={key:2,class:"blue-btn px-3 py-3 text-md flex items-center",type:"button",disabled:""},Ci=ye(()=>u("svg",{class:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[u("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),u("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),Di={key:3,class:"font-semibold text-red-600 mt-2",role:"alert"},Ei={key:4,class:"font-semibold text-red-600 mt-2",role:"alert"},Li={key:1,class:"p-2 overflow-auto"},Bi={class:"table w-full"},Ri=ye(()=>u("div",{class:"table-header-group"},[u("div",{class:"table-row"},[u("div",{class:"table-cell border-b-2 p-4 pt-0 pb-3"},"Transaction Hash")])],-1)),Mi={class:"table-row-group"},$i={class:"table-cell border-b p-4 pt-0 pb-3"},Fi=["href"],Pi=Ae({__name:"SiriusDistributionForm",setup(o){const l=Ge().appContext.config.globalProperties.emitter;z(()=>O.nativeToken.label);const t=S(!1),i=S(""),n=S(""),s=S(""),r=S(!1),c=S({}),f=S(!1),b=S(""),_=S(!1),T=z(()=>f.value),I=S(""),{t:R}=at(),y=S(""),F=z(()=>!!i.value);let N=S([]),p=S(null),v=S(10),C=S([]),se=S(0),le=S(0),re=S([]),he=S(!1),ce=S(!1),w=S(!1),X=S(""),h=S(!1),D=S(""),Q=S(""),ae=S(""),M=S(!1),Z=async()=>{he.value=!1,p.value=null;let d=await me.scanAsset(s.value?s.value:G.value?G.value.publicKey:"");N.value=d,d.length===0&&(he.value=!0)},ie=[{label:"5",value:5},{label:"10",value:10},{label:"15",value:15},{label:"20",value:20}],Y=async()=>{var Re;if(ae.value="",h.value=!1,M.value||w.value||X.value)return;if(p.value===null){D.value="Please select SDA";return}else if(se.value===0){Q.value="No recipient to distribute";return}else if(I.value&&!ue.verifyWalletPassword(K.currentLoggedInWallet.name,te.chainNetworkName,I.value)){y.value=R("general.walletPasswordInvalid",{name:K.currentLoggedInWallet.name});return}let d=Math.ceil(se.value/v.value),m=d*me.getLockFundTransactionFee(),U=d*te.currentNetworkProfileConfig.lockedFundsPerAggregate,E=N.value.find(J=>J.id===p.value.id),a=me.createDistributeAggregateTransactions(s.value?s.value:G.value.publicKey,C.value,v.value,E),$=Te(a.map(J=>J.maxFee.compact())),W=Te(m,U,$)/Math.pow(10,O.nativeToken.divisibility);const pe=ue.createPassword(I.value);let j;if(Ee.value){let J=Be.value.cosignerList;if(J.length>1)j=b.value;else{let Me=(Re=K.currentLoggedInWallet)==null?void 0:Re.accounts.find(st=>st.publicKey==J[0].publicKey);j=Me?Me.address:""}}let H;j?H=K.currentLoggedInWallet.accounts.find(J=>J.address===j):H=K.currentLoggedInWallet.accounts.find(J=>J.address===G.value.address);let de=ue.decryptPrivateKey(pe,H.encrypted,H.iv).toUpperCase(),Ie=me.createAccount(de),be=(await me.scanAsset(Ie.publicKey)).find(J=>J.namespaceName===O.nativeToken.fullNamespace.trim());if(be){if(W>be.amount){ae.value=`Initiator do not have enough XPX (${be.amount}), need ${W}`;return}}else{ae.value="Initiator do not have any XPX";return}M.value=!0;let xe=await me.signAllAbtAndAnnounce(a,Ie);M.value=!1,h.value=!0,re.value=xe};const fe=async d=>await(()=>new Promise((E,a)=>{const $=[],V=jt(d,{trim:!0,skip_empty_lines:!0});V.on("readable",function(){let W;for(;(W=V.read())!==null;)$.push(W)}),V.on("end",function(){E($)})}))();let oe=d=>{ce.value=!1;const m=d.target.files[0],U=new FileReader;U.onload=async E=>{const a=E.target.result;try{let $=[],V=a.split(/\r?\n/);for(let j=1;j<V.length;j++){let H=V[j].trim();if(H==="")break;const ne=await fe(H);$.push({publicKeyOrAddress:ne[0][0],amount:ne[0][1],message:ne[0][2]?ne[0][2]:""})}let W=!1;C.value=[];let pe=[];if($&&$.length)for(let j=0;j<$.length;++j){let H=$[j].publicKeyOrAddress.trim().replaceAll("-",""),ne=$[j].amount.trim(),de=parseFloat($[j].amount.trim()),Ie=$[j].message;if(H.length===64){if(!L.Convert.isHexString(H)){W=!0;break}}else if(H.length===40){if(L.Address.createFromRawAddress(H).networkType!==O.networkType){W=!0;break}}else{W=!0;break}let Oe=de.toString().length;if(isNaN(de)){W=!0;break}else if(Oe!==ne.length){let xe=ne.length-Oe;if(de.toString()+"0".repeat(xe)!==ne){W=!0;break}}let be={publicKeyOrAddress:H,amount:de,message:Ie};pe.push(be)}W?(ce.value=!0,C.value=[],se.value=0,le.value=0):(se.value=$.length,le.value=Te(pe.map(j=>j.amount)),C.value=pe)}catch{ce.value=!0}},U.readAsText(m)},Ze=d=>{let m=te.currentNetworkProfile.chainExplorer;return m.url+"/"+m.hashRoute+"/"+d};S(!1);let Ce=d=>{if(d){let m=N.value.find(U=>U.id===d.id);le.value>m.amount?w.value=!0:w.value=!1}else w.value=!1},De=d=>{if(d){let m=N.value.find(E=>E.id===d.id);C.value.find(E=>{let a=Qe(E.amount),$=ze(a,Math.pow(10,m.divisibility)),V=Number($.toString());return Math.trunc(V)!==V})?X.value="Invalid distribution amount, maximum decimal place is "+m.divisibility:X.value=""}else X.value=""};const G=S(),ge=z(()=>{if(!K.currentLoggedInWallet)return[];if(K.currentLoggedInWallet.others){const d=K.currentLoggedInWallet.accounts.map(E=>E),U=K.currentLoggedInWallet.others.filter(E=>E.type!="DELEGATE").map(E=>E);return d.concat(U)}else return K.currentLoggedInWallet.accounts.map(m=>m)});G.value=ge.value[0],Z();const we=S(G.value.address),Ee=z(()=>ut(G.value.address)),Le=z(()=>{const d=K.currentLoggedInWallet;if(!d)return[];let m=d.accounts.find(a=>a.address==G.value.address);if(!m)return[];var E=m.multisigInfo.filter(a=>a.level<0).map((a,$)=>({key:$.toString(),label:d.contacts.find(V=>V.address==ue.createAddressFromPublicKey(a.publicKey,O.networkType).plain())?d.contacts.find(V=>V.address==ue.createAddressFromPublicKey(a.publicKey,O.networkType).plain()).name:d.accounts.find(V=>V.publicKey==a.publicKey)?d.accounts.find(V=>V.publicKey==a.publicKey).name:"MULTISIG-"+ue.createAddressFromPublicKey(a.publicKey,O.networkType).plain().slice(-4),data:a.publicKey,selectable:!0}));return E}),Ye=z(()=>Le.value.length!=0),et=d=>{r.value=!1,i.value=ue.createAddressFromPublicKey(d.data,O.networkType).plain(),n.value=d.label,s.value=d.data,b.value=G.value.address,c.value[d.key]=!0,Z()},tt=d=>K.currentLoggedInWallet.accounts.find(m=>m.publicKey==d),Be=z(()=>{const d=ge.value.find(E=>{var a;return E.address==((a=G.value)==null?void 0:a.address)});let m=_t.getCosignerInWallet(d.publicKey),U={hasCosigner:m.hasCosigner,cosignerList:[]};return m.cosignerList.forEach(E=>{const a=tt(E);a&&U.cosignerList.push({publicKey:E,name:a.name,balance:a.balance,address:a.address})}),U}),it=z(()=>ve.convertToExact(te.currentNetworkProfileConfig.lockedFundsPerAggregate,O.nativeToken.divisibility));z(()=>ve.convertToCurrency(te.currentNetworkProfileConfig.lockedFundsPerAggregate,O.nativeToken.divisibility));const nt=z(()=>te.currentNetworkProfile?ve.convertToExact(ct.getLockFundFee(),O.nativeToken.divisibility):0);if(z(()=>it.value+nt.value),Ee.value){let d=Be.value.cosignerList;d.length>0?(b.value=K.currentLoggedInWallet.accounts.find(m=>m.publicKey==d[0].publicKey).address,f.value=!1,t.value=!1):f.value=!0}return Fe(p,d=>{Ce(d),De(d)}),Fe(le,d=>{Ce(p.value),De(p.value)}),l.on("CLOSE_MULTISIG",()=>{i.value="",n.value="",s.value="",Z()}),l.on("select-account",d=>{for(let m=0;m<ge.value.length;m++)ge.value[m].address==d&&(G.value=ge.value[m],Z(),we.value=G.value.address)}),(d,m)=>{const U=Se("font-awesome-icon"),E=Se("Sidebar");return k(),B("div",Ut,[u("div",Ht,[u("div",Jt,[ee(pt,{modelValue:we.value,"onUpdate:modelValue":m[0]||(m[0]=a=>we.value=a),initiateBy:F.value,selectDefault:we.value},null,8,["modelValue","initiateBy","selectDefault"]),Ye.value?(k(),B("div",{key:0,onClick:m[1]||(m[1]=a=>r.value=!r.value),class:"border rounded-md cursor-pointer flex flex-col justify-around p-2 h-16 w-18 mt-auto"},[ee(U,{icon:"id-card-alt",class:"text-blue-primary ml-auto mr-auto"}),u("div",Kt,P(d.$t("general.select")),1),u("div",zt,P(d.$t("general.multisig")),1)])):q("v-if",!0)]),q(" Pop Up when select icon is clicked "),ee(E,{visible:r.value,"onUpdate:visible":m[3]||(m[3]=a=>r.value=a),baseZIndex:1e4,position:"full"},{default:ke(()=>[ee(yt,{account:Le.value,selectedMultisig:c.value,onSelect:m[2]||(m[2]=a=>et(a))},null,8,["account","selectedMultisig"])]),_:1},8,["visible"]),x(he)?(k(),B("div",Qt," No SDA found ")):q("v-if",!0),i.value?(k(),B("div",Gt,[ee(Tt,{"select-default-address":i.value,"select-default-name":n.value},null,8,["select-default-address","select-default-name"])])):q("v-if",!0)]),u("div",Wt,[u("div",null,[u("div",Xt,[q(" Dropdown for select SDA "),x(D)!=""?(k(),B("div",Zt,P(x(D)),1)):q("v-if",!0),ee(x(qe),{modelValue:x(p),"onUpdate:modelValue":m[4]||(m[4]=a=>Ve(p)?p.value=a:p=a),options:x(N),placeholder:"Select SDA to distribute",style:{width:"100%"},filter:!0,filterFields:["label"],optionLabel:"text","option-disabled":"disabled",showClear:!0},{value:ke(a=>[a.value?(k(),B("div",Yt,[u("div",ei,[Pe(P(a.value.label)+" ",1),u("span",ti," ("+P(x(ve).toCurrencyFormat(a.value.amount,a.value.divisibility))+")",1)])])):(k(),B("span",ii,P(a.placeholder),1))]),option:ke(a=>[u("div",ni,[u("span",si,P(a.option.label),1),u("span",ri,"Balance:"+P(x(ve).toCurrencyFormat(a.option.amount,a.option.divisibility)),1)])]),_:1},8,["modelValue","options"]),oi])])]),u("div",li,[u("div",null,[q(" Dropdown for aggregate number "),u("div",ai,[ee(x(qe),{modelValue:x(v),"onUpdate:modelValue":m[5]||(m[5]=a=>Ve(v)?v.value=a:v=a),options:x(ie),style:{width:"100%"},optionLabel:"label",optionValue:"value"},null,8,["modelValue","options"]),ui])])]),u("div",ci,[u("div",null,[u("div",fi,[u("input",{type:"file",class:"form-control",onChange:m[6]||(m[6]=(...a)=>x(oe)&&x(oe)(...a)),id:"inputGroupFile04","aria-describedby":"inputGroupFileAddon04","aria-label":"Upload"},null,32)]),x(Q)!=""?(k(),B("div",di,P(x(Q)),1)):q("v-if",!0)])]),u("div",mi,[u("div",null,[x(ce)?(k(),B("div",_i," Invalid file ")):q("v-if",!0),x(w)?(k(),B("div",hi," Total distribution amount exceed selected asset amount (need "+P(x(le))+") ",1)):q("v-if",!0),x(X)?(k(),B("div",gi,P(x(X)),1)):q("v-if",!0)])]),x(C).length?(k(),B("div",pi,[u("div",null,[u("div",bi,[vi,u("div",yi,[(k(!0),B(je,null,Ue(x(C),(a,$)=>(k(),B("div",{class:"table-row",key:$},[u("div",wi,P(a.publicKeyOrAddress),1),u("div",Ii,P(a.amount),1),u("div",xi,P(a.message),1)]))),128))])])])])):q("v-if",!0),u("div",Si,[u("div",Ai,[Ni,ee(gt,{placeholder:d.$t("general.enterPassword"),errorMessage:d.$t("general.passwordRequired"),showError:_.value,modelValue:I.value,"onUpdate:modelValue":m[7]||(m[7]=a=>I.value=a),icon:"lock",class:"mt-5 mb-3",disabled:T.value},null,8,["placeholder","errorMessage","showError","modelValue","disabled"]),y.value!=""?(k(),B("div",Oi,P(y.value),1)):q("v-if",!0),x(M)?q("v-if",!0):(k(),B("button",{key:1,type:"button",onClick:m[8]||(m[8]=a=>x(Y)()),disabled:x(M)&&!x(h),class:"blue-btn px-3 py-3 text-md"},"Distribute",8,ki)),x(M)?(k(),B("button",Ti,[Ci,Pe(" Distributing... ")])):q("v-if",!0),x(ae)?(k(),B("div",Di,P(x(ae)),1)):q("v-if",!0),x(h)?(k(),B("div",Ei," Distribution Done ")):q("v-if",!0)])]),x(re).length?(k(),B("div",Li,[u("div",null,[u("div",Bi,[Ri,u("div",Mi,[(k(!0),B(je,null,Ue(x(re),(a,$)=>(k(),B("div",{class:"table-row",key:$},[u("div",$i,[u("a",{href:x(Ze)(a),target:"_blank"},P(a),9,Fi)])]))),128))])])])])):q("v-if",!0)])}}});const Vi=Ne(Pi,[["__scopeId","data-v-9c2da484"],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/services/submodule/airdropToken/components/SiriusDistributionForm.vue"]]),qi={class:"lg:ml-60 mt-10 lg:mt-16 flex-grow px-5 pt-5"},ji=u("div",{class:"w-11/12 ml-auto mr-auto"},[u("div",{class:"flex"},[u("div",{class:"py-3 px-6 lg:flex items-center"},[u("div",{class:"text-xl mr-2 mb-2"},"Airdrop Token Utility")])])],-1),Ui={class:"mt-2 py-3"},Hi={class:"w-11/12 ml-auto mr-auto border-2"},Ji=u("div",{class:"mb-36"},null,-1),Ki=Ae({__name:"ViewServicesAirdropToken",setup(o){return(e,l)=>(k(),B("div",qi,[ji,u("div",Ui,[u("div",Hi,[ee(Vi)])]),Ji]))}}),Zi=Ne(Ki,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/services/submodule/airdropToken/views/ViewServicesAirdropToken.vue"]]);export{Zi as default};
