import{z as E,B as D,ad as We,ae as Ge,n as te,af as Pe,d as Se,r as x,i as xe,o as T,k as at,D as Xe,c as j,b as C,e as a,t as R,m as Z,h as Ce,_ as Ze,w as q,v as Ie,f as J,ag as ut,ah as g,u as ct,ai as ft,W as fe,H as we,R as dt,a as Ve,y as A,x as qe,ab as Ue,aj as He,F as Je,g as je,ak as mt,al as ke,I as _t,J as ht}from"./index-733b9285.js";import{M as gt}from"./multisigUtils-9b716b58.js";import{t as Oe}from"./jdenticon-module-d6bd4e96.js";import{_ as pt}from"./PasswordInput.vue_vue_type_script_setup_true_lang-2a6d511d.js";let bt=[{namespace:"prx.xpx",name:"XPX"},{namespace:"prx.metx",name:"METX"},{namespace:"xarcade.xar",name:"XAR"}];class he{static createAccount(e){return E.Account.createFromPrivateKey(e,D.networkType,1)}static async scanAsset(e){let l=E.PublicAccount.createFromPublicKey(e,D.networkType);try{let t=await D.chainAPI.accountAPI.getAccountInfo(l.address),n=t.mosaics.map(f=>f.id),r=await D.chainAPI.assetAPI.getMosaics(n),o=await D.chainAPI.assetAPI.getMosaicsNames(n);return t.mosaics.map(f=>{let c=f.id.toHex(),p=r.find(_=>_.mosaicId.toHex()===c).divisibility,w=o.find(_=>_.mosaicId.toHex()===c).names,v=w.length?w[0].name:"",S=bt.find(_=>_.namespace===v),k={id:c,amount:p?f.amount.compact()/Math.pow(10,p):f.amount.compact(),divisibility:p,namespaceName:v};return k.label=S?S.name:k.namespaceName?k.namespaceName:k.id.toUpperCase(),k})}catch{return[]}}static createDistributeAggregateTransactions(e,l,t,n,r){let o=E.PublicAccount.createFromPublicKey(e,D.networkType),i=[],f=Math.ceil(l.length/t),c=[],p=Math.pow(10,n.divisibility),w=n.namespaceName?new E.NamespaceId(n.namespaceName):new E.MosaicId(n.id);for(let v=0;v<l.length;++v){let S=We(Ge(l[v].amount),p),k=Number(S.toString()),_;l[v].publicKeyOrAddress.length===64?_=E.PublicAccount.createFromPublicKey(l[v].publicKeyOrAddress,D.networkType).address:_=E.Address.createFromRawAddress(l[v].publicKeyOrAddress);let L=new E.Mosaic(w,E.UInt64.fromUint(k)),O;l[v].message?O=E.PlainMessage.create(l[v].message):O=E.EmptyMessage;let b=D.buildTxn.transfer(_,O,[L]);c.push(b)}for(let v=0;v<f;++v){let S=v*t,k=(v+1)*t,_=c.slice(S,k),L=[];for(let b=0;b<_.length;++b)L.push(_[b].toAggregateV1(o));let O=D.buildTxn.aggregateBonded(L,r);i.push(O)}return i}static getLockFundTransactionFee(){const e=te.currentNetworkProfileConfig.lockedFundsPerAggregate??0;let l=new E.TransactionHash("0".repeat(64),E.TransactionType.AGGREGATE_BONDED_V1);return D.buildTxn.hashLock(new E.Mosaic(new E.NamespaceId("prx.xpx"),E.UInt64.fromUint(e)),E.UInt64.fromUint(Pe.getABTMaxSafeDuration()),l).maxFee.compact()}static async signAllAbtAndAnnounce(e,l){const t=te.currentNetworkProfileConfig.lockedFundsPerAggregate;let n=[],r=[],o=[],i=[];for(let p=0;p<e.length;++p){let w=l.preV2Sign(e[p],te.currentNetworkProfile.generationHash);n.push(w);let v=D.buildTxn.hashLock(new E.Mosaic(new E.NamespaceId(D.nativeToken.fullNamespace.trim()),E.UInt64.fromUint(t)),E.UInt64.fromUint(Pe.getABTMaxSafeDuration()),w),S=l.preV2Sign(v,te.currentNetworkProfile.generationHash);r.push(S),o.push({txnHash:w.hash,block:null}),o.push({txnHash:S.hash,block:null}),i.push({txnHash:w.hash,hashLockHash:S.hash})}let f=!1;for(let p=0;p<r.length;++p)await D.chainAPI.transactionAPI.announce(r[p]);console.log("All LockHash Txn announced, pending ABT announcement...");let c=[];for(;!f;){await new Promise(S=>setTimeout(S,15e3)),console.log("Checking LockHash Txn confirmation...");let w=await D.chainAPI.chainAPI.getBlockchainHeight(),v=n.filter(S=>!c.includes(S.hash));for(let S=0;S<v.length;++S){let k=i.find(L=>L.txnHash===v[S].hash).hashLockHash,_=await D.chainAPI.transactionAPI.getTransactionStatus(k);if(_.group===E.TransactionGroupType.CONFIRMED){let L=_.height.compact(),O=o.find(b=>b.txnHash===k);O.block=L,w>=O.block+1&&(await D.chainAPI.transactionAPI.announceAggregateBonded(v[S]),c.push(v[S].hash))}}c.length===n.length&&(f=!0)}return c}}const vt=Se({__name:"SelectMultisigInput",props:{account:{type:Array,required:!0},selectedMultisig:{type:Object,required:!0}},emits:["select"],setup(s,{emit:e}){const l=e,t=x({}),n=i=>{l("select",i)},r=i=>{t.value[i.key]=!0},o=()=>{t.value={}};return(i,f)=>{const c=xe("Tree");return T(),at(c,{value:s.account,selectionMode:"single","onUpdate:selectionKeys":s.selectedMultisig,expandedKeys:t.value,filter:!0,filterMode:"strict",onNodeSelect:n,onNodeExpand:r,onNodeCollapse:o},null,8,["value","onUpdate:selectionKeys","expandedKeys"])}}}),yt={class:"w-full h-16 mt-0 border border-gray-200 px-2 py-2 rounded-md"},wt={class:"flex"},It=["innerHTML"],xt={class:"flex flex-col ml-2 text-left"},St={class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}},At={class:"mt-2 text-base font-bold"},Nt={class:"ml-auto mt-auto mb-auto mr-6"},Ot=Se({__name:"MultisigInput",props:{selectDefaultAddress:{type:String,required:!0},selectDefaultName:{type:String,required:!0}},setup(s){const e=s,t=Ce().appContext.config.globalProperties.emitter;let n=new Xe("ThemeStyleConfig");n.init();let r=x(n.jdenticonConfig);const o=j(()=>Oe(e.selectDefaultAddress,25,r.value)),i=()=>{t.emit("CLOSE_MULTISIG")};return(f,c)=>{const p=xe("font-awesome-icon");return T(),C("div",yt,[a("div",wt,[a("div",{innerHTML:o.value},null,8,It),a("div",xt,[a("div",St,R(f.$t("transfer.transferFrom"))+" "+R(f.$t("general.multisig")),1),a("div",At,R(s.selectDefaultName),1)]),a("div",Nt,[Z(p,{icon:"times",class:"delete-icon-style",onClick:c[0]||(c[0]=w=>i())})])])])}}}),Tt=Se({name:"SelectInputAccount",emits:["select-account","update:modelValue"],props:["modelValue","selectDefault","initiateBy"],setup(s){const e=x(!1),t=Ce().appContext.config.globalProperties.emitter;let n=new Xe("ThemeStyleConfig");n.init();let r=n.jdenticonConfig;const o=j(()=>{if(q.currentLoggedInWallet){var k=[];return q.currentLoggedInWallet.accounts.concat(q.currentLoggedInWallet.others).forEach(L=>{k.push({value:L.address,label:q.currentLoggedInWallet.convertAddressToName(L.address,!0),isMultiSig:!!L.getDirectParentMultisig().length})}),k.filter(L=>L.isMultiSig==!1)}else return[]}),i=j(()=>{s.selectDefault&&o.value.length&&o.value.find(k=>k.value==s.selectDefault).label}),f=x(s.selectDefault),c={label:i.value,value:f.value},p=x(Oe(s.selectDefault,25,r)),w=(k,_)=>{t.emit("select-account",_),i.value,c.label=k,f.value,c.value=_,p.value=Oe(_,25,r),e.value=!e.value},v=x(""),S=j(()=>{const k=v.value.toLowerCase();return v.value==""?o.value:o.value.filter(_=>Object.values(_).some(L=>String(L).toLowerCase().includes(k)))});return{selectAccount:w,selectedAddress:f,selectedAccountInfo:c,selectedImg:p,accounts:o,toggleSelection:e,selectedAccount:i,jdenticonConfig:r,toSvg:Oe,filterQuery:v,filteredAccounts:S}}}),kt={class:"w-full"},Ct={key:0,class:"account-item-value account-item"},Dt={class:"flex"},Lt=["innerHTML"],Et={class:"flex flex-col ml-2 text-left"},Bt={key:0,class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}},$t={key:1,class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}},Mt={class:"mt-2 text-base font-bold"},Rt={class:"flex"},Ft=["innerHTML"],Pt={class:"text-xs ml-2 font-semibold"};function Vt(s,e,l,t,n,r){const o=xe("Dropdown");return T(),C("div",kt,[Z(o,{modelValue:s.selectedAccountInfo,"onUpdate:modelValue":e[0]||(e[0]=i=>s.selectedAccountInfo=i),style:{width:"100%"},options:s.filteredAccounts,filter:!0,optionLabel:"label",emptyFilterMessage:" ",onChange:e[1]||(e[1]=i=>{s.selectAccount(i.value.label,i.value.value),s.$emit("update:modelValue",i.value.value),s.$emit("select-account",i.value.value)}),class:"h-16 mt-0"},{value:Ie(i=>[i.value?(T(),C("div",Ct,[a("div",Dt,[a("div",{innerHTML:s.selectedImg},null,8,Lt),a("div",Et,[s.initiateBy?(T(),C("div",Bt,R(s.$t("general.initiateBy")),1)):(T(),C("div",$t,R(s.$t("transfer.transferFrom"))+" OR Select Signing Account to initiate Multisig",1)),a("div",Mt,R(i.value.label),1)])])])):J("",!0)]),option:Ie(i=>[a("div",Rt,[a("div",{innerHTML:s.toSvg(i.option.value,20,s.jdenticonConfig)},null,8,Ft),a("div",Pt,R(i.option.label),1)])]),_:1},8,["modelValue","options"])])}const qt=Ze(Tt,[["render",Vt]]);var Ut=ut();const Ye=function(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)};class N extends Error{constructor(e,l,t,...n){Array.isArray(l)&&(l=l.join(" ").trim()),super(l),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,N),this.code=e;for(const r of n)for(const o in r){const i=r[o];this[o]=g.Buffer.isBuffer(i)?i.toString(t.encoding):i==null?i:JSON.parse(JSON.stringify(i))}}}const et=function(s){const e=[];for(let l=0,t=s.length;l<t;l++){const n=s[l];if(n==null||n===!1)e[l]={disabled:!0};else if(typeof n=="string")e[l]={name:n};else if(Ye(n)){if(typeof n.name!="string")throw new N("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${l}`,"when column is an object literal"]);e[l]=n}else throw new N("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(n)} at position ${l}`])}return e};class Ke{constructor(e=100){this.size=e,this.length=0,this.buf=g.Buffer.allocUnsafe(e)}prepend(e){if(g.Buffer.isBuffer(e)){const l=this.length+e.length;if(l>=this.size&&(this.resize(),l>=this.size))throw Error("INVALID_BUFFER_STATE");const t=this.buf;this.buf=g.Buffer.allocUnsafe(this.size),e.copy(this.buf,0),t.copy(this.buf,e.length),this.length+=e.length}else{const l=this.length++;l===this.size&&this.resize();const t=this.clone();this.buf[0]=e,t.copy(this.buf,1,0,l)}}append(e){const l=this.length++;l===this.size&&this.resize(),this.buf[l]=e}clone(){return g.Buffer.from(this.buf.slice(0,this.length))}resize(){const e=this.length;this.size=this.size*2;const l=g.Buffer.allocUnsafe(this.size);this.buf.copy(l,0,0,e),this.buf=l}toString(e){return e?this.buf.slice(0,this.length).toString(e):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}}const Ht=12,Jt=13,jt=10,Kt=32,zt=9,Qt=function(s){return{bomSkipped:!1,bufBytesStart:0,castField:s.cast_function,commenting:!1,error:void 0,enabled:s.from_line===1,escaping:!1,escapeIsQuote:g.Buffer.isBuffer(s.escape)&&g.Buffer.isBuffer(s.quote)&&g.Buffer.compare(s.escape,s.quote)===0,expectedRecordLength:Array.isArray(s.columns)?s.columns.length:void 0,field:new Ke(20),firstLineToHeaders:s.cast_first_line_to_header,needMoreDataSize:Math.max(s.comment!==null?s.comment.length:0,...s.delimiter.map(e=>e.length),s.quote!==null?s.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new Ke(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:s.record_delimiter.length===0?0:Math.max(...s.record_delimiter.map(e=>e.length)),trimChars:[g.Buffer.from(" ",s.encoding)[0],g.Buffer.from("	",s.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[g.Buffer.from(g.Buffer.from([Jt],"utf8").toString(),s.encoding),g.Buffer.from(g.Buffer.from([jt],"utf8").toString(),s.encoding),g.Buffer.from(g.Buffer.from([Ht],"utf8").toString(),s.encoding),g.Buffer.from(g.Buffer.from([Kt],"utf8").toString(),s.encoding),g.Buffer.from(g.Buffer.from([zt],"utf8").toString(),s.encoding)]}},Wt=function(s){return s.replace(/([A-Z])/g,function(e,l){return"_"+l.toLowerCase()})},ze=function(s){const e={};for(const t in s)e[Wt(t)]=s[t];if(e.encoding===void 0||e.encoding===!0)e.encoding="utf8";else if(e.encoding===null||e.encoding===!1)e.encoding=null;else if(typeof e.encoding!="string"&&e.encoding!==null)throw new N("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(e.encoding)}`],e);if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)throw new N("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,",`got ${JSON.stringify(e.bom)}`],e);if(e.cast_function=null,e.cast===void 0||e.cast===null||e.cast===!1||e.cast==="")e.cast=void 0;else if(typeof e.cast=="function")e.cast_function=e.cast,e.cast=!0;else if(e.cast!==!0)throw new N("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(e.cast)}`],e);if(e.cast_date===void 0||e.cast_date===null||e.cast_date===!1||e.cast_date==="")e.cast_date=!1;else if(e.cast_date===!0)e.cast_date=function(t){const n=Date.parse(t);return isNaN(n)?t:new Date(n)};else if(typeof e.cast_date!="function")throw new N("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(e.cast_date)}`],e);if(e.cast_first_line_to_header=null,e.columns===!0)e.cast_first_line_to_header=void 0;else if(typeof e.columns=="function")e.cast_first_line_to_header=e.columns,e.columns=!0;else if(Array.isArray(e.columns))e.columns=et(e.columns);else if(e.columns===void 0||e.columns===null||e.columns===!1)e.columns=!1;else throw new N("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(e.columns)}`],e);if(e.group_columns_by_name===void 0||e.group_columns_by_name===null||e.group_columns_by_name===!1)e.group_columns_by_name=!1;else{if(e.group_columns_by_name!==!0)throw new N("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",`got ${JSON.stringify(e.group_columns_by_name)}`],e);if(e.columns===!1)throw new N("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],e)}if(e.comment===void 0||e.comment===null||e.comment===!1||e.comment==="")e.comment=null;else if(typeof e.comment=="string"&&(e.comment=g.Buffer.from(e.comment,e.encoding)),!g.Buffer.isBuffer(e.comment))throw new N("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(e.comment)}`],e);if(e.comment_no_infix===void 0||e.comment_no_infix===null||e.comment_no_infix===!1)e.comment_no_infix=!1;else if(e.comment_no_infix!==!0)throw new N("CSV_INVALID_OPTION_COMMENT",["Invalid option comment_no_infix:","value must be a boolean,",`got ${JSON.stringify(e.comment_no_infix)}`],e);const l=JSON.stringify(e.delimiter);if(Array.isArray(e.delimiter)||(e.delimiter=[e.delimiter]),e.delimiter.length===0)throw new N("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${l}`],e);if(e.delimiter=e.delimiter.map(function(t){if(t==null||t===!1)return g.Buffer.from(",",e.encoding);if(typeof t=="string"&&(t=g.Buffer.from(t,e.encoding)),!g.Buffer.isBuffer(t)||t.length===0)throw new N("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${l}`],e);return t}),e.escape===void 0||e.escape===!0?e.escape=g.Buffer.from('"',e.encoding):typeof e.escape=="string"?e.escape=g.Buffer.from(e.escape,e.encoding):(e.escape===null||e.escape===!1)&&(e.escape=null),e.escape!==null&&!g.Buffer.isBuffer(e.escape))throw new Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(e.escape)}`);if(e.from===void 0||e.from===null)e.from=1;else if(typeof e.from=="string"&&/\d+/.test(e.from)&&(e.from=parseInt(e.from)),Number.isInteger(e.from)){if(e.from<0)throw new Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(s.from)}`)}else throw new Error(`Invalid Option: from must be an integer, got ${JSON.stringify(e.from)}`);if(e.from_line===void 0||e.from_line===null)e.from_line=1;else if(typeof e.from_line=="string"&&/\d+/.test(e.from_line)&&(e.from_line=parseInt(e.from_line)),Number.isInteger(e.from_line)){if(e.from_line<=0)throw new Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(s.from_line)}`)}else throw new Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(s.from_line)}`);if(e.ignore_last_delimiters===void 0||e.ignore_last_delimiters===null)e.ignore_last_delimiters=!1;else if(typeof e.ignore_last_delimiters=="number")e.ignore_last_delimiters=Math.floor(e.ignore_last_delimiters),e.ignore_last_delimiters===0&&(e.ignore_last_delimiters=!1);else if(typeof e.ignore_last_delimiters!="boolean")throw new N("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(e.ignore_last_delimiters)}`],e);if(e.ignore_last_delimiters===!0&&e.columns===!1)throw new N("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],e);if(e.info===void 0||e.info===null||e.info===!1)e.info=!1;else if(e.info!==!0)throw new Error(`Invalid Option: info must be true, got ${JSON.stringify(e.info)}`);if(e.max_record_size===void 0||e.max_record_size===null||e.max_record_size===!1)e.max_record_size=0;else if(!(Number.isInteger(e.max_record_size)&&e.max_record_size>=0))if(typeof e.max_record_size=="string"&&/\d+/.test(e.max_record_size))e.max_record_size=parseInt(e.max_record_size);else throw new Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(e.max_record_size)}`);if(e.objname===void 0||e.objname===null||e.objname===!1)e.objname=void 0;else if(g.Buffer.isBuffer(e.objname)){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty buffer");e.encoding===null||(e.objname=e.objname.toString(e.encoding))}else if(typeof e.objname=="string"){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty string")}else if(typeof e.objname!="number")throw new Error(`Invalid Option: objname must be a string or a buffer, got ${e.objname}`);if(e.objname!==void 0){if(typeof e.objname=="number"){if(e.columns!==!1)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(e.columns===!1)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index")}if(e.on_record===void 0||e.on_record===null)e.on_record=void 0;else if(typeof e.on_record!="function")throw new N("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(e.on_record)}`],e);if(e.quote===null||e.quote===!1||e.quote==="")e.quote=null;else if(e.quote===void 0||e.quote===!0?e.quote=g.Buffer.from('"',e.encoding):typeof e.quote=="string"&&(e.quote=g.Buffer.from(e.quote,e.encoding)),!g.Buffer.isBuffer(e.quote))throw new Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(e.quote)}`);if(e.raw===void 0||e.raw===null||e.raw===!1)e.raw=!1;else if(e.raw!==!0)throw new Error(`Invalid Option: raw must be true, got ${JSON.stringify(e.raw)}`);if(e.record_delimiter===void 0)e.record_delimiter=[];else if(typeof e.record_delimiter=="string"||g.Buffer.isBuffer(e.record_delimiter)){if(e.record_delimiter.length===0)throw new N("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);e.record_delimiter=[e.record_delimiter]}else if(!Array.isArray(e.record_delimiter))throw new N("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);if(e.record_delimiter=e.record_delimiter.map(function(t,n){if(typeof t!="string"&&!g.Buffer.isBuffer(t))throw new N("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${n},`,`got ${JSON.stringify(t)}`],e);if(t.length===0)throw new N("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${n},`,`got ${JSON.stringify(t)}`],e);return typeof t=="string"&&(t=g.Buffer.from(t,e.encoding)),t}),typeof e.relax_column_count!="boolean")if(e.relax_column_count===void 0||e.relax_column_count===null)e.relax_column_count=!1;else throw new Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(e.relax_column_count)}`);if(typeof e.relax_column_count_less!="boolean")if(e.relax_column_count_less===void 0||e.relax_column_count_less===null)e.relax_column_count_less=!1;else throw new Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(e.relax_column_count_less)}`);if(typeof e.relax_column_count_more!="boolean")if(e.relax_column_count_more===void 0||e.relax_column_count_more===null)e.relax_column_count_more=!1;else throw new Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(e.relax_column_count_more)}`);if(typeof e.relax_quotes!="boolean")if(e.relax_quotes===void 0||e.relax_quotes===null)e.relax_quotes=!1;else throw new Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(e.relax_quotes)}`);if(typeof e.skip_empty_lines!="boolean")if(e.skip_empty_lines===void 0||e.skip_empty_lines===null)e.skip_empty_lines=!1;else throw new Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(e.skip_empty_lines)}`);if(typeof e.skip_records_with_empty_values!="boolean")if(e.skip_records_with_empty_values===void 0||e.skip_records_with_empty_values===null)e.skip_records_with_empty_values=!1;else throw new Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(e.skip_records_with_empty_values)}`);if(typeof e.skip_records_with_error!="boolean")if(e.skip_records_with_error===void 0||e.skip_records_with_error===null)e.skip_records_with_error=!1;else throw new Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(e.skip_records_with_error)}`);if(e.rtrim===void 0||e.rtrim===null||e.rtrim===!1)e.rtrim=!1;else if(e.rtrim!==!0)throw new Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(e.rtrim)}`);if(e.ltrim===void 0||e.ltrim===null||e.ltrim===!1)e.ltrim=!1;else if(e.ltrim!==!0)throw new Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(e.ltrim)}`);if(e.trim===void 0||e.trim===null||e.trim===!1)e.trim=!1;else if(e.trim!==!0)throw new Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(e.trim)}`);if(e.trim===!0&&s.ltrim!==!1?e.ltrim=!0:e.ltrim!==!0&&(e.ltrim=!1),e.trim===!0&&s.rtrim!==!1?e.rtrim=!0:e.rtrim!==!0&&(e.rtrim=!1),e.to===void 0||e.to===null)e.to=-1;else if(typeof e.to=="string"&&/\d+/.test(e.to)&&(e.to=parseInt(e.to)),Number.isInteger(e.to)){if(e.to<=0)throw new Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(s.to)}`)}else throw new Error(`Invalid Option: to must be an integer, got ${JSON.stringify(s.to)}`);if(e.to_line===void 0||e.to_line===null)e.to_line=-1;else if(typeof e.to_line=="string"&&/\d+/.test(e.to_line)&&(e.to_line=parseInt(e.to_line)),Number.isInteger(e.to_line)){if(e.to_line<=0)throw new Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(s.to_line)}`)}else throw new Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(s.to_line)}`);return e},Qe=function(s){return s.every(e=>e==null||e.toString&&e.toString().trim()==="")},Gt=13,Xt=10,ge={utf8:g.Buffer.from([239,187,191]),utf16le:g.Buffer.from([255,254])},Zt=function(s={}){const e={bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},l=ze(s);return{info:e,original_options:s,options:l,state:Qt(l),__needMoreData:function(t,n,r){if(r)return!1;const{encoding:o,escape:i,quote:f}=this.options,{quoting:c,needMoreDataSize:p,recordDelimiterMaxLength:w}=this.state,v=n-t-1,S=Math.max(p,w===0?g.Buffer.from(`\r
`,o).length:w,c?(i===null?0:i.length)+f.length:0,c?f.length+w:0);return v<S},parse:function(t,n,r,o){const{bom:i,comment_no_infix:f,encoding:c,from_line:p,ltrim:w,max_record_size:v,raw:S,relax_quotes:k,rtrim:_,skip_empty_lines:L,to:O,to_line:b}=this.options;let{comment:y,escape:F,quote:U,record_delimiter:ne}=this.options;const{bomSkipped:pe,previousBuf:se,rawBuffer:de,escapeIsQuote:le}=this.state;let I;if(se===void 0)if(t===void 0){o();return}else I=t;else se!==void 0&&t===void 0?I=se:I=g.Buffer.concat([se,t]);if(pe===!1)if(i===!1)this.state.bomSkipped=!0;else if(I.length<3){if(n===!1){this.state.previousBuf=I;return}}else{for(const B in ge)if(ge[B].compare(I,0,ge[B].length)===0){const K=ge[B].length;this.state.bufBytesStart+=K,I=I.slice(K),this.options=ze({...this.original_options,encoding:B}),{comment:y,escape:F,quote:U}=this.options;break}this.state.bomSkipped=!0}const re=I.length;let h;for(h=0;h<re&&!this.__needMoreData(h,re,n);h++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1),b!==-1&&this.info.lines>b){this.state.stop=!0,o();return}this.state.quoting===!1&&ne.length===0&&this.__autoDiscoverRecordDelimiter(I,h)&&(ne=this.options.record_delimiter);const B=I[h];if(S===!0&&de.append(B),(B===Gt||B===Xt)&&this.state.wasRowDelimiter===!1&&(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(F!==null&&this.state.quoting===!0&&this.__isEscape(I,h,B)&&h+F.length<re)if(le){if(this.__isQuote(I,h+F.length)){this.state.escaping=!0,h+=F.length-1;continue}}else{this.state.escaping=!0,h+=F.length-1;continue}if(this.state.commenting===!1&&this.__isQuote(I,h))if(this.state.quoting===!0){const P=I[h+U.length],ae=_&&this.__isCharTrimable(I,h+U.length),ie=y!==null&&this.__compareBytes(y,I,h+U.length,P),Y=this.__isDelimiter(I,h+U.length,P),ue=ne.length===0?this.__autoDiscoverRecordDelimiter(I,h+U.length):this.__isRecordDelimiter(P,I,h+U.length);if(F!==null&&this.__isEscape(I,h,B)&&this.__isQuote(I,h+F.length))h+=F.length-1;else if(!P||Y||ue||ie||ae){this.state.quoting=!1,this.state.wasQuoting=!0,h+=U.length-1;continue}else if(k===!1){const ce=this.__error(new N("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(P)}"`,`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(ce!==void 0)return ce}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(U),h+=U.length-1}else if(this.state.field.length!==0){if(k===!1){const P=this.__infoField(),ae=Object.keys(ge).map(Y=>ge[Y].equals(this.state.field.toString())?Y:!1).filter(Boolean)[0],ie=this.__error(new N("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(P.column)} at line ${P.lines}, value is ${JSON.stringify(this.state.field.toString(c))}`,ae?`(${ae} bom)`:void 0],this.options,P,{field:this.state.field}));if(ie!==void 0)return ie}}else{this.state.quoting=!0,h+=U.length-1;continue}if(this.state.quoting===!1){const P=this.__isRecordDelimiter(B,I,h);if(P!==0){if(this.state.commenting&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0)this.info.comment_lines++;else{if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=p){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),h+=P-1;continue}if(L===!0&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0){this.info.empty_lines++,h+=P-1;continue}this.info.bytes=this.state.bufBytesStart+h;const ue=this.__onField();if(ue!==void 0)return ue;this.info.bytes=this.state.bufBytesStart+h+P;const ce=this.__onRecord(r);if(ce!==void 0)return ce;if(O!==-1&&this.info.records>=O){this.state.stop=!0,o();return}}this.state.commenting=!1,h+=P-1;continue}if(this.state.commenting)continue;if((y===null?0:this.__compareBytes(y,I,h,B))!==0&&(f===!1||this.state.field.length===0)){this.state.commenting=!0;continue}const ie=this.__isDelimiter(I,h,B);if(ie!==0){this.info.bytes=this.state.bufBytesStart+h;const Y=this.__onField();if(Y!==void 0)return Y;h+=ie-1;continue}}}if(this.state.commenting===!1&&v!==0&&this.state.record_length+this.state.field.length>v)return this.__error(new N("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${v}`,`at line ${this.info.lines}`],this.options,this.__infoField()));const K=w===!1||this.state.quoting===!0||this.state.field.length!==0||!this.__isCharTrimable(I,h),oe=_===!1||this.state.wasQuoting===!1;if(K===!0&&oe===!0)this.state.field.append(B);else{if(_===!0&&!this.__isCharTrimable(I,h))return this.__error(new N("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()));K===!1&&(h+=this.__isCharTrimable(I,h)-1);continue}}if(n===!0)if(this.state.quoting===!0){const B=this.__error(new N("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField()));if(B!==void 0)return B}else if(this.state.wasQuoting===!0||this.state.record.length!==0||this.state.field.length!==0){this.info.bytes=this.state.bufBytesStart+h;const B=this.__onField();if(B!==void 0)return B;const K=this.__onRecord(r);if(K!==void 0)return K}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.bufBytesStart+=h,this.state.previousBuf=I.slice(h);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(t){const{columns:n,group_columns_by_name:r,encoding:o,info:i,from:f,relax_column_count:c,relax_column_count_less:p,relax_column_count_more:w,raw:v,skip_records_with_empty_values:S}=this.options,{enabled:k,record:_}=this.state;if(k===!1)return this.__resetRecord();const L=_.length;if(n===!0){if(S===!0&&Qe(_)){this.__resetRecord();return}return this.__firstLineToColumns(_)}if(n===!1&&this.info.records===0&&(this.state.expectedRecordLength=L),L!==this.state.expectedRecordLength){const O=n===!1?new N("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${L} on line ${this.info.lines}`],this.options,this.__infoField(),{record:_}):new N("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${n.length},`,`got ${L} on line ${this.info.lines}`],this.options,this.__infoField(),{record:_});if(c===!0||p===!0&&L<this.state.expectedRecordLength||w===!0&&L>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=O;else{const b=this.__error(O);if(b)return b}}if(S===!0&&Qe(_)){this.__resetRecord();return}if(this.state.recordHasError===!0){this.__resetRecord(),this.state.recordHasError=!1;return}if(this.info.records++,f===1||this.info.records>=f){const{objname:O}=this.options;if(n!==!1){const b={};for(let y=0,F=_.length;y<F;y++)n[y]===void 0||n[y].disabled||(r===!0&&b[n[y].name]!==void 0?Array.isArray(b[n[y].name])?b[n[y].name]=b[n[y].name].concat(_[y]):b[n[y].name]=[b[n[y].name],_[y]]:b[n[y].name]=_[y]);if(v===!0||i===!0){const y=Object.assign({record:b},v===!0?{raw:this.state.rawBuffer.toString(o)}:{},i===!0?{info:this.__infoRecord()}:{}),F=this.__push(O===void 0?y:[b[O],y],t);if(F)return F}else{const y=this.__push(O===void 0?b:[b[O],b],t);if(y)return y}}else if(v===!0||i===!0){const b=Object.assign({record:_},v===!0?{raw:this.state.rawBuffer.toString(o)}:{},i===!0?{info:this.__infoRecord()}:{}),y=this.__push(O===void 0?b:[_[O],b],t);if(y)return y}else{const b=this.__push(O===void 0?_:[_[O],_],t);if(b)return b}}this.__resetRecord()},__firstLineToColumns:function(t){const{firstLineToHeaders:n}=this.state;try{const r=n===void 0?t:n.call(null,t);if(!Array.isArray(r))return this.__error(new N("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(r)}`],this.options,this.__infoField(),{headers:r}));const o=et(r);this.state.expectedRecordLength=o.length,this.options.columns=o,this.__resetRecord();return}catch(r){return r}},__resetRecord:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){const{cast:t,encoding:n,rtrim:r,max_record_size:o}=this.options,{enabled:i,wasQuoting:f}=this.state;if(i===!1)return this.__resetField();let c=this.state.field.toString(n);if(r===!0&&f===!1&&(c=c.trimRight()),t===!0){const[p,w]=this.__cast(c);if(p!==void 0)return p;c=w}this.state.record.push(c),o!==0&&typeof c=="string"&&(this.state.record_length+=c.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(t,n){const{on_record:r}=this.options;if(r!==void 0){const o=this.__infoRecord();try{t=r.call(null,t,o)}catch(i){return i}if(t==null)return}n(t)},__cast:function(t){const{columns:n,relax_column_count:r}=this.options;if(Array.isArray(n)===!0&&r&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(this.state.castField!==null)try{const i=this.__infoField();return[void 0,this.state.castField.call(null,t,i)]}catch(i){return[i]}if(this.__isFloat(t))return[void 0,parseFloat(t)];if(this.options.cast_date!==!1){const i=this.__infoField();return[void 0,this.options.cast_date.call(null,t,i)]}return[void 0,t]},__isCharTrimable:function(t,n){return((o,i)=>{const{timchars:f}=this.state;e:for(let c=0;c<f.length;c++){const p=f[c];for(let w=0;w<p.length;w++)if(p[w]!==o[i+w])continue e;return p.length}return 0})(t,n)},__isFloat:function(t){return t-parseFloat(t)+1>=0},__compareBytes:function(t,n,r,o){if(t[0]!==o)return 0;const i=t.length;for(let f=1;f<i;f++)if(t[f]!==n[r+f])return 0;return i},__isDelimiter:function(t,n,r){const{delimiter:o,ignore_last_delimiters:i}=this.options;if(i===!0&&this.state.record.length===this.options.columns.length-1)return 0;if(i!==!1&&typeof i=="number"&&this.state.record.length===i-1)return 0;e:for(let f=0;f<o.length;f++){const c=o[f];if(c[0]===r){for(let p=1;p<c.length;p++)if(c[p]!==t[n+p])continue e;return c.length}}return 0},__isRecordDelimiter:function(t,n,r){const{record_delimiter:o}=this.options,i=o.length;e:for(let f=0;f<i;f++){const c=o[f],p=c.length;if(c[0]===t){for(let w=1;w<p;w++)if(c[w]!==n[r+w])continue e;return c.length}}return 0},__isEscape:function(t,n,r){const{escape:o}=this.options;if(o===null)return!1;const i=o.length;if(o[0]===r){for(let f=0;f<i;f++)if(o[f]!==t[n+f])return!1;return!0}return!1},__isQuote:function(t,n){const{quote:r}=this.options;if(r===null)return!1;const o=r.length;for(let i=0;i<o;i++)if(r[i]!==t[n+i])return!1;return!0},__autoDiscoverRecordDelimiter:function(t,n){const{encoding:r}=this.options,o=[g.Buffer.from(`\r
`,r),g.Buffer.from(`
`,r),g.Buffer.from("\r",r)];e:for(let i=0;i<o.length;i++){const f=o[i].length;for(let c=0;c<f;c++)if(o[i][c]!==t[n+c])continue e;return this.options.record_delimiter.push(o[i]),this.state.recordDelimiterMaxLength=o[i].length,o[i].length}return 0},__error:function(t){const{encoding:n,raw:r,skip_records_with_error:o}=this.options,i=typeof t=="string"?new Error(t):t;if(o){this.state.recordHasError=!0,this.options.on_skip!==void 0&&this.options.on_skip(i,r?this.state.rawBuffer.toString(n):void 0);return}else return i},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){const{columns:t,raw:n,encoding:r}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:t===!0,index:this.state.record.length,raw:n?this.state.rawBuffer.toString(r):void 0}},__infoField:function(){const{columns:t}=this.options,n=Array.isArray(t);return{...this.__infoRecord(),column:n===!0?t.length>this.state.record.length?t[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}};class Yt extends Ut.Transform{constructor(e={}){super({readableObjectMode:!0,...e,encoding:null}),this.api=Zt(e),this.api.options.on_skip=(l,t)=>{this.emit("skip",l,t)},this.state=this.api.state,this.options=this.api.options,this.info=this.api.info}_transform(e,l,t){if(this.state.stop===!0)return;const n=this.api.parse(e,!1,r=>{this.push(r)},()=>{this.push(null),this.end(),this.on("end",this.destroy)});n!==void 0&&(this.state.stop=!0),t(n)}_flush(e){if(this.state.stop===!0)return;const l=this.api.parse(void 0,!0,t=>{this.push(t)},()=>{this.push(null),this.on("end",this.destroy)});e(l)}}const en=function(){let s,e,l;for(const n in arguments){const r=arguments[n],o=typeof r;if(s===void 0&&(typeof r=="string"||g.Buffer.isBuffer(r)))s=r;else if(e===void 0&&Ye(r))e=r;else if(l===void 0&&o==="function")l=r;else throw new N("CSV_INVALID_ARGUMENT",["Invalid argument:",`got ${JSON.stringify(r)} at index ${n}`],e||{})}const t=new Yt(e);if(l){const n=e===void 0||e.objname===void 0?[]:{};t.on("readable",function(){let r;for(;(r=this.read())!==null;)e===void 0||e.objname===void 0?n.push(r):n[r[0]]=r[1]}),t.on("error",function(r){l(r,void 0,t.api.__infoDataSet())}),t.on("end",function(){l(void 0,n,t.api.__infoDataSet())})}if(s!==void 0){const n=function(){t.write(s),t.end()};typeof setImmediate=="function"?setImmediate(n):setTimeout(n,0)}return t},Ae=s=>(_t("data-v-63d88569"),s=s(),ht(),s),tn={class:"container"},nn={class:"p-2"},sn={class:"flex gap-1"},rn={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},on={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},ln={key:0,class:"error error_box",role:"alert"},an={key:1,class:"mt-3"},un={class:"p-2"},cn={class:"flex flex-col-reverse"},fn={key:0,class:"error error_box"},dn={key:0},mn={style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},_n={class:"text-tsm text-gray-400"},hn={key:1},gn={style:{display:"flex","justify-content":"space-between"}},pn={class:"text-sm"},bn={class:"text-tsm text-gray-500"},vn=Ae(()=>a("label",{class:"font-medium text-gray-400",for:"floatingSelect"},"Sirius Digital Asset",-1)),yn={class:"p-2"},wn={class:"flex flex-col-reverse"},In=Ae(()=>a("label",{class:"font-medium text-gray-400",for:"floatingSelect"},"Transactions per aggregate",-1)),xn={class:"p-2"},Sn={class:"border rounded-md border-gray-200 mb-3 w-full"},An={key:0,class:"error error_box"},Nn={class:"p-2"},On={key:0,class:"error error_box",role:"alert"},Tn={key:1,class:"error error_box",role:"alert"},kn={key:2,class:"error error_box",role:"alert"},Cn={key:0,class:"p-2 overflow-auto"},Dn={class:"table table-auto w-full"},Ln=mt('<div class="table-header-group" data-v-63d88569><div class="table-row" data-v-63d88569><div class="table-cell border-b-2 font-semibold p-4 pt-0 pb-3" data-v-63d88569>Recipient (Public Key or Address)</div><div class="table-cell border-b-2 font-semibold p-4 pt-0 pb-3" data-v-63d88569>Amount</div><div class="table-cell border-b-2 font-semibold p-4 pt-0 pb-3" data-v-63d88569>Message</div></div></div>',1),En={class:"table-row-group"},Bn={class:"table-cell border-b p-4 pt-0 pb-3"},$n={class:"table-cell border-b p-4 pt-0 pb-3"},Mn={class:"table-cell border-b p-4 pt-0 pb-3"},Rn={class:"p-2"},Fn={class:"mb-3 w-full px-2 py-1"},Pn=Ae(()=>a("div",{class:"font-semibold"},"Enter your password to continue",-1)),Vn={key:0,class:"error error_box"},qn=["disabled"],Un={key:2,class:"blue-btn px-3 py-3 text-md flex items-center",type:"button",disabled:""},Hn=Ae(()=>a("svg",{class:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),Jn={key:3,class:"font-semibold text-red-600 mt-2",role:"alert"},jn={key:4,class:"font-semibold text-red-600 mt-2",role:"alert"},Kn={key:1,class:"p-2 overflow-auto"},zn={class:"table w-full"},Qn=Ae(()=>a("div",{class:"table-header-group"},[a("div",{class:"table-row"},[a("div",{class:"table-cell border-b-2 p-4 pt-0 pb-3"},"Transaction Hash")])],-1)),Wn={class:"table-row-group"},Gn={class:"table-cell border-b p-4 pt-0 pb-3"},Xn=["href"],Zn=Se({__name:"SiriusDistributionForm",setup(s){const l=Ce().appContext.config.globalProperties.emitter;j(()=>D.nativeToken.label);const t=x(!1),n=x(""),r=x(""),o=x(""),i=x(!1),f=x({}),c=x(!1),p=x(""),w=x(!1),v=j(()=>c.value),S=x(""),{t:k}=ct(),_=x(""),L=j(()=>!!n.value);let O=x([]),b=x(null),y=x(10),F=x([]),U=x(0),ne=x(0),pe=x([]),se=x(!1),de=x(!1),le=x(!1),I=x(""),re=x(!1),h=x(""),B=x(""),K=x(""),oe=x(!1),P=async()=>{se.value=!1,b.value=null;let d=await he.scanAsset(o.value?o.value:X.value?X.value.publicKey:"");O.value=d,d.length===0&&(se.value=!0)},ae=[{label:"5",value:5},{label:"10",value:10},{label:"15",value:15},{label:"20",value:20}],ie=async()=>{var Re;if(K.value="",re.value=!1,oe.value||le.value||I.value)return;if(b.value===null){h.value="Please select SDA";return}else if(U.value===0){B.value="No recipient to distribute";return}else if(S.value&&!fe.verifyWalletPassword(q.currentLoggedInWallet.name,te.chainNetworkName,S.value)){_.value=k("general.walletPasswordInvalid",{name:q.currentLoggedInWallet.name});return}let d=Math.ceil(U.value/y.value),m=d*he.getLockFundTransactionFee(),H=d*te.currentNetworkProfileConfig.lockedFundsPerAggregate,$=O.value.find(G=>G.id===b.value.id);const u=await D.chainAPI.nodeAPI.getNodeTime();let M=he.createDistributeAggregateTransactions(o.value?o.value:X.value.publicKey,F.value,y.value,$,new E.UInt64(u.sendTimeStamp)),V=ke(M.map(G=>G.maxFee.compact())),me=ke(m,H,V)/Math.pow(10,D.nativeToken.divisibility);const z=fe.createPassword(S.value);let Q;if(Ee.value){let G=$e.value.cosignerList;if(G.length>1)Q=p.value;else{let Fe=(Re=q.currentLoggedInWallet)==null?void 0:Re.accounts.find(lt=>lt.publicKey==G[0].publicKey);Q=Fe?Fe.address:""}}let W;Q?W=q.currentLoggedInWallet.accounts.find(G=>G.address===Q):W=q.currentLoggedInWallet.accounts.find(G=>G.address===X.value.address);let Te=fe.decryptPrivateKey(z,W.encrypted,W.iv).toUpperCase(),ye=he.createAccount(Te),_e=(await he.scanAsset(ye.publicKey)).find(G=>G.namespaceName===D.nativeToken.fullNamespace.trim());if(_e){if(me>_e.amount){K.value=`Initiator do not have enough XPX (${_e.amount}), need ${me}`;return}}else{K.value="Initiator do not have any XPX";return}oe.value=!0;let ot=await he.signAllAbtAndAnnounce(M,ye);oe.value=!1,re.value=!0,pe.value=ot};const Y=async d=>await(()=>new Promise(($,u)=>{const M=[],V=en(d,{trim:!0,skip_empty_lines:!0});V.on("readable",function(){let ee;for(;(ee=V.read())!==null;)M.push(ee)}),V.on("end",function(){$(M)})}))();let ue=d=>{de.value=!1;const m=d.target.files[0],H=new FileReader;H.onload=async $=>{const u=$.target.result;try{let M=[],V=u.split(/\r?\n/);for(let z=1;z<V.length;z++){let Q=V[z].trim();if(Q==="")break;const W=await Y(Q);M.push({publicKeyOrAddress:W[0][0],amount:W[0][1],message:W[0][2]?W[0][2]:""})}let ee=!1;F.value=[];let me=[];if(M&&M.length)for(let z=0;z<M.length;++z){let Q=M[z].publicKeyOrAddress.trim().replaceAll("-",""),W=M[z].amount.trim(),ve=parseFloat(M[z].amount.trim()),Te=M[z].message;if(Q.length===64){if(!E.Convert.isHexString(Q)){ee=!0;break}}else if(Q.length===40){if(E.Address.createFromRawAddress(Q).networkType!==D.networkType){ee=!0;break}}else{ee=!0;break}let ye=ve.toString().length;if(isNaN(ve)){ee=!0;break}else if(ye!==W.length){let _e=W.length-ye;if(ve.toString()+"0".repeat(_e)!==W){ee=!0;break}}let Me={publicKeyOrAddress:Q,amount:ve,message:Te};me.push(Me)}ee?(de.value=!0,F.value=[],U.value=0,ne.value=0):(U.value=M.length,ne.value=ke(me.map(z=>z.amount)),F.value=me)}catch{de.value=!0}},H.readAsText(m)},ce=d=>{let m=te.currentNetworkProfile.chainExplorer;return m.url+"/"+m.hashRoute+"/"+d};x(!1);let De=d=>{if(d){let m=O.value.find(H=>H.id===d.id);ne.value>m.amount?le.value=!0:le.value=!1}else le.value=!1},Le=d=>{if(d){let m=O.value.find($=>$.id===d.id);F.value.find($=>{let u=Ge($.amount),M=We(u,Math.pow(10,m.divisibility)),V=Number(M.toString());return Math.trunc(V)!==V})?I.value="Invalid distribution amount, maximum decimal place is "+m.divisibility:I.value=""}else I.value=""};const X=x(),be=j(()=>{if(!q.currentLoggedInWallet)return[];if(q.currentLoggedInWallet.others){const d=q.currentLoggedInWallet.accounts.map($=>$),H=q.currentLoggedInWallet.others.filter($=>$.type!="DELEGATE").map($=>$);return d.concat(H)}else return q.currentLoggedInWallet.accounts.map(m=>m)});X.value=be.value[0],P();const Ne=x(X.value.address),Ee=j(()=>ft(X.value.address)),Be=j(()=>{const d=q.currentLoggedInWallet;if(!d)return[];let m=d.accounts.find(u=>u.address==X.value.address);if(!m)return[];var $=m.multisigInfo.filter(u=>u.level<0).map((u,M)=>({key:M.toString(),label:d.contacts.find(V=>V.address==fe.createAddressFromPublicKey(u.publicKey,D.networkType).plain())?d.contacts.find(V=>V.address==fe.createAddressFromPublicKey(u.publicKey,D.networkType).plain()).name:d.accounts.find(V=>V.publicKey==u.publicKey)?d.accounts.find(V=>V.publicKey==u.publicKey).name:"MULTISIG-"+fe.createAddressFromPublicKey(u.publicKey,D.networkType).plain().slice(-4),data:u.publicKey,selectable:!0}));return $}),tt=j(()=>Be.value.length!=0),nt=d=>{i.value=!1,n.value=fe.createAddressFromPublicKey(d.data,D.networkType).plain(),r.value=d.label,o.value=d.data,p.value=X.value.address,f.value[d.key]=!0,P()},it=d=>q.currentLoggedInWallet.accounts.find(m=>m.publicKey==d),$e=j(()=>{const d=be.value.find($=>{var u;return $.address==((u=X.value)==null?void 0:u.address)});let m=gt.getCosignerInWallet(d.publicKey),H={hasCosigner:m.hasCosigner,cosignerList:[]};return m.cosignerList.forEach($=>{const u=it($);u&&H.cosignerList.push({publicKey:$,name:u.name,balance:u.balance,address:u.address})}),H}),st=j(()=>we.convertToExact(te.currentNetworkProfileConfig.lockedFundsPerAggregate,D.nativeToken.divisibility));j(()=>we.convertToCurrency(te.currentNetworkProfileConfig.lockedFundsPerAggregate,D.nativeToken.divisibility));const rt=j(()=>te.currentNetworkProfile?we.convertToExact(dt.getLockFundFee(),D.nativeToken.divisibility):0);if(j(()=>st.value+rt.value),Ee.value){let d=$e.value.cosignerList;d.length>0?(p.value=q.currentLoggedInWallet.accounts.find(m=>m.publicKey==d[0].publicKey).address,c.value=!1,t.value=!1):c.value=!0}return Ve(b,d=>{De(d),Le(d)}),Ve(ne,d=>{De(b.value),Le(b.value)}),l.on("CLOSE_MULTISIG",()=>{n.value="",r.value="",o.value="",P()}),l.on("select-account",d=>{for(let m=0;m<be.value.length;m++)be.value[m].address==d&&(X.value=be.value[m],P(),Ne.value=X.value.address)}),(d,m)=>{const H=xe("font-awesome-icon"),$=xe("Sidebar");return T(),C("div",tn,[a("div",nn,[a("div",sn,[Z(qt,{modelValue:Ne.value,"onUpdate:modelValue":m[0]||(m[0]=u=>Ne.value=u),initiateBy:L.value,selectDefault:Ne.value},null,8,["modelValue","initiateBy","selectDefault"]),tt.value?(T(),C("div",{key:0,onClick:m[1]||(m[1]=u=>i.value=!i.value),class:"border rounded-md cursor-pointer flex flex-col justify-around p-2 h-16 w-18 mt-auto"},[Z(H,{icon:"id-card-alt",class:"text-blue-primary ml-auto mr-auto"}),a("div",rn,R(d.$t("general.select")),1),a("div",on,R(d.$t("general.multisig")),1)])):J("",!0)]),Z($,{visible:i.value,"onUpdate:visible":m[3]||(m[3]=u=>i.value=u),baseZIndex:1e4,position:"full"},{default:Ie(()=>[Z(vt,{account:Be.value,selectedMultisig:f.value,onSelect:m[2]||(m[2]=u=>nt(u))},null,8,["account","selectedMultisig"])]),_:1},8,["visible"]),A(se)?(T(),C("div",ln," No SDA found ")):J("",!0),n.value?(T(),C("div",an,[Z(Ot,{"select-default-address":n.value,"select-default-name":r.value},null,8,["select-default-address","select-default-name"])])):J("",!0)]),a("div",un,[a("div",null,[a("div",cn,[A(h)!=""?(T(),C("div",fn,R(A(h)),1)):J("",!0),Z(A(He),{modelValue:A(b),"onUpdate:modelValue":m[4]||(m[4]=u=>Ue(b)?b.value=u:b=u),options:A(O),placeholder:"Select SDA to distribute",style:{width:"100%"},filter:!0,filterFields:["label"],optionLabel:"text","option-disabled":"disabled",showClear:!0},{value:Ie(u=>[u.value?(T(),C("div",dn,[a("div",mn,[qe(R(u.value.label)+" ",1),a("span",_n," ("+R(A(we).toCurrencyFormat(u.value.amount,u.value.divisibility))+")",1)])])):(T(),C("span",hn,R(u.placeholder),1))]),option:Ie(u=>[a("div",gn,[a("span",pn,R(u.option.label),1),a("span",bn,"Balance:"+R(A(we).toCurrencyFormat(u.option.amount,u.option.divisibility)),1)])]),_:1},8,["modelValue","options"]),vn])])]),a("div",yn,[a("div",null,[a("div",wn,[Z(A(He),{modelValue:A(y),"onUpdate:modelValue":m[5]||(m[5]=u=>Ue(y)?y.value=u:y=u),options:A(ae),style:{width:"100%"},optionLabel:"label",optionValue:"value"},null,8,["modelValue","options"]),In])])]),a("div",xn,[a("div",null,[a("div",Sn,[a("input",{type:"file",class:"form-control",onChange:m[6]||(m[6]=(...u)=>A(ue)&&A(ue)(...u)),id:"inputGroupFile04","aria-describedby":"inputGroupFileAddon04","aria-label":"Upload"},null,32)]),A(B)!=""?(T(),C("div",An,R(A(B)),1)):J("",!0)])]),a("div",Nn,[a("div",null,[A(de)?(T(),C("div",On," Invalid file ")):J("",!0),A(le)?(T(),C("div",Tn," Total distribution amount exceed selected asset amount (need "+R(A(ne))+") ",1)):J("",!0),A(I)?(T(),C("div",kn,R(A(I)),1)):J("",!0)])]),A(F).length?(T(),C("div",Cn,[a("div",null,[a("div",Dn,[Ln,a("div",En,[(T(!0),C(Je,null,je(A(F),(u,M)=>(T(),C("div",{class:"table-row",key:M},[a("div",Bn,R(u.publicKeyOrAddress),1),a("div",$n,R(u.amount),1),a("div",Mn,R(u.message),1)]))),128))])])])])):J("",!0),a("div",Rn,[a("div",Fn,[Pn,Z(pt,{placeholder:d.$t("general.enterPassword"),errorMessage:d.$t("general.passwordRequired"),showError:w.value,modelValue:S.value,"onUpdate:modelValue":m[7]||(m[7]=u=>S.value=u),icon:"lock",class:"mt-5 mb-3",disabled:v.value},null,8,["placeholder","errorMessage","showError","modelValue","disabled"]),_.value!=""?(T(),C("div",Vn,R(_.value),1)):J("",!0),A(oe)?J("",!0):(T(),C("button",{key:1,type:"button",onClick:m[8]||(m[8]=u=>A(ie)()),disabled:A(oe)&&!A(re),class:"blue-btn px-3 py-3 text-md"},"Distribute",8,qn)),A(oe)?(T(),C("button",Un,[Hn,qe(" Distributing... ")])):J("",!0),A(K)?(T(),C("div",Jn,R(A(K)),1)):J("",!0),A(re)?(T(),C("div",jn," Distribution Done ")):J("",!0)])]),A(pe).length?(T(),C("div",Kn,[a("div",null,[a("div",zn,[Qn,a("div",Wn,[(T(!0),C(Je,null,je(A(pe),(u,M)=>(T(),C("div",{class:"table-row",key:M},[a("div",Gn,[a("a",{href:A(ce)(u),target:"_blank"},R(u),9,Xn)])]))),128))])])])])):J("",!0)])}}});const Yn=Ze(Zn,[["__scopeId","data-v-63d88569"]]),ei={class:"mt-10 flex-grow px-5"},ti=a("div",{class:"w-11/12 ml-auto mr-auto"},[a("div",{class:"flex"},[a("div",{class:"py-3 px-6 lg:flex items-center"},[a("div",{class:"text-xl mr-2 mb-2"},"Airdrop Token Utility")])])],-1),ni={class:"mt-2 py-3"},ii={class:"w-11/12 ml-auto mr-auto border-2"},si=a("div",{class:"mb-36"},null,-1),ui=Se({__name:"ViewServicesAirdropToken",setup(s){return(e,l)=>(T(),C("div",ei,[ti,a("div",ni,[a("div",ii,[Z(Yn)])]),si]))}});export{ui as default};
