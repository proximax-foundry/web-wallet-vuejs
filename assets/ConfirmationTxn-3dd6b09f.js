import{d as V,k as S,g as x,c,n as y,r as j,o as r,f as i,e as a,t as u,F as E,K as W,i as v,l as g,b as _,s as I,T as L,W as M,w as B,A as D,B as b,x as R}from"./index-aa0744c5.js";import{_ as H}from"./PasswordInput.vue_vue_type_script_setup_true_lang-f3bc4e31.js";import{T as s}from"./transactionState-8ad9374f.js";const z={class:"w-10/12 ml-auto mr-auto mt-5"},F={class:"border filter shadow-lg mt-8"},q={key:0},K={key:0},O={class:"flex justify-center px-12"},G={class:"mb-3 border rounded-lg border-gray-900 w-full p-2 flex items-center justify-center break-all"},J={class:"flex justify-center px-12"},Q={class:"mb-3 border rounded-lg border-gray-900 w-full p-2 flex items-center justify-center break-all"},X=["onClick"],Y={class:"flex justify-center my-3"},Z={key:0,class:"popup-outer-lang lg:translate-x-2/4 fixed flex z-50"},ee={class:"modal-popup-box text-center"},te={key:0,class:"error error_box mb-3"},ae={class:"text-center mt-2 text-xs font-semibold"},ie=V({__name:"ConfirmationTxn",setup(se){const P=S(),n=x(!1),o=x(""),m=x(""),T=c(()=>y.currentNetworkProfile.chainExplorer.url),h=c(()=>y.currentNetworkProfile.chainExplorer.payloadInfoRoute),k=t=>{window.open(T.value+h.value+"/"+t,"_blank")},A=c(()=>s.lockHashPayload?s.lockHashPayload:null),d=c(()=>s.unsignedTransactionPayload?s.unsignedTransactionPayload:null),C=c(()=>s.transactionPayload),p=c(()=>s.selectedAddress),f=c(()=>s.selectedMultisigAddress),w=()=>{s.lockHashPayload="",s.transactionPayload="",s.unsignedTransactionPayload="",s.selectedAddress="",s.selectedMultisigAddress=""},$=async()=>{if(o.value=="")m.value="Please insert wallet password to sign transaction";else if(M.verifyWalletPassword(B.currentLoggedInWallet.name,y.chainNetworkName,o.value)){n.value=!n.value,m.value="";let t=null;if(f.value){const e=await D.chainAPI.nodeAPI.getNodeTime();t=await b.signAbtWithTxnAndPassword(p.value,f.value,o.value,d.value,new R.UInt64(e.sendTimeStamp))}else t=await b.signTxnWithPassword(p.value,f.value,o.value,d.value);s.transactionPayload=t.txnPayload,s.lockHashPayload=t.hashLockTxnPayload,o.value="",s.unsignedTransactionPayload="",U()}else m.value="Wallet password is incorrect"},U=async()=>{await b.confirmAnnounceTransaction(C.value,A.value);const t=p.value;w(),P.push({name:"ViewAccountPendingTransactions",params:{address:t}})};return(t,e)=>{const N=j("router-link");return r(),i("div",null,[a("div",z,[a("div",F,[d.value?(r(),i("div",q,[e[7]||(e[7]=a("div",{class:"text-lg font-semibold m-7"},"Unsigned Transaction",-1)),typeof d.value=="string"?(r(),i("div",K,[a("div",O,[a("div",G,u(d.value),1)]),a("div",{class:"flex justify-center text-blue-primary font-semibold uppercase ml-3.5 mt-3 text-sm xl:text-md xl:ml-0 cursor-pointer",onClick:e[0]||(e[0]=l=>k(d.value))},"Click to view Unsigned Transaction Details in Explorer")])):(r(!0),i(E,{key:1},W(d.value,l=>(r(),i("div",null,[a("div",J,[a("div",Q,u(l),1)]),a("div",{class:"flex justify-center text-blue-primary font-semibold uppercase ml-3.5 my-3 text-sm xl:text-md xl:ml-0 cursor-pointer",onClick:ne=>k(l)},"Click to view Unsigned Transaction Details in Explorer",8,X)]))),256))])):v("",!0),a("div",Y,[g(N,{to:{name:"ViewDashboard"},class:"text-black font-bold text-xs pt-3 mr-4 sm:mr-5 mt-2 focus:outline-none disabled:opacity-50",onClick:e[1]||(e[1]=l=>w())},{default:_(()=>[I(u(t.$t("general.cancel")),1)]),_:1}),a("button",{type:"submit",class:"default-btn focus:outline-none disabled:opacity-50 mt-2",onClick:e[2]||(e[2]=l=>n.value=!n.value)}," Sign ")])]),g(L,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:_(()=>[n.value?(r(),i("div",Z,[a("div",ee,[m.value!=""?(r(),i("div",te,u(m.value),1)):v("",!0),a("div",ae,u(t.$t("general.enterPassword")),1),g(H,{class:"mt-3",modelValue:o.value,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value=l),placeholder:t.$t("general.enterPassword"),errorMessage:t.$t("general.passwordRequired")},null,8,["modelValue","placeholder","errorMessage"]),a("button",{onClick:e[4]||(e[4]=l=>$()),class:"blue-btn py-2 font-semibold cursor-pointer text-center w-7/12 mt-5 inline-block"},u(t.$t("general.confirm")),1),a("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:e[5]||(e[5]=l=>{n.value=!n.value,o.value=""})},u(t.$t("general.cancel")),1)])])):v("",!0)]),_:1}),n.value?(r(),i("div",{key:0,onClick:e[6]||(e[6]=l=>n.value=!n.value),class:"fixed inset-0 bg-opacity-60 bg-gray-100 z-20"})):v("",!0)])])}}});export{ie as default};
