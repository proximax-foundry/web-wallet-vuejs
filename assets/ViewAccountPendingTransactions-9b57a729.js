import{d as O,H as o,c as m,w as i,r as l,G as A,J as u,a as T,E as P,ah as R,k as W,o as N,b as U,e as v,s as r,z as p,A as I,C,p as M,j,B as z,P as G,_ as H}from"./index-47d422d4.js";import{A as K,a as J}from"./AccountTabs-0ac62344.js";import{P as $}from"./PendingDataTable-8256f315.js";import{s as q,a as X}from"./accordiontab.esm-f0363075.js";import"./jdenticon-module-4c899338.js";import"./functions-4879562c.js";import"./TextInput-585f2c09.js";import"./TextInputClean-5836e25c.js";import"./icon-key-5b3f7dda.js";import"./icon-message-e27d55b6.js";import"./icon-proximax-logo-gray-c2486ce1.js";import"./column.esm-3f272386.js";const Y=t=>(M("data-v-8aaa60d2"),t=t(),j(),t),Z={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},ee={class:"flex my-2 gap-5 flex-none text-xs md:text-sm"},ae=Y(()=>v("div",{class:"border rounded-md text-white py-2 px-5",style:{background:"#f3a91d"}},"Pending",-1)),te=O({__name:"ViewAccountPendingTransactions",props:{address:String},setup(t){const g=t;let k=o.createTransactionFieldOrder(o.getQueryParamOrder_v2().DESC,o.getTransactionSortField().BLOCK);const s=m(()=>{if(!i.currentLoggedInWallet)return null;let e=i.currentLoggedInWallet.accounts.find(a=>a.address==g.address)||i.currentLoggedInWallet.others.find(a=>a.address==g.address);return e||null}),f=l([]),h=l([]),x=l([]),y=l(0),w=m(()=>(y.value,f.value.concat(x.value).concat(h.value))),d=l(!0);let F=async()=>{w.value.length>0?d.value=!1:d.value=!0};console.log(d.value);let _=new A(i.currentLoggedInWallet,s.value),b=o.getTransactionGroupType(),L=async()=>{if(!s.value)return;let e=o.createTransactionQueryParams();e.pageSize=1,e.address=s.value.address,e.embedded=!0,e.updateFieldOrder(k);let a=await _.searchTxns(b.UNCONFIRMED,e),n=await _.formatUnconfirmedMixedTxns(a.transactions);f.value=n,y.value++},V=async()=>{if(!s.value)return;let e=new A(i.currentLoggedInWallet,s.value),a=o.createTransactionQueryParams();a.pageSize=100,a.address=s.value.address;let n=await e.searchTxns(b.PARTIAL,a),S=await e.formatPartialMixedTxns(n.transactions);h.value=S},B=()=>{if(!s.value)return;let e=[];u.autoAnnounceSignedTransaction.forEach(a=>{let n=z.TransactionMapping.createFromPayload(a.signedTransaction.payload);(G.castToAggregate(n).innerTransactions.find(E=>E.signer.address.plain()==g.address)!=null||a.signedTransaction.signer==s.value.publicKey)&&e.push({type:"Aggregate Bonded",hash:a.signedTransaction.hash,deadline:n.deadline.value,groupType:"In Queue",recipient:"",sender:"",amount:"",message:"",sda:""})}),x.value=e};const Q=[u.unconfirmedTransactions,u.autoAnnounceSignedTransaction,u.confirmedTransactions];T([...Q],()=>{c()});const D=m(()=>u.aggregateBondedTxLength);T(D,()=>{c()});const c=async()=>{await L(),await V(),await F(),B()};if(P.isReady)c();else{let e=T(P,a=>{a.isReady&&(c(),e())})}return R(()=>{setInterval(()=>{c()},1e3)}),(e,a)=>{const n=W("router-link");return N(),U("div",null,[v("div",Z,[r(K,{address:t.address,class:"mb-6"},null,8,["address"]),r(J,{address:t.address,selected:"txn"},null,8,["address"]),v("div",ee,[r(n,{to:{name:"ViewAccountConfirmedTransactions",params:{address:t.address}},class:"border opacity-60 hover:opacity-100 cursor-pointer rounded-md text-white py-2 px-4",style:{background:"#007CFF"}},{default:p(()=>[I("Confirmed")]),_:1},8,["to"]),ae,r(n,{to:{name:"ViewAccountFailedTransactions",params:{address:t.address}},class:"border opacity-60 hover:opacity-100 cursor-pointer rounded-md text-white py-2 px-5",style:{background:"#DC143C"}},{default:p(()=>[I("Failed")]),_:1},8,["to"])]),r(C(X),{activeIndex:d.value?null:0},{default:p(()=>[r(C(q),{class:"p-accordion-header p-highlight",disabled:d.value},{default:p(()=>[r($,{transaction:w.value,class:"mt-3",id:"pending"},null,8,["transaction"])]),_:1},8,["disabled"])]),_:1},8,["activeIndex"])])])}}});const Te=H(te,[["__scopeId","data-v-8aaa60d2"],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/views/ViewAccountPendingTransactions.vue"]]);export{Te as default};
