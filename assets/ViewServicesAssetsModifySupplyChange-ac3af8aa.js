import{_ as me,o as n,f as u,e as t,t as l,i as w,ai as ke,j as Se,k as Te,y as we,c as o,A as f,g as m,n as B,H as p,B as Ce,w as ee,as as j,K as Me,aw as W,D as k,bd as ve,r as V,S as Fe,a as Ae,b as te,l as S,s as T,Q as P,am as Le,F as Ne,M as Ie,x as R}from"./index-f4fa05bb.js";import{S as Be}from"./SupplyInputClean-01052a03.js";import{_ as Ve}from"./TransactionFeeDisplay.vue_vue_type_script_setup_true_lang-76415d7e.js";import{T as De}from"./TransactionLayout-4fe4075f.js";import{A as se}from"./assetsUtils-d0c9b803.js";import{t as Ee}from"./jdenticon-module-14cc3de9.js";import{M as Pe}from"./multisigUtils-5932eec1.js";import{T as q}from"./transactionState-bc435c31.js";import{_ as Ue}from"./icon-asset-2a9ae6ea.js";import{_ as z}from"./icon-info-8b4f1351.js";import"./TransactionFeeLayout.vue_vue_type_script_setup_true_lang-32d1fb88.js";import"./proximax-logo-ecfc3767.js";const He={props:{placeholder:String,errorMessage:String,showError:Boolean,modelValue:String,title:String,disabled:Boolean},emits:["update:modelValue"],name:"SelectModificationType",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},watch:{showError:function(s){s?(this.borderColor="border-2 border-red-primary",this.textErr=!0):(this.borderColor="border-2 border-gray-300",this.textErr=!1)}}},je={class:"border border-gray-200 px-2 py-1 h-14 rounded-md"},We={class:"uppercase text-gray-500 text-txs text-left mb-2"},Re={class:"flex items-center"},qe=["value","disabled","checked"],ze={for:"increase",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},Oe=["value","disabled","checked"],Qe={for:"decrease",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},Ye={class:"h-3 mb-2"},Ze={key:0,class:"error error-text text-left"};function Ge(s,i,v,e,g,O){return n(),u("div",null,[t("div",je,[t("div",We,l(v.title),1),t("div",Re,[t("input",{id:"increase",type:"radio",name:"modificationType",value:v.modelValue,disabled:v.disabled,class:"h-5 w-5",onChange:i[0]||(i[0]=b=>s.$emit("update:modelValue","increase")),checked:v.modelValue=="increase"},null,40,qe),t("label",ze,l(s.$t("general.increase")),1),t("input",{id:"decrease",type:"radio",name:"modificationType",value:v.modelValue,disabled:v.disabled,class:"h-5 w-5",onChange:i[1]||(i[1]=b=>s.$emit("update:modelValue","decrease")),checked:v.modelValue=="decrease"},null,40,Oe),t("label",Qe,l(s.$t("general.decrease")),1)])]),t("div",Ye,[g.textErr||v.showError?(n(),u("div",Ze,l(v.errorMessage),1)):w("",!0)])])}const Je=me(He,[["render",Ge]]),Ke={name:"ViewServicesAssetsModifySupplyChange",directives:{tooltip:ke},components:{SupplyInputClean:Be,SelectModificationType:Je,TransactionFeeDisplay:Ve,TransactionLayout:De},props:{assetId:String,address:String},setup(s){Se();const i=Te();we();let v=9e14;const e=o(()=>f.nativeToken.label),g=m(!1),O=m(""),b=m(!1),C=m(!1),M=m(!1),Q=m(!1),Y=m(!1),y=m(""),F=o(()=>f.nativeToken.label),r=o(()=>B.currentNetworkProfileConfig?p.convertToExact(B.currentNetworkProfileConfig.lockedFundsPerAggregate,f.nativeToken.divisibility):0),Z=o(()=>B.currentNetworkProfileConfig?p.convertToCurrency(B.currentNetworkProfileConfig.lockedFundsPerAggregate,f.nativeToken.divisibility):0),ae=o(()=>B.currentNetworkProfile?p.convertToExact(Ce.getLockFundFee(),f.nativeToken.divisibility):0),G=o(()=>r.value+ae.value),ge=o(()=>!(h.value>0&&!g.value&&!X.value&!K.value)),fe=o(()=>c.value?c.value.name:""),A=o(()=>c.value?c.value.address:""),le=o(()=>c.value?c.value.balance:0),oe=o(()=>{if(c.value)return p.toCurrencyFormat(c.value.balance,f.nativeToken.divisibility)}),h=m("0"),ie=p.createAddress(s.address).plain();let c=o(()=>ee.currentLoggedInWallet?ee.currentLoggedInWallet.accounts.find(a=>a.address==ie)||ee.currentLoggedInWallet.others.find(a=>a.address==ie):null);const be=m(j(A.value));let ne=new Me("ThemeStyleConfig");ne.init();const pe=m(Ee(s.address,40,ne.jdenticonConfig)),L=m("increase");let J=9e14;const d=o(()=>c.value?c.value.assets.find(a=>a.idHex===s.assetId):null),D=o(()=>d.value?d.value.amount:0),re=o(()=>d.value?d.value.idHex:""),ye=o(()=>d.value?d.value.transferable:!1),ce=o(()=>d.value?d.value.supplyMutable:!1),U=o(()=>d.value?d.value.divisibility:0),x=o(()=>d.value?d.value.supply/Math.pow(10,d.value.divisibility):0),_=o(()=>{if(!c.value)return{hasCosigner:!1,cosignerList:[]};if(B.currentNetworkProfileConfig){let a=Pe.getCosignerInWallet(c.value?c.value.publicKey:""),H=[];return a.cosignerList.forEach(I=>{H.push({publicKey:I,name:W(I).name,balance:W(I).balance,address:W(I).address})}),a.cosignerList=H,{hasCosigner:a.hasCosigner,cosignerList:a.cosignerList}}else return{hasCosigner:!1,cosignerList:[]}});y.value=_.value.cosignerList.length>0?_.value.cosignerList[0].address:"",k(_,a=>{a.cosignerList.length>0&&(y.value=a.cosignerList.length>0?_.value.cosignerList[0].address:"")});const K=o(()=>_.value.cosignerList.length==0&&j(A.value)),de=o(()=>{let a=ve(y.value)?ve(y.value).balance:0;return p.toCurrencyFormat(a)}),X=o(()=>y.value.length<=0?le.value<E.value:Number(de.value)<E.value+G.value),$=o(()=>_.value.cosignerList.length>0?_.value.cosignerList.length>1?y.value:W(_.value.cosignerList[0].publicKey).address:""),he=o(()=>f.isReady?p.convertToCurrency(se.getMosaicSupplyChangeTransactionFee(s.assetId,L.value,parseFloat(h.value),U.value),f.nativeToken.divisibility):"0"),E=o(()=>f.isReady?p.convertToExact(se.getMosaicSupplyChangeTransactionFee(s.assetId,L.value,parseFloat(h.value),U.value),f.nativeToken.divisibility):0);k(ce,a=>{a?(M.value=!1,C.value=!1,b.value=!1):(M.value=!0,C.value=!0,b.value=!0)},{immediate:!0});const _e=()=>{const a=f.buildTxn;let H=L.value=="increase"?R.MosaicSupplyType.Increase:R.MosaicSupplyType.Decrease,I=a.buildMosaicSupplyChange(new R.MosaicId(re.value),H,R.UInt64.fromUint(se.addZeros(U.value,Number(h.value))));$.value?(q.selectedAddress=$.value,q.selectedMultisigAddress=A.value):q.selectedAddress=A.value,q.unsignedTransactionPayload=I.serialize(),i.push({name:"ViewConfirmTransaction"})};k(L,a=>{a=="increase"?g.value=parseFloat(h.value)>J-x.value:x.value==D.value?g.value=parseFloat(h.value)>x.value-1:g.value=parseFloat(h.value)>D.value-1}),k(h,a=>{L.value=="increase"?g.value=parseFloat(a)>J-x.value:x.value==D.value?g.value=parseFloat(a)>x.value-1:g.value=parseFloat(a)>D.value-1});const ue=o(()=>j(A.value)?parseFloat(G.value)+E.value:E.value),xe=o(()=>p.amountFormatterSimple(ue.value,0)),N=a=>{b.value=a,C.value=a,M.value=a};return k(ue,a=>{oe.value<a?N(!0):N(!1)}),k(X,a=>{N(!!a)}),k(K,a=>{N(!!a)}),{currentNativeTokenName:e,selectedAccName:fe,selectedAccAdd:A,balance:oe,balanceNumber:le,showNoBalance:X,lockFundTxFee:ae,lockFundCurrency:Z,lockFundTotalFee:G,totalFeeFormatted:xe,showSupplyErr:g,err:O,disableModify:ge,showPasswdError:Q,supply:h,disabledPassword:b,disabledSupply:C,currencyName:F,isMultiSig:j,isMultiSigBool:be,selectAsset:re,selectIncreaseDecrease:L,modifyAsset:_e,transactionFee:he,transactionFeeExact:E,assetSupply:x,assetAmount:D,assetDivisibility:U,assetTransferable:ye,assetMutable:ce,getMultiSigCosigner:_,cosignerBalanceInsufficient:Y,cosignerAddress:y,cosigner:$,isNotCosigner:K,disabledSelectIncreaseDecrease:M,Helper:p,svgString:pe,maxAmount:v,maxAssetSupply:J,checkCosignBalance:de}}},Xe={class:"lg:flex lg:justify-between lg:items-center"},$e={class:"font-semibold mb-4 inline-block mt-1"},et={class:"flex items-center"},tt=["innerHTML"],st={class:"ml-2"},at={class:"text-blue-primary text-xxs font-bold uppercase mb-1"},lt={class:"font-bold text-black text-sm"},ot={key:0,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},it={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},nt=t("div",{class:"inline-block text-xs"},"Asset is immutable",-1),rt={key:1,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},ct={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},dt={class:"inline-block text-xs"},ut={key:2,class:"rounded-md bg-yellow-200 w-full p-2 flex items-center justify-center"},vt={class:"rounded-full w-5 h-5 bg-yellow-100 inline-block relative mr-2"},mt={class:"inline-block text-xs"},gt={key:3,class:"error error_box"},ft={class:"text-right w-full"},bt={key:0,class:"inline-block"},pt={class:"text-tsm text-left mt-3"},yt={key:0,class:"font-bold"},ht={key:0,class:"error"},_t={key:1,class:"font-bold"},xt=["value"],kt={key:2,class:"error"},St={class:"border border-blue-primary p-4 bg-blue-100 flex items-center rounded mt-5"},Tt=t("img",{src:Ue},null,-1),wt={class:"ml-1"},Ct={class:"uppercase text-blue-primary font-semibold text-xxs"},Mt={class:"text-black text-sm font-bold"},Ft={class:"border border-gray-200 p-4 rounded mt-5"},At={class:"lg:grid lg:grid-cols-2"},Lt={class:"my-3"},Nt={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},It={src:z,class:"inline-block ml-2 relative",style:{top:"-1px"}},Bt={class:"text-black font-bold text-sm"},Vt={class:"my-3"},Dt={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Et={src:z,class:"inline-block ml-2 relative",style:{top:"-1px"}},Pt={class:"text-black font-bold text-sm"},Ut={class:"my-3"},Ht={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},jt={src:z,class:"inline-block ml-2 relative",style:{top:"-1px"}},Wt={class:"uppercase text-black font-bold text-sm"},Rt={class:"my-3"},qt={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},zt={src:z,class:"inline-block ml-2 relative",style:{top:"-1px"}},Ot={class:"uppercase text-black font-bold text-sm"},Qt={class:"lg:grid lg:grid-cols-2 mt-5"},Yt=["disabled"],Zt={class:"text-center"};function Gt(s,i,v,e,g,O){const b=V("font-awesome-icon"),C=V("SelectModificationType"),M=V("SupplyInputClean"),Q=V("TransactionFeeDisplay"),Y=V("router-link"),y=V("TransactionLayout"),F=Fe("tooltip");return n(),Ae(y,{class:"mt-8"},{white:te(()=>[t("div",Xe,[t("div",$e,l(s.$t("asset.modifyAssetSupply")),1),t("div",et,[t("div",{innerHTML:e.svgString,class:"inline-block"},null,8,tt),t("div",st,[t("div",at,l(s.$t("asset.assetCreatedBy")),1),t("div",lt,l(e.selectedAccName),1)])])]),e.assetMutable?w("",!0):(n(),u("div",ot,[t("div",it,[S(b,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),nt])),e.showNoBalance?(n(),u("div",rt,[t("div",ct,[S(b,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),t("div",dt,l(s.$t("general.insufficientBalance")),1)])):e.isNotCosigner?(n(),u("div",ut,[t("div",vt,[S(b,{icon:"exclamation",class:"text-yellow-500 h-3 w-3 absolute",style:{top:"5px",left:"7px"}})]),t("div",mt,l(s.$t("general.noCosigner")),1)])):w("",!0),e.err!=""?(n(),u("div",gt,l(e.err),1)):w("",!0),t("div",ft,[e.getMultiSigCosigner.cosignerList.length>0?(n(),u("div",bt,[t("div",pt,[T(l(s.$t("general.initiateBy"))+": ",1),e.getMultiSigCosigner.cosignerList.length==1?(n(),u("span",yt,[T(l(e.getMultiSigCosigner.cosignerList[0].name)+" ("+l(s.$t("general.balance"))+": "+l(e.Helper.amountFormatterSimple(e.getMultiSigCosigner.cosignerList[0].balance,0))+" "+l(e.currentNativeTokenName)+") ",1),e.getMultiSigCosigner.cosignerList[0].balance<e.lockFundTotalFee?(n(),u("span",ht,"- "+l(s.$t("general.insufficientBalance")),1)):w("",!0)])):(n(),u("span",_t,[P(t("select",{"onUpdate:modelValue":i[0]||(i[0]=r=>e.cosignerAddress=r)},[(n(!0),u(Ne,null,Ie(e.getMultiSigCosigner.cosignerList,(r,Z)=>(n(),u("option",{value:r.address,key:Z},l(r.name)+" ("+l(s.$t("general.balance"))+": "+l(r.balance)+" "+l(e.currentNativeTokenName)+")",9,xt))),128))],512),[[Le,e.cosignerAddress]])])),e.cosignerBalanceInsufficient?(n(),u("div",kt,"- "+l(s.$t("general.insufficientBalance")),1)):w("",!0)])])):w("",!0)]),t("div",St,[Tt,t("div",wt,[t("div",Ct,l(s.$t("general.assetId")),1),t("div",Mt,l(e.selectAsset),1)])]),t("div",Ft,[t("div",At,[t("div",Lt,[t("div",Nt,[T(l(s.$t("asset.currentSupply")),1),P(t("img",It,null,512),[[F,{value:"<tiptext>"+s.$t("asset.supplyMsg2")+"<br>"+s.$t("asset.supplyMsg3")+"</tiptext>",escape:!1},void 0,{bottom:!0}]])]),t("div",Bt,l(e.assetAmount),1)]),t("div",Vt,[t("div",Dt,[T(l(s.$t("general.divisibility")),1),P(t("img",Et,null,512),[[F,{value:"<tiptext>"+s.$t("asset.divisibilityMsg4")+"<br><br>"+s.$t("asset.divisibilityMsg2")+"<br>"+s.$t("asset.divisibilityMsg3")+"</tiptext>",escape:!1},void 0,{bottom:!0}]])]),t("div",Pt,l(e.assetDivisibility),1)]),t("div",Ut,[t("div",Ht,[T(l(s.$t("general.transferable")),1),P(t("img",jt,null,512),[[F,{value:"<tiptext>"+s.$t("asset.transferableMsg")+"</tiptext>",escape:!1},void 0,{bottom:!0}]])]),t("div",Wt,l(e.assetTransferable?s.$t("general.yes"):s.$t("general.no")),1)]),t("div",Rt,[t("div",qt,[T(l(s.$t("general.supplyMutable")),1),P(t("img",zt,null,512),[[F,{value:"<tiptext>"+s.$t("asset.supplyMutableMsg")+"</tiptext>",escape:!1},void 0,{bottom:!0}]])]),t("div",Ot,l(e.assetMutable?s.$t("general.yes"):s.$t("general.no")),1)])])]),t("div",Qt,[S(C,{title:s.$t("asset.modificationType"),class:"lg:mr-4",modelValue:e.selectIncreaseDecrease,"onUpdate:modelValue":i[1]||(i[1]=r=>e.selectIncreaseDecrease=r)},null,8,["title","modelValue"]),S(M,{disabled:e.showNoBalance||e.isNotCosigner,modelValue:e.supply,"onUpdate:modelValue":i[2]||(i[2]=r=>e.supply=r),balance:e.maxAssetSupply-e.assetSupply.value,placeholder:s.$t("asset.quantityOf",{value:e.selectIncreaseDecrease}),type:"text",icon:"coins",showError:e.showSupplyErr,errorMessage:e.selectIncreaseDecrease=="increase"?" The total asset supply should not exceed 900T":" You have exceeded the maximum value for decrease asset supply.",decimal:Number(e.assetDivisibility),class:"lg:ml-4"},null,8,["disabled","modelValue","balance","placeholder","showError","errorMessage","decimal"])])]),navy:te(()=>[S(Q,{"transaction-fee":e.transactionFee,"total-fee-formatted":e.totalFeeFormatted,"get-multi-sig-cosigner":e.getMultiSigCosigner,"check-cosign-balance":e.checkCosignBalance,"lock-fund-currency":e.lockFundCurrency,"lock-fund-tx-fee":String(e.lockFundTxFee),balance:e.balance,"selected-acc-add":e.selectedAccAdd},null,8,["transaction-fee","total-fee-formatted","get-multi-sig-cosigner","check-cosign-balance","lock-fund-currency","lock-fund-tx-fee","balance","selected-acc-add"]),t("button",{type:"submit",class:"mt-3 w-full blue-btn py-4 disabled:opacity-50 disabled:cursor-auto text-white",disabled:e.disableModify,onClick:i[3]||(i[3]=(...r)=>e.modifyAsset&&e.modifyAsset(...r))},l(s.$t("asset.modifyAssetSupply")),9,Yt),t("div",Zt,[S(Y,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white border-b-2 border-white"},{default:te(()=>[T(l(s.$t("general.cancel")),1)]),_:1})])]),_:1})}const rs=me(Ke,[["render",Gt]]);export{rs as default};
