import{_ as ce,o as n,b as c,e as s,t as a,f as F,ad as xe,u as ke,q as Se,D as Ce,c as o,E as p,r as v,n as C,H as h,V as Me,w as W,ao as z,I as Te,aH as O,a as M,bb as ne,k as V,P as Fe,s as w,B as T,Q as j,ag as Ae,F as Le,h as Ie,z as Ne,W as Pe}from"./index-401acdd9.js";import{P as Ve}from"./PasswordInput-357714d6.js";import{S as Ee}from"./SupplyInputClean-77331a19.js";import{T as Be}from"./TransactionFeeDisplay-293db5e4.js";import{A as Q}from"./assetsUtils-b0a58d9c.js";import{t as De}from"./jdenticon-module-3e81fcaa.js";import{M as We}from"./multisigUtils-bf9a3788.js";import{_ as je}from"./icon-asset-2a9ae6ea.js";import{_ as Y}from"./icon-info-8b4f1351.js";import"./proximax-logo-ecfc3767.js";const He={props:{placeholder:String,errorMessage:String,showError:Boolean,modelValue:String,title:String,disabled:Boolean},emits:["update:modelValue"],name:"SelectModificationType",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},watch:{showError:function(t){t?(this.borderColor="border-2 border-red-primary",this.textErr=!0):(this.borderColor="border-2 border-gray-300",this.textErr=!1)}}},Ue={class:"border border-gray-200 px-2 py-1 h-14 rounded-md"},Re={class:"uppercase text-gray-500 text-txs text-left mb-2"},qe={class:"flex items-center"},ze=["value","disabled","checked"],Oe={for:"increase",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},Qe=["value","disabled","checked"],Ye={for:"decrease",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},Ge={class:"h-3 mb-2"},Je={key:0,class:"error error-text text-left"};function Xe(t,r,m,e,H,f){return n(),c("div",null,[s("div",Ue,[s("div",Re,a(m.title),1),s("div",qe,[s("input",{id:"increase",type:"radio",name:"modificationType",value:m.modelValue,disabled:m.disabled,class:"h-5 w-5",onChange:r[0]||(r[0]=g=>t.$emit("update:modelValue","increase")),checked:m.modelValue=="increase"},null,40,ze),s("label",Oe,a(t.$t("general.increase")),1),s("input",{id:"decrease",type:"radio",name:"modificationType",value:m.modelValue,disabled:m.disabled,class:"h-5 w-5",onChange:r[1]||(r[1]=g=>t.$emit("update:modelValue","decrease")),checked:m.modelValue=="decrease"},null,40,Qe),s("label",Ye,a(t.$t("general.decrease")),1)])]),s("div",Ge,[H.textErr||m.showError?(n(),c("div",Je,a(m.errorMessage),1)):F("v-if",!0)])])}const Ze=ce(He,[["render",Xe],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/services/submodule/assets/components/SelectModificationType.vue"]]),Ke={name:"ViewServicesAssetsModifySupplyChange",directives:{tooltip:xe},components:{PasswordInput:Ve,SupplyInputClean:Ee,SelectModificationType:Ze,TransactionFeeDisplay:Be},props:{assetId:String,address:String},setup(t){const{t:r}=ke(),m=Se();Ce();let e=9e14;const H=o(()=>p.nativeToken.label),f=v(!1),g=v(""),U=v(""),A=v(!1),L=v(!1),I=v(!1),G="^[^ ]{8,}$",N=v(!1),i=v(!1),_=v(""),de=o(()=>p.nativeToken.label),ue=o(()=>C.currentNetworkProfileConfig?h.convertToExact(C.currentNetworkProfileConfig.lockedFundsPerAggregate,p.nativeToken.divisibility):0),ve=o(()=>C.currentNetworkProfileConfig?h.convertToCurrency(C.currentNetworkProfileConfig.lockedFundsPerAggregate,p.nativeToken.divisibility):0),se=o(()=>C.currentNetworkProfile?h.convertToExact(Me.getLockFundFee(),p.nativeToken.divisibility):0),J=o(()=>ue.value+se.value),me=o(()=>!(g.value.match(G)&&b.value>0&&!f.value&&!$.value&!R.value)),ge=o(()=>d.value?d.value.name:""),x=o(()=>d.value?d.value.address:""),X=o(()=>d.value?d.value.balance:0),te=o(()=>{if(d.value)return h.toCurrencyFormat(d.value.balance,p.nativeToken.divisibility)}),b=v("0"),le=h.createAddress(t.address).plain();let d=o(()=>W.currentLoggedInWallet?W.currentLoggedInWallet.accounts.find(l=>l.address==le)||W.currentLoggedInWallet.others.find(l=>l.address==le):null);const fe=v(z(x.value));let ae=new Te("ThemeStyleConfig");ae.init();const be=v(De(t.address,40,ae.jdenticonConfig)),k=v("increase");let Z=9e14;const u=o(()=>d.value?d.value.assets.find(l=>l.idHex===t.assetId):null),E=o(()=>u.value?u.value.amount:0),K=o(()=>u.value?u.value.idHex:""),pe=o(()=>u.value?u.value.transferable:!1),oe=o(()=>u.value?u.value.supplyMutable:!1),B=o(()=>u.value?u.value.divisibility:0),S=o(()=>u.value?u.value.supply/Math.pow(10,u.value.divisibility):0),y=o(()=>{if(!d.value)return{hasCosigner:!1,cosignerList:[]};if(C.currentNetworkProfileConfig){let l=We.getCosignerInWallet(d.value?d.value.publicKey:""),ie=[];return l.cosignerList.forEach(q=>{ie.push({publicKey:q,name:O(q).name,balance:O(q).balance,address:O(q).address})}),l.cosignerList=ie,{hasCosigner:l.hasCosigner,cosignerList:l.cosignerList}}else return{hasCosigner:!1,cosignerList:[]}});_.value=y.value.cosignerList.length>0?y.value.cosignerList[0].address:"",M(y,l=>{l.cosignerList.length>0&&(_.value=l.cosignerList.length>0?y.value.cosignerList[0].address:"")});const R=o(()=>y.value.cosignerList.length==0&&z(x.value)),$=o(()=>R.value?X.value<D.value:X.value<D.value+J.value),ee=o(()=>y.value.cosignerList.length>0?y.value.cosignerList.length>1?_.value:O(y.value.cosignerList[0].publicKey).address:""),he=o(()=>p.isReady?h.convertToCurrency(Q.getMosaicSupplyChangeTransactionFee(t.assetId,k.value,parseFloat(b.value),B.value),p.nativeToken.divisibility):"0"),D=o(()=>p.isReady?h.convertToExact(Q.getMosaicSupplyChangeTransactionFee(t.assetId,k.value,parseFloat(b.value),B.value),p.nativeToken.divisibility):0);M(oe,l=>{l?(I.value=!1,L.value=!1,A.value=!1):(I.value=!0,L.value=!0,A.value=!0)},{immediate:!0});const ye=()=>{if(!Pe.verifyWalletPassword(W.currentLoggedInWallet.name,C.chainNetworkName,g.value)){U.value=r("general.walletPasswordInvalid",{name:W.currentLoggedInWallet.name});return}ee.value?Q.changeAssetSupplyMultiSig(ee.value,g.value,K.value,k.value,b.value,B.value,x.value):Q.changeAssetSupply(x.value,g.value,K.value,k.value,b.value,B.value),m.push({name:"ViewAccountPendingTransactions",params:{address:x.value}})};M(k,l=>{l=="increase"?f.value=parseFloat(b.value)>Z-S.value:S.value==E.value?f.value=parseFloat(b.value)>S.value-1:f.value=parseFloat(b.value)>E.value}),M(b,l=>{k.value=="increase"?f.value=parseFloat(l)>Z-S.value:S.value==E.value?f.value=parseFloat(l)>S.value-1:f.value=parseFloat(l)>E.value});const re=o(()=>z(x.value)?parseFloat(J.value)+D.value:D.value),_e=o(()=>h.amountFormatterSimple(re.value,0)),P=l=>{A.value=l,L.value=l,I.value=l};M(re,l=>{te.value<l?P(!0):P(!1)}),M($,l=>{P(!!l)}),M(R,l=>{P(!!l)});const we=o(()=>{let l=ne(_.value)?ne(_.value).balance:0;return h.toCurrencyFormat(l)});return{currentNativeTokenName:H,selectedAccName:ge,selectedAccAdd:x,balance:te,balanceNumber:X,showNoBalance:$,lockFundTxFee:se,lockFundCurrency:ve,lockFundTotalFee:J,totalFeeFormatted:_e,showSupplyErr:f,err:U,walletPassword:g,disableModify:me,showPasswdError:N,supply:b,disabledPassword:A,disabledSupply:L,currencyName:de,isMultiSig:z,isMultiSigBool:fe,selectAsset:K,selectIncreaseDecrease:k,modifyAsset:ye,transactionFee:he,transactionFeeExact:D,assetSupply:S,assetAmount:E,assetDivisibility:B,assetTransferable:pe,assetMutable:oe,getMultiSigCosigner:y,cosignerBalanceInsufficient:i,cosignerAddress:_,cosigner:ee,isNotCosigner:R,disabledSelectIncreaseDecrease:I,Helper:h,svgString:be,maxAmount:e,maxAssetSupply:Z,checkCosignBalance:we}}},$e={class:"w-10/12 ml-auto mr-auto"},es={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},ss={class:"xl:col-span-2 p-6 lg:p-12"},ts={class:"lg:flex lg:justify-between lg:items-center"},ls={class:"font-semibold mb-4 inline-block mt-1"},as={class:"flex items-center"},os=["innerHTML"],rs={class:"ml-2"},is={class:"text-blue-primary text-xxs font-bold uppercase mb-1"},ns={class:"font-bold text-black text-sm"},cs={key:0,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},ds={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},us=s("div",{class:"inline-block text-xs"},"Asset is immutable",-1),vs={key:1,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},ms={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},gs={class:"inline-block text-xs"},fs={key:2,class:"rounded-md bg-yellow-200 w-full p-2 flex items-center justify-center"},bs={class:"rounded-full w-5 h-5 bg-yellow-100 inline-block relative mr-2"},ps={class:"inline-block text-xs"},hs={key:3,class:"error error_box"},ys={class:"text-right w-full"},_s={key:0,class:"inline-block"},ws={class:"text-tsm text-left mt-3"},xs={key:0,class:"font-bold"},ks={key:0,class:"error"},Ss={key:1,class:"font-bold"},Cs=["value"],Ms={key:2,class:"error"},Ts={class:"border border-blue-primary p-4 bg-blue-100 flex items-center rounded mt-5"},Fs=s("img",{src:je},null,-1),As={class:"ml-1"},Ls={class:"uppercase text-blue-primary font-semibold text-xxs"},Is={class:"text-black text-sm font-bold"},Ns={class:"border border-gray-200 p-4 rounded mt-5"},Ps={class:"lg:grid lg:grid-cols-2"},Vs={class:"my-3"},Es={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Bs={src:Y,class:"inline-block ml-2 relative",style:{top:"-1px"}},Ds={class:"text-black font-bold text-sm"},Ws={class:"my-3"},js={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Hs={src:Y,class:"inline-block ml-2 relative",style:{top:"-1px"}},Us={class:"text-black font-bold text-sm"},Rs={class:"my-3"},qs={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},zs={src:Y,class:"inline-block ml-2 relative",style:{top:"-1px"}},Os={class:"uppercase text-black font-bold text-sm"},Qs={class:"my-3"},Ys={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Gs={src:Y,class:"inline-block ml-2 relative",style:{top:"-1px"}},Js={class:"uppercase text-black font-bold text-sm"},Xs={class:"lg:grid lg:grid-cols-2 mt-5"},Zs={class:"bg-navy-primary py-6 px-12 xl:col-span-1"},Ks={class:"text-xs text-white mt-5 mb-1.5"},$s=["disabled"],et={class:"text-center"};function st(t,r,m,e,H,f){const g=V("font-awesome-icon"),U=V("SelectModificationType"),A=V("SupplyInputClean"),L=V("TransactionFeeDisplay"),I=V("PasswordInput"),G=V("router-link"),N=Fe("tooltip");return n(),c("div",null,[s("div",$e,[s("div",es,[s("div",ss,[s("div",ts,[s("div",ls,a(t.$t("asset.modifyAssetSupply")),1),s("div",as,[s("div",{innerHTML:e.svgString,class:"inline-block"},null,8,os),s("div",rs,[s("div",is,a(t.$t("asset.assetCreatedBy")),1),s("div",ns,a(e.selectedAccName),1)])])]),e.assetMutable?F("v-if",!0):(n(),c("div",cs,[s("div",ds,[w(g,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),us])),e.showNoBalance?(n(),c("div",vs,[s("div",ms,[w(g,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),s("div",gs,a(t.$t("general.insufficientBalance")),1)])):e.isNotCosigner?(n(),c("div",fs,[s("div",bs,[w(g,{icon:"exclamation",class:"text-yellow-500 h-3 w-3 absolute",style:{top:"5px",left:"7px"}})]),s("div",ps,a(t.$t("general.noCosigner")),1)])):F("v-if",!0),e.err!=""?(n(),c("div",hs,a(e.err),1)):F("v-if",!0),s("div",ys,[e.getMultiSigCosigner.cosignerList.length>0?(n(),c("div",_s,[s("div",ws,[T(a(t.$t("general.initiateBy"))+": ",1),e.getMultiSigCosigner.cosignerList.length==1?(n(),c("span",xs,[T(a(e.getMultiSigCosigner.cosignerList[0].name)+" ("+a(t.$t("general.balance"))+": "+a(e.Helper.amountFormatterSimple(e.getMultiSigCosigner.cosignerList[0].balance,0))+" "+a(e.currentNativeTokenName)+") ",1),e.getMultiSigCosigner.cosignerList[0].balance<e.lockFundTotalFee?(n(),c("span",ks,"- "+a(t.$t("general.insufficientBalance")),1)):F("v-if",!0)])):(n(),c("span",Ss,[j(s("select",{"onUpdate:modelValue":r[0]||(r[0]=i=>e.cosignerAddress=i)},[(n(!0),c(Le,null,Ie(e.getMultiSigCosigner.cosignerList,(i,_)=>(n(),c("option",{value:i.address,key:_},a(i.name)+" ("+a(t.$t("general.balance"))+": "+a(i.balance)+" "+a(e.currentNativeTokenName)+")",9,Cs))),128))],512),[[Ae,e.cosignerAddress]])])),e.cosignerBalanceInsufficient?(n(),c("div",Ms,"- "+a(t.$t("general.insufficientBalance")),1)):F("v-if",!0)])])):F("v-if",!0)]),s("div",Ts,[Fs,s("div",As,[s("div",Ls,a(t.$t("general.assetId")),1),s("div",Is,a(e.selectAsset),1)])]),s("div",Ns,[s("div",Ps,[s("div",Vs,[s("div",Es,[T(a(t.$t("asset.currentSupply")),1),j(s("img",Bs,null,512),[[N,{value:"<tiptext>"+t.$t("asset.supplyMsg2")+"<br>"+t.$t("asset.supplyMsg3")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),s("div",Ds,a(e.assetAmount),1)]),s("div",Ws,[s("div",js,[T(a(t.$t("general.divisibility")),1),j(s("img",Hs,null,512),[[N,{value:"<tiptext>"+t.$t("asset.divisibilityMsg4")+"<br><br>"+t.$t("asset.divisibilityMsg2")+"<br>"+t.$t("asset.divisibilityMsg3")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),s("div",Us,a(e.assetDivisibility),1)]),s("div",Rs,[s("div",qs,[T(a(t.$t("general.transferable")),1),j(s("img",zs,null,512),[[N,{value:"<tiptext>"+t.$t("asset.transferableMsg")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),s("div",Os,a(e.assetTransferable?t.$t("general.yes"):t.$t("general.no")),1)]),s("div",Qs,[s("div",Ys,[T(a(t.$t("general.supplyMutable")),1),j(s("img",Gs,null,512),[[N,{value:"<tiptext>"+t.$t("asset.supplyMutableMsg")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),s("div",Js,a(e.assetMutable?t.$t("general.yes"):t.$t("general.no")),1)])])]),s("div",Xs,[w(U,{title:t.$t("asset.modificationType"),class:"lg:mr-4",modelValue:e.selectIncreaseDecrease,"onUpdate:modelValue":r[1]||(r[1]=i=>e.selectIncreaseDecrease=i)},null,8,["title","modelValue"]),w(A,{disabled:e.showNoBalance||e.isNotCosigner,modelValue:e.supply,"onUpdate:modelValue":r[2]||(r[2]=i=>e.supply=i),balance:e.maxAssetSupply-e.assetSupply.value,placeholder:t.$t("asset.quantityOf",{value:e.selectIncreaseDecrease}),type:"text",icon:"coins",showError:e.showSupplyErr,errorMessage:e.selectIncreaseDecrease=="increase"?" The total asset supply should not exceed 900T":" You have exceeded the maximum value for decrease asset supply.",decimal:Number(e.assetDivisibility),class:"lg:ml-4"},null,8,["disabled","modelValue","balance","placeholder","showError","errorMessage","decimal"])])]),s("div",Zs,[w(L,{"transaction-fee":e.transactionFee,"total-fee-formatted":e.totalFeeFormatted,"get-multi-sig-cosigner":e.getMultiSigCosigner,"check-cosign-balance":e.checkCosignBalance,"lock-fund-currency":e.lockFundCurrency,"lock-fund-tx-fee":String(e.lockFundTxFee),balance:e.balance,"selected-acc-add":e.selectedAccAdd},null,8,["transaction-fee","total-fee-formatted","get-multi-sig-cosigner","check-cosign-balance","lock-fund-currency","lock-fund-tx-fee","balance","selected-acc-add"]),s("div",Ks,a(t.$t("general.enterPasswordContinue")),1),w(I,{placeholder:t.$t("general.password"),errorMessage:t.$t("general.passwordRequired"),showError:e.showPasswdError,modelValue:e.walletPassword,"onUpdate:modelValue":r[3]||(r[3]=i=>e.walletPassword=i),disabled:e.disabledPassword},null,8,["placeholder","errorMessage","showError","modelValue","disabled"]),s("button",{type:"submit",class:"mt-3 w-full blue-btn py-4 disabled:opacity-50 disabled:cursor-auto text-white",disabled:e.disableModify,onClick:r[4]||(r[4]=(...i)=>e.modifyAsset&&e.modifyAsset(...i))},a(t.$t("asset.modifyAssetSupply")),9,$s),s("div",et,[w(G,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white border-b-2 border-white"},{default:Ne(()=>[T(a(t.$t("general.cancel")),1)]),_:1})])])])])])}const vt=ce(Ke,[["render",st],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/services/submodule/assets/views/ViewServicesAssetsModifySupplyChange.vue"]]);export{vt as default};
