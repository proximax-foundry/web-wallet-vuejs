import"./vue-86063517.js";import{w as i,A as C,W as ee,s as j,n as v,_ as te}from"./index-71c561bd.js";import{c as re}from"./functions-3b5b4af7.js";import{u as se,d as oe}from"./primevue-35724b2c.js";import{M as ie}from"./multisigUtils-8ddc00ce.js";import{d as l}from"./tsjs-xpx-chain-sdk-84426b6a.js";import{A as ae,a as ne}from"./AccountTabs-3292ce5c.js";import{u as le}from"./vue-i18n-728f748b.js";import{u as de}from"./vue-router-21fffbbf.js";import{d as ce,c as M,r as V,B,o as c,z as u,A as o,a as b,g as d,m as F,l as D,e as p,F as ue,k as me,bf as K}from"./@vue-a9ecc9f1.js";import"./@js-joda-d98eb16f.js";import"./rxjs-1250b26d.js";import"./tslib-8dbab242.js";import"./crypto-js-e64ac54c.js";import"./crypto-browserify-4fd8cccd.js";import"./randombytes-685e9383.js";import"./node-stdlib-browser-23a8bc7f.js";import"./buffer-6d367910.js";import"./base64-js-50a5cdf9.js";import"./ieee754-44f7831e.js";import"./process-2209b2b3.js";import"./safe-buffer-c463177b.js";import"./create-hash-92c04a28.js";import"./inherits-804453d8.js";import"./md5.js-8d474739.js";import"./hash-base-bb85fc42.js";import"./readable-stream-2241ee9e.js";import"./events-86ccc6d8.js";import"./util-06f7ff32.js";import"./is-arguments-86164331.js";import"./has-tostringtag-7c6352d6.js";import"./has-symbols-cd7870b9.js";import"./call-bind-9e7f09da.js";import"./get-intrinsic-f35014ba.js";import"./has-proto-8ede3a55.js";import"./function-bind-68631a08.js";import"./has-ab8e2922.js";import"./is-generator-function-06dfaf9d.js";import"./which-typed-array-cf6b6a29.js";import"./for-each-f57c5052.js";import"./is-callable-7492318c.js";import"./available-typed-arrays-61974ec7.js";import"./gopd-bab4d6bd.js";import"./is-typed-array-037eef20.js";import"./util-deprecate-c3aabb3c.js";import"./string_decoder-ef7b01fe.js";import"./ripemd160-58dcfa02.js";import"./sha.js-cea3da2e.js";import"./cipher-base-aee0e03d.js";import"./stream-browserify-7496a08f.js";import"./create-hmac-e8b5ea4a.js";import"./browserify-sign-a708a95f.js";import"./browserify-rsa-bfbdcbb6.js";import"./bn.js-1ae23332.js";import"./elliptic-75e883ee.js";import"./minimalistic-assert-4cc49674.js";import"./minimalistic-crypto-utils-6f869a51.js";import"./brorand-03f0f79d.js";import"./hash.js-4f5dfe73.js";import"./hmac-drbg-87799258.js";import"./parse-asn1-465c125b.js";import"./asn1.js-405e93e4.js";import"./safer-buffer-2ac6237e.js";import"./evp_bytestokey-e91543fa.js";import"./browserify-aes-ce20a0e6.js";import"./buffer-xor-87a7236a.js";import"./pbkdf2-e2ae8643.js";import"./browserify-cipher-c4c37ca3.js";import"./browserify-des-3f7e64d9.js";import"./des.js-d262604a.js";import"./diffie-hellman-c8260aab.js";import"./miller-rabin-de27bf02.js";import"./create-ecdh-ffe720e9.js";import"./public-encrypt-fc0568a2.js";import"./randomfill-2874e5f1.js";import"./mathjs-2a513dae.js";import"./@babel-484168fe.js";import"./typed-function-4896e4f1.js";import"./decimal.js-d133ee8e.js";import"./complex.js-cf2520e8.js";import"./fraction.js-39e7906a.js";import"./javascript-natural-sort-c4dd0c27.js";import"./escape-latex-c8a96e7a.js";import"./seedrandom-c8f991ad.js";import"./tiny-emitter-56d49cfd.js";import"./js-sha3-d7d4f583.js";import"./crypto-random-string-d158262e.js";import"./jose-92e5544c.js";import"./vue-loading-overlay-b89251b1.js";import"./jspdf-30014160.js";import"./fflate-8981c52c.js";import"./vue-debounce-3bbbf8c6.js";import"./mitt-f7ef348c.js";/* empty css                   */import"./maska-6f10db43.js";import"./@fortawesome-014b81f2.js";import"./vue3-blocks-tree-e53499e3.js";import"./@noble-f8eff84a.js";import"./utf8-c941a4a0.js";import"./bip39-936aefa9.js";import"./axios-b48d2c29.js";import"./flatbuffers-edc4f8d7.js";import"./ws-0a714537.js";import"./@intlify-16888cd3.js";import"./jdenticon-e4458e79.js";import"./TextInput-50fcd4b9.js";import"./TextInputClean-e28e968a.js";import"./icon-key-5b3f7dda.js";const pe="/web-wallet-vuejs/assets/chevron_right-3f95020a.svg",fe={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},ge={class:"p-6 border-2 border-t-0"},ve={key:0,class:"flex cursor-pointer"},be={class:"border-2 border-blue-primary p-1 mb-3 w-16 text-white bg-blue-primary text-xs text-center font-semibold"},Ae={class:"text-xs font-semibold"},ye={class:"border p-4 my-3"},we={class:"flex flex-col gap-2"},he=["onClick"],xe={class:"text-txs font-semibold text-blue-primary"},_e={class:"flex"},ke=["id","copyValue","copySubject","title"],Ie={key:0,class:"w-5 h-5 ml-auto",src:pe},Le={key:0,class:"text-blue-primary text-xs text-center font-semibold"},Ce={class:"flex text-txs w-9/12 ml-auto mr-auto text-gray-400 mt-1 text-center justify-center"},Me={key:0},We=o("div",{class:"gray-line my-8"},null,-1),$e={class:"text-xs font-semibold"},Se={class:"border p-4 mt-3"},Ve={key:0,class:"w-full"},Fe={key:1,class:"text-blue-primary text-xs text-center font-semibold"},Ne={key:2,class:"flex text-txs w-9/12 ml-auto mr-auto text-gray-400 mt-1 justify-center text-center"},Pe={key:0},Re=ce({__name:"ViewMultisigHome",props:{address:String},setup(A){const N=A,{t:H}=le(),U=se(),m=M(()=>{if(!i.currentLoggedInWallet)return null;let e=i.currentLoggedInWallet.accounts.find(t=>t.address==N.address)||i.currentLoggedInWallet.others.find(t=>t.address==N.address);return e||null}),y=e=>l.Address.createFromRawAddress(e).plain(),f=e=>{let t=y(e);return(i.currentLoggedInWallet.accounts.find(s=>s.address==t)||i.currentLoggedInWallet.others.find(s=>s.address==t))!=null},P=e=>{let t=l.Address.createFromRawAddress(e).plain();return!!i.currentLoggedInWallet.others.find(r=>r.address==t)},w=V(!1),W=C.networkType,x=e=>l.Address.createFromPublicKey(e,W),R=e=>i.currentLoggedInWallet.accounts.find(t=>t.address==x(e).plain())?i.currentLoggedInWallet.accounts.find(t=>t.address==x(e).plain()):i.currentLoggedInWallet.others.find(t=>t.address==x(e).plain()),O=e=>{const t=l.PublicAccount.createFromPublicKey(e,W).address.plain(),r=i.currentLoggedInWallet.contacts.find(s=>s.address==t);return r?r.name:R(e)?R(e).name:`Cosigner-${x(e).plain().substr(-4)}`};let z=M(()=>{if(!m.value)return[];let e=[];return m.value.multisigInfo.filter(r=>r.level==1).forEach(r=>e.push({name:O(r.publicKey),address:l.PublicAccount.createFromPublicKey(r.publicKey,W).address.pretty()})),e}),Z=ie.checkIsMultiSig(m.value?m.value.address:"");w.value=Z;const q=e=>{let t=document.getElementById(e).getAttribute("copyValue"),r=document.getElementById(e).getAttribute("copySubject");re(t),U.add({severity:"info",detail:r+" "+H("general.copied"),group:"br-custom",life:3e3})},_=V(!1),k=de(),T=e=>{i.currentLoggedInWallet.accounts.find(t=>t.name==e)&&i.currentLoggedInWallet.setDefaultAccountByName(e)},I=e=>{let t=i.currentLoggedInWallet.accounts.find(r=>r.address==e)||i.currentLoggedInWallet.others.find(r=>r.address==e);return t?t.name:""},G=e=>{if(f(e)&&!_.value&&!P(e)?(T(I(l.Address.createFromRawAddress(e).plain())),j(l.Address.createFromRawAddress(e).plain()),k.push({name:"ViewAccountDetails",params:{address:y(e)}})):f(e)&&k.push({name:"ViewAccountDetails",params:{address:y(e)}}),!v.currentNetworkProfile)return"";f(e)||window.open(v.currentNetworkProfile.chainExplorer.url+"/"+v.currentNetworkProfile.chainExplorer.addressRoute+"/"+e)},$=M(()=>{let e=[];if(!C.isReady||!C.chainAPI||!m.value)return e;const t=[...m.value.multisigInfo.filter(s=>s.level<0)],r=Math.min(...t.map(s=>s.level));if(r==1/0)return e;for(let s=0;s<Math.abs(r);s++){const a=t.filter(n=>n.level==-Math.abs(s+1)).map(n=>ee.createAddressFromPublicKey(n.publicKey,C.networkType).pretty());e.push({key:(s+1).toString(),label:"Level "+(s+1).toString(),selectable:!1,children:a.map((n,h)=>{const E=i.currentLoggedInWallet.accounts.find(S=>S.address==l.Address.createFromRawAddress(n).plain())||i.currentLoggedInWallet.accounts.find(S=>S.address==l.Address.createFromRawAddress(n).plain());return{type:"child",key:"0-"+h.toString(),balance:E?E.balance:null,label:I(l.Address.createFromRawAddress(n).plain())?I(l.Address.createFromRawAddress(n).plain()):n,data:n,selectable:!0}})})}return e}),L=M(()=>$.value.length),J=e=>{if(f(e.data)&&!_.value&&!P(e.data)?(T(I(l.Address.createFromRawAddress(e.data).plain())),j(l.Address.createFromRawAddress(e.data).plain()),k.push({name:"ViewAccountDetails",params:{address:y(e.data)}})):f(e.data)&&k.push({name:"ViewAccountDetails",params:{address:y(e.data)}}),!v.currentNetworkProfile)return"";f(e.data)||window.open(v.currentNetworkProfile.chainExplorer.url+"/"+v.currentNetworkProfile.chainExplorer.addressRoute+"/"+e.data)},g=V({}),Q=()=>{for(let e of $.value)Y(e);g.value={...g.value}},X=()=>{g.value={}},Y=e=>{e.children&&e.children.length&&(g.value[e.key]=!0)};return(e,t)=>{const r=B("router-link"),s=B("font-awesome-icon");return c(),u("div",null,[o("div",fe,[b(ae,{address:A.address,class:"mb-6"},null,8,["address"]),b(ne,{address:A.address,selected:"multisig"},null,8,["address"]),o("div",ge,[w.value?(c(),u("div",ve,[o("div",be,d(e.$t("general.multisig")),1),b(r,{to:{name:"ViewMultisigScheme",params:{address:A.address}},class:"border-2 border-blue-primary p-1 mb-3 w-16 text-blue-primary text-xs text-center font-semibold"},{default:F(()=>[D(d(e.$t("general.scheme")),1)]),_:1},8,["to"])])):p("v-if",!0),o("div",Ae,d(e.$t("multisig.accountCosignatories")),1),o("div",ye,[o("div",we,[(c(!0),u(ue,null,me(K(z),(a,n)=>(c(),u("div",{key:n},[o("div",{class:"border w-full cursor-pointer rounded-md p-3",onClick:h=>G(a.address)},[o("div",xe,d(a.name),1),o("div",_e,[o("div",{id:`cosignerAddress${n}`,copyValue:a.address,copySubject:e.$t("general.address"),title:a.address,class:"truncate md:text-clip md:w-auto text-txs font-bold mt-1"},d(a.address),9,ke),b(s,{icon:"copy",onMouseover:t[0]||(t[0]=h=>_.value=!0),onMouseout:t[1]||(t[1]=h=>_.value=!1),title:e.$t("general.copy"),onClick:h=>q(`cosignerAddress${n}`),class:"ml-2 w-5 h-5 text-blue-link cursor-pointer"},null,8,["title","onClick"]),f(a.address)?(c(),u("img",Ie)):p("v-if",!0)])],8,he)]))),128))]),w.value?p("v-if",!0):(c(),u("div",Le,d(e.$t("general.ntgToShow")),1)),o("div",Ce,[w.value?p("v-if",!0):(c(),u("span",Me,d(e.$t("multisig.noCosigner",{name:m.value?m.value.name:""})),1))])]),b(r,{to:{name:w.value?"ViewMultisigEditAccount":"ViewMultisigConvertAccount",params:{address:A.address}},class:"blue-btn py-2 px-2"},{default:F(()=>[D(d(e.$t("multisig.manageCosignatories")),1)]),_:1},8,["to"]),We,o("div",$e,d(e.$t("multisig.cosignatoryOf")),1),o("div",Se,[L.value?(c(),u("div",Ve,[o("button",{class:"mr-5 w-32 blue-btn px-3 py-3 disabled:opacity-50 disabled:cursor-auto",onClick:t[2]||(t[2]=a=>Q())}," Expand All "),o("button",{class:"w-32 blue-btn px-3 py-3 disabled:opacity-50 disabled:cursor-auto",onClick:t[3]||(t[3]=a=>X())}," Collapse All "),b(K(oe),{expandedKeys:g.value,"onUpdate:expandedKeys":t[4]||(t[4]=a=>g.value=a),value:$.value,filter:!0,filterMode:"strict",onNodeSelect:J,selectionMode:"single",class:"mt-4"},{default:F(a=>[o("div",null,d(a.node.label),1)]),_:1},8,["expandedKeys","value"])])):p("v-if",!0),L.value?p("v-if",!0):(c(),u("div",Fe,d(e.$t("general.ntgToShow")),1)),L.value?p("v-if",!0):(c(),u("div",Ne,[L.value?p("v-if",!0):(c(),u("span",Pe,d(e.$t("multisig.noMultisig",{name:m.value?m.value.name:""})),1))]))])])])])}}});const Tr=te(Re,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/submodule/multisig/views/ViewMultisigHome.vue"]]);export{Tr as default};
