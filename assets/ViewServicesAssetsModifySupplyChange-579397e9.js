import{_ as ce,o as n,b as c,e,t as a,f as F,ac as xe,u as ke,q as Se,D as Ce,c as o,E as p,r as m,n as C,H as h,P as Me,w as D,ak as z,I as Te,at as O,a as M,U as ne,k as V,R as Fe,s as w,A as T,S as W,af as Ae,F as Le,i as Ne,z as Ie,W as Pe}from"./index-fe79a787.js";import{P as Ve}from"./PasswordInput-cf8558e9.js";import{S as Ee}from"./SupplyInputClean-07b3fd48.js";import{T as Be}from"./TransactionFeeDisplay-ba7eaf3d.js";import{A as Y}from"./assetsUtils-7958dc8a.js";import{t as De}from"./jdenticon-module-b7a8486b.js";import{M as We}from"./multisigUtils-751fdb71.js";import{_ as je}from"./icon-asset-2a9ae6ea.js";import{_ as G}from"./icon-info-8b4f1351.js";import"./proximax-logo-ecfc3767.js";import"./icon-new-page-link-270844f6.js";const Ue={props:{placeholder:String,errorMessage:String,showError:Boolean,modelValue:String,title:String,disabled:Boolean},emits:["update:modelValue"],name:"SelectModificationType",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},watch:{showError:function(t){t?(this.borderColor="border-2 border-red-primary",this.textErr=!0):(this.borderColor="border-2 border-gray-300",this.textErr=!1)}}},He={class:"border border-gray-200 px-2 py-1 h-14 rounded-md"},Re={class:"uppercase text-gray-500 text-txs text-left mb-2"},qe={class:"flex items-center"},ze=["value","disabled","checked"],Oe={for:"increase",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},Ye=["value","disabled","checked"],Ge={for:"decrease",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},Je={class:"h-3 mb-2"},Qe={key:0,class:"error error-text text-left"};function Xe(t,r,d,s,j,f){return n(),c("div",null,[e("div",He,[e("div",Re,a(d.title),1),e("div",qe,[e("input",{id:"increase",type:"radio",name:"modificationType",value:d.modelValue,disabled:d.disabled,class:"h-5 w-5",onChange:r[0]||(r[0]=g=>t.$emit("update:modelValue","increase")),checked:d.modelValue=="increase"},null,40,ze),e("label",Oe,a(t.$t("general.increase")),1),e("input",{id:"decrease",type:"radio",name:"modificationType",value:d.modelValue,disabled:d.disabled,class:"h-5 w-5",onChange:r[1]||(r[1]=g=>t.$emit("update:modelValue","decrease")),checked:d.modelValue=="decrease"},null,40,Ye),e("label",Ge,a(t.$t("general.decrease")),1)])]),e("div",Je,[j.textErr||d.showError?(n(),c("div",Qe,a(d.errorMessage),1)):F("v-if",!0)])])}const Ze=ce(Ue,[["render",Xe],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/services/submodule/assets/components/SelectModificationType.vue"]]),Ke={name:"ViewServicesAssetsModifySupplyChange",directives:{tooltip:xe},components:{PasswordInput:Ve,SupplyInputClean:Ee,SelectModificationType:Ze,TransactionFeeDisplay:Be},props:{assetId:String,address:String,assetBalance:Number},setup(t){const{t:r}=ke(),d=Se();Ce();let s=9e14;const j=o(()=>p.nativeToken.label),f=m(!1),g=m(""),U=m(""),A=m(!1),L=m(!1),N=m(!1),J="^[^ ]{8,}$",I=m(!1),i=m(!1),_=m(""),de=o(()=>p.nativeToken.label),ue=o(()=>C.currentNetworkProfileConfig?h.convertToExact(C.currentNetworkProfileConfig.lockedFundsPerAggregate,p.nativeToken.divisibility):0),ve=o(()=>C.currentNetworkProfileConfig?h.convertToCurrency(C.currentNetworkProfileConfig.lockedFundsPerAggregate,p.nativeToken.divisibility):0),se=o(()=>C.currentNetworkProfile?h.convertToExact(Me.getLockFundFee(),p.nativeToken.divisibility):0),Q=o(()=>ue.value+se.value),me=o(()=>!(g.value.match(J)&&b.value>0&&!f.value&&!$.value&!R.value)),ge=o(()=>u.value?u.value.name:""),x=o(()=>u.value?u.value.address:""),X=o(()=>u.value?u.value.balance:0),te=o(()=>{if(u.value)return h.toCurrencyFormat(u.value.balance,p.nativeToken.divisibility)}),b=m("0"),le=h.createAddress(t.address).plain();let u=o(()=>D.currentLoggedInWallet?D.currentLoggedInWallet.accounts.find(l=>l.address==le)||D.currentLoggedInWallet.others.find(l=>l.address==le):null);const fe=m(z(x.value));let ae=new Te("ThemeStyleConfig");ae.init();const be=m(De(t.address,40,ae.jdenticonConfig)),k=m("increase");let Z=9e14;const v=o(()=>u.value?u.value.assets.find(l=>l.idHex===t.assetId):null),H=o(()=>v.value?v.value.amount:0),K=o(()=>v.value?v.value.idHex:""),pe=o(()=>v.value?v.value.transferable:!1),oe=o(()=>v.value?v.value.supplyMutable:!1),E=o(()=>v.value?v.value.divisibility:0),S=o(()=>v.value?v.value.supply/Math.pow(10,v.value.divisibility):0),y=o(()=>{if(!u.value)return{hasCosigner:!1,cosignerList:[]};if(C.currentNetworkProfileConfig){let l=We.getCosignerInWallet(u.value?u.value.publicKey:""),ie=[];return l.cosignerList.forEach(q=>{ie.push({publicKey:q,name:O(q).name,balance:O(q).balance,address:O(q).address})}),l.cosignerList=ie,{hasCosigner:l.hasCosigner,cosignerList:l.cosignerList}}else return{hasCosigner:!1,cosignerList:[]}});_.value=y.value.cosignerList.length>0?y.value.cosignerList[0].address:"",M(y,l=>{l.cosignerList.length>0&&(_.value=l.cosignerList.length>0?y.value.cosignerList[0].address:"")});const R=o(()=>y.value.cosignerList.length==0&&z(x.value)),$=o(()=>R.value?X.value<B.value:X.value<B.value+Q.value),ee=o(()=>y.value.cosignerList.length>0?y.value.cosignerList.length>1?_.value:O(y.value.cosignerList[0].publicKey).address:""),he=o(()=>p.isReady?h.convertToCurrency(Y.getMosaicSupplyChangeTransactionFee(t.assetId,k.value,parseFloat(b.value),E.value),p.nativeToken.divisibility):"0"),B=o(()=>p.isReady?h.convertToExact(Y.getMosaicSupplyChangeTransactionFee(t.assetId,k.value,parseFloat(b.value),E.value),p.nativeToken.divisibility):0);M(oe,l=>{l?(N.value=!1,L.value=!1,A.value=!1):(N.value=!0,L.value=!0,A.value=!0)},{immediate:!0});const ye=()=>{if(!Pe.verifyWalletPassword(D.currentLoggedInWallet.name,C.chainNetworkName,g.value)){U.value=r("general.walletPasswordInvalid",{name:D.currentLoggedInWallet.name});return}ee.value?Y.changeAssetSupplyMultiSig(ee.value,g.value,K.value,k.value,b.value,E.value,x.value):Y.changeAssetSupply(x.value,g.value,K.value,k.value,b.value,E.value),d.push({name:"ViewAccountPendingTransactions",params:{address:x.value}})};M(k,l=>{l=="increase"?f.value=parseFloat(b.value)>Z-S.value:S.value==H.value?f.value=parseFloat(b.value)>S.value-1:f.value=parseFloat(b.value)>H.value}),M(b,l=>{k.value=="increase"?f.value=parseFloat(l)>Z-S.value:S.value==H.value?f.value=parseFloat(l)>S.value-1:f.value=parseFloat(l)>H.value});const re=o(()=>z(x.value)?parseFloat(Q.value)+B.value:B.value),_e=o(()=>h.amountFormatterSimple(re.value,0)),P=l=>{A.value=l,L.value=l,N.value=l};M(re,l=>{te.value<l?P(!0):P(!1)}),M($,l=>{P(!!l)}),M(R,l=>{P(!!l)});const we=o(()=>{let l=ne(_.value)?ne(_.value).balance:0;return h.toCurrencyFormat(l)});return{currentNativeTokenName:j,selectedAccName:ge,selectedAccAdd:x,balance:te,balanceNumber:X,showNoBalance:$,lockFundTxFee:se,lockFundCurrency:ve,lockFundTotalFee:Q,totalFeeFormatted:_e,showSupplyErr:f,err:U,walletPassword:g,disableModify:me,showPasswdError:I,supply:b,disabledPassword:A,disabledSupply:L,currencyName:de,isMultiSig:z,isMultiSigBool:fe,selectAsset:K,selectIncreaseDecrease:k,modifyAsset:ye,transactionFee:he,transactionFeeExact:B,assetSupply:S,assetDivisibility:E,assetTransferable:pe,assetMutable:oe,getMultiSigCosigner:y,cosignerBalanceInsufficient:i,cosignerAddress:_,cosigner:ee,isNotCosigner:R,disabledSelectIncreaseDecrease:N,Helper:h,svgString:be,maxAmount:s,maxAssetSupply:Z,checkCosignBalance:we}}},$e={class:"w-10/12 ml-auto mr-auto"},es={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},ss={class:"xl:col-span-2 p-6 lg:p-12"},ts={class:"lg:flex lg:justify-between lg:items-center"},ls={class:"font-semibold mb-4 inline-block mt-1"},as={class:"flex items-center"},os=["innerHTML"],rs={class:"ml-2"},is={class:"text-blue-primary text-xxs font-bold uppercase mb-1"},ns={class:"font-bold text-black text-sm"},cs={key:0,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},ds={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},us=e("div",{class:"inline-block text-xs"},"Asset is immutable",-1),vs={key:1,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},ms={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},gs={class:"inline-block text-xs"},fs={key:2,class:"rounded-md bg-yellow-200 w-full p-2 flex items-center justify-center"},bs={class:"rounded-full w-5 h-5 bg-yellow-100 inline-block relative mr-2"},ps={class:"inline-block text-xs"},hs={key:3,class:"error error_box"},ys={class:"text-right w-full"},_s={key:0,class:"inline-block"},ws={class:"text-tsm text-left mt-3"},xs={key:0,class:"font-bold"},ks={key:0,class:"error"},Ss={key:1,class:"font-bold"},Cs=["value"],Ms={key:2,class:"error"},Ts={class:"border border-blue-primary p-4 bg-blue-100 flex items-center rounded mt-5"},Fs=e("img",{src:je},null,-1),As={class:"ml-1"},Ls={class:"uppercase text-blue-primary font-semibold text-xxs"},Ns={class:"text-black text-sm font-bold"},Is={class:"border border-gray-200 p-4 rounded mt-5"},Ps={class:"lg:grid lg:grid-cols-2"},Vs={class:"my-3"},Es={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Bs={src:G,class:"inline-block ml-2 relative",style:{top:"-1px"}},Ds={class:"text-black font-bold text-sm"},Ws={class:"my-3"},js={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Us={src:G,class:"inline-block ml-2 relative",style:{top:"-1px"}},Hs={class:"text-black font-bold text-sm"},Rs={class:"my-3"},qs={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},zs={src:G,class:"inline-block ml-2 relative",style:{top:"-1px"}},Os={class:"uppercase text-black font-bold text-sm"},Ys={class:"my-3"},Gs={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Js={src:G,class:"inline-block ml-2 relative",style:{top:"-1px"}},Qs={class:"uppercase text-black font-bold text-sm"},Xs={class:"lg:grid lg:grid-cols-2 mt-5"},Zs={class:"bg-navy-primary py-6 px-12 xl:col-span-1"},Ks={class:"text-xs text-white mt-5 mb-1.5"},$s=["disabled"],et={class:"text-center"};function st(t,r,d,s,j,f){const g=V("font-awesome-icon"),U=V("SelectModificationType"),A=V("SupplyInputClean"),L=V("TransactionFeeDisplay"),N=V("PasswordInput"),J=V("router-link"),I=Fe("tooltip");return n(),c("div",null,[e("div",$e,[e("div",es,[e("div",ss,[e("div",ts,[e("div",ls,a(t.$t("asset.modifyAssetSupply")),1),e("div",as,[e("div",{innerHTML:s.svgString,class:"inline-block"},null,8,os),e("div",rs,[e("div",is,a(t.$t("asset.assetCreatedBy")),1),e("div",ns,a(s.selectedAccName),1)])])]),s.assetMutable?F("v-if",!0):(n(),c("div",cs,[e("div",ds,[w(g,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),us])),s.showNoBalance?(n(),c("div",vs,[e("div",ms,[w(g,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),e("div",gs,a(t.$t("general.insufficientBalance")),1)])):s.isNotCosigner?(n(),c("div",fs,[e("div",bs,[w(g,{icon:"exclamation",class:"text-yellow-500 h-3 w-3 absolute",style:{top:"5px",left:"7px"}})]),e("div",ps,a(t.$t("general.noCosigner")),1)])):F("v-if",!0),s.err!=""?(n(),c("div",hs,a(s.err),1)):F("v-if",!0),e("div",ys,[s.getMultiSigCosigner.cosignerList.length>0?(n(),c("div",_s,[e("div",ws,[T(a(t.$t("general.initiateBy"))+": ",1),s.getMultiSigCosigner.cosignerList.length==1?(n(),c("span",xs,[T(a(s.getMultiSigCosigner.cosignerList[0].name)+" ("+a(t.$t("general.balance"))+": "+a(s.Helper.amountFormatterSimple(s.getMultiSigCosigner.cosignerList[0].balance,0))+" "+a(s.currentNativeTokenName)+") ",1),s.getMultiSigCosigner.cosignerList[0].balance<s.lockFundTotalFee?(n(),c("span",ks,"- "+a(t.$t("general.insufficientBalance")),1)):F("v-if",!0)])):(n(),c("span",Ss,[W(e("select",{"onUpdate:modelValue":r[0]||(r[0]=i=>s.cosignerAddress=i)},[(n(!0),c(Le,null,Ne(s.getMultiSigCosigner.cosignerList,(i,_)=>(n(),c("option",{value:i.address,key:_},a(i.name)+" ("+a(t.$t("general.balance"))+": "+a(i.balance)+" "+a(s.currentNativeTokenName)+")",9,Cs))),128))],512),[[Ae,s.cosignerAddress]])])),s.cosignerBalanceInsufficient?(n(),c("div",Ms,"- "+a(t.$t("general.insufficientBalance")),1)):F("v-if",!0)])])):F("v-if",!0)]),e("div",Ts,[Fs,e("div",As,[e("div",Ls,a(t.$t("general.assetId")),1),e("div",Ns,a(s.selectAsset),1)])]),e("div",Is,[e("div",Ps,[e("div",Vs,[e("div",Es,[T(a(t.$t("asset.currentSupply")),1),W(e("img",Bs,null,512),[[I,{value:"<tiptext>"+t.$t("asset.supplyMsg2")+"<br>"+t.$t("asset.supplyMsg3")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),e("div",Ds,a(d.assetBalance),1)]),e("div",Ws,[e("div",js,[T(a(t.$t("general.divisibility")),1),W(e("img",Us,null,512),[[I,{value:"<tiptext>"+t.$t("asset.divisibilityMsg4")+"<br><br>"+t.$t("asset.divisibilityMsg2")+"<br>"+t.$t("asset.divisibilityMsg3")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),e("div",Hs,a(s.assetDivisibility),1)]),e("div",Rs,[e("div",qs,[T(a(t.$t("general.transferable")),1),W(e("img",zs,null,512),[[I,{value:"<tiptext>"+t.$t("asset.transferableMsg")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),e("div",Os,a(s.assetTransferable?t.$t("general.yes"):t.$t("general.no")),1)]),e("div",Ys,[e("div",Gs,[T(a(t.$t("general.supplyMutable")),1),W(e("img",Js,null,512),[[I,{value:"<tiptext>"+t.$t("asset.supplyMutableMsg")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),e("div",Qs,a(s.assetMutable?t.$t("general.yes"):t.$t("general.no")),1)])])]),e("div",Xs,[w(U,{title:t.$t("asset.modificationType"),class:"lg:mr-4",modelValue:s.selectIncreaseDecrease,"onUpdate:modelValue":r[1]||(r[1]=i=>s.selectIncreaseDecrease=i)},null,8,["title","modelValue"]),w(A,{disabled:s.showNoBalance||s.isNotCosigner,modelValue:s.supply,"onUpdate:modelValue":r[2]||(r[2]=i=>s.supply=i),balance:s.maxAssetSupply-s.assetSupply.value,placeholder:t.$t("asset.quantityOf",{value:s.selectIncreaseDecrease}),type:"text",icon:"coins",showError:s.showSupplyErr,errorMessage:s.selectIncreaseDecrease=="increase"?" The total asset supply should not exceed 900T":" You have exceeded the maximum value for decrease asset supply.",decimal:Number(s.assetDivisibility),class:"lg:ml-4"},null,8,["disabled","modelValue","balance","placeholder","showError","errorMessage","decimal"])])]),e("div",Zs,[w(L,{"transaction-fee":s.transactionFee,"total-fee-formatted":s.totalFeeFormatted,"get-multi-sig-cosigner":s.getMultiSigCosigner,"check-cosign-balance":s.checkCosignBalance,"lock-fund-currency":s.lockFundCurrency,"lock-fund-tx-fee":String(s.lockFundTxFee),balance:s.balance,"selected-acc-add":s.selectedAccAdd},null,8,["transaction-fee","total-fee-formatted","get-multi-sig-cosigner","check-cosign-balance","lock-fund-currency","lock-fund-tx-fee","balance","selected-acc-add"]),e("div",Ks,a(t.$t("general.enterPasswordContinue")),1),w(N,{placeholder:t.$t("general.password"),errorMessage:t.$t("general.passwordRequired"),showError:s.showPasswdError,modelValue:s.walletPassword,"onUpdate:modelValue":r[3]||(r[3]=i=>s.walletPassword=i),disabled:s.disabledPassword},null,8,["placeholder","errorMessage","showError","modelValue","disabled"]),e("button",{type:"submit",class:"mt-3 w-full blue-btn py-4 disabled:opacity-50 disabled:cursor-auto text-white",disabled:s.disableModify,onClick:r[4]||(r[4]=(...i)=>s.modifyAsset&&s.modifyAsset(...i))},a(t.$t("asset.modifyAssetSupply")),9,$s),e("div",et,[w(J,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white border-b-2 border-white"},{default:Ie(()=>[T(a(t.$t("general.cancel")),1)]),_:1})])])])])])}const mt=ce(Ke,[["render",st],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/services/submodule/assets/views/ViewServicesAssetsModifySupplyChange.vue"]]);export{mt as default};
