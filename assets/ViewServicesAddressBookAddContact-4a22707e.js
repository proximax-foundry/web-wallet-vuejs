import{d as B}from"./tsjs-xpx-chain-sdk-84426b6a.js";import"./vue-86063517.js";import{T as z}from"./TextInputClean-8dbf8109.js";import{u as H}from"./vue-router-21fffbbf.js";import{u as J}from"./primevue-e09f7e84.js";import{w as m,W as Q,A as V,t as X,_ as Y}from"./index-5f2b4e3e.js";import{A as Z}from"./addressBookUtils-0d3294bf.js";import{u as $}from"./vue-i18n-728f748b.js";import{S as ee}from"./SelectInputPluginClean-7ccead36.js";import{A as oe,_ as te}from"./icon-save-655de861.js";import{r as n,c as A,w as P,u as re,B as h,o as L,z as G,A as f,a as v,m as S,l as _,g,e as ae}from"./@vue-a9ecc9f1.js";import"./@js-joda-d98eb16f.js";import"./rxjs-1250b26d.js";import"./tslib-8dbab242.js";import"./@noble-f8eff84a.js";import"./js-sha3-d7d4f583.js";import"./node-stdlib-browser-23a8bc7f.js";import"./buffer-6d367910.js";import"./base64-js-50a5cdf9.js";import"./ieee754-44f7831e.js";import"./process-2209b2b3.js";import"./utf8-c941a4a0.js";import"./bip39-936aefa9.js";import"./axios-b48d2c29.js";import"./flatbuffers-edc4f8d7.js";import"./ws-0a714537.js";import"./crypto-js-e64ac54c.js";import"./crypto-browserify-4fd8cccd.js";import"./randombytes-685e9383.js";import"./safe-buffer-c463177b.js";import"./create-hash-92c04a28.js";import"./inherits-804453d8.js";import"./md5.js-8d474739.js";import"./hash-base-bb85fc42.js";import"./readable-stream-2241ee9e.js";import"./events-86ccc6d8.js";import"./util-06f7ff32.js";import"./is-arguments-86164331.js";import"./has-tostringtag-7c6352d6.js";import"./has-symbols-cd7870b9.js";import"./call-bind-9e7f09da.js";import"./get-intrinsic-f35014ba.js";import"./has-proto-8ede3a55.js";import"./function-bind-68631a08.js";import"./has-ab8e2922.js";import"./is-generator-function-06dfaf9d.js";import"./which-typed-array-cf6b6a29.js";import"./for-each-f57c5052.js";import"./is-callable-7492318c.js";import"./available-typed-arrays-61974ec7.js";import"./gopd-bab4d6bd.js";import"./is-typed-array-037eef20.js";import"./util-deprecate-c3aabb3c.js";import"./string_decoder-ef7b01fe.js";import"./ripemd160-58dcfa02.js";import"./sha.js-cea3da2e.js";import"./cipher-base-aee0e03d.js";import"./stream-browserify-7496a08f.js";import"./create-hmac-e8b5ea4a.js";import"./browserify-sign-a708a95f.js";import"./browserify-rsa-bfbdcbb6.js";import"./bn.js-1ae23332.js";import"./elliptic-75e883ee.js";import"./minimalistic-assert-4cc49674.js";import"./minimalistic-crypto-utils-6f869a51.js";import"./brorand-03f0f79d.js";import"./hash.js-4f5dfe73.js";import"./hmac-drbg-87799258.js";import"./parse-asn1-465c125b.js";import"./asn1.js-405e93e4.js";import"./safer-buffer-2ac6237e.js";import"./evp_bytestokey-e91543fa.js";import"./browserify-aes-ce20a0e6.js";import"./buffer-xor-87a7236a.js";import"./pbkdf2-e2ae8643.js";import"./browserify-cipher-c4c37ca3.js";import"./browserify-des-3f7e64d9.js";import"./des.js-d262604a.js";import"./diffie-hellman-c8260aab.js";import"./miller-rabin-de27bf02.js";import"./create-ecdh-ffe720e9.js";import"./public-encrypt-fc0568a2.js";import"./randomfill-2874e5f1.js";import"./mathjs-2a513dae.js";import"./@babel-484168fe.js";import"./typed-function-4896e4f1.js";import"./decimal.js-d133ee8e.js";import"./complex.js-cf2520e8.js";import"./fraction.js-39e7906a.js";import"./javascript-natural-sort-c4dd0c27.js";import"./escape-latex-c8a96e7a.js";import"./seedrandom-c8f991ad.js";import"./tiny-emitter-56d49cfd.js";import"./crypto-random-string-d158262e.js";import"./jose-92e5544c.js";import"./vue-loading-overlay-b89251b1.js";import"./jspdf-30014160.js";import"./fflate-8981c52c.js";import"./vue-debounce-3bbbf8c6.js";import"./mitt-f7ef348c.js";/* empty css                   */import"./maska-6f10db43.js";import"./@fortawesome-014b81f2.js";import"./vue3-blocks-tree-e53499e3.js";import"./@intlify-16888cd3.js";import"./@vueform-4d3340af.js";const se={name:"ViewServicesAddressBookAddContact",components:{TextInputClean:z,SelectInputPluginClean:ee,AddCustomGroupModal:oe},setup(){const s=re().appContext.config.globalProperties.emitter,k=n(null),{t:e}=$(),x=J(),d=n(""),r=n(""),t=n(""),c=n(""),p=n(""),l=n(!1),y=n(""),M=H(),I=n(""),N=["-none-","Work","Friend","Family","Employee","Director"];let E=[];const w=n([]);if(w.value.push({value:"-none-",label:" - "},{value:"Work",label:e("addressBook.work")},{value:"Friend",label:e("addressBook.friend")},{value:"Family",label:e("addressBook.family")},{value:"Employee",label:e("addressBook.employee")},{value:"Director",label:e("addressBook.director")}),m.currentLoggedInWallet&&m.currentLoggedInWallet.contacts.length>0){m.currentLoggedInWallet.contacts.forEach(a=>{N.includes(a.group)||E.push(a.group)});let o=[...new Set(E)];o.length>0&&(o.sort(),o.forEach(a=>{w.value.push({value:a,label:a})}))}w.value.push({value:"Custom",label:e("addressBook.custom")});const D=A(()=>w.value),W=A(()=>!(l.value&&d.value!="")),O=A(()=>!l.value&&r.value!=""),T=A(()=>r.value!=""&&d.value==""||t.value!=""&&d.value==""),U=A(()=>{let o=e("general.invalidInput");return y.value?y.value:o});P(t,()=>{if(m.currentLoggedInWallet)if(t.value.length<=63||t.value.length>=65){r.value=t.value;const o=m.currentLoggedInWallet.accounts.find(u=>u.default==!0),a=Z.verifyNetworkAddress(o.address,r.value);l.value=a.isPassed,y.value=a.errMessage}else t.value.length==64&&(l.value=!0,r.value=Q.createAddressFromPublicKey(t.value,V.networkType).plain())});const C=n(!1);P(I,o=>{o=="Custom"&&(C.value=!0)});const F=async o=>{try{let a=await V.chainAPI.accountAPI.getAccountInfo(B.Address.createFromRawAddress(o));a.publicKey=="0000000000000000000000000000000000000000000000000000000000000000"?c.value=null:c.value=a.publicKey}catch{c.value=null}},R=async()=>{if(d.value==" "){p.value=e("general.nameRequired");return}t.value.length==64?c.value=t.value:await F(r.value),console.log(r.value);const o=B.Address.createFromRawAddress(r.value);let a=new X(d.value.trim(),o.plain(),I.value,c.value);const u=m.currentLoggedInWallet,K=u.accounts.findIndex(b=>b.name.toLowerCase()==d.value.toLowerCase().trim()),q=u.contacts!=null?u.contacts.findIndex(b=>B.Address.createFromRawAddress(b.address).plain()==o.plain()):-1,j=u.contacts!=null?u.contacts.findIndex(b=>b.name.toLowerCase()==d.value.toLowerCase().trim()):-1;q>=0?p.value=e("addressBook.addressExist"):j>=0||K>=0?p.value=e("addressBook.nameExist"):(m.currentLoggedInWallet.addAddressBook(a),m.wallets.saveMyWalletOnlytoLocalStorage(m.currentLoggedInWallet),p.value="",d.value="",t.value="",x.add({severity:"info",summary:e("general.addressBook"),detail:e("addressBook.newContactAdded"),group:"br-custom",life:5e3}),M.push({name:"ViewServicesAddressBook"}))};return s.on("CLOSE_ADDCUSTOMGROUP_PANEL",()=>{C.value=!1}),s.on("ADD_CUSTOM_GROUP",o=>{w.value.push({value:o,label:o}),k.value&&k.value.select(o),C.value=!1}),{err:p,addErr:U,contactName:d,address:r,addressOrPk:t,disableSave:W,showAddErr:O,showNameErr:T,SaveContact:R,selectContactGroups:I,contactGroups:D,isDisplayAddCustomPanel:C,selectGroupDropdown:k}}},le={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},ne={class:"flex text-xs font-semibold border-b-2 menu_title_div"},ie={class:"border border-gray-100 p-5 filter drop-shadow-xl mt-10 bg-white"},de={class:"text-md mb-5 font-semibold"},me={key:0,class:"error error_box mb-5"},ce={class:"mt-2 py-3 px-0 md:flex"},pe=["disabled"],ue=f("img",{src:te,class:"inline-block mr-2"},null,-1);function ve(i,s,k,e,x,d){const r=h("router-link"),t=h("TextInputClean"),c=h("SelectInputPluginClean"),p=h("AddCustomGroupModal");return L(),G("div",null,[f("div",le,[f("div",ne,[v(r,{to:{name:"ViewServicesAddressBook"},class:"w-18 text-center border-b pb-3"},{default:S(()=>[_(g(i.$t("general.list")),1)]),_:1}),v(r,{to:{name:"ViewServicesAddressBookImport"},class:"w-18 text-center border-b pb-3"},{default:S(()=>[_(g(i.$t("general.import")),1)]),_:1}),v(r,{to:{name:"ViewServicesAddressBookExport"},class:"w-18 text-center border-b pb-3"},{default:S(()=>[_(g(i.$t("general.export")),1)]),_:1})]),f("div",ie,[f("div",de,g(i.$t("addressBook.addNewContact")),1),e.err!=""?(L(),G("div",me,g(e.err),1)):ae("v-if",!0),f("div",ce,[v(t,{placeholder:i.$t("general.name"),errorMessage:i.$t("general.nameRequired"),modelValue:e.contactName,"onUpdate:modelValue":s[0]||(s[0]=l=>e.contactName=l),icon:"id-card-alt",showError:e.showNameErr,class:"w-full md:w-52 inline-block mr-2"},null,8,["placeholder","errorMessage","modelValue","showError"]),v(t,{placeholder:i.$t("multisig.addressOrPk"),errorMessage:e.addErr,modelValue:e.addressOrPk,"onUpdate:modelValue":s[1]||(s[1]=l=>e.addressOrPk=l),icon:"wallet",showError:e.showAddErr,class:"w-full md:w-96 inline-block mr-2"},null,8,["placeholder","errorMessage","modelValue","showError"]),v(c,{modelValue:e.selectContactGroups,"onUpdate:modelValue":s[2]||(s[2]=l=>e.selectContactGroups=l),placeholder:i.$t("general.group"),options:e.contactGroups,selectDefault:"-none-",ref:"selectGroupDropdown",class:"w-full md:w-60 inline-block mr-2"},null,8,["modelValue","placeholder","options"]),f("button",{type:"submit",class:"mt-5 md:mt-0 default-btn py-1 disabled:opacity-50 h-12 flex items-center",disabled:e.disableSave,onClick:s[3]||(s[3]=l=>e.SaveContact())},[ue,_(" "+g(i.$t("addressBook.saveAddress")),1)],8,pe)])])]),v(p,{toggleModal:e.isDisplayAddCustomPanel,groups:e.contactGroups},null,8,["toggleModal","groups"])])}const vt=Y(se,[["render",ve],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/services/submodule/addressbook/views/ViewServicesAddressBookAddContact.vue"]]);export{vt as default};
