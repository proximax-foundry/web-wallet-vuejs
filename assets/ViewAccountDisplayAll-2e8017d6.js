import{d as B,A as U,r as y,o as d,b as f,e,P as J,Q as X,t as b,j as Y,F as T,h as D,w as n,c as L,i as S,k as Z,v as E,m as I,f as W,y as ee,$ as ue,u as de,z as me,B as R,H as G,D as fe,l as ve,g as F,a0 as pe,a1 as ge,I as te,J as le,_ as se,a as q,a2 as be}from"./index-63d33769.js";import{_ as _e}from"./proximax-logo-ecfc3767.js";import{_ as ye,a as xe}from"./icon-key-5b3f7dda.js";import{_ as he}from"./icon-multisig-2a7c5e5f.js";import{c as Le}from"./functions-b4d31259.js";import{t as we}from"./jdenticon-module-ba46c3b9.js";import{_ as ne}from"./icon-arrow-down-83b4f5a8.js";import{T as $e}from"./TextInputClean-a292a89f.js";const Ie="/web-wallet-vuejs/assets/icon-default-account-drop-down-03c40c1e.svg",Ce={class:"w-full mt-3 border border-gray-200 px-2 py-2 rounded-md"},ke={class:"flex flex-col w-full"},Ae=e("div",{class:"uppercase text-gray-500 font-light text-xxs text-left"},"New Label Name",-1),We=["disabled"],Me=B({__name:"InputLabelNameModal",props:{selectLabel:{type:String,required:!0}},emits:["cancel-change-label","update-select"],setup(o){const k=o,c=D().appContext.config.globalProperties.emitter,v=U(),m=y(null),p=()=>{if(!n.currentLoggedInWallet||!m.value)return;let s=n.currentLoggedInWallet.labels.find(t=>t.name==k.selectLabel);s?(s.name=m.value,n.wallets.saveMyWalletOnlytoLocalStorage(n.currentLoggedInWallet),v.add({severity:"info",summary:"Label",detail:k.selectLabel+" is changed to "+m.value,group:"br-custom",life:5e3}),c.emit("cancel-change-label",!1),c.emit("update-select",m.value)):v.add({severity:"error",summary:"Error",detail:"Invalid",group:"br-custom",life:5e3})},a=()=>{c.emit("cancel-change-label",!1)};return(s,t)=>(d(),f(T,null,[e("div",Ce,[e("div",ke,[Ae,J(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=i=>m.value=i),disabled:o.selectLabel=="",class:"w-full font-semibold text-tsm outline-none mt-1"},null,8,We),[[X,m.value]])])]),e("div",{class:Y(["blue-btn font-semibold py-2 text-center mt-3 ml-auto mr-auto w-7/12",`${m.value?"cursor-pointer":"opacity-50"}`]),onClick:t[1]||(t[1]=i=>p())},b(s.$t("general.confirm")),3),e("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:t[2]||(t[2]=i=>a())},b(s.$t("general.cancel")),1)],64))}}),Se={key:0,class:"account-item-value account-item"},Te={class:"flex"},Ve={class:"flex flex-col ml-2 text-left"},Ne=e("div",{class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}}," Selected Label",-1),De={class:"mt-2 text-tsm font-bold"},Ee={class:"account-item"},Be={class:"flex"},je={class:"text-xs ml-2 font-semibold"},He=B({__name:"EditLabelModal",props:{toggleModal:{type:Boolean,required:!0}},setup(o){const x=D().appContext.config.globalProperties.emitter,c=y(""),v=L(()=>n.currentLoggedInWallet?n.currentLoggedInWallet.labels.map(a=>a.name):[]),m=p=>{p!=null&&(c.value=p)};return x.on("update-select",p=>{c.value=p}),(p,a)=>{const s=S("Dropdown");return d(),Z(ee(ue),{visible:o.toggleModal,modal:"",header:"Change Label Name",draggable:!1,dismissableMask:!0,closable:!1,class:"w-96"},{default:E(()=>[e("div",null,[I(s,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=t=>c.value=t),style:{width:"100%"},options:v.value,filter:!0,emptyFilterMessage:" ",placeholder:"Select Label",onChange:a[1]||(a[1]=t=>{m(t.value)})},{value:E(t=>[t.value?(d(),f("div",Se,[e("div",Te,[e("div",Ve,[Ne,e("div",De,b(t.value),1)])])])):W("",!0)]),option:E(t=>[e("div",Ee,[e("div",Be,[e("div",je,b(t.option),1)])])]),_:1},8,["modelValue","options"]),I(Me,{selectLabel:c.value},null,8,["selectLabel"])])]),_:1},8,["visible"])}}});const j=o=>(te("data-v-87defd13"),o=o(),le(),o),Pe={class:"flex gap-2"},Oe=["innerHTML"],Ue={class:"flex flex-col"},Fe={class:"text-blue-primary font-bold text-xs mb-0.5"},Ke={class:"flex justify-around"},Qe=["id","title","copyValue","copySubject"],ze={class:"flex"},Re={class:"text-xs font-bold"},Ge={key:0,class:"text-xs font-bold"},qe={class:"text-xxs mt-0.5"},Je={class:"ml-1 text-xs font-bold"},Xe=j(()=>e("img",{src:_e,class:"h-4 w-4"},null,-1)),Ye={class:"flex gap-2"},Ze=["title"],et=j(()=>e("img",{src:ye,class:"h-4 w-4"},null,-1)),tt={class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"},lt=["title"],st=j(()=>e("img",{src:he,class:"h-3 w-3 mr-1"},null,-1)),nt={class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"},at=["title"],ot=j(()=>e("img",{src:xe,class:"h-4 w-4 mr-1"},null,-1)),rt={class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"},it={class:"absolute flex invisible 2xl:visible pt-4 explicitLeft"},ct={key:0,class:"text-xs mr-3 border bg-gray-300 rounded-md p-1"},ut=B({__name:"AccountTile",props:{account:{}},setup(o){const x=D().appContext.config.globalProperties.emitter,c=y(),v=y(!1),m=U(),{t:p}=de(),a=y(""),s=L(()=>{if(n.currentLoggedInWallet){let l=[];return n.currentLoggedInWallet.labels.forEach(r=>{let C=!1;r.addresses.includes(o.account.address)&&(C=!0),l.push({name:r.name,isLabeled:C})}),l}else return[]}),t=l=>{c.value.toggle(l)},i=L(()=>[{label:"Change Labels",command:()=>{v.value=!0}}].concat(s.value.map(l=>({label:l.name,command:()=>{_(l.name)}})))),_=async l=>{if(!n.currentLoggedInWallet)return;let r=n.currentLoggedInWallet.labels.find($=>$.name==l),C=me.Address.createFromRawAddress(o.account.address).plain();if(!r)return;let N=r.addresses.findIndex($=>$==C);if(N>=0){r.removeAddress(N),n.wallets.saveMyWalletOnlytoLocalStorage(n.currentLoggedInWallet),m.add({severity:"info",summary:"Label",detail:A.value+" is removed as "+l,group:"br-custom",life:5e3});return}r.addresses.push(C),n.wallets.saveMyWalletOnlytoLocalStorage(n.currentLoggedInWallet),m.add({severity:"info",summary:"Label",detail:A.value+" is added as "+l,group:"br-custom",life:5e3})},A=L(()=>{const l=n.currentLoggedInWallet.contacts.find(r=>r.address==o.account.address);return l?l.name:o.account.name}),g=L(()=>R.nativeToken.label),u=L(()=>R.nativeToken.divisibility),w=L(()=>G.toCurrencyFormat(o.account.balance,u.value)),h=L(()=>{let l=w.value.split(".");return l[1]!=null?{left:l[0],right:l[1]}:{left:l[0],right:null}});let M=new fe("ThemeStyleConfig");M.init();const V=y(we(o.account.address,50,M.jdenticonConfig)),oe=l=>{let r=document.getElementById(l).getAttribute("copyValue"),C=document.getElementById(l).getAttribute("copySubject");Le(r),m.add({severity:"info",detail:C+" "+p("general.copied"),group:"br-custom",life:3e3})},K=L(()=>!!o.account.getDirectParentMultisig().length),Q=l=>{const r=n.currentLoggedInWallet.others.find(C=>C.address==l);return r!=null&&r.type=="MULTISIG"&&(a.value=r.address),r},H=l=>G.createAddress(l).pretty(),P=y(!1),O=y(!1),z=ve(),re=()=>{if(Q(o.account.address)==null)n.currentLoggedInWallet.setDefaultAccountByName(o.account.name);else return},ie=()=>{var l;P.value||O.value||((l=o.account)!=null&&l.type?z.push({name:"ViewAccountDetails",params:{address:o.account.address}}):(re(),ge(o.account.address),z.push({name:"ViewAccountDetails",params:{address:o.account.address}})))};return x.on("cancel-change-label",l=>{v.value=l}),(l,r)=>{var N;const C=S("font-awesome-icon");return d(),f(T,null,[e("div",{class:"border rounded-lg border-gray-200 p-3 filter shadow-lg cursor-pointer",onClick:r[5]||(r[5]=$=>ie())},[e("div",Pe,[e("div",{class:"mt-auto mb-auto",innerHTML:V.value},null,8,Oe),e("div",Ue,[e("div",Fe,b(A.value),1),e("div",Ke,[e("div",{id:l.account.address,title:H(l.account.address),class:"text-xs font-bold mt-0.5 mr-2 truncate md:text-clip w-44 md:w-full",copyValue:H(l.account.address),copySubject:l.$t("general.address")},b(H(l.account.address)),9,Qe),I(C,{onMouseover:r[0]||(r[0]=$=>O.value=!0),onMouseout:r[1]||(r[1]=$=>O.value=!1),icon:"copy",onClick:r[2]||(r[2]=$=>oe(l.account.address)),class:"w-5 h-5 text-blue-primary cursor-pointer inline-block"})]),e("div",ze,[e("div",Re,b(h.value.left),1),h.value.right!=null?(d(),f("div",Ge," . ")):W("",!0),e("div",qe,b(h.value.right),1),e("div",Je,b(g.value),1),Xe]),e("div",Ye,[(N=l.account)!=null&&N.default?(d(),f("div",{key:0,class:"px-1 py-0.5 flex items-center bg-blue-primary rounded-sm",title:l.$t("general.defaultTitle")},[et,e("p",tt,b(l.$t("general.default")),1)],8,Ze)):W("",!0),K.value?(d(),f("div",{key:1,class:"px-1 py-0.5 flex items-center bg-green-500 rounded-sm",title:l.$t("general.multisigTitle")},[st,e("p",nt,b(l.$t("general.multisig")),1)],8,lt)):W("",!0),K.value&&!Q(l.account.address)?(d(),f("div",{key:2,class:"px-1 py-0.5 flex items-center bg-purple-500 rounded-sm",title:l.$t("general.ownerTitle")},[ot,e("p",rt,b(l.$t("general.owner")),1)],8,at)):W("",!0)])]),e("div",it,[(d(!0),f(T,null,F(s.value,($,ce)=>(d(),f("div",{key:ce},[$.isLabeled?(d(),f("div",ct,b($.name),1)):W("",!0)]))),128))]),e("img",{src:Ie,class:"h-6 w-6 cursor-pointer my-auto ml-auto",onMouseover:r[3]||(r[3]=$=>P.value=!0),onMouseout:r[4]||(r[4]=$=>P.value=!1),onClick:t},null,32),I(ee(pe),{ref_key:"menu",ref:c,model:i.value,popup:!0},null,8,["model"])])]),I(He,{toggleModal:v.value},null,8,["toggleModal"])],64)}}});const dt=se(ut,[["__scopeId","data-v-87defd13"]]),mt={class:"flex flex-col"},ft=e("div",null,"Labels",-1),vt={key:0,src:ne,class:"w-3 ml-2 h-3",style:{"margin-top":"0.12em"}},pt={key:1,src:ne,class:"w-3 ml-2 h-3",style:{"margin-top":"0.12em",transform:"rotate(180deg)"}},gt={key:0,class:"relative"},bt={class:"absolute border-t-0 w-52 border bg-white"},_t={class:"flex flex-col max-h-44 overflow-auto"},yt=["onClick"],xt={class:"text-xs mt-0.5"},ht=e("div",null,"Create Label",-1),Lt={key:0,class:"popup-outer fixed flex z-50"},wt={class:"modal-popup-box"},$t={key:0,class:"error error_box mb-3"},It=e("div",{class:"text-center my-2 text-xs font-semibold"},"Create Label",-1),Ct={name:"LabelComponent"},kt=B({...Ct,setup(o){const x=D().appContext.config.globalProperties.emitter,c=U(),v=y(!1),m=y(!1),p=y(!1),a=y(""),s=y(""),t=y([]),i=L(()=>n.currentLoggedInWallet?n.currentLoggedInWallet.labels:[]);for(let g=0;g<i.value.length;g++)t.value.push(!1);q(i,(g,u)=>{t.value=[];for(let w=0;w<g.length;w++)t.value.push(!1)},{deep:!0}),q(t,g=>{let u=[];g.length==i.value.length&&(g.forEach((w,h)=>{w&&u.push(i.value[h].name)}),x.emit("filterByLabel",u))},{deep:!0});const _=async()=>{if(!n.currentLoggedInWallet)return;if(s.value=s.value.trim(),s.value==""){a.value="Label name cannot be empty.";return}if(n.currentLoggedInWallet.labels.find(w=>w.name==s.value)){a.value="Label is already existed in wallet.";return}let u=new be(s.value,[]);n.currentLoggedInWallet.addLabel(u),await n.wallets.saveMyWalletOnlytoLocalStorage(n.currentLoggedInWallet),a.value="",s.value="",c.add({severity:"info",summary:"Label",detail:"New Label is Created",group:"br-custom",life:5e3}),m.value=!1},A=async g=>{n.currentLoggedInWallet&&(n.currentLoggedInWallet.removeLabel(g),await n.wallets.saveMyWalletOnlytoLocalStorage(n.currentLoggedInWallet),c.add({severity:"info",summary:"Label",detail:"Label is removed",group:"br-custom",life:5e3}),p.value=!1)};return(g,u)=>{const w=S("font-awesome-icon");return d(),f(T,null,[e("div",mt,[e("div",{onClick:u[0]||(u[0]=h=>v.value=!v.value),class:"border p-2 cursor-pointer w-52 bg-white text-xs justify-between flex"},[ft,v.value?(d(),f("img",pt)):(d(),f("img",vt))]),v.value?(d(),f("div",gt,[e("div",bt,[e("div",_t,[(d(!0),f(T,null,F(i.value,(h,M)=>(d(),f("div",{key:M},[e("div",{onClick:V=>p.value?"":t.value[M]=!t.value[M],class:Y(`${t.value[M]?"bg-blue-300 flex cursor-pointer p-2 hover:bg-blue-300 ":"flex cursor-pointer p-2 hover:bg-blue-300 "}`)},[I(w,{icon:"tag",class:"w-4 h-4 mr-3 thin"}),e("div",xt,b(h.name),1),I(w,{icon:"trash",onMouseover:u[1]||(u[1]=V=>p.value=!0),onMouseout:u[2]||(u[2]=V=>p.value=!1),onClick:V=>A(M),title:"Remove label",class:"ml-auto w-3 h-3 cursor-pointer mt-0.5"},null,8,["onClick"])],10,yt)]))),128)),e("div",{onClick:u[3]||(u[3]=h=>{m.value=!0,v.value=!1}),class:"text-xs cursor-pointer flex gap-3 p-2 hover:bg-blue-300"},[I(w,{icon:"plus",class:"w-3 h-3 mr-1"}),ht])])])])):W("",!0)]),m.value?(d(),f("div",Lt,[e("div",wt,[e("div",null,[a.value!=""?(d(),f("div",$t,b(a.value),1)):W("",!0),It,I($e,{placeholder:"Label Name",modelValue:s.value,"onUpdate:modelValue":u[4]||(u[4]=h=>s.value=h)},null,8,["modelValue"]),e("div",{onClick:u[5]||(u[5]=h=>_()),class:"blue-btn font-semibold py-2 cursor-pointer text-center ml-auto mr-auto w-7/12 disabled:opacity-50 disabled:cursor-auto"},b(g.$t("general.confirm")),1),e("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:u[6]||(u[6]=h=>m.value=!1)},b(g.$t("general.cancel")),1)])])])):W("",!0)],64)}}});const At={name:"ViewAccountDisplayAll",components:{AccountTile:dt,LabelComponent:kt},setup(){const k=D().appContext.config.globalProperties.emitter;L(()=>{if(!n.currentLoggedInWallet)return[];let a=n.currentLoggedInWallet.accounts.map(t=>({name:t.name,balance:t.balance,address:t.address,publicKey:t.publicKey,isMultisig:!!t.getDirectParentMultisig().length,multisigInfo:t.multisigInfo})),s=n.currentLoggedInWallet.others.filter(t=>t.type==="MULTISIG").map(t=>({name:t.name,balance:t.balance,address:t.address,publicKey:t.publicKey,isMultisig:!0,multisigInfo:t.multisigInfo}));return a.concat(s)});const x=y([]),c=L(()=>{if(n.currentLoggedInWallet)if(n.currentLoggedInWallet.others){const a=n.currentLoggedInWallet.accounts.concat(n.currentLoggedInWallet.others);let s=[];return x.value.forEach(t=>{let i=n.currentLoggedInWallet.labels.find(_=>_.name==t);i&&i.addresses.forEach(_=>{let A=a.find(g=>g.address==_);s.push(A)})}),s=Array.from(new Set(s)),x.value.length?s:a}else{const a=n.currentLoggedInWallet.accounts;let s=[];return x.value.forEach(t=>{let i=n.currentLoggedInWallet.labels.find(_=>_.name==t);i&&i.addresses.forEach(_=>{let A=a.find(g=>g.address==_);s.push(A)})}),s=Array.from(new Set(s)),x.value.length?s:a}else return null});k.on("filterByLabel",a=>{x.value=a});const v=y(""),m=L(()=>{const a=v.value.toLowerCase();return v.value==""?p(c.value):c.value.filter(s=>s.name.toLowerCase().includes(a)||s.address.toLowerCase().includes(a.replace(/-/g,"")))});function p(a){if(a!==null){var s=a.reduce((t,i)=>(t.some(_=>_.address===i.address&&_.name===i.name)||t.push(i),t),[]);return s}}return{accounts:c,filterQuery:v,filteredAccounts:m}}},ae=o=>(te("data-v-eadf76db"),o=o(),le(),o),Wt={class:"relative"},Mt={class:"my-4 w-11/12 ml-auto mr-auto flex flex-col sm:flex-row justify-between"},St=ae(()=>e("div",{class:"absolute invisible 2xl:visible text-gray-500 mt-1 explicitLeft"},"Labels",-1)),Tt={class:"mt-3 sm:mt-0 text-center w-44 text-white bg-blue-primary rounded-md font-semibold text-xs p-2"},Vt={class:"mt-2 py-3"},Nt={class:"w-11/12 ml-auto mr-auto flex flex-col gap-3"},Dt={class:"flex items-center"},Et=["placeholder"],Bt=ae(()=>e("div",{class:"mb-36"},null,-1));function jt(o,k,x,c,v,m){const p=S("LabelComponent"),a=S("router-link"),s=S("font-awesome-icon"),t=S("AccountTile");return d(),f("div",Wt,[e("div",Mt,[I(p),St,I(a,{to:{name:"ViewAccountCreateSelectType"}},{default:E(()=>[e("div",Tt,"+ "+b(o.$t("general.createNewAcc")),1)]),_:1})]),e("div",Vt,[e("div",Nt,[e("div",Dt,[I(s,{icon:"search",class:"text-blue-link mr-1"}),J(e("input",{"onUpdate:modelValue":k[0]||(k[0]=i=>c.filterQuery=i),type:"text",class:"py-2 px-2 outline-none text-xs text-black",placeholder:o.$t("general.search")},null,8,Et),[[X,c.filterQuery]])]),(d(!0),f(T,null,F(c.filteredAccounts,(i,_)=>(d(),Z(t,{key:_,account:i},null,8,["account"]))),128))])]),Bt])}const Rt=se(At,[["render",jt],["__scopeId","data-v-eadf76db"]]);export{Rt as default};
