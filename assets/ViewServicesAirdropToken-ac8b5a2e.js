import{z as $,B as L,ad as We,ae as Ge,n as ee,af as Pe,d as xe,r as I,i as Ie,o as T,k as lt,D as Xe,c as K,b as D,e as a,t as M,m as Z,h as De,_ as Ze,w as U,v as we,f as j,ag as at,ah as p,u as ut,ai as ct,W as fe,H as ye,S as ft,a as Ve,y as S,x as qe,ab as Ue,aj as He,F as Je,g as je,ak as dt,al as Ce,I as mt,J as _t}from"./index-3fab2394.js";import{M as ht}from"./multisigUtils-42c49f06.js";import{t as ke}from"./jdenticon-module-959e216d.js";import{_ as gt}from"./PasswordInput.vue_vue_type_script_setup_true_lang-b85f9819.js";let pt=[{namespace:"prx.xpx",name:"XPX"},{namespace:"prx.metx",name:"METX"},{namespace:"xarcade.xar",name:"XAR"}];class _e{static createAccount(e){return $.Account.createFromPrivateKey(e,L.networkType,1)}static async scanAsset(e){let l=$.PublicAccount.createFromPublicKey(e,L.networkType);try{let t=await L.chainAPI.accountAPI.getAccountInfo(l.address),n=t.mosaics.map(f=>f.id),r=await L.chainAPI.assetAPI.getMosaics(n),o=await L.chainAPI.assetAPI.getMosaicsNames(n);return t.mosaics.map(f=>{let c=f.id.toHex(),b=r.find(g=>g.mosaicId.toHex()===c).divisibility,_=o.find(g=>g.mosaicId.toHex()===c).names,O=_.length?_[0].name:"",x=pt.find(g=>g.namespace===O),A={id:c,amount:b?f.amount.compact()/Math.pow(10,b):f.amount.compact(),divisibility:b,namespaceName:O};return A.label=x?x.name:A.namespaceName?A.namespaceName:A.id.toUpperCase(),A})}catch{return[]}}static createDistributeAggregateTransactions(e,l,t,n){let r=$.PublicAccount.createFromPublicKey(e,L.networkType),o=[],i=Math.ceil(l.length/t),f=[],c=Math.pow(10,n.divisibility),b=n.namespaceName?new $.NamespaceId(n.namespaceName):new $.MosaicId(n.id);for(let _=0;_<l.length;++_){let O=We(Ge(l[_].amount),c),x=Number(O.toString()),A;l[_].publicKeyOrAddress.length===64?A=$.PublicAccount.createFromPublicKey(l[_].publicKeyOrAddress,L.networkType).address:A=$.Address.createFromRawAddress(l[_].publicKeyOrAddress);let g=new $.Mosaic(b,$.UInt64.fromUint(x)),C;l[_].message?C=$.PlainMessage.create(l[_].message):C=$.EmptyMessage;let k=L.buildTxn.transfer(A,C,[g]);f.push(k)}for(let _=0;_<i;++_){let O=_*t,x=(_+1)*t,A=f.slice(O,x),g=[];for(let k=0;k<A.length;++k)g.push(A[k].toAggregateV1(r));let C=L.buildTxn.aggregateBonded(g);o.push(C)}return o}static getLockFundTransactionFee(){const e=ee.currentNetworkProfileConfig.lockedFundsPerAggregate??0;let l=new $.TransactionHash("0".repeat(64),$.TransactionType.AGGREGATE_BONDED_V1);return L.buildTxn.hashLock(new $.Mosaic(new $.NamespaceId("prx.xpx"),$.UInt64.fromUint(e)),$.UInt64.fromUint(Pe.getABTMaxSafeDuration()),l).maxFee.compact()}static async signAllAbtAndAnnounce(e,l){const t=ee.currentNetworkProfileConfig.lockedFundsPerAggregate;let n=[],r=[],o=[],i=[];for(let b=0;b<e.length;++b){let _=l.preV2Sign(e[b],ee.currentNetworkProfile.generationHash);n.push(_);let O=L.buildTxn.hashLock(new $.Mosaic(new $.NamespaceId(L.nativeToken.fullNamespace.trim()),$.UInt64.fromUint(t)),$.UInt64.fromUint(Pe.getABTMaxSafeDuration()),_),x=l.preV2Sign(O,ee.currentNetworkProfile.generationHash);r.push(x),o.push({txnHash:_.hash,block:null}),o.push({txnHash:x.hash,block:null}),i.push({txnHash:_.hash,hashLockHash:x.hash})}let f=!1;for(let b=0;b<r.length;++b)await L.chainAPI.transactionAPI.announce(r[b]);console.log("All LockHash Txn announced, pending ABT announcement...");let c=[];for(;!f;){await new Promise(x=>setTimeout(x,15e3)),console.log("Checking LockHash Txn confirmation...");let _=await L.chainAPI.chainAPI.getBlockchainHeight(),O=n.filter(x=>!c.includes(x.hash));for(let x=0;x<O.length;++x){let A=i.find(C=>C.txnHash===O[x].hash).hashLockHash,g=await L.chainAPI.transactionAPI.getTransactionStatus(A);if(g.group===$.TransactionGroupType.CONFIRMED){let C=g.height.compact(),k=o.find(v=>v.txnHash===A);k.block=C,_>=k.block+1&&(await L.chainAPI.transactionAPI.announceAggregateBonded(O[x]),c.push(O[x].hash))}}c.length===n.length&&(f=!0)}return c}}const bt=xe({__name:"SelectMultisigInput",props:{account:{type:Array,required:!0},selectedMultisig:{type:Object,required:!0}},emits:["select"],setup(s,{emit:e}){const l=e,t=I({}),n=i=>{l("select",i)},r=i=>{t.value[i.key]=!0},o=()=>{t.value={}};return(i,f)=>{const c=Ie("Tree");return T(),lt(c,{value:s.account,selectionMode:"single","onUpdate:selectionKeys":s.selectedMultisig,expandedKeys:t.value,filter:!0,filterMode:"strict",onNodeSelect:n,onNodeExpand:r,onNodeCollapse:o},null,8,["value","onUpdate:selectionKeys","expandedKeys"])}}}),vt={class:"w-full h-16 mt-0 border border-gray-200 px-2 py-2 rounded-md"},yt={class:"flex"},wt=["innerHTML"],It={class:"flex flex-col ml-2 text-left"},xt={class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}},St={class:"mt-2 text-base font-bold"},At={class:"ml-auto mt-auto mb-auto mr-6"},Nt=xe({__name:"MultisigInput",props:{selectDefaultAddress:{type:String,required:!0},selectDefaultName:{type:String,required:!0}},setup(s){const e=s,t=De().appContext.config.globalProperties.emitter;let n=new Xe("ThemeStyleConfig");n.init();let r=I(n.jdenticonConfig);const o=K(()=>ke(e.selectDefaultAddress,25,r.value)),i=()=>{t.emit("CLOSE_MULTISIG")};return(f,c)=>{const b=Ie("font-awesome-icon");return T(),D("div",vt,[a("div",yt,[a("div",{innerHTML:o.value},null,8,wt),a("div",It,[a("div",xt,M(f.$t("transfer.transferFrom"))+" "+M(f.$t("general.multisig")),1),a("div",St,M(s.selectDefaultName),1)]),a("div",At,[Z(b,{icon:"times",class:"delete-icon-style",onClick:c[0]||(c[0]=_=>i())})])])])}}}),Ot=xe({name:"SelectInputAccount",emits:["select-account","update:modelValue"],props:["modelValue","selectDefault","initiateBy"],setup(s){const e=I(!1),t=De().appContext.config.globalProperties.emitter;let n=new Xe("ThemeStyleConfig");n.init();let r=n.jdenticonConfig;const o=K(()=>{if(U.currentLoggedInWallet){var A=[];return U.currentLoggedInWallet.accounts.concat(U.currentLoggedInWallet.others).forEach(C=>{A.push({value:C.address,label:U.currentLoggedInWallet.convertAddressToName(C.address,!0),isMultiSig:!!C.getDirectParentMultisig().length})}),A.filter(C=>C.isMultiSig==!1)}else return[]}),i=K(()=>{s.selectDefault&&o.value.length&&o.value.find(A=>A.value==s.selectDefault).label}),f=I(s.selectDefault),c={label:i.value,value:f.value},b=I(ke(s.selectDefault,25,r)),_=(A,g)=>{t.emit("select-account",g),i.value,c.label=A,f.value,c.value=g,b.value=ke(g,25,r),e.value=!e.value},O=I(""),x=K(()=>{const A=O.value.toLowerCase();return O.value==""?o.value:o.value.filter(g=>Object.values(g).some(C=>String(C).toLowerCase().includes(A)))});return{selectAccount:_,selectedAddress:f,selectedAccountInfo:c,selectedImg:b,accounts:o,toggleSelection:e,selectedAccount:i,jdenticonConfig:r,toSvg:ke,filterQuery:O,filteredAccounts:x}}}),kt={class:"w-full"},Tt={key:0,class:"account-item-value account-item"},Ct={class:"flex"},Dt=["innerHTML"],Lt={class:"flex flex-col ml-2 text-left"},Et={key:0,class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}},Bt={key:1,class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}},$t={class:"mt-2 text-base font-bold"},Mt={class:"flex"},Rt=["innerHTML"],Ft={class:"text-xs ml-2 font-semibold"};function Pt(s,e,l,t,n,r){const o=Ie("Dropdown");return T(),D("div",kt,[Z(o,{modelValue:s.selectedAccountInfo,"onUpdate:modelValue":e[0]||(e[0]=i=>s.selectedAccountInfo=i),style:{width:"100%"},options:s.filteredAccounts,filter:!0,optionLabel:"label",emptyFilterMessage:" ",onChange:e[1]||(e[1]=i=>{s.selectAccount(i.value.label,i.value.value),s.$emit("update:modelValue",i.value.value),s.$emit("select-account",i.value.value)}),class:"h-16 mt-0"},{value:we(i=>[i.value?(T(),D("div",Tt,[a("div",Ct,[a("div",{innerHTML:s.selectedImg},null,8,Dt),a("div",Lt,[s.initiateBy?(T(),D("div",Et,M(s.$t("general.initiateBy")),1)):(T(),D("div",Bt,M(s.$t("transfer.transferFrom"))+" OR Select Signing Account to initiate Multisig",1)),a("div",$t,M(i.value.label),1)])])])):j("",!0)]),option:we(i=>[a("div",Mt,[a("div",{innerHTML:s.toSvg(i.option.value,20,s.jdenticonConfig)},null,8,Rt),a("div",Ft,M(i.option.label),1)])]),_:1},8,["modelValue","options"])])}const Vt=Ze(Ot,[["render",Pt]]);var qt=at();const Ye=function(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)};class N extends Error{constructor(e,l,t,...n){Array.isArray(l)&&(l=l.join(" ").trim()),super(l),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,N),this.code=e;for(const r of n)for(const o in r){const i=r[o];this[o]=p.Buffer.isBuffer(i)?i.toString(t.encoding):i==null?i:JSON.parse(JSON.stringify(i))}}}const et=function(s){const e=[];for(let l=0,t=s.length;l<t;l++){const n=s[l];if(n==null||n===!1)e[l]={disabled:!0};else if(typeof n=="string")e[l]={name:n};else if(Ye(n)){if(typeof n.name!="string")throw new N("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${l}`,"when column is an object literal"]);e[l]=n}else throw new N("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(n)} at position ${l}`])}return e};class Ke{constructor(e=100){this.size=e,this.length=0,this.buf=p.Buffer.allocUnsafe(e)}prepend(e){if(p.Buffer.isBuffer(e)){const l=this.length+e.length;if(l>=this.size&&(this.resize(),l>=this.size))throw Error("INVALID_BUFFER_STATE");const t=this.buf;this.buf=p.Buffer.allocUnsafe(this.size),e.copy(this.buf,0),t.copy(this.buf,e.length),this.length+=e.length}else{const l=this.length++;l===this.size&&this.resize();const t=this.clone();this.buf[0]=e,t.copy(this.buf,1,0,l)}}append(e){const l=this.length++;l===this.size&&this.resize(),this.buf[l]=e}clone(){return p.Buffer.from(this.buf.slice(0,this.length))}resize(){const e=this.length;this.size=this.size*2;const l=p.Buffer.allocUnsafe(this.size);this.buf.copy(l,0,0,e),this.buf=l}toString(e){return e?this.buf.slice(0,this.length).toString(e):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}}const Ut=12,Ht=13,Jt=10,jt=32,Kt=9,zt=function(s){return{bomSkipped:!1,bufBytesStart:0,castField:s.cast_function,commenting:!1,error:void 0,enabled:s.from_line===1,escaping:!1,escapeIsQuote:p.Buffer.isBuffer(s.escape)&&p.Buffer.isBuffer(s.quote)&&p.Buffer.compare(s.escape,s.quote)===0,expectedRecordLength:Array.isArray(s.columns)?s.columns.length:void 0,field:new Ke(20),firstLineToHeaders:s.cast_first_line_to_header,needMoreDataSize:Math.max(s.comment!==null?s.comment.length:0,...s.delimiter.map(e=>e.length),s.quote!==null?s.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new Ke(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:s.record_delimiter.length===0?0:Math.max(...s.record_delimiter.map(e=>e.length)),trimChars:[p.Buffer.from(" ",s.encoding)[0],p.Buffer.from("	",s.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[p.Buffer.from(p.Buffer.from([Ht],"utf8").toString(),s.encoding),p.Buffer.from(p.Buffer.from([Jt],"utf8").toString(),s.encoding),p.Buffer.from(p.Buffer.from([Ut],"utf8").toString(),s.encoding),p.Buffer.from(p.Buffer.from([jt],"utf8").toString(),s.encoding),p.Buffer.from(p.Buffer.from([Kt],"utf8").toString(),s.encoding)]}},Qt=function(s){return s.replace(/([A-Z])/g,function(e,l){return"_"+l.toLowerCase()})},ze=function(s){const e={};for(const t in s)e[Qt(t)]=s[t];if(e.encoding===void 0||e.encoding===!0)e.encoding="utf8";else if(e.encoding===null||e.encoding===!1)e.encoding=null;else if(typeof e.encoding!="string"&&e.encoding!==null)throw new N("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(e.encoding)}`],e);if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)throw new N("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,",`got ${JSON.stringify(e.bom)}`],e);if(e.cast_function=null,e.cast===void 0||e.cast===null||e.cast===!1||e.cast==="")e.cast=void 0;else if(typeof e.cast=="function")e.cast_function=e.cast,e.cast=!0;else if(e.cast!==!0)throw new N("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(e.cast)}`],e);if(e.cast_date===void 0||e.cast_date===null||e.cast_date===!1||e.cast_date==="")e.cast_date=!1;else if(e.cast_date===!0)e.cast_date=function(t){const n=Date.parse(t);return isNaN(n)?t:new Date(n)};else if(typeof e.cast_date!="function")throw new N("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(e.cast_date)}`],e);if(e.cast_first_line_to_header=null,e.columns===!0)e.cast_first_line_to_header=void 0;else if(typeof e.columns=="function")e.cast_first_line_to_header=e.columns,e.columns=!0;else if(Array.isArray(e.columns))e.columns=et(e.columns);else if(e.columns===void 0||e.columns===null||e.columns===!1)e.columns=!1;else throw new N("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(e.columns)}`],e);if(e.group_columns_by_name===void 0||e.group_columns_by_name===null||e.group_columns_by_name===!1)e.group_columns_by_name=!1;else{if(e.group_columns_by_name!==!0)throw new N("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",`got ${JSON.stringify(e.group_columns_by_name)}`],e);if(e.columns===!1)throw new N("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],e)}if(e.comment===void 0||e.comment===null||e.comment===!1||e.comment==="")e.comment=null;else if(typeof e.comment=="string"&&(e.comment=p.Buffer.from(e.comment,e.encoding)),!p.Buffer.isBuffer(e.comment))throw new N("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(e.comment)}`],e);if(e.comment_no_infix===void 0||e.comment_no_infix===null||e.comment_no_infix===!1)e.comment_no_infix=!1;else if(e.comment_no_infix!==!0)throw new N("CSV_INVALID_OPTION_COMMENT",["Invalid option comment_no_infix:","value must be a boolean,",`got ${JSON.stringify(e.comment_no_infix)}`],e);const l=JSON.stringify(e.delimiter);if(Array.isArray(e.delimiter)||(e.delimiter=[e.delimiter]),e.delimiter.length===0)throw new N("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${l}`],e);if(e.delimiter=e.delimiter.map(function(t){if(t==null||t===!1)return p.Buffer.from(",",e.encoding);if(typeof t=="string"&&(t=p.Buffer.from(t,e.encoding)),!p.Buffer.isBuffer(t)||t.length===0)throw new N("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${l}`],e);return t}),e.escape===void 0||e.escape===!0?e.escape=p.Buffer.from('"',e.encoding):typeof e.escape=="string"?e.escape=p.Buffer.from(e.escape,e.encoding):(e.escape===null||e.escape===!1)&&(e.escape=null),e.escape!==null&&!p.Buffer.isBuffer(e.escape))throw new Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(e.escape)}`);if(e.from===void 0||e.from===null)e.from=1;else if(typeof e.from=="string"&&/\d+/.test(e.from)&&(e.from=parseInt(e.from)),Number.isInteger(e.from)){if(e.from<0)throw new Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(s.from)}`)}else throw new Error(`Invalid Option: from must be an integer, got ${JSON.stringify(e.from)}`);if(e.from_line===void 0||e.from_line===null)e.from_line=1;else if(typeof e.from_line=="string"&&/\d+/.test(e.from_line)&&(e.from_line=parseInt(e.from_line)),Number.isInteger(e.from_line)){if(e.from_line<=0)throw new Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(s.from_line)}`)}else throw new Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(s.from_line)}`);if(e.ignore_last_delimiters===void 0||e.ignore_last_delimiters===null)e.ignore_last_delimiters=!1;else if(typeof e.ignore_last_delimiters=="number")e.ignore_last_delimiters=Math.floor(e.ignore_last_delimiters),e.ignore_last_delimiters===0&&(e.ignore_last_delimiters=!1);else if(typeof e.ignore_last_delimiters!="boolean")throw new N("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(e.ignore_last_delimiters)}`],e);if(e.ignore_last_delimiters===!0&&e.columns===!1)throw new N("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],e);if(e.info===void 0||e.info===null||e.info===!1)e.info=!1;else if(e.info!==!0)throw new Error(`Invalid Option: info must be true, got ${JSON.stringify(e.info)}`);if(e.max_record_size===void 0||e.max_record_size===null||e.max_record_size===!1)e.max_record_size=0;else if(!(Number.isInteger(e.max_record_size)&&e.max_record_size>=0))if(typeof e.max_record_size=="string"&&/\d+/.test(e.max_record_size))e.max_record_size=parseInt(e.max_record_size);else throw new Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(e.max_record_size)}`);if(e.objname===void 0||e.objname===null||e.objname===!1)e.objname=void 0;else if(p.Buffer.isBuffer(e.objname)){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty buffer");e.encoding===null||(e.objname=e.objname.toString(e.encoding))}else if(typeof e.objname=="string"){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty string")}else if(typeof e.objname!="number")throw new Error(`Invalid Option: objname must be a string or a buffer, got ${e.objname}`);if(e.objname!==void 0){if(typeof e.objname=="number"){if(e.columns!==!1)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(e.columns===!1)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index")}if(e.on_record===void 0||e.on_record===null)e.on_record=void 0;else if(typeof e.on_record!="function")throw new N("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(e.on_record)}`],e);if(e.quote===null||e.quote===!1||e.quote==="")e.quote=null;else if(e.quote===void 0||e.quote===!0?e.quote=p.Buffer.from('"',e.encoding):typeof e.quote=="string"&&(e.quote=p.Buffer.from(e.quote,e.encoding)),!p.Buffer.isBuffer(e.quote))throw new Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(e.quote)}`);if(e.raw===void 0||e.raw===null||e.raw===!1)e.raw=!1;else if(e.raw!==!0)throw new Error(`Invalid Option: raw must be true, got ${JSON.stringify(e.raw)}`);if(e.record_delimiter===void 0)e.record_delimiter=[];else if(typeof e.record_delimiter=="string"||p.Buffer.isBuffer(e.record_delimiter)){if(e.record_delimiter.length===0)throw new N("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);e.record_delimiter=[e.record_delimiter]}else if(!Array.isArray(e.record_delimiter))throw new N("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);if(e.record_delimiter=e.record_delimiter.map(function(t,n){if(typeof t!="string"&&!p.Buffer.isBuffer(t))throw new N("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${n},`,`got ${JSON.stringify(t)}`],e);if(t.length===0)throw new N("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${n},`,`got ${JSON.stringify(t)}`],e);return typeof t=="string"&&(t=p.Buffer.from(t,e.encoding)),t}),typeof e.relax_column_count!="boolean")if(e.relax_column_count===void 0||e.relax_column_count===null)e.relax_column_count=!1;else throw new Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(e.relax_column_count)}`);if(typeof e.relax_column_count_less!="boolean")if(e.relax_column_count_less===void 0||e.relax_column_count_less===null)e.relax_column_count_less=!1;else throw new Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(e.relax_column_count_less)}`);if(typeof e.relax_column_count_more!="boolean")if(e.relax_column_count_more===void 0||e.relax_column_count_more===null)e.relax_column_count_more=!1;else throw new Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(e.relax_column_count_more)}`);if(typeof e.relax_quotes!="boolean")if(e.relax_quotes===void 0||e.relax_quotes===null)e.relax_quotes=!1;else throw new Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(e.relax_quotes)}`);if(typeof e.skip_empty_lines!="boolean")if(e.skip_empty_lines===void 0||e.skip_empty_lines===null)e.skip_empty_lines=!1;else throw new Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(e.skip_empty_lines)}`);if(typeof e.skip_records_with_empty_values!="boolean")if(e.skip_records_with_empty_values===void 0||e.skip_records_with_empty_values===null)e.skip_records_with_empty_values=!1;else throw new Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(e.skip_records_with_empty_values)}`);if(typeof e.skip_records_with_error!="boolean")if(e.skip_records_with_error===void 0||e.skip_records_with_error===null)e.skip_records_with_error=!1;else throw new Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(e.skip_records_with_error)}`);if(e.rtrim===void 0||e.rtrim===null||e.rtrim===!1)e.rtrim=!1;else if(e.rtrim!==!0)throw new Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(e.rtrim)}`);if(e.ltrim===void 0||e.ltrim===null||e.ltrim===!1)e.ltrim=!1;else if(e.ltrim!==!0)throw new Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(e.ltrim)}`);if(e.trim===void 0||e.trim===null||e.trim===!1)e.trim=!1;else if(e.trim!==!0)throw new Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(e.trim)}`);if(e.trim===!0&&s.ltrim!==!1?e.ltrim=!0:e.ltrim!==!0&&(e.ltrim=!1),e.trim===!0&&s.rtrim!==!1?e.rtrim=!0:e.rtrim!==!0&&(e.rtrim=!1),e.to===void 0||e.to===null)e.to=-1;else if(typeof e.to=="string"&&/\d+/.test(e.to)&&(e.to=parseInt(e.to)),Number.isInteger(e.to)){if(e.to<=0)throw new Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(s.to)}`)}else throw new Error(`Invalid Option: to must be an integer, got ${JSON.stringify(s.to)}`);if(e.to_line===void 0||e.to_line===null)e.to_line=-1;else if(typeof e.to_line=="string"&&/\d+/.test(e.to_line)&&(e.to_line=parseInt(e.to_line)),Number.isInteger(e.to_line)){if(e.to_line<=0)throw new Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(s.to_line)}`)}else throw new Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(s.to_line)}`);return e},Qe=function(s){return s.every(e=>e==null||e.toString&&e.toString().trim()==="")},Wt=13,Gt=10,he={utf8:p.Buffer.from([239,187,191]),utf16le:p.Buffer.from([255,254])},Xt=function(s={}){const e={bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},l=ze(s);return{info:e,original_options:s,options:l,state:zt(l),__needMoreData:function(t,n,r){if(r)return!1;const{encoding:o,escape:i,quote:f}=this.options,{quoting:c,needMoreDataSize:b,recordDelimiterMaxLength:_}=this.state,O=n-t-1,x=Math.max(b,_===0?p.Buffer.from(`\r
`,o).length:_,c?(i===null?0:i.length)+f.length:0,c?f.length+_:0);return O<x},parse:function(t,n,r,o){const{bom:i,comment_no_infix:f,encoding:c,from_line:b,ltrim:_,max_record_size:O,raw:x,relax_quotes:A,rtrim:g,skip_empty_lines:C,to:k,to_line:v}=this.options;let{comment:y,escape:F,quote:H,record_delimiter:te}=this.options;const{bomSkipped:ge,previousBuf:se,rawBuffer:de,escapeIsQuote:le}=this.state;let w;if(se===void 0)if(t===void 0){o();return}else w=t;else se!==void 0&&t===void 0?w=se:w=p.Buffer.concat([se,t]);if(ge===!1)if(i===!1)this.state.bomSkipped=!0;else if(w.length<3){if(n===!1){this.state.previousBuf=w;return}}else{for(const E in he)if(he[E].compare(w,0,he[E].length)===0){const z=he[E].length;this.state.bufBytesStart+=z,w=w.slice(z),this.options=ze({...this.original_options,encoding:E}),{comment:y,escape:F,quote:H}=this.options;break}this.state.bomSkipped=!0}const re=w.length;let h;for(h=0;h<re&&!this.__needMoreData(h,re,n);h++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1),v!==-1&&this.info.lines>v){this.state.stop=!0,o();return}this.state.quoting===!1&&te.length===0&&this.__autoDiscoverRecordDelimiter(w,h)&&(te=this.options.record_delimiter);const E=w[h];if(x===!0&&de.append(E),(E===Wt||E===Gt)&&this.state.wasRowDelimiter===!1&&(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(F!==null&&this.state.quoting===!0&&this.__isEscape(w,h,E)&&h+F.length<re)if(le){if(this.__isQuote(w,h+F.length)){this.state.escaping=!0,h+=F.length-1;continue}}else{this.state.escaping=!0,h+=F.length-1;continue}if(this.state.commenting===!1&&this.__isQuote(w,h))if(this.state.quoting===!0){const P=w[h+H.length],ae=g&&this.__isCharTrimable(w,h+H.length),ne=y!==null&&this.__compareBytes(y,w,h+H.length,P),Y=this.__isDelimiter(w,h+H.length,P),ue=te.length===0?this.__autoDiscoverRecordDelimiter(w,h+H.length):this.__isRecordDelimiter(P,w,h+H.length);if(F!==null&&this.__isEscape(w,h,E)&&this.__isQuote(w,h+F.length))h+=F.length-1;else if(!P||Y||ue||ne||ae){this.state.quoting=!1,this.state.wasQuoting=!0,h+=H.length-1;continue}else if(A===!1){const ce=this.__error(new N("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(P)}"`,`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(ce!==void 0)return ce}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(H),h+=H.length-1}else if(this.state.field.length!==0){if(A===!1){const P=this.__infoField(),ae=Object.keys(he).map(Y=>he[Y].equals(this.state.field.toString())?Y:!1).filter(Boolean)[0],ne=this.__error(new N("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(P.column)} at line ${P.lines}, value is ${JSON.stringify(this.state.field.toString(c))}`,ae?`(${ae} bom)`:void 0],this.options,P,{field:this.state.field}));if(ne!==void 0)return ne}}else{this.state.quoting=!0,h+=H.length-1;continue}if(this.state.quoting===!1){const P=this.__isRecordDelimiter(E,w,h);if(P!==0){if(this.state.commenting&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0)this.info.comment_lines++;else{if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=b){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),h+=P-1;continue}if(C===!0&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0){this.info.empty_lines++,h+=P-1;continue}this.info.bytes=this.state.bufBytesStart+h;const ue=this.__onField();if(ue!==void 0)return ue;this.info.bytes=this.state.bufBytesStart+h+P;const ce=this.__onRecord(r);if(ce!==void 0)return ce;if(k!==-1&&this.info.records>=k){this.state.stop=!0,o();return}}this.state.commenting=!1,h+=P-1;continue}if(this.state.commenting)continue;if((y===null?0:this.__compareBytes(y,w,h,E))!==0&&(f===!1||this.state.field.length===0)){this.state.commenting=!0;continue}const ne=this.__isDelimiter(w,h,E);if(ne!==0){this.info.bytes=this.state.bufBytesStart+h;const Y=this.__onField();if(Y!==void 0)return Y;h+=ne-1;continue}}}if(this.state.commenting===!1&&O!==0&&this.state.record_length+this.state.field.length>O)return this.__error(new N("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${O}`,`at line ${this.info.lines}`],this.options,this.__infoField()));const z=_===!1||this.state.quoting===!0||this.state.field.length!==0||!this.__isCharTrimable(w,h),oe=g===!1||this.state.wasQuoting===!1;if(z===!0&&oe===!0)this.state.field.append(E);else{if(g===!0&&!this.__isCharTrimable(w,h))return this.__error(new N("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()));z===!1&&(h+=this.__isCharTrimable(w,h)-1);continue}}if(n===!0)if(this.state.quoting===!0){const E=this.__error(new N("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField()));if(E!==void 0)return E}else if(this.state.wasQuoting===!0||this.state.record.length!==0||this.state.field.length!==0){this.info.bytes=this.state.bufBytesStart+h;const E=this.__onField();if(E!==void 0)return E;const z=this.__onRecord(r);if(z!==void 0)return z}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.bufBytesStart+=h,this.state.previousBuf=w.slice(h);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(t){const{columns:n,group_columns_by_name:r,encoding:o,info:i,from:f,relax_column_count:c,relax_column_count_less:b,relax_column_count_more:_,raw:O,skip_records_with_empty_values:x}=this.options,{enabled:A,record:g}=this.state;if(A===!1)return this.__resetRecord();const C=g.length;if(n===!0){if(x===!0&&Qe(g)){this.__resetRecord();return}return this.__firstLineToColumns(g)}if(n===!1&&this.info.records===0&&(this.state.expectedRecordLength=C),C!==this.state.expectedRecordLength){const k=n===!1?new N("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${C} on line ${this.info.lines}`],this.options,this.__infoField(),{record:g}):new N("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${n.length},`,`got ${C} on line ${this.info.lines}`],this.options,this.__infoField(),{record:g});if(c===!0||b===!0&&C<this.state.expectedRecordLength||_===!0&&C>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=k;else{const v=this.__error(k);if(v)return v}}if(x===!0&&Qe(g)){this.__resetRecord();return}if(this.state.recordHasError===!0){this.__resetRecord(),this.state.recordHasError=!1;return}if(this.info.records++,f===1||this.info.records>=f){const{objname:k}=this.options;if(n!==!1){const v={};for(let y=0,F=g.length;y<F;y++)n[y]===void 0||n[y].disabled||(r===!0&&v[n[y].name]!==void 0?Array.isArray(v[n[y].name])?v[n[y].name]=v[n[y].name].concat(g[y]):v[n[y].name]=[v[n[y].name],g[y]]:v[n[y].name]=g[y]);if(O===!0||i===!0){const y=Object.assign({record:v},O===!0?{raw:this.state.rawBuffer.toString(o)}:{},i===!0?{info:this.__infoRecord()}:{}),F=this.__push(k===void 0?y:[v[k],y],t);if(F)return F}else{const y=this.__push(k===void 0?v:[v[k],v],t);if(y)return y}}else if(O===!0||i===!0){const v=Object.assign({record:g},O===!0?{raw:this.state.rawBuffer.toString(o)}:{},i===!0?{info:this.__infoRecord()}:{}),y=this.__push(k===void 0?v:[g[k],v],t);if(y)return y}else{const v=this.__push(k===void 0?g:[g[k],g],t);if(v)return v}}this.__resetRecord()},__firstLineToColumns:function(t){const{firstLineToHeaders:n}=this.state;try{const r=n===void 0?t:n.call(null,t);if(!Array.isArray(r))return this.__error(new N("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(r)}`],this.options,this.__infoField(),{headers:r}));const o=et(r);this.state.expectedRecordLength=o.length,this.options.columns=o,this.__resetRecord();return}catch(r){return r}},__resetRecord:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){const{cast:t,encoding:n,rtrim:r,max_record_size:o}=this.options,{enabled:i,wasQuoting:f}=this.state;if(i===!1)return this.__resetField();let c=this.state.field.toString(n);if(r===!0&&f===!1&&(c=c.trimRight()),t===!0){const[b,_]=this.__cast(c);if(b!==void 0)return b;c=_}this.state.record.push(c),o!==0&&typeof c=="string"&&(this.state.record_length+=c.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(t,n){const{on_record:r}=this.options;if(r!==void 0){const o=this.__infoRecord();try{t=r.call(null,t,o)}catch(i){return i}if(t==null)return}n(t)},__cast:function(t){const{columns:n,relax_column_count:r}=this.options;if(Array.isArray(n)===!0&&r&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(this.state.castField!==null)try{const i=this.__infoField();return[void 0,this.state.castField.call(null,t,i)]}catch(i){return[i]}if(this.__isFloat(t))return[void 0,parseFloat(t)];if(this.options.cast_date!==!1){const i=this.__infoField();return[void 0,this.options.cast_date.call(null,t,i)]}return[void 0,t]},__isCharTrimable:function(t,n){return((o,i)=>{const{timchars:f}=this.state;e:for(let c=0;c<f.length;c++){const b=f[c];for(let _=0;_<b.length;_++)if(b[_]!==o[i+_])continue e;return b.length}return 0})(t,n)},__isFloat:function(t){return t-parseFloat(t)+1>=0},__compareBytes:function(t,n,r,o){if(t[0]!==o)return 0;const i=t.length;for(let f=1;f<i;f++)if(t[f]!==n[r+f])return 0;return i},__isDelimiter:function(t,n,r){const{delimiter:o,ignore_last_delimiters:i}=this.options;if(i===!0&&this.state.record.length===this.options.columns.length-1)return 0;if(i!==!1&&typeof i=="number"&&this.state.record.length===i-1)return 0;e:for(let f=0;f<o.length;f++){const c=o[f];if(c[0]===r){for(let b=1;b<c.length;b++)if(c[b]!==t[n+b])continue e;return c.length}}return 0},__isRecordDelimiter:function(t,n,r){const{record_delimiter:o}=this.options,i=o.length;e:for(let f=0;f<i;f++){const c=o[f],b=c.length;if(c[0]===t){for(let _=1;_<b;_++)if(c[_]!==n[r+_])continue e;return c.length}}return 0},__isEscape:function(t,n,r){const{escape:o}=this.options;if(o===null)return!1;const i=o.length;if(o[0]===r){for(let f=0;f<i;f++)if(o[f]!==t[n+f])return!1;return!0}return!1},__isQuote:function(t,n){const{quote:r}=this.options;if(r===null)return!1;const o=r.length;for(let i=0;i<o;i++)if(r[i]!==t[n+i])return!1;return!0},__autoDiscoverRecordDelimiter:function(t,n){const{encoding:r}=this.options,o=[p.Buffer.from(`\r
`,r),p.Buffer.from(`
`,r),p.Buffer.from("\r",r)];e:for(let i=0;i<o.length;i++){const f=o[i].length;for(let c=0;c<f;c++)if(o[i][c]!==t[n+c])continue e;return this.options.record_delimiter.push(o[i]),this.state.recordDelimiterMaxLength=o[i].length,o[i].length}return 0},__error:function(t){const{encoding:n,raw:r,skip_records_with_error:o}=this.options,i=typeof t=="string"?new Error(t):t;if(o){this.state.recordHasError=!0,this.options.on_skip!==void 0&&this.options.on_skip(i,r?this.state.rawBuffer.toString(n):void 0);return}else return i},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){const{columns:t,raw:n,encoding:r}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:t===!0,index:this.state.record.length,raw:n?this.state.rawBuffer.toString(r):void 0}},__infoField:function(){const{columns:t}=this.options,n=Array.isArray(t);return{...this.__infoRecord(),column:n===!0?t.length>this.state.record.length?t[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}};class Zt extends qt.Transform{constructor(e={}){super({readableObjectMode:!0,...e,encoding:null}),this.api=Xt(e),this.api.options.on_skip=(l,t)=>{this.emit("skip",l,t)},this.state=this.api.state,this.options=this.api.options,this.info=this.api.info}_transform(e,l,t){if(this.state.stop===!0)return;const n=this.api.parse(e,!1,r=>{this.push(r)},()=>{this.push(null),this.end(),this.on("end",this.destroy)});n!==void 0&&(this.state.stop=!0),t(n)}_flush(e){if(this.state.stop===!0)return;const l=this.api.parse(void 0,!0,t=>{this.push(t)},()=>{this.push(null),this.on("end",this.destroy)});e(l)}}const Yt=function(){let s,e,l;for(const n in arguments){const r=arguments[n],o=typeof r;if(s===void 0&&(typeof r=="string"||p.Buffer.isBuffer(r)))s=r;else if(e===void 0&&Ye(r))e=r;else if(l===void 0&&o==="function")l=r;else throw new N("CSV_INVALID_ARGUMENT",["Invalid argument:",`got ${JSON.stringify(r)} at index ${n}`],e||{})}const t=new Zt(e);if(l){const n=e===void 0||e.objname===void 0?[]:{};t.on("readable",function(){let r;for(;(r=this.read())!==null;)e===void 0||e.objname===void 0?n.push(r):n[r[0]]=r[1]}),t.on("error",function(r){l(r,void 0,t.api.__infoDataSet())}),t.on("end",function(){l(void 0,n,t.api.__infoDataSet())})}if(s!==void 0){const n=function(){t.write(s),t.end()};typeof setImmediate=="function"?setImmediate(n):setTimeout(n,0)}return t},Se=s=>(mt("data-v-708da0df"),s=s(),_t(),s),en={class:"container"},tn={class:"p-2"},nn={class:"flex gap-1"},sn={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},rn={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},on={key:0,class:"error error_box",role:"alert"},ln={key:1,class:"mt-3"},an={class:"p-2"},un={class:"flex flex-col-reverse"},cn={key:0,class:"error error_box"},fn={key:0},dn={style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},mn={class:"text-tsm text-gray-400"},_n={key:1},hn={style:{display:"flex","justify-content":"space-between"}},gn={class:"text-sm"},pn={class:"text-tsm text-gray-500"},bn=Se(()=>a("label",{class:"font-medium text-gray-400",for:"floatingSelect"},"Sirius Digital Asset",-1)),vn={class:"p-2"},yn={class:"flex flex-col-reverse"},wn=Se(()=>a("label",{class:"font-medium text-gray-400",for:"floatingSelect"},"Transactions per aggregate",-1)),In={class:"p-2"},xn={class:"border rounded-md border-gray-200 mb-3 w-full"},Sn={key:0,class:"error error_box"},An={class:"p-2"},Nn={key:0,class:"error error_box",role:"alert"},On={key:1,class:"error error_box",role:"alert"},kn={key:2,class:"error error_box",role:"alert"},Tn={key:0,class:"p-2 overflow-auto"},Cn={class:"table table-auto w-full"},Dn=dt('<div class="table-header-group" data-v-708da0df><div class="table-row" data-v-708da0df><div class="table-cell border-b-2 font-semibold p-4 pt-0 pb-3" data-v-708da0df>Recipient (Public Key or Address)</div><div class="table-cell border-b-2 font-semibold p-4 pt-0 pb-3" data-v-708da0df>Amount</div><div class="table-cell border-b-2 font-semibold p-4 pt-0 pb-3" data-v-708da0df>Message</div></div></div>',1),Ln={class:"table-row-group"},En={class:"table-cell border-b p-4 pt-0 pb-3"},Bn={class:"table-cell border-b p-4 pt-0 pb-3"},$n={class:"table-cell border-b p-4 pt-0 pb-3"},Mn={class:"p-2"},Rn={class:"mb-3 w-full px-2 py-1"},Fn=Se(()=>a("div",{class:"font-semibold"},"Enter your password to continue",-1)),Pn={key:0,class:"error error_box"},Vn=["disabled"],qn={key:2,class:"blue-btn px-3 py-3 text-md flex items-center",type:"button",disabled:""},Un=Se(()=>a("svg",{class:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),Hn={key:3,class:"font-semibold text-red-600 mt-2",role:"alert"},Jn={key:4,class:"font-semibold text-red-600 mt-2",role:"alert"},jn={key:1,class:"p-2 overflow-auto"},Kn={class:"table w-full"},zn=Se(()=>a("div",{class:"table-header-group"},[a("div",{class:"table-row"},[a("div",{class:"table-cell border-b-2 p-4 pt-0 pb-3"},"Transaction Hash")])],-1)),Qn={class:"table-row-group"},Wn={class:"table-cell border-b p-4 pt-0 pb-3"},Gn=["href"],Xn=xe({__name:"SiriusDistributionForm",setup(s){const l=De().appContext.config.globalProperties.emitter;K(()=>L.nativeToken.label);const t=I(!1),n=I(""),r=I(""),o=I(""),i=I(!1),f=I({}),c=I(!1),b=I(""),_=I(!1),O=K(()=>c.value),x=I(""),{t:A}=ut(),g=I(""),C=K(()=>!!n.value);let k=I([]),v=I(null),y=I(10),F=I([]),H=I(0),te=I(0),ge=I([]),se=I(!1),de=I(!1),le=I(!1),w=I(""),re=I(!1),h=I(""),E=I(""),z=I(""),oe=I(!1),P=async()=>{se.value=!1,v.value=null;let d=await _e.scanAsset(o.value?o.value:G.value?G.value.publicKey:"");k.value=d,d.length===0&&(se.value=!0)},ae=[{label:"5",value:5},{label:"10",value:10},{label:"15",value:15},{label:"20",value:20}],ne=async()=>{var Re;if(z.value="",re.value=!1,oe.value||le.value||w.value)return;if(v.value===null){h.value="Please select SDA";return}else if(H.value===0){E.value="No recipient to distribute";return}else if(x.value&&!fe.verifyWalletPassword(U.currentLoggedInWallet.name,ee.chainNetworkName,x.value)){g.value=A("general.walletPasswordInvalid",{name:U.currentLoggedInWallet.name});return}let d=Math.ceil(H.value/y.value),m=d*_e.getLockFundTransactionFee(),J=d*ee.currentNetworkProfileConfig.lockedFundsPerAggregate,B=k.value.find(W=>W.id===v.value.id),u=_e.createDistributeAggregateTransactions(o.value?o.value:G.value.publicKey,F.value,y.value,B),R=Ce(u.map(W=>W.maxFee.compact())),X=Ce(m,J,R)/Math.pow(10,L.nativeToken.divisibility);const be=fe.createPassword(x.value);let q;if(Be.value){let W=Me.value.cosignerList;if(W.length>1)q=b.value;else{let Fe=(Re=U.currentLoggedInWallet)==null?void 0:Re.accounts.find(ot=>ot.publicKey==W[0].publicKey);q=Fe?Fe.address:""}}let Q;q?Q=U.currentLoggedInWallet.accounts.find(W=>W.address===q):Q=U.currentLoggedInWallet.accounts.find(W=>W.address===G.value.address);let me=fe.decryptPrivateKey(be,Q.encrypted,Q.iv).toUpperCase(),Ne=_e.createAccount(me),ve=(await _e.scanAsset(Ne.publicKey)).find(W=>W.namespaceName===L.nativeToken.fullNamespace.trim());if(ve){if(X>ve.amount){z.value=`Initiator do not have enough XPX (${ve.amount}), need ${X}`;return}}else{z.value="Initiator do not have any XPX";return}oe.value=!0;let Oe=await _e.signAllAbtAndAnnounce(u,Ne);oe.value=!1,re.value=!0,ge.value=Oe};const Y=async d=>await(()=>new Promise((B,u)=>{const R=[],V=Yt(d,{trim:!0,skip_empty_lines:!0});V.on("readable",function(){let X;for(;(X=V.read())!==null;)R.push(X)}),V.on("end",function(){B(R)})}))();let ue=d=>{de.value=!1;const m=d.target.files[0],J=new FileReader;J.onload=async B=>{const u=B.target.result;try{let R=[],V=u.split(/\r?\n/);for(let q=1;q<V.length;q++){let Q=V[q].trim();if(Q==="")break;const ie=await Y(Q);R.push({publicKeyOrAddress:ie[0][0],amount:ie[0][1],message:ie[0][2]?ie[0][2]:""})}let X=!1;F.value=[];let be=[];if(R&&R.length)for(let q=0;q<R.length;++q){let Q=R[q].publicKeyOrAddress.trim().replaceAll("-",""),ie=R[q].amount.trim(),me=parseFloat(R[q].amount.trim()),Ne=R[q].message;if(Q.length===64){if(!$.Convert.isHexString(Q)){X=!0;break}}else if(Q.length===40){if($.Address.createFromRawAddress(Q).networkType!==L.networkType){X=!0;break}}else{X=!0;break}let Te=me.toString().length;if(isNaN(me)){X=!0;break}else if(Te!==ie.length){let Oe=ie.length-Te;if(me.toString()+"0".repeat(Oe)!==ie){X=!0;break}}let ve={publicKeyOrAddress:Q,amount:me,message:Ne};be.push(ve)}X?(de.value=!0,F.value=[],H.value=0,te.value=0):(H.value=R.length,te.value=Ce(be.map(q=>q.amount)),F.value=be)}catch{de.value=!0}},J.readAsText(m)},ce=d=>{let m=ee.currentNetworkProfile.chainExplorer;return m.url+"/"+m.hashRoute+"/"+d};I(!1);let Le=d=>{if(d){let m=k.value.find(J=>J.id===d.id);te.value>m.amount?le.value=!0:le.value=!1}else le.value=!1},Ee=d=>{if(d){let m=k.value.find(B=>B.id===d.id);F.value.find(B=>{let u=Ge(B.amount),R=We(u,Math.pow(10,m.divisibility)),V=Number(R.toString());return Math.trunc(V)!==V})?w.value="Invalid distribution amount, maximum decimal place is "+m.divisibility:w.value=""}else w.value=""};const G=I(),pe=K(()=>{if(!U.currentLoggedInWallet)return[];if(U.currentLoggedInWallet.others){const d=U.currentLoggedInWallet.accounts.map(B=>B),J=U.currentLoggedInWallet.others.filter(B=>B.type!="DELEGATE").map(B=>B);return d.concat(J)}else return U.currentLoggedInWallet.accounts.map(m=>m)});G.value=pe.value[0],P();const Ae=I(G.value.address),Be=K(()=>ct(G.value.address)),$e=K(()=>{const d=U.currentLoggedInWallet;if(!d)return[];let m=d.accounts.find(u=>u.address==G.value.address);if(!m)return[];var B=m.multisigInfo.filter(u=>u.level<0).map((u,R)=>({key:R.toString(),label:d.contacts.find(V=>V.address==fe.createAddressFromPublicKey(u.publicKey,L.networkType).plain())?d.contacts.find(V=>V.address==fe.createAddressFromPublicKey(u.publicKey,L.networkType).plain()).name:d.accounts.find(V=>V.publicKey==u.publicKey)?d.accounts.find(V=>V.publicKey==u.publicKey).name:"MULTISIG-"+fe.createAddressFromPublicKey(u.publicKey,L.networkType).plain().slice(-4),data:u.publicKey,selectable:!0}));return B}),tt=K(()=>$e.value.length!=0),nt=d=>{i.value=!1,n.value=fe.createAddressFromPublicKey(d.data,L.networkType).plain(),r.value=d.label,o.value=d.data,b.value=G.value.address,f.value[d.key]=!0,P()},it=d=>U.currentLoggedInWallet.accounts.find(m=>m.publicKey==d),Me=K(()=>{const d=pe.value.find(B=>{var u;return B.address==((u=G.value)==null?void 0:u.address)});let m=ht.getCosignerInWallet(d.publicKey),J={hasCosigner:m.hasCosigner,cosignerList:[]};return m.cosignerList.forEach(B=>{const u=it(B);u&&J.cosignerList.push({publicKey:B,name:u.name,balance:u.balance,address:u.address})}),J}),st=K(()=>ye.convertToExact(ee.currentNetworkProfileConfig.lockedFundsPerAggregate,L.nativeToken.divisibility));K(()=>ye.convertToCurrency(ee.currentNetworkProfileConfig.lockedFundsPerAggregate,L.nativeToken.divisibility));const rt=K(()=>ee.currentNetworkProfile?ye.convertToExact(ft.getLockFundFee(),L.nativeToken.divisibility):0);if(K(()=>st.value+rt.value),Be.value){let d=Me.value.cosignerList;d.length>0?(b.value=U.currentLoggedInWallet.accounts.find(m=>m.publicKey==d[0].publicKey).address,c.value=!1,t.value=!1):c.value=!0}return Ve(v,d=>{Le(d),Ee(d)}),Ve(te,d=>{Le(v.value),Ee(v.value)}),l.on("CLOSE_MULTISIG",()=>{n.value="",r.value="",o.value="",P()}),l.on("select-account",d=>{for(let m=0;m<pe.value.length;m++)pe.value[m].address==d&&(G.value=pe.value[m],P(),Ae.value=G.value.address)}),(d,m)=>{const J=Ie("font-awesome-icon"),B=Ie("Sidebar");return T(),D("div",en,[a("div",tn,[a("div",nn,[Z(Vt,{modelValue:Ae.value,"onUpdate:modelValue":m[0]||(m[0]=u=>Ae.value=u),initiateBy:C.value,selectDefault:Ae.value},null,8,["modelValue","initiateBy","selectDefault"]),tt.value?(T(),D("div",{key:0,onClick:m[1]||(m[1]=u=>i.value=!i.value),class:"border rounded-md cursor-pointer flex flex-col justify-around p-2 h-16 w-18 mt-auto"},[Z(J,{icon:"id-card-alt",class:"text-blue-primary ml-auto mr-auto"}),a("div",sn,M(d.$t("general.select")),1),a("div",rn,M(d.$t("general.multisig")),1)])):j("",!0)]),Z(B,{visible:i.value,"onUpdate:visible":m[3]||(m[3]=u=>i.value=u),baseZIndex:1e4,position:"full"},{default:we(()=>[Z(bt,{account:$e.value,selectedMultisig:f.value,onSelect:m[2]||(m[2]=u=>nt(u))},null,8,["account","selectedMultisig"])]),_:1},8,["visible"]),S(se)?(T(),D("div",on," No SDA found ")):j("",!0),n.value?(T(),D("div",ln,[Z(Nt,{"select-default-address":n.value,"select-default-name":r.value},null,8,["select-default-address","select-default-name"])])):j("",!0)]),a("div",an,[a("div",null,[a("div",un,[S(h)!=""?(T(),D("div",cn,M(S(h)),1)):j("",!0),Z(S(He),{modelValue:S(v),"onUpdate:modelValue":m[4]||(m[4]=u=>Ue(v)?v.value=u:v=u),options:S(k),placeholder:"Select SDA to distribute",style:{width:"100%"},filter:!0,filterFields:["label"],optionLabel:"text","option-disabled":"disabled",showClear:!0},{value:we(u=>[u.value?(T(),D("div",fn,[a("div",dn,[qe(M(u.value.label)+" ",1),a("span",mn," ("+M(S(ye).toCurrencyFormat(u.value.amount,u.value.divisibility))+")",1)])])):(T(),D("span",_n,M(u.placeholder),1))]),option:we(u=>[a("div",hn,[a("span",gn,M(u.option.label),1),a("span",pn,"Balance:"+M(S(ye).toCurrencyFormat(u.option.amount,u.option.divisibility)),1)])]),_:1},8,["modelValue","options"]),bn])])]),a("div",vn,[a("div",null,[a("div",yn,[Z(S(He),{modelValue:S(y),"onUpdate:modelValue":m[5]||(m[5]=u=>Ue(y)?y.value=u:y=u),options:S(ae),style:{width:"100%"},optionLabel:"label",optionValue:"value"},null,8,["modelValue","options"]),wn])])]),a("div",In,[a("div",null,[a("div",xn,[a("input",{type:"file",class:"form-control",onChange:m[6]||(m[6]=(...u)=>S(ue)&&S(ue)(...u)),id:"inputGroupFile04","aria-describedby":"inputGroupFileAddon04","aria-label":"Upload"},null,32)]),S(E)!=""?(T(),D("div",Sn,M(S(E)),1)):j("",!0)])]),a("div",An,[a("div",null,[S(de)?(T(),D("div",Nn," Invalid file ")):j("",!0),S(le)?(T(),D("div",On," Total distribution amount exceed selected asset amount (need "+M(S(te))+") ",1)):j("",!0),S(w)?(T(),D("div",kn,M(S(w)),1)):j("",!0)])]),S(F).length?(T(),D("div",Tn,[a("div",null,[a("div",Cn,[Dn,a("div",Ln,[(T(!0),D(Je,null,je(S(F),(u,R)=>(T(),D("div",{class:"table-row",key:R},[a("div",En,M(u.publicKeyOrAddress),1),a("div",Bn,M(u.amount),1),a("div",$n,M(u.message),1)]))),128))])])])])):j("",!0),a("div",Mn,[a("div",Rn,[Fn,Z(gt,{placeholder:d.$t("general.enterPassword"),errorMessage:d.$t("general.passwordRequired"),showError:_.value,modelValue:x.value,"onUpdate:modelValue":m[7]||(m[7]=u=>x.value=u),icon:"lock",class:"mt-5 mb-3",disabled:O.value},null,8,["placeholder","errorMessage","showError","modelValue","disabled"]),g.value!=""?(T(),D("div",Pn,M(g.value),1)):j("",!0),S(oe)?j("",!0):(T(),D("button",{key:1,type:"button",onClick:m[8]||(m[8]=u=>S(ne)()),disabled:S(oe)&&!S(re),class:"blue-btn px-3 py-3 text-md"},"Distribute",8,Vn)),S(oe)?(T(),D("button",qn,[Un,qe(" Distributing... ")])):j("",!0),S(z)?(T(),D("div",Hn,M(S(z)),1)):j("",!0),S(re)?(T(),D("div",Jn," Distribution Done ")):j("",!0)])]),S(ge).length?(T(),D("div",jn,[a("div",null,[a("div",Kn,[zn,a("div",Qn,[(T(!0),D(Je,null,je(S(ge),(u,R)=>(T(),D("div",{class:"table-row",key:R},[a("div",Wn,[a("a",{href:S(ce)(u),target:"_blank"},M(u),9,Gn)])]))),128))])])])])):j("",!0)])}}});const Zn=Ze(Xn,[["__scopeId","data-v-708da0df"]]),Yn={class:"mt-10 flex-grow px-5"},ei=a("div",{class:"w-11/12 ml-auto mr-auto"},[a("div",{class:"flex"},[a("div",{class:"py-3 px-6 lg:flex items-center"},[a("div",{class:"text-xl mr-2 mb-2"},"Airdrop Token Utility")])])],-1),ti={class:"mt-2 py-3"},ni={class:"w-11/12 ml-auto mr-auto border-2"},ii=a("div",{class:"mb-36"},null,-1),ai=xe({__name:"ViewServicesAirdropToken",setup(s){return(e,l)=>(T(),D("div",Yn,[ei,a("div",ti,[a("div",ni,[Z(Zn)])]),ii]))}});export{ai as default};
