import{_ as V,j as N,g as i,c as A,w as o,f as K,e as s,l as p,b as E,t as d,i as W,k as C,W as v,n as L,x as T,A as _,ad as M,r as y,o as k,s as S}from"./index-5ab99b99.js";import{T as $}from"./TextInput-42211d7d.js";import{_ as U}from"./PasswordInput.vue_vue_type_script_setup_true_lang-8033b6bb.js";import{_ as B}from"./chevron_left-0423cb29.js";const F={name:"ViewAccountCreatePrivateKey",components:{TextInput:$,PasswordInput:U},setup(){const{t:a}=N(),e=i(!1),r=i(""),t=i(""),c=i(""),f=i(!1),u="^(0x|0X)?[a-fA-F0-9]{64}$",m="^[^ ]{8,}$",w=C(),l=A(()=>!(c.value.match(m)&&t.value.length!=""&&r.value.match(u))),I=A(()=>!r.value.match(u)&&r.value!=""),P=o.currentLoggedInWallet?o.currentLoggedInWallet.name:"";return{showPkError:I,walletState:o,err:e,create:async()=>{if(!o.currentLoggedInWallet)return;if(o.currentLoggedInWallet.accounts.find(n=>n.name==t.value))e.value=a("account.nameTaken");else{var h=v.verifyWalletPassword(o.currentLoggedInWallet.name,L.chainNetworkName,c.value);if(h==-1)e.value=a("account.failCreate");else if(h==0)e.value=a("general.walletPasswordInvalid",{name:P});else{r.value.substring(0,2)=="0x"&&(r.value=r.value.substring(2));const n=T.Account.createFromPrivateKey(r.value,_.networkType,1);if(o.currentLoggedInWallet.accounts.find(g=>g.publicKey==n.publicKey))e.value=a("account.privateKeyExist");else{let g=v.createPassword(c.value);const b=v.createAccountSimpleFromPrivateKey(t.value,g,r.value,_.networkType);let x=new M(t.value,n.publicKey,n.address.plain(),"pass:bip32",b.encryptedPrivateKey.encryptedKey,b.encryptedPrivateKey.iv);o.currentLoggedInWallet.accounts.push(x),await v.reloadAddedAccount(x.name),o.wallets.saveMyWalletOnlytoLocalStorage(o.currentLoggedInWallet),w.push({name:"ViewAccountDetails",params:{address:n.address.address,accountCreated:!0}})}}}},accountName:t,walletPassword:c,privKey:r,showPasswdError:f,disableCreate:l,walletName:P}},methods:{clearInput:function(){this.accountName="",this.walletPassword="",this.privKey=""}}},j={class:"flex cursor-pointer"},D={class:"border w-8/12 ml-auto mr-auto mt-6 filter shadow-lg"},R={class:"text-lg text-center font-bold mt-10"},q={class:"text-blue-primary text-xs text-center font-bold"},O={key:0,class:"error error_box mb-2 w-8/12 ml-auto mr-auto"},X={class:"w-8/12 ml-auto mr-auto mt-3"},z={class:"flex justify-center mt-3"},G=["disabled"];function H(a,e,r,t,c,f){const u=y("router-link"),m=y("PasswordInput"),w=y("TextInput");return k(),K("div",null,[s("div",j,[e[4]||(e[4]=s("img",{src:B},null,-1)),p(u,{to:{name:"ViewAccountCreateSelectType"},class:"text-blue-primary text-xs mt-0.5"},{default:E(()=>[S(d(a.$t("general.back")),1)]),_:1})]),s("div",D,[s("div",R,d(a.$t("general.createNewAcc")),1),s("div",q,d(a.$t("general.fromPrivateKey")),1),t.err!=""?(k(),K("div",O,d(t.err),1)):W("",!0),s("div",X,[p(m,{placeholder:a.$t("general.privateKey"),errorMessage:a.$t("general.invalidPrivateKey"),icon:"key",showError:t.showPkError,modelValue:t.privKey,"onUpdate:modelValue":e[0]||(e[0]=l=>t.privKey=l)},null,8,["placeholder","errorMessage","showError","modelValue"]),p(w,{class:"mt-3",placeholder:a.$t("account.namePlaceholder"),errorMessage:a.$t("account.enterAccountName"),modelValue:t.accountName,"onUpdate:modelValue":e[1]||(e[1]=l=>t.accountName=l),icon:"wallet"},null,8,["placeholder","errorMessage","modelValue"]),p(m,{class:"mt-3",placeholder:a.$t("general.enterPassword"),errorMessage:a.$t("general.passwordRequired"),showError:t.showPasswdError,icon:"lock",modelValue:t.walletPassword,"onUpdate:modelValue":e[2]||(e[2]=l=>t.walletPassword=l)},null,8,["placeholder","errorMessage","showError","modelValue"])]),s("div",z,[s("button",{type:"submit",class:"blue-btn py-2 px-8 disabled:opacity-50",onClick:e[3]||(e[3]=l=>t.create()),disabled:t.disableCreate},d(a.$t("general.create")),9,G)]),e[5]||(e[5]=s("div",{class:"mt-10"},null,-1))])])}const re=V(F,[["render",H]]);export{re as default};
