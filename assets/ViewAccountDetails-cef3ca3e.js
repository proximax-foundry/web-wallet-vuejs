import{_ as R,a3 as pe,u as j,r as v,c as b,i as S,o as l,b as c,m as C,v as V,e as t,t as r,f as d,T as te,F as z,h as F,W as K,w as p,n as k,A as ve,H as E,B as P,a as B,k as w,y as Z,g as fe,x as ge,I as _e,J as ye,z as ee}from"./index-0eee6556.js";import{_ as we}from"./icon-green-tick-1b766454.js";import{_ as be}from"./delete-8b454e7f.js";import{_ as ae}from"./proximax-logo-ecfc3767.js";import{c as xe,g as ke}from"./functions-dc3759af.js";import{A as he,_ as Pe}from"./AccountTabs.vue_vue_type_script_setup_true_lang-0225cdb1.js";import{p as Ie}from"./pdfPaperWalletBackground-9b716104.js";import{E as Ae}from"./jspdf.es.min-c60f7e9a.js";import{q as We}from"./qrcode-74300042.js";import{_ as se}from"./PasswordInput.vue_vue_type_script_setup_true_lang-dc7399c3.js";import"./jdenticon-module-f0c94090.js";import"./TextInput-c42477d7.js";import"./TextInputClean-a3282f77.js";import"./icon-key-5b3f7dda.js";const Ne="/web-wallet-vuejs/assets/icon-link-new-white-dd5275bd.svg",Ce={name:"PkPasswordModal",props:{account:pe},components:{PasswordInput:se},setup(n){const{t:s}=j();let _=v(!1),a=v(""),f=v(""),h=v("");const i="^[^ ]{8,}$",m=b(()=>!a.value.match(i)),x=v(n.account),M=F().appContext.config.globalProperties.emitter;return{verifyWalletPwPk:()=>{try{if(K.verifyWalletPassword(p.currentLoggedInWallet.name,k.chainNetworkName,a.value)){const g=K.createPassword(a.value),A=K.decryptPrivateKey(g,x.value.encrypted,x.value.iv);h.value=A.toUpperCase(),f.value="",M.emit("revealPK",!0),M.emit("pkValue",h.value)}else{let g=p.currentLoggedInWallet.name;f.value=s("general.walletPasswordInvalid",{name:g})}}catch{let A=p.currentLoggedInWallet.name;f.value=s("general.walletPasswordInvalid",{name:A})}},toggleModal:_,err:f,walletPasswd:a,disableShow:m}}},$e={key:0,class:"popup-outer-lang fixed flex z-50"},Me={class:"modal-popup-box"},Ke={key:0,class:"error error_box mb-3"},Le={class:"text-center mt-2 text-xs font-semibold"},Ve=["disabled"];function Se(n,s,_,a,f,h){const i=S("font-awesome-icon"),m=S("PasswordInput");return l(),c(z,null,[C(i,{icon:"eye",title:"View Private Key",class:"text-blue-link relative cursor-pointer ml-1",onClick:s[0]||(s[0]=x=>a.toggleModal=!a.toggleModal)}),C(te,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:V(()=>[a.toggleModal?(l(),c("div",$e,[t("div",Me,[a.err!=""?(l(),c("div",Ke,r(a.err),1)):d("",!0),t("div",Le,r(n.$t("general.enterPassword")),1),C(m,{class:"my-3",modelValue:a.walletPasswd,"onUpdate:modelValue":s[1]||(s[1]=x=>a.walletPasswd=x),placeholder:n.$t("general.password"),errorMessage:n.$t("general.passwordRequired")},null,8,["modelValue","placeholder","errorMessage"]),t("div",{onClick:s[2]||(s[2]=x=>a.verifyWalletPwPk()),class:"blue-btn font-semibold py-2 cursor-pointer text-center ml-auto mr-auto w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:a.disableShow},r(n.$t("general.confirm")),9,Ve),t("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:s[3]||(s[3]=x=>{a.toggleModal=!a.toggleModal,a.walletPasswd=""})},r(n.$t("general.cancel")),1)])])):d("",!0)]),_:1}),a.toggleModal?(l(),c("div",{key:0,onClick:s[4]||(s[4]=x=>a.toggleModal=!a.toggleModal),class:"fixed inset-0 bg-opacity-60 bg-gray-100 z-20"})):d("",!0)],64)}const Te=R(Ce,[["render",Se]]),De={name:"PdfPasswordModal",components:{PasswordInput:se},setup(){const{t:n}=j();let s=v(!1),_=v(""),a=v("");const f="^[^ ]{8,}$",h=b(()=>!_.value.match(f)),m=F().appContext.config.globalProperties.emitter;return{verifyWalletPwWalletPaper:()=>{try{if(K.verifyWalletPassword(p.currentLoggedInWallet.name,k.chainNetworkName,_.value))s.value=!s.value,m.emit("unlockWalletPaper",_.value),_.value="";else{let $=p.currentLoggedInWallet.name;a.value=n("general.walletPasswordInvalid",{name:$})}}catch{let M=p.currentLoggedInWallet.name;a.value=n("general.walletPasswordInvalid",{name:M})}},toggleModal:s,err:a,walletPasswd:_,disableDownload:h}}},Ue={key:0,class:"popup-outer-lang fixed flex z-50"},Ee={class:"modal-popup-box"},Be={key:0,class:"error error_box mb-3"},Re={class:"text-center mt-2 text-xs font-semibold"},je=["disabled"];function ze(n,s,_,a,f,h){const i=S("PasswordInput");return l(),c(z,null,[t("div",{class:"blue-btn cursor-pointer py-3 px-4 text-center",onClick:s[0]||(s[0]=m=>a.toggleModal=!a.toggleModal)},r(n.$t("general.downloadPaperWallet")),1),C(te,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:V(()=>[a.toggleModal?(l(),c("div",Ue,[t("div",Ee,[a.err!=""?(l(),c("div",Be,r(a.err),1)):d("",!0),t("div",Re,r(n.$t("general.enterPassword")),1),C(i,{class:"my-3",modelValue:a.walletPasswd,"onUpdate:modelValue":s[1]||(s[1]=m=>a.walletPasswd=m),placeholder:n.$t("general.password"),errorMessage:n.$t("general.passwordRequired")},null,8,["modelValue","placeholder","errorMessage"]),t("div",{onClick:s[2]||(s[2]=m=>a.verifyWalletPwWalletPaper()),class:"blue-btn font-semibold py-2 cursor-pointer text-center ml-auto mr-auto w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:a.disableDownload},r(n.$t("general.confirm")),9,je),t("div",{class:"text-center cursor-pointer text-xs text-blue-link mt-2 font-semibold",onClick:s[3]||(s[3]=m=>{a.toggleModal=!a.toggleModal,a.walletPasswd=""})},r(n.$t("general.cancel")),1)])])):d("",!0)]),_:1}),a.toggleModal?(l(),c("div",{key:0,onClick:s[4]||(s[4]=m=>a.toggleModal=!a.toggleModal),class:"fixed inset-0 bg-opacity-60 z-20 bg-gray-100"})):d("",!0)],64)}const Fe=R(De,[["render",ze]]);const I=n=>(_e("data-v-8cf80fb3"),n=n(),ye(),n),qe={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},He={key:0,class:"mb-8"},Xe={class:"border border-green-300 pl-6 pb-3 bg-green-50"},Ge={class:"flex items-center gap-3"},Je=I(()=>t("img",{src:we,class:"h-10 w-10 pt-3 mr-2"},null,-1)),Oe={class:"flex flex-col w-full"},Qe={class:"flex"},Ye={class:"text-xs text-green-500 font-semibold pt-3"},Ze={class:"text-xxs mt-1"},et={class:"border-2 border-t-0 pb-6 px-6 pt-2"},tt={class:"flex flex-col sm:flex-row justify-between sm:items-center mt-3"},at={class:"flex flex-col"},st={class:"text-xxs text-blue-primary font-semibold uppercase"},lt={key:0,class:"flex"},ot={class:"text-md font-bold"},nt={key:0,class:"text-md font-bold"},rt={class:"text-xs mt-1.5 font-bold"},it={class:"ml-1 font-bold"},ct=I(()=>t("img",{src:ae,class:"h-5 w-5 mt-0.5"},null,-1)),dt={class:"text-txs text-gray-400 mt-0.5"},ut={key:0,class:"flex mt-2 sm:mt-0"},mt=["href"],pt=I(()=>t("img",{src:ae,class:"h-5 w-5 cursor-pointer"},null,-1)),vt={class:"text-xs mt-0.5 font-semibold text-white"},ft=I(()=>t("img",{src:Ne,class:"h-5 w-5 cursor-pointer"},null,-1)),gt=I(()=>t("div",{class:"my-6 gray-line"},null,-1)),_t={class:"text-xxs text-blue-primary mt-2 font-semibold uppercase"},yt={class:"flex"},wt=["copyValue","title","copySubject"],bt={key:0,class:"my-6 gray-line"},xt={key:1},kt={class:"text-xxs text-blue-primary mt-0.5 font-semibold uppercase"},ht={class:"flex"},Pt={key:0,class:"break-all font-semibold truncate md:text-clip md:w-auto"},It={class:"flex"},At=["copyValue","title"],Wt={class:"text-txs mt-2 text-red-400 border px-1.5 py-2 border-red-400 rounded-md"},Nt=I(()=>t("div",{class:"my-6 gray-line"},null,-1)),Ct={class:"flex flex-col"},$t=I(()=>t("div",{class:"text-xxs text-blue-primary font-semibold uppercase"},"Linked Account",-1)),Mt={class:"flex items-center"},Kt={key:0},Lt=["href"],Vt={key:1,class:"text-xs"},St={class:"text-xs mt-1 font-semibold break-all truncate md:text-clip md:w-auto"},Tt={key:2,class:"text-xs"},Dt=I(()=>t("div",{class:"my-6 gray-line"},null,-1)),Ut={class:"flex flex-col"},Et=I(()=>t("div",{class:"text-xxs text-blue-primary font-semibold uppercase"},"Alias",-1)),Bt={class:"flex items-center"},Rt={key:0,class:"text-xs"},jt=["href"],zt={class:"cursor-pointer"},Ft={key:0},qt={class:"flex mt-6 flex-col sm:flex-row w-auto gap-10 sm:gap-0 justify-between"},Ht={__name:"ViewAccountDetails",props:{address:String,accountCreated:Boolean},setup(n){const s=n,{t:_}=j(),a=ve(),f=v(!1);let h=()=>{if(!p.currentLoggedInWallet)return!1;let e=p.currentLoggedInWallet.others.find(o=>o.address==s.address);return e?e.type=="DELEGATE":!1};const i=b(()=>{if(!p.currentLoggedInWallet)return null;let e=p.currentLoggedInWallet.accounts.find(o=>o.address==s.address)||p.currentLoggedInWallet.others.find(o=>o.address==s.address);return e||null}),m=b(()=>p.currentLoggedInWallet?p.currentLoggedInWallet.others.find(e=>e.address==s.address):null);s.accountCreated&&(f.value=!0);const $=F().appContext.config.globalProperties.emitter,M=b(()=>{if(s.address)try{return E.createAddress(s.address).pretty()}catch{}return""}),T=v(!1),g=v(!1),A=v(""),q=e=>{let o=document.getElementById(e).getAttribute("copyValue"),u=document.getElementById(e).getAttribute("copySubject");xe(o),a.add({severity:"info",detail:u+" "+_("general.copied"),group:"br-custom",life:3e3})},H=v(""),X=()=>{if(!i.value)return;let e=i.value.balance;ke(e).then(o=>{H.value=E.toCurrencyFormat(o,P.nativeToken.divisibility)})},G=b(()=>P.nativeToken.label),le=b(()=>P.nativeToken.divisibility),J=b(()=>i.value?E.toCurrencyFormat(i.value.balance,le.value):"0"),D=b(()=>{let e=J.value.split(".");return e[1]!=null?{left:e[0],right:e[1]}:{left:e[0],right:null}});P.nativeToken.label==="XPX"&&(X(),B(J,()=>{X()}));const oe=(e,o=2,u=0)=>{const W=We(10,"H");return W.addData(e),W.make(),W.createDataURL(o,u)},ne=e=>{const o=new Ae({unit:"px"});o.addImage(Ie,"JPEG",120,60,205,132);const u=K.createPassword(e);let N=K.decryptPrivateKey(u,i.value.encrypted,i.value.iv).toUpperCase();o.addImage(oe(N,1,0),151.5,105),o.setFontSize(8),o.setTextColor("#000000"),o.text(M.value,146,164,{maxWidth:132}),o.save("Your_Paper_Wallet")},U=b(()=>P.networkType),re=b(()=>U.value==168&&k.chainNetworkName=="Sirius Testnet 1"?"https://bctestnetfaucet.xpxsirius.io/#/":U.value==168&&k.chainNetworkName=="Sirius Testnet 2"?"https://bctestnet2faucet.xpxsirius.io/#/":""),y=v(""),L=v([]),ie=async()=>{if(i.value){const e=await P.chainAPI.accountAPI.getAccountsInfo([ee.Address.createFromRawAddress(i.value.address)]);y.value=e[0].linkedAccountKey}},ce=async()=>{(await P.chainAPI.accountAPI.getAccountsNames([ee.Address.createFromRawAddress(i.value.address)]))[0].names.forEach(o=>{L.value.push(o.name)})},de=e=>k.currentNetworkProfile?k.currentNetworkProfile.chainExplorer.url+"/"+k.currentNetworkProfile.chainExplorer.namespaceInfoRoute+"/"+e:"",ue=e=>k.currentNetworkProfile?k.currentNetworkProfile.chainExplorer.url+"/"+k.currentNetworkProfile.chainExplorer.publicKeyRoute+"/"+e:"",me=e=>{if(!p.currentLoggedInWallet)return"";let o=p.currentLoggedInWallet.accounts.find(u=>u.publicKey==e)||p.currentLoggedInWallet.others.find(u=>u.publicKey==e);return o?o.address:void 0},O=async()=>{i.value&&(await ie(),ce())},Q=()=>{if(P.isReady){if(!i.value)return;O()}else{let e=B(P,o=>{o.isReady&&(O(),e())})}};return Q(),B(i,()=>{Q()}),$.on("revealPK",e=>{g.value=e}),$.on("pkValue",e=>{A.value=e}),$.on("unlockWalletPaper",e=>{ne(e)}),(e,o)=>{const u=S("font-awesome-icon"),W=S("router-link");return l(),c("div",null,[t("div",qe,[C(he,{address:n.address,class:"mb-6"},null,8,["address"]),f.value?(l(),c("div",He,[t("div",Xe,[t("div",Ge,[Je,t("div",Oe,[t("div",Qe,[t("div",Ye,r(e.$t("general.congratz")),1),t("img",{onClick:o[0]||(o[0]=N=>f.value=!1),src:be,class:"w-5 ml-auto mr-1 cursor-pointer"})]),t("div",Ze,r(e.$t("account.accountCreated"))+r(e.$t("general.pkWarning")),1)])])])])):d("",!0),C(Pe,{address:n.address,selected:"details"},null,8,["address"]),t("div",et,[t("div",tt,[t("div",at,[t("div",st,r(e.$t("general.currentBalance")),1),D.value?(l(),c("div",lt,[t("div",ot,r(D.value.left),1),D.value.right!=null?(l(),c("div",nt,".")):d("",!0),t("div",rt,r(D.value.right),1),t("div",it,r(G.value),1),ct])):d("",!0),t("div",dt,r(e.$t("general.estimateUSD"))+" "+r(H.value),1)]),U.value==168?(l(),c("div",ut,[t("a",{href:re.value,target:"_blank",class:"flex bg-navy-primary rounded-md py-0.5 px-3 cursor-pointer"},[pt,t("div",vt,r(e.$t("general.topUp",{tokenName:G.value})),1),ft],8,mt)])):d("",!0)]),gt,t("div",_t,r(e.$t("general.publicKey")),1),t("div",yt,[t("div",{id:"public",class:"text-xs font-semibold mt-1 break-all truncate md:text-clip md:w-auto",copyValue:i.value?i.value.publicKey:"",title:i.value?i.value.publicKey:"",copySubject:e.$t("general.publicKey")},r(i.value?i.value.publicKey:""),9,wt),C(u,{icon:"copy",onClick:o[1]||(o[1]=N=>q("public")),title:e.$t("general.copy"),class:"ml-2 mt-0.5 pb-1 w-5 h-5 text-blue-link cursor-pointer"},null,8,["title"])]),m.value?d("",!0):(l(),c("div",bt)),m.value?d("",!0):(l(),c("div",xt,[t("div",kt,r(e.$t("general.privateKey")),1),t("div",ht,[!T.value&&!g.value?(l(),c("div",Pt," ****************************************************************")):d("",!0),!T.value&&!g.value?(l(),w(Te,{key:1,account:i.value},null,8,["account"])):d("",!0)]),t("div",It,[g.value?(l(),c("div",{key:0,id:"private",class:"text-xs mt-1 font-semibold break-all truncate md:text-clip md:w-auto",type:"text",copyValue:A.value,title:A.value,copySubject:"Private Key"},r(A.value),9,At)):d("",!0),g.value?(l(),w(u,{key:1,title:"Copy",icon:"copy",onClick:o[2]||(o[2]=N=>q("private")),class:"ml-2 pb-1 w-5 h-5 text-blue-link cursor-pointer"})):d("",!0),g.value?(l(),w(u,{key:2,icon:"eye-slash",title:"Hide Private Key",class:"text-blue-link relative cursor-pointer ml-1",onClick:o[3]||(o[3]=N=>{T.value=!1,g.value=!1})})):d("",!0)]),t("div",Wt,r(e.$t("general.pkWarning")),1)])),Nt,t("div",Ct,[$t,t("div",Mt,[m.value?(l(),c("div",Kt,[y.value!=""&&y.value!="0".repeat(64)?(l(),c("a",{key:0,href:ue(y.value),target:"_blank",class:"text-xs mt-1 font-semibold break-all text-black truncate md:text-clip md:w-auto"},r(y.value),9,Lt)):(l(),c("div",Vt,"No Linked Account"))])):y.value!=""&&y.value!="0".repeat(64)?(l(),w(W,{key:1,class:"truncate",to:{name:"ViewAccountDetails",params:{address:me(y.value)}}},{default:V(()=>[t("div",St,r(y.value),1)]),_:1},8,["to"])):(l(),c("div",Tt,"No Linked Account")),Z(h)()?d("",!0):(l(),w(W,{key:3,to:{name:"ViewAccountDelegate",params:{address:n.address}}},{default:V(()=>[y.value!=""&&y.value!="0".repeat(64)?(l(),w(u,{key:0,title:"Unlink account",icon:"unlink",class:"ml-2 w-4 h-4 text-blue-primary cursor-pointer"})):(l(),w(u,{key:1,title:"Delegate account",icon:"link",class:"ml-2 w-4 h-4 text-blue-primary cursor-pointer"}))]),_:1},8,["to"]))])]),Dt,t("div",Ut,[Et,t("div",Bt,[L.value.length?d("",!0):(l(),c("div",Rt," No Alias ")),(l(!0),c(z,null,fe(L.value,(N,Y)=>(l(),c("div",{key:Y,class:"text-xs mt-1 font-semibold break-all"},[t("a",{href:de(N),target:"_new"},[t("div",zt,[ge(r(N),1),Y!=L.value.length-1?(l(),c("span",Ft,",")):d("",!0)])],8,jt)]))),128)),Z(h)()?d("",!0):(l(),w(W,{key:1,to:{name:"ViewAccountAliasAddressToNamespace",params:{address:n.address}}},{default:V(()=>[L.value.length?(l(),w(u,{key:1,title:"Unlink namespace",icon:"unlink",class:"ml-2 w-4 h-4 mt-0.5 text-blue-primary cursor-pointer"})):(l(),w(u,{key:0,title:"Alias to namespace",icon:"link",class:"ml-2 w-4 h-4 mt-0.5 text-blue-primary cursor-pointer"}))]),_:1},8,["to"]))])]),t("div",qt,[m.value?d("",!0):(l(),w(Fe,{key:0}))])])])])}}},ra=R(Ht,[["__scopeId","data-v-8cf80fb3"]]);export{ra as default};
