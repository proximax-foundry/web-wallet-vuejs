import{_ as ge,o as i,b as c,e as t,t as l,f as F,a5 as Fe,u as Ae,l as Ie,A as Pe,c as o,B as g,r as v,n as T,H as p,S as ee,w as U,ai as z,D as Ne,am as Y,a as C,b5 as me,i as B,M as Le,m as x,x as M,O as H,aa as Ve,F as Ee,g as Be,v as De,W as We,z as j}from"./index-717d9e27.js";import{_ as Ue}from"./PasswordInput.vue_vue_type_script_setup_true_lang-b21bff19.js";import{S as He}from"./SupplyInputClean-63fd9e26.js";import{_ as je}from"./TransactionFeeDisplay.vue_vue_type_script_setup_true_lang-ff0c8e03.js";import{A as te}from"./assetsUtils-648315b3.js";import{t as Re}from"./jdenticon-module-702c110f.js";import{M as qe}from"./multisigUtils-7c4b24e8.js";import{T as se}from"./transactionState-465c7708.js";import{_ as Oe}from"./icon-asset-2a9ae6ea.js";import{_ as Z}from"./icon-info-8b4f1351.js";import"./proximax-logo-ecfc3767.js";const ze={props:{placeholder:String,errorMessage:String,showError:Boolean,modelValue:String,title:String,disabled:Boolean},emits:["update:modelValue"],name:"SelectModificationType",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},watch:{showError:function(s){s?(this.borderColor="border-2 border-red-primary",this.textErr=!0):(this.borderColor="border-2 border-gray-300",this.textErr=!1)}}},Ye={class:"border border-gray-200 px-2 py-1 h-14 rounded-md"},Ze={class:"uppercase text-gray-500 text-txs text-left mb-2"},Ge={class:"flex items-center"},Je=["value","disabled","checked"],Qe={for:"increase",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},Xe=["value","disabled","checked"],Ke={for:"decrease",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},$e={class:"h-3 mb-2"},et={key:0,class:"error error-text text-left"};function tt(s,r,m,e,R,b){return i(),c("div",null,[t("div",Ye,[t("div",Ze,l(m.title),1),t("div",Ge,[t("input",{id:"increase",type:"radio",name:"modificationType",value:m.modelValue,disabled:m.disabled,class:"h-5 w-5",onChange:r[0]||(r[0]=f=>s.$emit("update:modelValue","increase")),checked:m.modelValue=="increase"},null,40,Je),t("label",Qe,l(s.$t("general.increase")),1),t("input",{id:"decrease",type:"radio",name:"modificationType",value:m.modelValue,disabled:m.disabled,class:"h-5 w-5",onChange:r[1]||(r[1]=f=>s.$emit("update:modelValue","decrease")),checked:m.modelValue=="decrease"},null,40,Xe),t("label",Ke,l(s.$t("general.decrease")),1)])]),t("div",$e,[R.textErr||m.showError?(i(),c("div",et,l(m.errorMessage),1)):F("",!0)])])}const st=ge(ze,[["render",tt]]),at={name:"ViewServicesAssetsModifySupplyChange",directives:{tooltip:Fe},components:{PasswordInput:Ue,SupplyInputClean:He,SelectModificationType:st,TransactionFeeDisplay:je},props:{assetId:String,address:String},setup(s){const{t:r}=Ae(),m=Ie();Pe();let e=9e14;const R=o(()=>g.nativeToken.label),b=v(!1),f=v(""),q=v(""),A=v(!1),I=v(!1),P=v(!1),G="^[^ ]{8,}$",N=v(!1),n=v(!1),y=v(""),fe=o(()=>g.nativeToken.label),be=o(()=>T.currentNetworkProfileConfig?p.convertToExact(T.currentNetworkProfileConfig.lockedFundsPerAggregate,g.nativeToken.divisibility):0),pe=o(()=>T.currentNetworkProfileConfig?p.convertToCurrency(T.currentNetworkProfileConfig.lockedFundsPerAggregate,g.nativeToken.divisibility):0),ae=o(()=>T.currentNetworkProfile?p.convertToExact(ee.getLockFundFee(),g.nativeToken.divisibility):0),J=o(()=>be.value+ae.value),ye=o(()=>!(f.value.match(G)&&h.value>0&&!b.value&&!K.value&!X.value)),he=o(()=>d.value?d.value.name:""),w=o(()=>d.value?d.value.address:""),le=o(()=>d.value?d.value.balance:0),oe=o(()=>{if(d.value)return p.toCurrencyFormat(d.value.balance,g.nativeToken.divisibility)}),h=v("0"),re=p.createAddress(s.address).plain();let d=o(()=>U.currentLoggedInWallet?U.currentLoggedInWallet.accounts.find(a=>a.address==re)||U.currentLoggedInWallet.others.find(a=>a.address==re):null);const _e=v(z(w.value));let ne=new Ne("ThemeStyleConfig");ne.init();const xe=v(Re(s.address,40,ne.jdenticonConfig)),L=v("increase");let Q=9e14;const u=o(()=>d.value?d.value.assets.find(a=>a.idHex===s.assetId):null),D=o(()=>u.value?u.value.amount:0),ie=o(()=>u.value?u.value.idHex:""),we=o(()=>u.value?u.value.transferable:!1),ce=o(()=>u.value?u.value.supplyMutable:!1),O=o(()=>u.value?u.value.divisibility:0),k=o(()=>u.value?u.value.supply/Math.pow(10,u.value.divisibility):0),_=o(()=>{if(!d.value)return{hasCosigner:!1,cosignerList:[]};if(T.currentNetworkProfileConfig){let a=qe.getCosignerInWallet(d.value?d.value.publicKey:""),S=[];return a.cosignerList.forEach(E=>{S.push({publicKey:E,name:Y(E).name,balance:Y(E).balance,address:Y(E).address})}),a.cosignerList=S,{hasCosigner:a.hasCosigner,cosignerList:a.cosignerList}}else return{hasCosigner:!1,cosignerList:[]}});y.value=_.value.cosignerList.length>0?_.value.cosignerList[0].address:"",C(_,a=>{a.cosignerList.length>0&&(y.value=a.cosignerList.length>0?_.value.cosignerList[0].address:"")});const X=o(()=>_.value.cosignerList.length==0&&z(w.value)),de=o(()=>{let a=me(y.value)?me(y.value).balance:0;return p.toCurrencyFormat(a)}),K=o(()=>y.value.length<=0?le.value<W.value:Number(de.value)<W.value+J.value),$=o(()=>_.value.cosignerList.length>0?_.value.cosignerList.length>1?y.value:Y(_.value.cosignerList[0].publicKey).address:""),ke=o(()=>g.isReady?p.convertToCurrency(te.getMosaicSupplyChangeTransactionFee(s.assetId,L.value,parseFloat(h.value),O.value),g.nativeToken.divisibility):"0"),W=o(()=>g.isReady?p.convertToExact(te.getMosaicSupplyChangeTransactionFee(s.assetId,L.value,parseFloat(h.value),O.value),g.nativeToken.divisibility):0);C(ce,a=>{a?(P.value=!1,I.value=!1,A.value=!1):(P.value=!0,I.value=!0,A.value=!0)},{immediate:!0});const Se=async()=>{if(!We.verifyWalletPassword(U.currentLoggedInWallet.name,T.chainNetworkName,f.value)){q.value=r("general.walletPasswordInvalid",{name:U.currentLoggedInWallet.name});return}let S={};const E=g.buildTxn;let Ce=L.value=="increase"?j.MosaicSupplyType.Increase:j.MosaicSupplyType.Decrease,ve=E.buildMosaicSupplyChange(new j.MosaicId(ie.value),Ce,j.UInt64.fromUint(te.addZeros(O.value,Number(h.value))));if($.value){const Me=await g.chainAPI.nodeAPI.getNodeTime();S=await ee.signAbtWithTxnAndPassword($.value,w.value,f.value,ve,new j.UInt64(Me.sendTimeStamp))}else S=await ee.signTxnWithPassword(w.value,null,f.value,ve);se.lockHashPayload=S.hashLockTxnPayload,se.transactionPayload=S.txnPayload,se.selectedAddress=w.value,m.push({name:"ViewConfirmTransaction"})};C(L,a=>{a=="increase"?b.value=parseFloat(h.value)>Q-k.value:k.value==D.value?b.value=parseFloat(h.value)>k.value-1:b.value=parseFloat(h.value)>D.value}),C(h,a=>{L.value=="increase"?b.value=parseFloat(a)>Q-k.value:k.value==D.value?b.value=parseFloat(a)>k.value-1:b.value=parseFloat(a)>D.value});const ue=o(()=>z(w.value)?parseFloat(J.value)+W.value:W.value),Te=o(()=>p.amountFormatterSimple(ue.value,0)),V=a=>{A.value=a,I.value=a,P.value=a};return C(ue,a=>{oe.value<a?V(!0):V(!1)}),C(K,a=>{V(!!a)}),C(X,a=>{V(!!a)}),{currentNativeTokenName:R,selectedAccName:he,selectedAccAdd:w,balance:oe,balanceNumber:le,showNoBalance:K,lockFundTxFee:ae,lockFundCurrency:pe,lockFundTotalFee:J,totalFeeFormatted:Te,showSupplyErr:b,err:q,walletPassword:f,disableModify:ye,showPasswdError:N,supply:h,disabledPassword:A,disabledSupply:I,currencyName:fe,isMultiSig:z,isMultiSigBool:_e,selectAsset:ie,selectIncreaseDecrease:L,modifyAsset:Se,transactionFee:ke,transactionFeeExact:W,assetSupply:k,assetAmount:D,assetDivisibility:O,assetTransferable:we,assetMutable:ce,getMultiSigCosigner:_,cosignerBalanceInsufficient:n,cosignerAddress:y,cosigner:$,isNotCosigner:X,disabledSelectIncreaseDecrease:P,Helper:p,svgString:xe,maxAmount:e,maxAssetSupply:Q,checkCosignBalance:de}}},lt={class:"w-10/12 ml-auto mr-auto"},ot={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},rt={class:"xl:col-span-2 p-6 lg:p-12"},nt={class:"lg:flex lg:justify-between lg:items-center"},it={class:"font-semibold mb-4 inline-block mt-1"},ct={class:"flex items-center"},dt=["innerHTML"],ut={class:"ml-2"},vt={class:"text-blue-primary text-xxs font-bold uppercase mb-1"},mt={class:"font-bold text-black text-sm"},gt={key:0,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},ft={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},bt=t("div",{class:"inline-block text-xs"},"Asset is immutable",-1),pt={key:1,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},yt={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},ht={class:"inline-block text-xs"},_t={key:2,class:"rounded-md bg-yellow-200 w-full p-2 flex items-center justify-center"},xt={class:"rounded-full w-5 h-5 bg-yellow-100 inline-block relative mr-2"},wt={class:"inline-block text-xs"},kt={key:3,class:"error error_box"},St={class:"text-right w-full"},Tt={key:0,class:"inline-block"},Ct={class:"text-tsm text-left mt-3"},Mt={key:0,class:"font-bold"},Ft={key:0,class:"error"},At={key:1,class:"font-bold"},It=["value"],Pt={key:2,class:"error"},Nt={class:"border border-blue-primary p-4 bg-blue-100 flex items-center rounded mt-5"},Lt=t("img",{src:Oe},null,-1),Vt={class:"ml-1"},Et={class:"uppercase text-blue-primary font-semibold text-xxs"},Bt={class:"text-black text-sm font-bold"},Dt={class:"border border-gray-200 p-4 rounded mt-5"},Wt={class:"lg:grid lg:grid-cols-2"},Ut={class:"my-3"},Ht={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},jt={src:Z,class:"inline-block ml-2 relative",style:{top:"-1px"}},Rt={class:"text-black font-bold text-sm"},qt={class:"my-3"},Ot={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},zt={src:Z,class:"inline-block ml-2 relative",style:{top:"-1px"}},Yt={class:"text-black font-bold text-sm"},Zt={class:"my-3"},Gt={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Jt={src:Z,class:"inline-block ml-2 relative",style:{top:"-1px"}},Qt={class:"uppercase text-black font-bold text-sm"},Xt={class:"my-3"},Kt={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},$t={src:Z,class:"inline-block ml-2 relative",style:{top:"-1px"}},es={class:"uppercase text-black font-bold text-sm"},ts={class:"lg:grid lg:grid-cols-2 mt-5"},ss={class:"bg-navy-primary py-6 px-12 xl:col-span-1"},as={class:"text-xs text-white mt-5 mb-1.5"},ls=["disabled"],os={class:"text-center"};function rs(s,r,m,e,R,b){const f=B("font-awesome-icon"),q=B("SelectModificationType"),A=B("SupplyInputClean"),I=B("TransactionFeeDisplay"),P=B("PasswordInput"),G=B("router-link"),N=Le("tooltip");return i(),c("div",null,[t("div",lt,[t("div",ot,[t("div",rt,[t("div",nt,[t("div",it,l(s.$t("asset.modifyAssetSupply")),1),t("div",ct,[t("div",{innerHTML:e.svgString,class:"inline-block"},null,8,dt),t("div",ut,[t("div",vt,l(s.$t("asset.assetCreatedBy")),1),t("div",mt,l(e.selectedAccName),1)])])]),e.assetMutable?F("",!0):(i(),c("div",gt,[t("div",ft,[x(f,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),bt])),e.showNoBalance?(i(),c("div",pt,[t("div",yt,[x(f,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),t("div",ht,l(s.$t("general.insufficientBalance")),1)])):e.isNotCosigner?(i(),c("div",_t,[t("div",xt,[x(f,{icon:"exclamation",class:"text-yellow-500 h-3 w-3 absolute",style:{top:"5px",left:"7px"}})]),t("div",wt,l(s.$t("general.noCosigner")),1)])):F("",!0),e.err!=""?(i(),c("div",kt,l(e.err),1)):F("",!0),t("div",St,[e.getMultiSigCosigner.cosignerList.length>0?(i(),c("div",Tt,[t("div",Ct,[M(l(s.$t("general.initiateBy"))+": ",1),e.getMultiSigCosigner.cosignerList.length==1?(i(),c("span",Mt,[M(l(e.getMultiSigCosigner.cosignerList[0].name)+" ("+l(s.$t("general.balance"))+": "+l(e.Helper.amountFormatterSimple(e.getMultiSigCosigner.cosignerList[0].balance,0))+" "+l(e.currentNativeTokenName)+") ",1),e.getMultiSigCosigner.cosignerList[0].balance<e.lockFundTotalFee?(i(),c("span",Ft,"- "+l(s.$t("general.insufficientBalance")),1)):F("",!0)])):(i(),c("span",At,[H(t("select",{"onUpdate:modelValue":r[0]||(r[0]=n=>e.cosignerAddress=n)},[(i(!0),c(Ee,null,Be(e.getMultiSigCosigner.cosignerList,(n,y)=>(i(),c("option",{value:n.address,key:y},l(n.name)+" ("+l(s.$t("general.balance"))+": "+l(n.balance)+" "+l(e.currentNativeTokenName)+")",9,It))),128))],512),[[Ve,e.cosignerAddress]])])),e.cosignerBalanceInsufficient?(i(),c("div",Pt,"- "+l(s.$t("general.insufficientBalance")),1)):F("",!0)])])):F("",!0)]),t("div",Nt,[Lt,t("div",Vt,[t("div",Et,l(s.$t("general.assetId")),1),t("div",Bt,l(e.selectAsset),1)])]),t("div",Dt,[t("div",Wt,[t("div",Ut,[t("div",Ht,[M(l(s.$t("asset.currentSupply")),1),H(t("img",jt,null,512),[[N,{value:"<tiptext>"+s.$t("asset.supplyMsg2")+"<br>"+s.$t("asset.supplyMsg3")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),t("div",Rt,l(e.assetAmount),1)]),t("div",qt,[t("div",Ot,[M(l(s.$t("general.divisibility")),1),H(t("img",zt,null,512),[[N,{value:"<tiptext>"+s.$t("asset.divisibilityMsg4")+"<br><br>"+s.$t("asset.divisibilityMsg2")+"<br>"+s.$t("asset.divisibilityMsg3")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),t("div",Yt,l(e.assetDivisibility),1)]),t("div",Zt,[t("div",Gt,[M(l(s.$t("general.transferable")),1),H(t("img",Jt,null,512),[[N,{value:"<tiptext>"+s.$t("asset.transferableMsg")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),t("div",Qt,l(e.assetTransferable?s.$t("general.yes"):s.$t("general.no")),1)]),t("div",Xt,[t("div",Kt,[M(l(s.$t("general.supplyMutable")),1),H(t("img",$t,null,512),[[N,{value:"<tiptext>"+s.$t("asset.supplyMutableMsg")+"</tiptext>",escape:!0},void 0,{bottom:!0}]])]),t("div",es,l(e.assetMutable?s.$t("general.yes"):s.$t("general.no")),1)])])]),t("div",ts,[x(q,{title:s.$t("asset.modificationType"),class:"lg:mr-4",modelValue:e.selectIncreaseDecrease,"onUpdate:modelValue":r[1]||(r[1]=n=>e.selectIncreaseDecrease=n)},null,8,["title","modelValue"]),x(A,{disabled:e.showNoBalance||e.isNotCosigner,modelValue:e.supply,"onUpdate:modelValue":r[2]||(r[2]=n=>e.supply=n),balance:e.maxAssetSupply-e.assetSupply.value,placeholder:s.$t("asset.quantityOf",{value:e.selectIncreaseDecrease}),type:"text",icon:"coins",showError:e.showSupplyErr,errorMessage:e.selectIncreaseDecrease=="increase"?" The total asset supply should not exceed 900T":" You have exceeded the maximum value for decrease asset supply.",decimal:Number(e.assetDivisibility),class:"lg:ml-4"},null,8,["disabled","modelValue","balance","placeholder","showError","errorMessage","decimal"])])]),t("div",ss,[x(I,{"transaction-fee":e.transactionFee,"total-fee-formatted":e.totalFeeFormatted,"get-multi-sig-cosigner":e.getMultiSigCosigner,"check-cosign-balance":e.checkCosignBalance,"lock-fund-currency":e.lockFundCurrency,"lock-fund-tx-fee":String(e.lockFundTxFee),balance:e.balance,"selected-acc-add":e.selectedAccAdd},null,8,["transaction-fee","total-fee-formatted","get-multi-sig-cosigner","check-cosign-balance","lock-fund-currency","lock-fund-tx-fee","balance","selected-acc-add"]),t("div",as,l(s.$t("general.enterPasswordContinue")),1),x(P,{placeholder:s.$t("general.password"),errorMessage:s.$t("general.passwordRequired"),showError:e.showPasswdError,modelValue:e.walletPassword,"onUpdate:modelValue":r[3]||(r[3]=n=>e.walletPassword=n),disabled:e.disabledPassword},null,8,["placeholder","errorMessage","showError","modelValue","disabled"]),t("button",{type:"submit",class:"mt-3 w-full blue-btn py-4 disabled:opacity-50 disabled:cursor-auto text-white",disabled:e.disableModify,onClick:r[4]||(r[4]=(...n)=>e.modifyAsset&&e.modifyAsset(...n))},l(s.$t("asset.modifyAssetSupply")),9,ls),t("div",os,[x(G,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white border-b-2 border-white"},{default:De(()=>[M(l(s.$t("general.cancel")),1)]),_:1})])])])])])}const ys=ge(at,[["render",rs]]);export{ys as default};
