import{d as F,r as x,u as P,c as C,w as l,o as d,b as m,e as i,t as v,f as p,m as A,F as U,z as _,aW as K,B as j,_ as H,A as z,D as q,H as G,i as O,O as J,R as Q,h as X,a7 as Y,v as W,j as N,k as S,x as M}from"./index-f0fab120.js";import{t as Z}from"./jdenticon-module-f8a9db48.js";import{c as ee}from"./functions-f2e6f536.js";import{T as te}from"./TextInput-806b984f.js";import{T as B}from"./TextInputClean-5d304c85.js";import{_ as ae,a as se}from"./icon-key-5b3f7dda.js";const le="/web-wallet-vuejs/assets/edit-icon-026aae3d.svg",re={key:0,class:"popup-outer-lang fixed flex z-50"},ne={class:"modal-popup-box"},oe={key:0},de={key:0,class:"error error_box mb-3"},ce=i("div",{class:"text-center mt-2 text-xs font-semibold"},"Change Name",-1),ie={class:"flex justify-center mt-3"},ue=["disabled"],me={key:1},ge={key:0,class:"error error_box mb-3"},fe=i("div",{class:"text-center mt-2 text-xs font-semibold"},"Add to Address Book",-1),ve={class:"flex justify-center"},pe=["disabled"],be={key:2},ye={key:0,class:"error error_box mb-3"},xe=i("div",{class:"text-center mt-2 text-xs font-semibold"},"Edit Address Book",-1),we={class:"flex justify-center"},he=["disabled"],ke=F({__name:"ChangeNameModal",props:{isOther:Boolean,address:String},setup(s){const n=s,g=x(n.address),{t:a}=P(),y=C(()=>b.value.trim()==""),w=C(()=>u.value.trim()==""),o=x(!1),u=x(""),b=x(""),c=x(""),R=()=>{if(b.value.trim()){const r=l.currentLoggedInWallet.accounts.find(t=>t.name==b.value.trim()),e=l.currentLoggedInWallet.others.find(t=>t.name==b.value.trim());if(!r&&!e){const t=l.currentLoggedInWallet.accounts.findIndex(f=>f.address===n.address);if(t==-1){const f=l.currentLoggedInWallet.others.findIndex(I=>I.address===n.address);l.currentLoggedInWallet.others[f].name=b.value}else l.currentLoggedInWallet.accounts[t].name=b.value;l.wallets.saveMyWalletOnlytoLocalStorage(l.currentLoggedInWallet),c.value="",b.value="",o.value=!1}else r||e?c.value=a("account.nameTaken"):c.value=a("account.failChangeName")}else c.value=a("account.nameEmpty")},h=x(!1);n.isOther&&l.currentLoggedInWallet.contacts.find(e=>e.address==n.address)&&(h.value=!0);const T=()=>{if(u.value==" "){c.value=a("general.nameRequired");return}const r=_.Address.createFromRawAddress(n.address);let e=new K(u.value.trim(),r.plain(),"-none-");const t=l.currentLoggedInWallet,f=t.accounts.findIndex(L=>L.name.toLowerCase()==u.value.toLowerCase().trim()),I=t.contacts!=null?t.contacts.findIndex(L=>_.Address.createFromRawAddress(L.address).plain()==r.plain()):-1,V=t.contacts!=null?t.contacts.findIndex(L=>L.name.toLowerCase()==u.value.toLowerCase().trim()):-1;I>=0?c.value=a("addressBook.addressExist"):V>=0||f>=0?c.value=a("addressBook.nameExist"):(l.currentLoggedInWallet.addAddressBook(e),l.wallets.saveMyWalletOnlytoLocalStorage(l.currentLoggedInWallet),c.value="",u.value="",o.value=!1)},$=x("");(async r=>{try{let e=await j.chainAPI.accountAPI.getAccountInfo(_.Address.createFromRawAddress(r));e.publicKey=="0000000000000000000000000000000000000000000000000000000000000000"?$.value=null:$.value=e.publicKey}catch{$.value=null}})(n.address);const D=()=>{const r=l.currentLoggedInWallet;if(!r)return;const e=l.currentLoggedInWallet.contacts.find(k=>k.address==n.address),t=l.currentLoggedInWallet.contacts.findIndex(k=>k.address==n.address);let f=r.contacts.filter(k=>k.name.toLowerCase()!=e.name.toLowerCase().trim()),I=f.find(k=>k.name.toLowerCase()==u.value.toLowerCase().trim()),V=r.accounts.find(k=>k.name.toLowerCase()==u.value.toLowerCase().trim()),L=f.find(k=>_.Address.createFromRawAddress(k.address).plain()==_.Address.createFromRawAddress(n.address).plain());I!=null||V!=null?c.value=a("addressBook.nameExist"):L!=null?c.value=a("addressBook.addressExist"):(l.currentLoggedInWallet.updateAddressBook(t,{name:u.value.trim(),address:_.Address.createFromRawAddress(n.address).plain(),group:"-none-",publicKey:$.value}),l.wallets.saveMyWalletOnlytoLocalStorage(l.currentLoggedInWallet),c.value="",u.value="",o.value=!1)};return(r,e)=>(d(),m(U,null,[i("img",{src:le,class:"w-4 h-4 text-black cursor-pointer mt-1 ml-1",onClick:e[0]||(e[0]=t=>o.value=!o.value)}),o.value?(d(),m("div",re,[i("div",ne,[s.isOther?s.isOther&&!h.value?(d(),m("div",me,[c.value!=""?(d(),m("div",ge,v(c.value),1)):p("",!0),fe,A(B,{placeholder:r.$t("general.name"),errorMessage:r.$t("general.nameRequired"),modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=t=>u.value=t),icon:"id-card-alt",class:"w-full md:w-96 inline-block mt-3 mr-2"},null,8,["placeholder","errorMessage","modelValue"]),A(B,{placeholder:r.$t("general.address"),modelValue:g.value,"onUpdate:modelValue":e[4]||(e[4]=t=>g.value=t),disabled:!0,icon:"wallet",class:"w-full md:w-96 inline-block mr-2"},null,8,["placeholder","modelValue"]),i("div",ve,[i("button",{onClick:e[5]||(e[5]=t=>T()),class:"blue-btn font-semibold py-2 cursor-pointer text-center w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:w.value},v(r.$t("general.add")),9,pe)])])):(d(),m("div",be,[c.value!=""?(d(),m("div",ye,v(c.value),1)):p("",!0),xe,A(B,{placeholder:r.$t("general.name"),errorMessage:r.$t("general.nameRequired"),modelValue:u.value,"onUpdate:modelValue":e[6]||(e[6]=t=>u.value=t),icon:"id-card-alt",class:"w-full md:w-96 inline-block mt-3 mr-2"},null,8,["placeholder","errorMessage","modelValue"]),A(B,{placeholder:r.$t("general.address"),modelValue:g.value,"onUpdate:modelValue":e[7]||(e[7]=t=>g.value=t),disabled:!0,icon:"wallet",class:"w-full md:w-96 inline-block mr-2"},null,8,["placeholder","modelValue"]),i("div",we,[i("button",{onClick:e[8]||(e[8]=t=>D()),class:"blue-btn font-semibold py-2 cursor-pointer text-center w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:w.value},v(r.$t("general.add")),9,he)])])):(d(),m("div",oe,[c.value!=""?(d(),m("div",de,v(c.value),1)):p("",!0),ce,A(te,{class:"mt-3",placeholder:r.$t("account.namePlaceholder"),errorMessage:r.$t("account.enterAccountName"),modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=t=>b.value=t),icon:"wallet"},null,8,["placeholder","errorMessage","modelValue"]),i("div",ie,[i("button",{onClick:e[2]||(e[2]=t=>R()),class:"blue-btn font-semibold py-2 cursor-pointer text-center w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:y.value},v(r.$t("general.confirm")),9,ue)])])),i("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:e[9]||(e[9]=t=>{o.value=!o.value,c.value=""})},v(r.$t("general.cancel")),1)])])):p("",!0),o.value?(d(),m("div",{key:1,onClick:e[10]||(e[10]=t=>{o.value=!o.value,c.value=""}),class:"fixed inset-0 bg-opacity-60 bg-gray-100 z-20"})):p("",!0)],64))}}),Ie={name:"AccountComponent",props:{address:String},components:{changeNameModal:ke},setup(s){const{t:n}=P(),g=z(),a=C(()=>{if(!l.currentLoggedInWallet)return null;let e=l.currentLoggedInWallet.accounts.find(t=>t.address==s.address)||l.currentLoggedInWallet.others.find(t=>t.address==s.address);return e||null}),y=C(()=>l.currentLoggedInWallet?l.currentLoggedInWallet.others.find(e=>e.address==s.address):null);let w=x(""),o=new q("ThemeStyleConfig");const u=C(()=>{if(s.address)try{return G.createAddress(s.address).pretty()}catch{}return""});o.init(),X().appContext.config.globalProperties.emitter;const c=C(()=>a.value?!!a.value.default:!1),R=C(()=>a.value?!!a.value.getDirectParentMultisig().length:!1),h=x("");h.value=a.value?a.value.name:"";const T=C(()=>l.currentLoggedInWallet?l.currentLoggedInWallet.convertAddressToName(s.address,!0):""),$=x(Z(s.address,75,o.jdenticonConfig)),E=x(!0);return{accountName:h,accountNameDisplay:T,showName:E,svgString:$,isDefault:c,isMultiSig:R,prettyAddress:u,changeName:()=>{if(h.value.trim()){const e=l.currentLoggedInWallet.accounts.find(f=>f.name==h.value.trim()),t=l.currentLoggedInWallet.others.find(f=>f.name==h.value.trim());if(!e&&!t){const f=l.currentLoggedInWallet.accounts.findIndex(I=>I.address===s.address);if(f==-1){const I=l.currentLoggedInWallet.others.findIndex(V=>V.address===s.address);l.currentLoggedInWallet.others[I].name=h.value}else l.currentLoggedInWallet.accounts[f].name=h.value;l.wallets.saveMyWalletOnlytoLocalStorage(l.currentLoggedInWallet),E.value=!0,T.value=h.value,w.value="",w.value=""}else e||t?w.value=n("account.nameTaken"):w.value=n("account.failChangeName")}else w.value=n("account.nameEmpty")},copy:e=>{let t=document.getElementById(e).getAttribute("copyValue"),f=document.getElementById(e).getAttribute("copySubject");ee(t),g.add({severity:"info",detail:f+" "+n("general.copied"),group:"br-custom",life:3e3})},err:w,other_acc:y}}},_e={class:"border-2 py-3 px-6"},Ae={class:"flex"},Ce=["innerHTML"],Le={class:"flex flex-col justify-center ml-4"},$e={key:0,class:"text-red-500 text-xs"},We={class:"flex"},Ne={key:0,class:"font-semibold text-md"},Me={class:"flex gap-2"},Ve=["copyValue","title","copySubject"],Te={class:"flex gap-2"},Se=["title"],Be=i("img",{src:ae,class:"h-4 w-4"},null,-1),Re={class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"},Ee=["title"],je={key:0,src:se,class:"h-4 w-4 mr-1"},Oe={key:1,class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"};function De(s,n,g,a,y,w){const o=O("changeNameModal"),u=O("font-awesome-icon");return d(),m("div",_e,[i("div",Ae,[i("div",{innerHTML:a.svgString},null,8,Ce),i("div",Le,[a.err!=""?(d(),m("div",$e,v(a.err),1)):p("",!0),i("div",We,[a.showName?(d(),m("div",Ne,v(a.accountNameDisplay),1)):p("",!0),a.showName?p("",!0):J((d(),m("input",{key:1,class:"outline-none ml-4 font-semibold text-md","onUpdate:modelValue":n[0]||(n[0]=b=>a.accountName=b)},null,512)),[[Q,a.accountName]]),A(o,{address:g.address,isOther:a.other_acc!=null},null,8,["address","isOther"])]),i("div",Me,[i("div",{id:"address",copyValue:a.prettyAddress,title:a.prettyAddress,copySubject:s.$t("general.address"),class:"truncate md:text-clip w-44 md:w-full text-xs font-semibold mt-1"},v(a.prettyAddress),9,Ve),A(u,{icon:"copy",title:s.$t("general.copy"),onClick:n[1]||(n[1]=b=>a.copy("address")),class:"w-5 h-5 text-blue-link cursor-pointer"},null,8,["title"])]),i("div",Te,[a.isDefault?(d(),m("div",{key:0,class:"px-1 py-0.5 flex mt-0.5 bg-blue-primary rounded-sm",title:s.$t("general.defaultTitle")},[Be,i("p",Re,v(s.$t("general.default")),1)],8,Se)):p("",!0),a.isMultiSig?(d(),m("div",{key:1,class:"px-1 py-0.5 flex mt-0.5 bg-orange-primary rounded-sm",title:s.$t("general.multisigTitle")},[a.isMultiSig?(d(),m("img",je)):p("",!0),a.isMultiSig?(d(),m("p",Oe,v(s.$t("general.multisig")),1)):p("",!0)],8,Ee)):p("",!0)])])])])}const Je=H(Ie,[["render",De]]),Fe={class:"flex text-xs flex-wrap font-semibold border-b-2 menu_title_div"},Pe={name:"AccountTabs"},Qe=F({...Pe,props:{address:String,selected:String},setup(s){const n=s,g=x(!1);Y(()=>{a()});const a=async()=>{if(!j.isReady){setTimeout(a,1e3);return}try{switch((await j.chainAPI.accountAPI.getAccountInfo(_.Address.createFromRawAddress(n.address))).accountType){case _.AccountType.Remote:g.value=!1;break;case _.AccountType.Remote_Unlinked:g.value=!1;break;default:g.value=!0;break}}catch{console.log("Error retrieving account type"),g.value=!1}};return(y,w)=>{const o=O("router-link");return d(),m("div",Fe,[A(o,{class:N([`${s.selected=="details"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-32 text-center py-3 word-break"]),to:{name:"ViewAccountDetails",params:{address:s.address}}},{default:W(()=>[M(v(y.$t("account.accountDetails")),1)]),_:1},8,["class","to"]),g.value?(d(),S(o,{key:0,class:N([`${s.selected=="assets"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-18 py-3 text-center word-break"]),to:{name:"ViewAccountAssets",params:{address:s.address}}},{default:W(()=>[M(v(y.$t("general.asset",2)),1)]),_:1},8,["class","to"])):p("",!0),g.value?(d(),S(o,{key:1,class:N([`${s.selected=="namespaces"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-24 py-3 text-center word-break"]),to:{name:"ViewAccountNamespaces",params:{address:s.address}}},{default:W(()=>[M(v(y.$t("general.namespace",2)),1)]),_:1},8,["class","to"])):p("",!0),g.value?(d(),S(o,{key:2,class:N([`${s.selected=="metadata"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-18 text-center py-3 word-break"]),to:{name:"ViewAccountMetadata",params:{address:s.address}}},{default:W(()=>[M("Metadata")]),_:1},8,["class","to"])):p("",!0),g.value?(d(),S(o,{key:3,class:N([`${s.selected=="multisig"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-18 py-3 text-center word-break"]),to:{name:"ViewMultisigHome",params:{address:s.address}}},{default:W(()=>[M(v(y.$t("general.multisig")),1)]),_:1},8,["class","to"])):p("",!0),A(o,{class:N([`${s.selected=="txn"?"border-b-2  text-blue-primary border-blue-primary":""}`,"w-18 py-3 text-center word-break"]),to:{name:"ViewAccountConfirmedTransactions",params:{address:s.address}}},{default:W(()=>[M(v(y.$t("general.transaction",2)),1)]),_:1},8,["class","to"])])}}});export{Je as A,Qe as _,le as a};
