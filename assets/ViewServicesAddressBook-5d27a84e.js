import{_ as A,r as v,k as g,o as _,b as x,e,t as r,s as m,z as b,f as M,T as z,i as P,w as f,p as O,j as N,u as j,J as G,c as E,H as L,ab as W,l as F,R as U,V as H,B as T,m as B}from"./index-50355987.js";import{S as q}from"./SelectInputPluginClean-286254c7.js";import{a as J,s as Q}from"./column.esm-5fec6136.js";import{t as D}from"./jdenticon-module-4ad48b04.js";import{_ as X}from"./icon-more-options-3f3cfda9.js";import"./multiselect-8e92e010.js";const Y={name:"ConfirmDeleteContactModal",props:["data"],setup(o){const i=P().appContext.config.globalProperties.emitter,t=v(!1),c=v(!1);return{err:t,deleteContact:w=>{const h=f.currentLoggedInWallet.contacts.findIndex(y=>y.address==o.data.address);f.currentLoggedInWallet.removeAddressBook(h),f.wallets.saveMyWalletOnlytoLocalStorage(f.currentLoggedInWallet),c.value=!c.value,i.emit("REFRESH_CONTACT_LIST",!0),i.emit("CLOSE_CONTACTMENU_PANEL")},toggleModal:c,openRemoveModal:()=>{c.value=!c.value},closeRemoveModal:()=>{c.value=!c.value,setTimeout(()=>{i.emit("CLOSE_CONTACTMENU_PANEL")},500)},emitter:i}}},Z=o=>(O("data-v-a948bdbe"),o=o(),N(),o),ee={key:0,class:"popup-outer fixed flex z-50"},te={class:"modal-popup-box"},oe={class:"delete-position"},se={class:"w-104 font-normal"},ne={key:0,class:"error error_box"},le={class:"mb-5"},ae={class:"text-sm text-gray-700"},re={class:"flex justify-between rounded-xl mb-4 text-gray-600"},ie={class:"w-full text-left"},de={class:"text-xs mt-3"},ce={class:"inline-block w-20 font-bold"},ue={class:"inline-block"},me={class:"text-xs mt-3"},_e={class:"inline-block w-20 font-bold"},pe={class:"inline-block mt-2"},ve={class:"text-xs mt-3"},ge=Z(()=>e("div",{class:"inline-block w-20 font-bold"},"Group:",-1)),be={class:"inline-block"},fe={class:"w-full"},he={class:"text-center mt-5"};function xe(o,s,i,t,c,C){const p=g("font-awesome-icon");return _(),x("div",null,[e("div",{class:"block hover:bg-gray-100 transition duration-200 p-2 z-20 cursor-pointer text-red-600",onClick:s[0]||(s[0]=u=>t.openRemoveModal())},r(o.$t("general.remove")),1),m(z,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:b(()=>[t.toggleModal?(_(),x("div",ee,[e("div",te,[e("div",oe,[m(p,{icon:"times",class:"delete-icon-style",onClick:s[1]||(s[1]=u=>t.toggleModal=!t.toggleModal)})]),e("div",se,[t.err!=""?(_(),x("div",ne,r(t.err),1)):M("",!0),e("div",le,[e("span",ae,r(o.$t("addressBook.removeContactFromAB")),1)]),e("div",re,[e("div",ie,[e("div",de,[e("div",ce,r(o.$t("general.name"))+":",1),e("div",ue,r(i.data.name),1)]),e("div",me,[e("div",_e,r(o.$t("general.address"))+":",1),e("div",pe,r(i.data.address),1)]),e("div",ve,[ge,e("div",be,r(i.data.group),1)])])]),e("fieldset",fe,[e("div",he,[e("div",{class:"inline-block font-bold text-blue-primary mr-5 cursor-pointer",onClick:s[2]||(s[2]=(...u)=>t.closeRemoveModal&&t.closeRemoveModal(...u))},r(o.$t("general.cancel")),1),e("button",{type:"submit",class:"bg-red-primary text-white text-xs py-2 px-4 rounded-md",onClick:s[3]||(s[3]=u=>{t.deleteContact(i.data)})},r(o.$t("addressBook.removeContact")),1)])])])])])):M("",!0)]),_:1}),t.toggleModal?(_(),x("div",{key:0,onClick:s[4]||(s[4]=(...u)=>t.closeRemoveModal&&t.closeRemoveModal(...u)),class:"fixed inset-0 bg-opacity-60 bg-gray-100 z-20"})):M("",!0)])}const Ce=A(Y,[["render",xe],["__scopeId","data-v-a948bdbe"]]),ye={components:{SelectInputPluginClean:q,DataTable:J,Column:Q,ConfirmDeleteContactModal:Ce},name:"ContactDataTable",setup(){const{t:o}=j(),i=P().appContext.config.globalProperties.emitter,t=v([]),c=v(""),C=v("border border-gray-200"),p=v({global:{value:null,matchMode:W.CONTAINS}}),u=()=>{C.value="border border-white-100 drop-shadow-md"},w=()=>{C.value="border border-gray-200"},h=v([]);let y=new G("ThemeStyleConfig");y.init();const S=E(()=>{if(!f.currentLoggedInWallet)return[];let n=[];return f.currentLoggedInWallet.contacts!=null&&f.currentLoggedInWallet.contacts.length>0&&(c.value==""?f.currentLoggedInWallet.contacts.forEach((l,d)=>{let $={i:d,name:l.name,address:L.createAddress(l.address).pretty(),group:l.group,publicKey:l.publicKey?l.publicKey:null,svgString:D(l.address,45,y.jdenticonConfig)};n.push($),t.value[d]=!1,h.value.push(l.group)}):f.currentLoggedInWallet.contacts.filter(l=>l.group==c.value).forEach((l,d)=>{let $={i:d,name:l.name,address:L.createAddress(l.address).pretty(),group:l.group,publicKey:l.publicKey?l.publicKey:null,svgString:D(l.address,45,y.jdenticonConfig)};n.push($),t.value[d]=!1,h.value.push(l.group)}),n.sort((l,d)=>l.name>d.name?1:l.name<d.name?-1:0)),n}),a=v();function k(n,l,d){return d.indexOf(n)===l}const V=E(()=>{var n=h.value.filter(k);n=n.filter(d=>d!="-none-"),n.sort();let l=[];return l.push({value:"",label:o("general.showAll")}),n.forEach(d=>{l.push({value:d,label:d})}),l}),K=n=>{I.value=n,t.value[n]=!t.value[n]},I=v("");return i.on("PAGE_CLICK",()=>{for(var n=0;n<t.value.length;)n!=I.value&&(t.value[n]=!1),n++}),i.on("CLOSE_CONTACTMENU_PANEL",()=>{for(var n=0;n<t.value.length;)t.value[n]=!1,n++}),{formattedContacts:S,selectContactGroups:c,contactGroups:V,dt:a,borderColor:C,filters:p,clickInputText:u,blurInputText:w,Helper:L,showMenu:K,isMenuShow:t,hoverOverMenu:n=>{I.value=n},hoverOutMenu:()=>{I.value="e"}}}},we="/web-wallet-vuejs/assets/icon-search_black-8090b4ec.svg",ke="/web-wallet-vuejs/assets/open-book-84b57588.svg";const R=o=>(O("data-v-a81ce37f"),o=o(),N(),o),Me={class:"font-semibold mr-10 mb-4"},Te={class:"xl:flex xl:justify-between pb-3 xl:pb-0"},Ie={class:"md:flex md:items-center md:justify-items-start"},Se=["placeholder"],$e=R(()=>e("img",{src:we,class:"inline-block"},null,-1)),Le={class:"mt-5 lg:mt-5 xl:mt-0"},Ae={class:"mt-2 py-3 gray-line"},Pe={class:"flex items-center"},Ee=["innerHTML"],Be={class:"inline-block"},De={class:"text-blue-primary text-tsm"},Oe={key:0,class:"inline-block ml-5 rounded-md text-blue-primary bg-blue-200 px-2 py-1 text-xxs font-bold"},Ne={class:"mt-1 text-xs md:text-tsm"},Re={class:"mt-1 text-xs md:text-tsm flex items-center bg-green-100 w-24"},Ve=["onMouseover"],Ke=["onClick"],ze={key:0,class:"mt-1 pop-option absolute right-0 w-32 rounded-sm shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10 text-left lg:mr-2",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},je={role:"none",class:"my-2"},Ge=R(()=>e("div",{class:"text-center my-5"},[e("img",{src:ke,class:"inline-block h-20 w-20"})],-1)),We={class:"text-center text-blue-primary mb-2",style:{"font-size":"15px"}},Fe={class:"text-center text-gray-400",style:{"font-size":"12px"}};function Ue(o,s,i,t,c,C){const p=g("SelectInputPluginClean"),u=g("router-link"),w=g("font-awesome-icon"),h=g("Column"),y=g("ConfirmDeleteContactModal"),S=g("DataTable");return _(),x("div",null,[e("div",Me,r(o.$t("general.addressBook")),1),e("div",Te,[e("div",Ie,[m(p,{modelValue:t.selectContactGroups,"onUpdate:modelValue":s[0]||(s[0]=a=>t.selectContactGroups=a),options:t.contactGroups,selectDefault:"",class:"w-full md:w-60 mr-4"},null,8,["modelValue","options"]),e("div",{class:F(["w-full md:w-60 px-3 py-1 flex justify-between mb-3 mt-3 md:mt-0 md:mb-0",t.borderColor])},[U(e("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>t.filters.global.value=a),type:"text",class:"w-28 outline-none text-xs float-left",placeholder:o.$t("general.search"),onClick:s[2]||(s[2]=a=>t.clickInputText()),onBlur:s[3]||(s[3]=a=>t.blurInputText())},null,40,Se),[[H,t.filters.global.value]]),$e],2)]),e("div",Le,[m(u,{to:{name:"ViewServicesAddressBookAddContact"},class:"default-btn transition-all duration-300",style:{padding:"auto 3px"}},{default:b(()=>[T("+ "+r(o.$t("general.new")),1)]),_:1})])]),e("div",Ae,[m(S,{value:t.formattedContacts,ref:"dt",filters:t.filters,"onUpdate:filters":s[5]||(s[5]=a=>t.filters=a),paginator:!0,rows:10,responsiveLayout:"scroll",scrollDirection:"horizontal",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",currentPageReportTemplate:"",globalFilterFields:["name","address"]},{empty:b(()=>[Ge,e("div",We,r(o.$t("general.ntgToShow")),1),e("div",Fe,r(o.$t("addressBook.addressBookTitle")),1)]),default:b(()=>[m(h,{field:"name",headerStyle:"width:95%",headerClass:"hidden"},{body:b(({data:a})=>[e("div",Pe,[e("div",{innerHTML:a.svgString,class:"mr-2 inline-block"},null,8,Ee),e("div",Be,[e("div",De,[T(r(a.name)+" ",1),a.group!="-none-"?(_(),x("span",Oe,r(a.group),1)):M("",!0)]),e("div",Ne,r(a.address),1),e("div",Re,[e("div",null,r(o.$t("general.publicKey")),1),a.publicKey?(_(),B(w,{key:0,icon:"check",class:"w-3 h-3 ml-3 inline-block text-blue-primary"})):(_(),B(w,{key:1,icon:"times",class:"w-3 h-3 ml-3 inline-block text-blue-primary"}))])])])]),_:1}),m(h,{style:{width:"50px"},headerClass:"hidden"},{body:b(({data:a})=>[e("div",{class:"text-txs text-center",onMouseover:k=>t.hoverOverMenu(a.i),onMouseout:s[4]||(s[4]=(...k)=>t.hoverOutMenu&&t.hoverOutMenu(...k))},[e("img",{src:X,class:"w-4 h-4 cursor-pointer inline-block",onClick:k=>t.showMenu(a.i)},null,8,Ke),t.isMenuShow[a.i]?(_(),x("div",ze,[e("div",je,[m(u,{to:{name:"ViewServicesAddressBookEditContact",params:{contactAddress:a.address,contactPublicKey:a.publicKey?"true":"false"}},class:"block hover:bg-gray-100 transition duration-200 p-2 z-20"},{default:b(()=>[T(r(o.$t("general.edit")),1)]),_:2},1032,["to"]),m(y,{data:a,class:"block"},null,8,["data"])])])):M("",!0)],40,Ve)]),_:1})]),_:1},8,["value","filters"])])])}const He=A(ye,[["render",Ue],["__scopeId","data-v-a81ce37f"]]),qe={name:"ViewServicesAddressBook",components:{ContactDataTable:He},setup(){P().appContext.config.globalProperties.emitter.on("REFRESH_CONTACT_LIST",i=>{i&&setTimeout(()=>{refreshList()},1e3)})}},Je={class:"w-9/12 ml-auto mr-auto mt-5"},Qe={class:"flex text-xs font-semibold border-b-2 menu_title_div"},Xe={class:"w-18 text-center border-b-2 pb-3 border-yellow-500"};function Ye(o,s,i,t,c,C){const p=g("router-link"),u=g("ContactDataTable");return _(),x("div",null,[e("div",Je,[e("div",Qe,[e("div",Xe,r(o.$t("general.list")),1),m(p,{to:{name:"ViewServicesAddressBookImport"},class:"w-18 text-center border-b pb-3"},{default:b(()=>[T(r(o.$t("general.import")),1)]),_:1}),m(p,{to:{name:"ViewServicesAddressBookExport"},class:"w-18 text-center border-b pb-3"},{default:b(()=>[T(r(o.$t("general.export")),1)]),_:1})]),m(u,{class:"mt-10"})])])}const rt=A(qe,[["render",Ye]]);export{rt as default};
