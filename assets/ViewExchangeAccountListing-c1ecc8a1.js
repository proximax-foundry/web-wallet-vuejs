import{d as S,c as w,w as k,I as H,r as L,a as N,k as D,o as E,b as T,e as a,t as c,s as i,z as o,B as R,C as d,E as r,A as y,bl as C}from"./index-47dceba4.js";import{s as p,a as M}from"./column.esm-55f5b795.js";import{t as B}from"./jdenticon-module-f990edd3.js";const V={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5 border-2 p-3"},$={class:"border border-blue-300 rounded-md p-3 mt-3 bg-blue-50"},F={class:"flex items-center gap-2"},X=["innerHTML"],O={class:"flex flex-col gap-0.5"},q=a("div",{class:"uppercase text-xxs text-blue-primary"},"Selected Account",-1),z={class:"font-semibold"},W=a("div",{class:"ml-4 my-3"},"SDA Offers",-1),j={class:"flex"},K={class:"mr-1"},U={class:"text-blue-primary"},J={class:"flex"},Q={class:"mr-1"},Y={class:"text-blue-primary"},Z=a("button",{class:"blue-btn py-2 px-3"},"Remove",-1),se=S({__name:"ViewExchangeAccountListing",props:{address:{type:String,required:!0}},setup(h){const u=h,b=[{namespace:"prx.xpx",name:"XPX"},{namespace:"prx.metx",name:"METX"},{namespace:"xarcade.xar",name:"XAR"}],v=t=>{const n=b.find(l=>l.namespace==t);return n?n.name:t},A=w(()=>k.currentLoggedInWallet.convertAddressToName(u.address,!0)),_=new H("ThemeStyleConfig");_.init();const I=w(()=>B(u.address,40,_.jdenticonConfig)),x=L([]),G=async()=>{let t=[];const n=new y.ExchangeSdaHttp(r.nodeFullURL);t=(await C(n.getAccountSdaExchangeOffers(y.Address.createFromRawAddress(u.address)))).sdaOfferBalances;for(let e=0;e<t.length;e++){const m=await r.chainAPI.assetAPI.getMosaicsNames([t[e].mosaicIdGet,t[e].mosaicIdGive]),f=await r.chainAPI.assetAPI.getMosaics([t[e].mosaicIdGet,t[e].mosaicIdGive]);t[e].mosaicGetName=m[0].names.length?m[0].names[0].name:t[e].mosaicIdGet.toHex(),t[e].mosaicGiveName=m[1].names.length?m[1].names[0].name:t[e].mosaicIdGive.toHex(),t[e].mosaicGetDivisibility=f.find(g=>g.mosaicId.toHex()==t[e].mosaicIdGet.toHex()).divisibility,t[e].mosaicGiveDivisibility=f.find(g=>g.mosaicId.toHex()==t[e].mosaicIdGive.toHex()).divisibility}const s=await r.chainAPI.chainAPI.getBlockchainHeight();x.value=t.map(e=>({idPair:`${e.mosaicIdGive.toHex()}/${e.mosaicIdGet.toHex()}`,pair:`${v(e.mosaicGiveName)}/${v(e.mosaicGetName)} `,giveAmount:e.initialMosaicGiveAmount.compact()/Math.pow(10,e.mosaicGiveDivisibility),getAmount:e.initialMosaicGetAmount.compact()/Math.pow(10,e.mosaicGetDivisibility),deadline:new Date(Date.now()+(e.deadline.compact()-s)*15e3).toLocaleString()}))},P=N(r,async t=>{t.isReady&&(await G(),P())},{immediate:!0});return(t,n)=>{const l=D("router-link");return E(),T("div",null,[a("div",V,[a("div",$,[a("div",F,[a("div",{innerHTML:I.value},null,8,X),a("div",O,[q,a("div",z,c(A.value),1)])])]),W,i(d(M),{value:x.value,paginator:!0,rows:10,responsiveLayout:"scroll",scrollDirection:"horizontal",alwaysShowPaginator:!1,paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",class:"w-full"},{empty:o(()=>[R(" No exchanges found. ")]),default:o(()=>[i(d(p),{field:"deadline",header:"Deadline"}),i(d(p),{field:"give",header:"Give"},{body:o(({data:s})=>[a("div",j,[a("div",K,c(s.giveAmount),1),a("div",U,c(s.pair.split("/")[0]),1)])]),_:1}),i(d(p),{field:"get",header:"Get"},{body:o(({data:s})=>[a("div",J,[a("div",Q,c(s.getAmount),1),a("div",Y,c(s.pair.split("/")[1]),1)])]),_:1}),i(d(p),{header:"Action"},{body:o(({data:s})=>[i(l,{to:{name:"ViewExchangeRemove",query:{p:s.idPair,o:h.address}}},{default:o(()=>[Z]),_:2},1032,["to"])]),_:1})]),_:1},8,["value"])])])}}});export{se as default};
