import{_ as I,g as w,I as k,j as A,A as _,D as L,J as v,H,w as u,f as a,e as r,t as o,F as V,K as W,E as M,r as E,o as i,l as C,b as D,s as p,i as N}from"./index-bab83e60.js";import{t as F}from"./jdenticon-module-cac8b1f9.js";const P={name:"ViewNotification",setup(){const l=w([]),y=M().appContext.config.globalProperties.emitter;let t=new k("ThemeStyleConfig");t.init();const x=w(t.jdenticonConfig),{t:m}=A(),g=c=>{let n=new Date,d=new Date(c),e={years:d.getFullYear()-n.getFullYear(),months:d.getMonth()-n.getMonth(),days:d.getDate()-n.getDate(),hours:d.getHours()-n.getHours(),mins:d.getMinutes()-n.getMinutes()};if(e.mins<0&&(e.hours--,e.mins+=60),e.hours<0&&(e.days--,e.hours+=24),e.days<0){e.months--;const b=new Date(n.getTime());b.setDate(32),e.days=32-n.getDate()-b.getDate()+d.getDate()}return e.months<0&&(e.years--,e.months+=12),e.years>0?e.years+" "+m("general.year",e.years.toString()):e.months>0?e.months+" "+m("general.month",e.months.toString()):e.days>0?e.days+" "+m("general.day",e.days.toString()):e.hours>0?e.hours+" "+m("general.hour",e.hours.toString()):e.mins+" "+m("general.minute",e.mins.toString())},s=()=>{if(!_.isReady){setTimeout(s,100);return}l.value=v.getNotificationFromStorage(),v.saveVisitedNotification(),y.emit("VIEW_NOTIFICATION")},h=c=>{if(u.currentLoggedInWallet){u.currentLoggedInWallet.setDefaultAccountByAddress(c);var n=u.currentLoggedInWallet.accounts.find(d=>d.address==c);n||(n=""),y.emit("DEFAULT_ACCOUNT_SWITCHED",n)}},S=()=>new Date().getTime(),T=async()=>{s()};if(_.isReady)T();else{let c=L(_.isReady,n=>{n&&(T(),c())})}return{notifications:l,NotificationUtils:v,updateDefaultAccount:h,Helper:H,themeStyleConfig:x,toSvg:F,walletState:u,currentTimestamp:S,relativeTime:g}}},B={class:"ml-2 mr-2 w-full lg:ml-auto lg:mr-auto mt-5"},j={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},O={class:"flex justify-between text-sm mb-5"},R={class:"text-gray-700"},U={key:0},Y={key:0},J=["innerHTML"],K={class:"text-gray-600 text-xs"},q={class:"mb-1 text-sm text-gray-700 font-bold"},z={key:1},G=["innerHTML"],Q={class:"text-gray-600 text-xs"},X={class:"mb-1 text-sm text-gray-700 font-bold"},Z={key:0},$={key:1},ee={key:1,class:"text-xs text-gray-500"};function te(l,f,y,t,x,m){const g=E("router-link");return i(),a("div",null,[r("div",B,[r("div",j,[r("div",O,[r("div",null,[r("span",R,o(l.$t("general.notification",2)),1)])]),t.notifications!=null&&t.notifications.length>0?(i(),a("div",U,[(i(!0),a(V,null,W(t.notifications,(s,h)=>(i(),a("div",{key:h},[s.type=="Partial"?(i(),a("div",Y,[C(g,{to:{name:"ViewAccountPendingTransactions",params:{address:s.address}},onClick:S=>t.updateDefaultAccount(s.address),class:"flex items-center border border-gray-100 w-full p-5 mb-3 text-tsm hover:bg-blue-50 transition-all duration-300"},{default:D(()=>[r("div",{innerHTML:t.toSvg(s.address,40,t.themeStyleConfig),class:"mr-2"},null,8,J),r("div",K,[r("div",q,o(t.walletState.currentLoggedInWallet?t.walletState.currentLoggedInWallet.convertAddressToNamePretty(s.address,!0):""),1),p(" "+o(s.label)+" "+o(l.$t("notification.pendingSignature",{time:t.relativeTime(s.timestamp)})),1)])]),_:2},1032,["to","onClick"])])):N("",!0),s.type=="Namespace"?(i(),a("div",z,[C(g,{to:{name:"ViewServicesNamespaceExtend",params:{address:t.Helper.createAddress(s.address).pretty(),namespaceId:s.id}},class:"flex items-center border border-gray-100 w-full p-5 mb-3 text-tsm hover:bg-blue-50 transition-all duration-300"},{default:D(()=>[r("div",{innerHTML:t.toSvg(s.address,40,t.themeStyleConfig),class:"mr-2"},null,8,G),r("div",Q,[r("div",X,o(t.walletState.currentLoggedInWallet.convertAddressToNamePretty(s.address,!0)),1),p(" "+o(l.$t("general.namespace"))+" ",1),r("b",null,o(s.label),1),f[0]||(f[0]=p()),t.currentTimestamp()>s.timestamp?(i(),a("span",Z,"has expired")):(i(),a("span",$,o(l.$t("notification.isExpiring",{time:t.relativeTime(s.timestamp)})),1))])]),_:2},1032,["to"])])):N("",!0)]))),128))])):(i(),a("div",ee,o(l.$t("notification.noNotification")),1))])])])}const re=I(P,[["render",te]]);export{re as default};
