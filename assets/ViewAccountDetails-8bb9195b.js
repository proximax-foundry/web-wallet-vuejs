import{_ as B,ae as me,j as R,g as p,c as x,r as V,o,f as i,l as N,b as L,e as a,t as n,i as d,T as te,F as j,E as F,W as K,w as v,n as k,y as ve,H as E,A as h,D as U,a as _,v as Y,K as pe,s as fe,x as Z}from"./index-2c45a7ef.js";import{_ as ge}from"./icon-green-tick-1b766454.js";import{_ as ye}from"./delete-8b454e7f.js";import{_ as ee}from"./proximax-logo-ecfc3767.js";import{c as we,g as _e}from"./functions-edc91899.js";import{A as xe,_ as be}from"./AccountTabs.vue_vue_type_script_setup_true_lang-a7dc29d8.js";import{p as ke}from"./pdfPaperWalletBackground-9b716104.js";import{E as Pe}from"./jspdf.es.min-59d0d4fd.js";import{q as he}from"./qrcode-c87bed80.js";import{_ as ae}from"./PasswordInput.vue_vue_type_script_setup_true_lang-9ce324d9.js";import"./jdenticon-module-eb1215b2.js";import"./TextInput-a8bef4d1.js";import"./TextInputClean-d9b842de.js";import"./icon-key-5b3f7dda.js";const Ie="/web-wallet-vuejs/assets/icon-link-new-white-dd5275bd.svg",Ae={name:"PkPasswordModal",props:{account:me},components:{PasswordInput:ae},setup(c){const{t:s}=R();let y=p(!1),l=p(""),f=p(""),P=p("");const r="^[^ ]{8,}$",m=x(()=>!l.value.match(r)),b=p(c.account),$=F().appContext.config.globalProperties.emitter;return{verifyWalletPwPk:()=>{try{if(K.verifyWalletPassword(v.currentLoggedInWallet.name,k.chainNetworkName,l.value)){const g=K.createPassword(l.value),I=K.decryptPrivateKey(g,b.value.encrypted,b.value.iv);P.value=I.toUpperCase(),f.value="",$.emit("revealPK",!0),$.emit("pkValue",P.value)}else{let g=v.currentLoggedInWallet.name;f.value=s("general.walletPasswordInvalid",{name:g})}}catch{let I=v.currentLoggedInWallet.name;f.value=s("general.walletPasswordInvalid",{name:I})}},toggleModal:y,err:f,walletPasswd:l,disableShow:m}}},We={key:0,class:"popup-outer-lang fixed flex z-50"},Ne={class:"modal-popup-box"},Ce={key:0,class:"error error_box mb-3"},$e={class:"text-center mt-2 text-xs font-semibold"},Ke=["disabled"];function Me(c,s,y,l,f,P){const r=V("font-awesome-icon"),m=V("PasswordInput");return o(),i(j,null,[N(r,{icon:"eye",title:"View Private Key",class:"text-blue-link relative cursor-pointer ml-1",onClick:s[0]||(s[0]=b=>l.toggleModal=!l.toggleModal)}),N(te,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:L(()=>[l.toggleModal?(o(),i("div",We,[a("div",Ne,[l.err!=""?(o(),i("div",Ce,n(l.err),1)):d("",!0),a("div",$e,n(c.$t("general.enterPassword")),1),N(m,{class:"my-3",modelValue:l.walletPasswd,"onUpdate:modelValue":s[1]||(s[1]=b=>l.walletPasswd=b),placeholder:c.$t("general.password"),errorMessage:c.$t("general.passwordRequired")},null,8,["modelValue","placeholder","errorMessage"]),a("div",{onClick:s[2]||(s[2]=b=>l.verifyWalletPwPk()),class:"blue-btn font-semibold py-2 cursor-pointer text-center ml-auto mr-auto w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:l.disableShow},n(c.$t("general.confirm")),9,Ke),a("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:s[3]||(s[3]=b=>{l.toggleModal=!l.toggleModal,l.walletPasswd=""})},n(c.$t("general.cancel")),1)])])):d("",!0)]),_:1}),l.toggleModal?(o(),i("div",{key:0,onClick:s[4]||(s[4]=b=>l.toggleModal=!l.toggleModal),class:"fixed inset-0 bg-opacity-60 bg-gray-100 z-20"})):d("",!0)],64)}const Le=B(Ae,[["render",Me]]),Ve={name:"PdfPasswordModal",components:{PasswordInput:ae},setup(){const{t:c}=R();let s=p(!1),y=p(""),l=p("");const f="^[^ ]{8,}$",P=x(()=>!y.value.match(f)),m=F().appContext.config.globalProperties.emitter;return{verifyWalletPwWalletPaper:()=>{try{if(K.verifyWalletPassword(v.currentLoggedInWallet.name,k.chainNetworkName,y.value))s.value=!s.value,m.emit("unlockWalletPaper",y.value),y.value="";else{let C=v.currentLoggedInWallet.name;l.value=c("general.walletPasswordInvalid",{name:C})}}catch{let $=v.currentLoggedInWallet.name;l.value=c("general.walletPasswordInvalid",{name:$})}},toggleModal:s,err:l,walletPasswd:y,disableDownload:P}}},De={key:0,class:"popup-outer-lang fixed flex z-50"},Te={class:"modal-popup-box"},Se={key:0,class:"error error_box mb-3"},Ee={class:"text-center mt-2 text-xs font-semibold"},Ue=["disabled"];function Be(c,s,y,l,f,P){const r=V("PasswordInput");return o(),i(j,null,[a("div",{class:"blue-btn cursor-pointer py-3 px-4 text-center",onClick:s[0]||(s[0]=m=>l.toggleModal=!l.toggleModal)},n(c.$t("general.downloadPaperWallet")),1),N(te,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:L(()=>[l.toggleModal?(o(),i("div",De,[a("div",Te,[l.err!=""?(o(),i("div",Se,n(l.err),1)):d("",!0),a("div",Ee,n(c.$t("general.enterPassword")),1),N(r,{class:"my-3",modelValue:l.walletPasswd,"onUpdate:modelValue":s[1]||(s[1]=m=>l.walletPasswd=m),placeholder:c.$t("general.password"),errorMessage:c.$t("general.passwordRequired")},null,8,["modelValue","placeholder","errorMessage"]),a("div",{onClick:s[2]||(s[2]=m=>l.verifyWalletPwWalletPaper()),class:"blue-btn font-semibold py-2 cursor-pointer text-center ml-auto mr-auto w-7/12 disabled:opacity-50 disabled:cursor-auto",disabled:l.disableDownload},n(c.$t("general.confirm")),9,Ue),a("div",{class:"text-center cursor-pointer text-xs text-blue-link mt-2 font-semibold",onClick:s[3]||(s[3]=m=>{l.toggleModal=!l.toggleModal,l.walletPasswd=""})},n(c.$t("general.cancel")),1)])])):d("",!0)]),_:1}),l.toggleModal?(o(),i("div",{key:0,onClick:s[4]||(s[4]=m=>l.toggleModal=!l.toggleModal),class:"fixed inset-0 bg-opacity-60 z-20 bg-gray-100"})):d("",!0)],64)}const Re=B(Ve,[["render",Be]]);const je={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},Fe={key:0,class:"mb-8"},ze={class:"border border-green-300 pl-6 pb-3 bg-green-50"},qe={class:"flex items-center gap-3"},He={class:"flex flex-col w-full"},Xe={class:"flex"},Ge={class:"text-xs text-green-500 font-semibold pt-3"},Oe={class:"text-xxs mt-1"},Je={class:"border-2 border-t-0 pb-6 px-6 pt-2"},Qe={class:"flex flex-col sm:flex-row justify-between sm:items-center mt-3"},Ye={class:"flex flex-col"},Ze={class:"text-xxs text-blue-primary font-semibold uppercase"},et={key:0,class:"flex"},tt={class:"text-md font-bold"},at={key:0,class:"text-md font-bold"},lt={class:"text-xs mt-1.5 font-bold"},st={class:"ml-1 font-bold"},ot={class:"text-txs text-gray-400 mt-0.5"},nt={key:0,class:"flex mt-2 sm:mt-0"},rt=["href"],it={class:"text-xs mt-0.5 font-semibold text-white"},ct={class:"text-xxs text-blue-primary mt-2 font-semibold uppercase"},dt={class:"flex"},ut=["copyValue","title","copySubject"],mt={key:0,class:"my-6 gray-line"},vt={key:1},pt={class:"text-xxs text-blue-primary mt-0.5 font-semibold uppercase"},ft={class:"flex"},gt={key:0,class:"break-all font-semibold truncate md:text-clip md:w-auto"},yt={class:"flex"},wt=["copyValue","title"],_t={class:"text-txs mt-2 text-red-400 border px-1.5 py-2 border-red-400 rounded-md"},xt={class:"flex flex-col"},bt={class:"flex items-center"},kt={key:0},Pt=["href"],ht={key:1,class:"text-xs"},It={class:"text-xs mt-1 font-semibold break-all truncate md:text-clip md:w-auto"},At={key:2,class:"text-xs"},Wt={class:"flex flex-col"},Nt={class:"flex items-center"},Ct={key:0,class:"text-xs"},$t=["href"],Kt={class:"cursor-pointer"},Mt={key:0},Lt={class:"flex mt-6 flex-col sm:flex-row w-auto gap-10 sm:gap-0 justify-between"},Vt={__name:"ViewAccountDetails",props:{address:String,accountCreated:Boolean},setup(c){const s=c,{t:y}=R(),l=ve(),f=p(!1);let P=()=>{if(!v.currentLoggedInWallet)return!1;let e=v.currentLoggedInWallet.others.find(t=>t.address==s.address);return e?e.type=="DELEGATE":!1};const r=x(()=>{if(!v.currentLoggedInWallet)return null;let e=v.currentLoggedInWallet.accounts.find(t=>t.address==s.address)||v.currentLoggedInWallet.others.find(t=>t.address==s.address);return e||null}),m=x(()=>v.currentLoggedInWallet?v.currentLoggedInWallet.others.find(e=>e.address==s.address):null);s.accountCreated&&(f.value=!0);const C=F().appContext.config.globalProperties.emitter,$=x(()=>{if(s.address)try{return E.createAddress(s.address).pretty()}catch{}return""}),D=p(!1),g=p(!1),I=p(""),z=e=>{let t=document.getElementById(e).getAttribute("copyValue"),u=document.getElementById(e).getAttribute("copySubject");we(t),l.add({severity:"info",detail:u+" "+y("general.copied"),group:"br-custom",life:3e3})},q=p(""),H=()=>{if(!r.value)return;let e=r.value.balance;_e(e).then(t=>{q.value=E.toCurrencyFormat(t,h.nativeToken.divisibility)})},X=x(()=>h.nativeToken.label),le=x(()=>h.nativeToken.divisibility),G=x(()=>r.value?E.toCurrencyFormat(r.value.balance,le.value):"0"),T=x(()=>{let e=G.value.split(".");return e[1]!=null?{left:e[0],right:e[1]}:{left:e[0],right:null}});h.nativeToken.label==="XPX"&&(H(),U(G,()=>{H()}));const se=(e,t=2,u=0)=>{const A=he(10,"H");return A.addData(e),A.make(),A.createDataURL(t,u)},oe=e=>{const t=new Pe({unit:"px"});t.addImage(ke,"JPEG",120,60,205,132);const u=K.createPassword(e);let W=K.decryptPrivateKey(u,r.value.encrypted,r.value.iv).toUpperCase();t.addImage(se(W,1,0),151.5,105),t.setFontSize(8),t.setTextColor("#000000"),t.text($.value,146,164,{maxWidth:132}),t.save("Your_Paper_Wallet")},S=x(()=>h.networkType),ne=x(()=>S.value==168&&k.chainNetworkName=="Sirius Testnet 1"?"https://bctestnetfaucet.xpxsirius.io/#/":S.value==168&&k.chainNetworkName=="Sirius Testnet 2"?"https://bctestnet2faucet.xpxsirius.io/#/":""),w=p(""),M=p([]),re=async()=>{if(r.value){const e=await h.chainAPI.accountAPI.getAccountsInfo([Z.Address.createFromRawAddress(r.value.address)]);w.value=e[0].linkedAccountKey}},ie=async()=>{(await h.chainAPI.accountAPI.getAccountsNames([Z.Address.createFromRawAddress(r.value.address)]))[0].names.forEach(t=>{M.value.push(t.name)})},ce=e=>k.currentNetworkProfile?k.currentNetworkProfile.chainExplorer.url+"/"+k.currentNetworkProfile.chainExplorer.namespaceInfoRoute+"/"+e:"",de=e=>k.currentNetworkProfile?k.currentNetworkProfile.chainExplorer.url+"/"+k.currentNetworkProfile.chainExplorer.publicKeyRoute+"/"+e:"",ue=e=>{if(!v.currentLoggedInWallet)return"";let t=v.currentLoggedInWallet.accounts.find(u=>u.publicKey==e)||v.currentLoggedInWallet.others.find(u=>u.publicKey==e);return t?t.address:void 0},O=async()=>{r.value&&(await re(),ie())},J=()=>{if(h.isReady){if(!r.value)return;O()}else{let e=U(h,t=>{t.isReady&&(O(),e())})}};return J(),U(r,()=>{J()}),C.on("revealPK",e=>{g.value=e}),C.on("pkValue",e=>{I.value=e}),C.on("unlockWalletPaper",e=>{oe(e)}),(e,t)=>{const u=V("font-awesome-icon"),A=V("router-link");return o(),i("div",null,[a("div",je,[N(xe,{address:c.address,class:"mb-6"},null,8,["address"]),f.value?(o(),i("div",Fe,[a("div",ze,[a("div",qe,[t[4]||(t[4]=a("img",{src:ge,class:"h-10 w-10 pt-3 mr-2"},null,-1)),a("div",He,[a("div",Xe,[a("div",Ge,n(e.$t("general.congratz")),1),a("img",{onClick:t[0]||(t[0]=W=>f.value=!1),src:ye,class:"w-5 ml-auto mr-1 cursor-pointer"})]),a("div",Oe,n(e.$t("account.accountCreated"))+n(e.$t("general.pkWarning")),1)])])])])):d("",!0),N(be,{address:c.address,selected:"details"},null,8,["address"]),a("div",Je,[a("div",Qe,[a("div",Ye,[a("div",Ze,n(e.$t("general.currentBalance")),1),T.value?(o(),i("div",et,[a("div",tt,n(T.value.left),1),T.value.right!=null?(o(),i("div",at,".")):d("",!0),a("div",lt,n(T.value.right),1),a("div",st,n(X.value),1),t[5]||(t[5]=a("img",{src:ee,class:"h-5 w-5 mt-0.5"},null,-1))])):d("",!0),a("div",ot,n(e.$t("general.estimateUSD"))+" "+n(q.value),1)]),S.value==168?(o(),i("div",nt,[a("a",{href:ne.value,target:"_blank",class:"flex bg-navy-primary rounded-md py-0.5 px-3 cursor-pointer"},[t[6]||(t[6]=a("img",{src:ee,class:"h-5 w-5 cursor-pointer"},null,-1)),a("div",it,n(e.$t("general.topUp",{tokenName:X.value})),1),t[7]||(t[7]=a("img",{src:Ie,class:"h-5 w-5 cursor-pointer"},null,-1))],8,rt)])):d("",!0)]),t[10]||(t[10]=a("div",{class:"my-6 gray-line"},null,-1)),a("div",ct,n(e.$t("general.publicKey")),1),a("div",dt,[a("div",{id:"public",class:"text-xs font-semibold mt-1 break-all truncate md:text-clip md:w-auto",copyValue:r.value?r.value.publicKey:"",title:r.value?r.value.publicKey:"",copySubject:e.$t("general.publicKey")},n(r.value?r.value.publicKey:""),9,ut),N(u,{icon:"copy",onClick:t[1]||(t[1]=W=>z("public")),title:e.$t("general.copy"),class:"ml-2 mt-0.5 pb-1 w-5 h-5 text-blue-link cursor-pointer"},null,8,["title"])]),m.value?d("",!0):(o(),i("div",mt)),m.value?d("",!0):(o(),i("div",vt,[a("div",pt,n(e.$t("general.privateKey")),1),a("div",ft,[!D.value&&!g.value?(o(),i("div",gt," ****************************************************************")):d("",!0),!D.value&&!g.value?(o(),_(Le,{key:1,account:r.value},null,8,["account"])):d("",!0)]),a("div",yt,[g.value?(o(),i("div",{key:0,id:"private",class:"text-xs mt-1 font-semibold break-all truncate md:text-clip md:w-auto",type:"text",copyValue:I.value,title:I.value,copySubject:"Private Key"},n(I.value),9,wt)):d("",!0),g.value?(o(),_(u,{key:1,title:"Copy",icon:"copy",onClick:t[2]||(t[2]=W=>z("private")),class:"ml-2 pb-1 w-5 h-5 text-blue-link cursor-pointer"})):d("",!0),g.value?(o(),_(u,{key:2,icon:"eye-slash",title:"Hide Private Key",class:"text-blue-link relative cursor-pointer ml-1",onClick:t[3]||(t[3]=W=>{D.value=!1,g.value=!1})})):d("",!0)]),a("div",_t,n(e.$t("general.pkWarning")),1)])),t[11]||(t[11]=a("div",{class:"my-6 gray-line"},null,-1)),a("div",xt,[t[8]||(t[8]=a("div",{class:"text-xxs text-blue-primary font-semibold uppercase"},"Linked Account",-1)),a("div",bt,[m.value?(o(),i("div",kt,[w.value!=""&&w.value!="0".repeat(64)?(o(),i("a",{key:0,href:de(w.value),target:"_blank",class:"text-xs mt-1 font-semibold break-all text-black truncate md:text-clip md:w-auto"},n(w.value),9,Pt)):(o(),i("div",ht,"No Linked Account"))])):w.value!=""&&w.value!="0".repeat(64)?(o(),_(A,{key:1,class:"truncate",to:{name:"ViewAccountDetails",params:{address:ue(w.value)}}},{default:L(()=>[a("div",It,n(w.value),1)]),_:1},8,["to"])):(o(),i("div",At,"No Linked Account")),Y(P)()?d("",!0):(o(),_(A,{key:3,to:{name:"ViewAccountDelegate",params:{address:c.address}}},{default:L(()=>[w.value!=""&&w.value!="0".repeat(64)?(o(),_(u,{key:0,title:"Unlink account",icon:"unlink",class:"ml-2 w-4 h-4 text-blue-primary cursor-pointer"})):(o(),_(u,{key:1,title:"Delegate account",icon:"link",class:"ml-2 w-4 h-4 text-blue-primary cursor-pointer"}))]),_:1},8,["to"]))])]),t[12]||(t[12]=a("div",{class:"my-6 gray-line"},null,-1)),a("div",Wt,[t[9]||(t[9]=a("div",{class:"text-xxs text-blue-primary font-semibold uppercase"},"Alias",-1)),a("div",Nt,[M.value.length?d("",!0):(o(),i("div",Ct," No Alias ")),(o(!0),i(j,null,pe(M.value,(W,Q)=>(o(),i("div",{key:Q,class:"text-xs mt-1 font-semibold break-all"},[a("a",{href:ce(W),target:"_new"},[a("div",Kt,[fe(n(W),1),Q!=M.value.length-1?(o(),i("span",Mt,",")):d("",!0)])],8,$t)]))),128)),Y(P)()?d("",!0):(o(),_(A,{key:1,to:{name:"ViewAccountAliasAddressToNamespace",params:{address:c.address}}},{default:L(()=>[M.value.length?(o(),_(u,{key:1,title:"Unlink namespace",icon:"unlink",class:"ml-2 w-4 h-4 mt-0.5 text-blue-primary cursor-pointer"})):(o(),_(u,{key:0,title:"Alias to namespace",icon:"link",class:"ml-2 w-4 h-4 mt-0.5 text-blue-primary cursor-pointer"}))]),_:1},8,["to"]))])]),a("div",Lt,[m.value?d("",!0):(o(),_(Re,{key:0}))])])])])}}},Ot=B(Vt,[["__scopeId","data-v-8cf80fb3"]]);export{Ot as default};
