import{d as le,L as Be,r as T,c as S,i as Y,o as A,b as $,m as V,v as te,e as l,t as k,f as B,y as ie,z as t,B as n,a as H,j as ye,_ as be,x as he,F as xe,M as Ue,O as Le,P as ue,Q as Re,W as ee,w as K,n as X,R as Z,T as Ke,h as _e,u as De,H as D,A as qe,l as Oe,S as We,g as ze,k as me,U as je}from"./index-733b9285.js";import{_ as He,a as Xe,b as Ze,c as Ge}from"./TxnSummary.vue_vue_type_script_setup_true_lang-54687fe2.js";import{_ as Qe}from"./SelectAccountAndContact.vue_vue_type_style_index_0_lang-06c0905e.js";import{_ as Je}from"./proximax-logo-ecfc3767.js";import{_ as Ye}from"./PasswordInput.vue_vue_type_script_setup_true_lang-2a6d511d.js";import{_ as et}from"./icon-red-x-a5511f99.js";import{_ as tt}from"./icon-green-tick-1b766454.js";import{T as de}from"./transactionState-f1b2b56c.js";import"./jdenticon-module-d6bd4e96.js";const at={key:0},lt={class:"flex justify-between"},st={class:"flex flex-col ml-2 text-left"},nt=l("div",{class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}}," Selected Asset",-1),ot={class:"mt-1 text-tsm font-bold"},rt={class:"mt-1 text-tsm font-bold"},it={class:"account-item"},ut={class:"flex justify-between"},ct={class:"mt-1 text-tsm font-bold"},dt={class:"mt-1 text-tsm font-bold"},vt=le({__name:"SelectInputAsset",props:{index:{type:Number,required:!0},assetOptions:{type:Object,required:!0},selectedAssets:{type:Object,required:!1}},emits:["select-asset","update:modelValue"],setup(r){const v=r,d=[{namespace:"prx.xpx",name:"XPX"},{namespace:"prx.metx",name:"METX"},{namespace:"xarcade.xar",name:"XAR"}],m=i=>{const s=d.find(b=>b.namespace==i);return s?s.name:i},{assetOptions:o,selectedAssets:f,index:p}=Be(v),I=T(!1),L=S(()=>{const i=new Set(f.value.map(s=>s.id));return o.value.filter(s=>!i.has(s.id))}),F=async i=>{if(I.value)return;I.value=!0;const{first:s,last:b}=i,g=[];for(let y=s;y<b;y++)o.value[y].hasUpdated||g.push(new t.MosaicId(o.value[y].id));if(!g.length){I.value=!1;return}const M=await n.chainAPI.assetAPI.getMosaicsNames(g),x=await n.chainAPI.assetAPI.getMosaics(g);let h=0,P=0;const E=new Map;M.forEach((y,c)=>{E.set(y.mosaicId.toHex(),c)}),x.sort((y,c)=>{const U=E.get(y.mosaicId.toHex()),q=E.get(c.mosaicId.toHex());return U-q});for(let y=s;y<b;y++){if(!M[h])continue;const c=o.value.find(U=>U.id==M[h].mosaicId.toHex());c&&(c.namespace=M[h].names.length?M[h].names[0].name:"",c.balance=c.balance/Math.pow(10,x[P].divisibility),c.divisibility=x[P].divisibility,c.hasUpdated=!0,h++,P++)}I.value=!1},u=i=>{if(i==null){f.value.splice(p.value,1);return}f.value[p.value].balance=i.balance,f.value[p.value].id=i.id,f.value[p.value].namespace=i.namespace,f.value[p.value].divisibility=i.divisibility,f.value[p.value].amount="0"};return(i,s)=>{const b=Y("Dropdown");return A(),$("div",null,[V(b,{showClear:!0,modelValue:ie(f)[ie(p)],"onUpdate:modelValue":s[0]||(s[0]=g=>ie(f)[ie(p)]=g),style:{width:"100%"},options:L.value,filter:!0,filterFields:["id","namespace"],emptyFilterMessage:" ",placeholder:"Select Asset",virtualScrollerOptions:{lazy:!0,onLazyLoad:F,showLoader:!0,loading:I.value,delay:0,itemSize:38},onChange:s[1]||(s[1]=g=>{var M;u(g.value),i.$emit("update:modelValue",(M=g.value)==null?void 0:M.value)})},{value:te(g=>[g.value.id?(A(),$("div",at,[l("div",lt,[l("div",st,[nt,l("div",ot,k(m(g.value.namespace==""?g.value.id:g.value.namespace)),1)]),l("div",rt,"Balance: "+k(g.value.balance),1)])])):B("",!0)]),option:te(g=>[l("div",it,[l("div",ut,[l("div",ct,k(m(g.option.namespace==""?g.option.id:g.option.namespace)),1),l("div",dt,"Balance: "+k(g.option.balance),1)])])]),_:1},8,["modelValue","options","virtualScrollerOptions"])])}}}),mt={class:"border border-gray-200 px-2 py-1 rounded-md"},pt={class:"flex justify-between"},ft={class:"flex flex-col"},gt={class:"uppercase font-light text-gray-500 text-txs text-left mb-2"},yt={class:"flex w-full"},bt={key:0,src:Je,class:"h-5 w-5 mt-0.5"},ht=["value","placeholder"],xt=["disabled"],pe=16,_t=le({__name:"TransferInputClean",props:{modelValue:{type:String,required:!0},decimal:{type:Number,required:!0},placeholder:{type:String,required:!0},toolTip:{type:String,required:!1},disabled:{type:Boolean,required:!1},showError:{type:Boolean,required:!1},logo:{type:Boolean,required:!1},balance:{type:Number,required:!1}},emits:["update:modelValue","show-error","clickedMaxAvailable"],setup(r,{emit:v}){const d=r,m=v,o=T(d.modelValue),f=T(0),p=(u,i)=>{const s=u.key;return s>="0"&&s<="9"||s==="."||s==="Backspace"||s==="Delete"||s==="ArrowLeft"||s==="ArrowRight"?(s==="."&&i.includes(".")&&u.preventDefault(),!0):(u.preventDefault(),!1)},I=u=>{isNaN(parseFloat(u))?o.value="0":o.value=u},L=u=>{u.target.value=F.value},F=S(()=>Intl.NumberFormat("en-US",{maximumFractionDigits:f.value}).format(parseFloat(o.value)));return H(o,(u,i)=>{if(u.includes(".")){const[s,b]=u.split(".");f.value=pe-s.length,b&&b.length>f.value&&(o.value=i)}else u.length>pe&&(o.value=i);m("update:modelValue",o.value)}),(u,i)=>(A(),$("div",{class:ye(r.disabled?"opacity-50":"")},[l("div",mt,[l("div",pt,[l("div",ft,[l("div",gt,k(r.placeholder),1),l("div",yt,[r.logo?(A(),$("img",bt)):B("",!0),l("input",{value:F.value,class:"supply_input",placeholder:r.placeholder,onInput:i[0]||(i[0]=s=>I(parseFloat(s.target.value.replace(/,/g,"")).toString())),onKeypress:i[1]||(i[1]=s=>p(s,s.target.value)),onBlur:i[2]||(i[2]=s=>L(s))},null,40,ht)])]),r.logo?(A(),$("button",{key:0,disabled:r.disabled==!0,class:"w-24 cursor-pointer focus:outline-none text-blue-primary text-xs font-bold",onClick:i[3]||(i[3]=s=>u.$emit("clickedMaxAvailable",!0))},k(u.$t("swap.maxAmount")),9,xt)):B("",!0)])])],2))}});const fe=be(_t,[["__scopeId","data-v-fe791cb9"]]),wt={class:"rounded-md bg-white flex border mt-3"},At=["value","placeholder"],kt=l("div",{class:"w-1 flex-none"},null,-1),It={class:"text-gray-800"},Mt=le({__name:"TextAreaInput",props:{modelValue:{type:String,required:!1},currentBytes:{type:Number,required:!0},limit:{type:Number,required:!0},placeholder:{type:String,required:!0}},emits:["update:modelValue"],setup(r){return(v,d)=>(A(),$(xe,null,[l("div",wt,[l("textarea",{value:r.modelValue,onInput:d[0]||(d[0]=m=>v.$emit("update:modelValue",m.target.value)),rows:"2",class:"w-full text-gray-500 px-2 py-1 outline-none bg-white text-xs",placeholder:r.placeholder.toUpperCase()},null,40,At),kt]),l("div",{class:ye(["float-right mt-1 text-tsm",r.currentBytes>r.limit?"text-red-500":"text-gray-800"])},[he(k(r.currentBytes)+" ",1),l("span",It,"/"+k(r.limit),1)],2)],64))}}),Tt={class:"border border-gray-200 px-2 py-2 rounded-md w-full"},$t={class:"flex gap-2"},Pt={class:"flex flex-col w-full"},Ft={class:"uppercase text-gray-500 font-light text-xxs text-left"},Vt={key:0,class:"flex flex-col ml-auto justify-center mt-1"},Ct=l("img",{src:et,class:"h-5 w-5 mr-auto ml-auto"},null,-1),Nt={class:"text-xxs text-red-400 font-bold uppercase"},St={key:1,class:"flex flex-col ml-auto justify-center mt-1"},Et=l("img",{src:tt,class:"h-5 w-5 mr-auto ml-auto"},null,-1),Bt={class:"text-xxs text-green-400 font-bold uppercase"},ge=le({__name:"FieldValidationInput",props:Ue({placeholder:{},showError:{}},{modelValue:{}}),emits:["update:modelValue"],setup(r){const v=Le(r,"modelValue");return(d,m)=>(A(),$("div",Tt,[l("div",$t,[l("div",Pt,[l("div",Ft,k(d.placeholder),1),ue(l("input",{type:"text","onUpdate:modelValue":m[0]||(m[0]=o=>v.value=o),class:"w-full font-semibold text-tsm outline-none mt-1"},null,512),[[Re,v.value]])]),d.showError&&v.value.length!=0?(A(),$("div",Vt,[Ct,l("div",Nt,k(d.$t("general.invalid")),1)])):d.showError?B("",!0):(A(),$("div",St,[Et,l("div",Bt,k(d.$t("general.valid")),1)]))])]))}});const we="0".repeat(64),Ae=t.PublicAccount.createFromPublicKey(we,n.networkType).address.plain(),ke=(r,v)=>{let d=[];return parseInt(r)>0&&d.push(new t.Mosaic(new t.MosaicId(n.nativeToken.assetId),t.UInt64.fromUint(Number(r)))),v.length>0&&v.forEach(m=>{parseInt(m.amount)>0&&d.push(new t.Mosaic(new t.MosaicId(m.id),t.UInt64.fromUint(Number(m.amount))))}),d};class ae{}ae.createTransaction=async(r,v,d,m,o,f,p,I,L)=>{if(!ee.verifyWalletPassword(K.currentLoggedInWallet.name,X.chainNetworkName,o))return!1;const u=X.currentNetworkProfile.generationHash;let i=n.networkType,s=parseFloat(v)*Math.pow(10,n.nativeToken.divisibility),b=[];s>0&&b.push(new t.Mosaic(new t.MosaicId(n.nativeToken.assetId),t.UInt64.fromUint(Number(s)))),m.length>0&&m.forEach(c=>{c.amount>0&&b.push(new t.Mosaic(new t.MosaicId(c.id),t.UInt64.fromUint(Number(c.amount*Math.pow(10,c.divisibility)))))});let g=n.buildTxn,M,x;if(!p)M=K.currentLoggedInWallet.accounts.find(c=>c.address===f);else{M=K.currentLoggedInWallet.accounts.find(U=>U.address===f);const c=await n.chainAPI.accountAPI.getAccountInfo(t.Address.createFromRawAddress(p));x=t.PublicAccount.createFromPublicKey(c.publicKey,i)}let h=ee.decryptPrivateKey(new t.Password(o),M.encrypted,M.iv),P;if(I&&d.length>0)try{const c=await n.chainAPI.accountAPI.getAccountInfo(t.Address.createFromRawAddress(r));P=t.EncryptedMessage.create(d,c.publicAccount,h)}catch{P=t.EncryptedMessage.create(d,t.PublicAccount.createFromPublicKey(L,n.networkType),h)}else P=t.PlainMessage.create(d);let E=g.transferBuilder().recipient(t.Address.createFromRawAddress(r)).mosaics(b).message(P).build();const y=t.Account.createFromPrivateKey(h,i,1);if(p){let c=K.currentLoggedInWallet.accounts.find(Q=>Q.address==f),U=ee.decryptPrivateKey(new t.Password(o),c.encrypted,c.iv),q=t.Account.createFromPrivateKey(U,i,1);const se=[E.toAggregateV1(x)],O=await n.chainAPI.nodeAPI.getNodeTime(),ne=g.aggregateBonded(se,new t.UInt64(O.sendTimeStamp)),W=q.preV2Sign(ne,u),G=Z.lockFundTx(W),oe=q.preV2Sign(G,u);Z.announceLF_AND_addAutoAnnounceABT(oe,W)}else{const c=y.preV2Sign(E,u);Z.announceTransaction(c)}return!0};ae.calculateAggregateFee=(r,v,d,m)=>{let o=n.buildTxn,f=ke(v,d),I=[o.transferBuilder().recipient(t.Address.createFromRawAddress(Ae)).mosaics(f).message(m&&r.length>0?t.EncryptedMessage.create(r,t.PublicAccount.createFromPublicKey("0".repeat(64),n.networkType),"0".repeat(64)):t.PlainMessage.create(r)).build().toAggregateV1(t.PublicAccount.createFromPublicKey(we,n.networkType))];return o.aggregateBondedBuilder().innerTransactions(I).build().maxFee.compact()/Math.pow(10,n.nativeToken.divisibility)};ae.calculateFee=(r,v,d,m)=>{let o=n.buildTxn,f=ke(v,d);return o.transferBuilder().recipient(t.Address.createFromRawAddress(Ae)).mosaics(f).message(m&&r.length>0?t.EncryptedMessage.create(r,t.PublicAccount.createFromPublicKey("0".repeat(64),n.networkType),"0".repeat(64)):t.PlainMessage.create(r)).build().maxFee.compact()/Math.pow(10,n.nativeToken.divisibility)};const Ut={name:"ConfirmSendModal",props:["toggleModal"],setup(){const v=_e().appContext.config.globalProperties.emitter;return{closeConfirmModal:()=>{v.emit("CLOSE_CONFIRM_SEND_MODAL",!1)},proceedSend:()=>{v.emit("CONFIRM_PROCEED_SEND",!0)}}}},Lt={key:0,class:"popup-outer fixed flex z-50"},Rt={class:"modal-popup-box"},Kt={class:"delete-position"},Dt={class:"w-92"},qt={class:"text-center"},Ot={class:"mt-3"};function Wt(r,v,d,m,o,f){const p=Y("font-awesome-icon");return A(),$("div",null,[V(Ke,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:te(()=>[d.toggleModal?(A(),$("div",Lt,[l("div",Rt,[l("div",Kt,[V(p,{icon:"times",class:"delete-icon-style",onClick:v[0]||(v[0]=I=>{m.closeConfirmModal()})})]),l("div",Dt,[l("div",qt,k(r.$t("transfer.proceedWithZero")),1),l("div",Ot,[l("div",{onClick:v[1]||(v[1]=I=>m.proceedSend()),class:"blue-btn py-2 font-semibold cursor-pointer text-center ml-auto mr-auto w-7/12"},k(r.$t("general.confirm")),1),l("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:v[2]||(v[2]=I=>m.closeConfirmModal())},k(r.$t("general.cancel")),1)])])])])):B("",!0)]),_:1}),d.toggleModal?(A(),$("div",{key:0,onClick:v[3]||(v[3]=I=>{m.closeConfirmModal()}),class:"fixed inset-0 bg-opacity-90 bg-gray-100 z-20"})):B("",!0)])}const zt=be(Ut,[["render",Wt]]),jt={class:"w-10/12 ml-auto mr-auto mt-5"},Ht={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},Xt={class:"xl:col-span-2 p-12"},Zt={key:0,class:"mb-3 rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},Gt={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},Qt={class:"inline-block text-xs"},Jt={class:"text-sm font-semibold"},Yt={class:"flex gap-1 mt-3 items-center"},ea={key:1,class:"mt-3"},ta=l("div",{class:"text-blue-primary font-semibold uppercase mt-3 text-xxs"},"Transfer to",-1),aa={class:"flex mt-1 gap-1"},la={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},sa={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},na={key:3,class:"h-3"},oa={key:4,class:"mb-5"},ra={for:"encryptedMsg",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},ia={key:5},ua={class:"text-xs font-semibold my-3"},ca={class:"bg-navy-primary py-6 px-6 xl:col-span-1"},da=["disabled"],va={class:"text-center"},ma="^[0-9A-Za-z]{40}$",pa="^[0-9A-Za-z-]{46}$",fa="^[^ ]{8,}$",Ia=le({__name:"ViewTransfer",setup(r){const v=_e(),{t:d}=De(),m=v.appContext.config.globalProperties.emitter,o=T(null),f=T(null),p=T(null),I=T(!1),L=T(!1),F=T(""),u=T(!1),i=T(!1),s=T(""),b=T(!0),g=T(!0),M=T([]),x=T([]),h=T("0"),P=T(0),E=T(""),y=T(""),c=T(0),U=S(()=>{let e=!0;return u.value?s.value.match(fa)?e=!0:e=!1:e=!0,!(e&&!b.value&&!se.value&&O.value<=ne.value&&q.value)}),q=S(()=>!(i.value&&u.value&&O.value>0&&g.value));H(x,e=>{for(let a=0;a<e.length;a++)isNaN(parseFloat(e[a].amount))&&(e[a].amount="0")},{deep:!0}),H(h,e=>{isNaN(parseFloat(e))&&(h.value="0")});const se=S(()=>p.value?o.value?parseFloat(h.value)>P.value||!x.value.every(e=>parseFloat(e.amount)<=e.balance)?!0:Q.value>c.value:Q.value>P.value||!x.value.every(e=>parseFloat(e.amount)<=e.balance):!1),O=S(()=>y.value.length==0?0:u.value?Z.getFakeEncryptedMessageSize(y.value):Z.getPlainMessageSize(y.value)),ne=S(()=>{var e;return((e=X)==null?void 0:e.currentNetworkProfileConfig.maxMessageSize)-1}),W=S(()=>{var e;return D.convertToExact((e=X)==null?void 0:e.currentNetworkProfileConfig.lockedFundsPerAggregate,n.nativeToken.divisibility)}),G=S(()=>X.currentNetworkProfile?D.convertToExact(Z.getLockFundFee(),n.nativeToken.divisibility):0),oe=S(()=>{if(!p.value)return 0;let e=n.nativeToken.divisibility;return o.value?D.convertNumberMinimumFormat(P.value,e):D.convertNumberMinimumFormat(P.value-z.value,e)}),Q=S(()=>{let e=n.nativeToken.divisibility;return o.value?e==0?Math.trunc(z.value+G.value+W.value):Math.round((z.value+G.value+W.value)*Math.pow(10,e))/Math.pow(10,e):e==0?Math.trunc(parseFloat(h.value.replace(/,/g,""))+z.value):Math.round((parseFloat(h.value.replace(/,/g,""))+z.value)*Math.pow(10,e))/Math.pow(10,e)}),z=S(()=>{const e=x.value.map(a=>({id:a.id,amount:a.amount}));return e.push({id:n.nativeToken.assetId,amount:h.value}),o.value?ae.calculateAggregateFee(y.value,h.value,e,u.value):p.value?ae.calculateFee(y.value,h.value,e,u.value):0}),Ie=()=>{h.value=oe.value.toString(),h.value=oe.value.toString()},Me=()=>{p.value=null,s.value="",F.value="",u.value=!1,y.value="",h.value="0",m.emit("CLEAR_SELECT",0),x.value=[],o.value=null,E.value=""},Te=qe(),$e=Oe(),Pe=()=>u.value?ee.verifyWalletPassword(K.currentLoggedInWallet.name,X.chainNetworkName,s.value)?!0:(Te.add({severity:"error",summary:"Error",detail:"Password is incorrect",group:"br-custom",life:1e3}),!1):!0,Fe=async()=>{if(Pe()){let a=parseFloat(h.value)*Math.pow(10,n.nativeToken.divisibility),_=[],C=x.value.map(N=>({id:N.id,amount:parseFloat(N.amount),divisibility:N.divisibility}));a>0&&_.push(new t.Mosaic(new t.MosaicId(n.nativeToken.assetId),t.UInt64.fromUint(Number(a)))),C.length>0&&C.forEach(N=>{N.amount>0&&_.push(new t.Mosaic(new t.MosaicId(N.id),t.UInt64.fromUint(Number(N.amount*Math.pow(10,N.divisibility)))))});let j=n.buildTxn,J=K.currentLoggedInWallet.accounts.find(N=>N.address===p.value),w;if(u.value&&y.value.length>0){let N=ee.decryptPrivateKey(new t.Password(s.value),J.encrypted,J.iv);try{const re=await n.chainAPI.accountAPI.getAccountInfo(t.Address.createFromRawAddress(F.value));w=t.EncryptedMessage.create(y.value,re.publicAccount,N)}catch{w=t.EncryptedMessage.create(y.value,t.PublicAccount.createFromPublicKey(E.value,n.networkType),N)}}else w=t.PlainMessage.create(y.value);let R=j.transferBuilder().recipient(t.Address.createFromRawAddress(F.value)).mosaics(_).message(w).build().serialize();de.unsignedTransactionPayload=R,de.selectedAddress=p.value,de.selectedMultisigAddress=o.value,$e.push({name:"ViewConfirmTransaction"}),Me()}else return},Ve=async()=>{if(n.chainAPI)try{const e=await n.chainAPI.accountAPI.getAccountInfo(t.Address.createFromRawAddress(p.value)),a=e.mosaics.findIndex(_=>_.id.toHex()==n.nativeToken.assetId);a!=-1?(c.value=e.mosaics[a].amount.compact()/Math.pow(10,n.nativeToken.divisibility),e.mosaics.splice(a,1)):c.value=0}catch{c.value=0}},ce=async e=>{if(n.chainAPI&&e){M.value=[];try{const a=await n.chainAPI.accountAPI.getAccountInfo(t.Address.createFromRawAddress(e)),_=a.mosaics.findIndex(C=>C.id.toHex()==n.nativeToken.assetId);_!=-1?(P.value=a.mosaics[_].amount.compact()/Math.pow(10,n.nativeToken.divisibility),a.mosaics.splice(_,1)):P.value=0;for(let C=0;C<a.mosaics.length;C++){const j=a.mosaics[C];M.value.push({id:j.id.toHex(),balance:j.amount.compact(),divisibility:0,namespace:"",hasUpdated:!1})}}catch{M.value=[],P.value=0}}};H(p,async(e,a)=>{M.value=[],x.value=[],e==null?(P.value=0,f.value=null,o.value=null):e!=a&&(f.value=null,o.value=null,await ce(e))}),H(o,async(e,a)=>{M.value=[],x.value=[],e==null&&(c.value=0,f.value=null,o.value=null,await ce(p.value)),e!=a&&(await Ve(),await ce(e))}),m.on("select-account",e=>{p.value=e}),m.on("select-multisig-account",e=>{f.value=e.label,o.value=e.value}),m.on("CLOSE_MULTISIG",()=>{f.value=null,o.value=null});const Ce=e=>{I.value=!1,F.value=e.data},Ne=S(()=>{const e=K.currentLoggedInWallet;if(!e)return[];const a=[...e.accounts,...e.others];return e.contacts.length?[{key:"0",label:d("general.ownerAcc"),selectable:!1,children:a.map((_,C)=>({key:"0-"+C.toString(),label:_.name,data:t.Address.createFromRawAddress(_.address).pretty(),selectable:!0}))},{key:"1",label:d("general.contact"),selectable:!1,children:e.contacts.map((_,C)=>({key:"1-"+C.toString(),label:_.name,data:t.Address.createFromRawAddress(_.address).pretty(),selectable:!0}))}]:[{key:"0",label:d("general.ownerAcc"),selectable:!1,children:a.map((_,C)=>({key:"0-"+C.toString(),label:_.name,data:t.Address.createFromRawAddress(_.address).pretty(),selectable:!0}))}]});H([F,b],e=>{if(e[0].match(pa)||e[0].match(ma)){if(!e[1]){Se();return}ve()}else b.value=!0});const Se=()=>{n.chainAPI.accountAPI.getAccountInfo(t.Address.createFromRawAddress(F.value)).then(e=>{i.value=e.publicKey=="0".repeat(64)}).catch(e=>i.value=!0)},Ee=()=>{try{t.PublicAccount.createFromPublicKey(E.value,n.networkType).address.plain()==t.Address.createFromRawAddress(F.value).plain()&&(g.value=!1)}catch{g.value=!0}},ve=()=>{if(K.currentLoggedInWallet)try{let e=D.createAddress(F.value);D.checkAddressNetwork(e,n.networkType)?b.value=!1:b.value=!0}catch{try{let a=D.createNamespaceId(F.value);n.chainAPI.namespaceAPI.getLinkedAddress(a).then(_=>{F.value=_.plain(),b.value=!1}).catch(_=>{b.value=!0})}catch{b.value=!0}}};return(e,a)=>{const _=Y("Sidebar"),C=Y("font-awesome-icon"),j=Y("router-link"),J=We("debounce");return A(),$("div",null,[V(_,{visible:I.value,"onUpdate:visible":a[0]||(a[0]=w=>I.value=w),baseZIndex:1e4,position:"full"},{default:te(()=>[V(Qe,{contacts:Ne.value,onNodeSelect:Ce},null,8,["contacts"])]),_:1},8,["visible"]),V(zt,{toggleModal:L.value},null,8,["toggleModal"]),l("div",jt,[l("div",Ht,[l("div",Xt,[se.value?(A(),$("div",Zt,[l("div",Gt,[V(C,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),l("div",Qt,k(e.$t("general.insufficientBalance")),1)])):B("",!0),l("div",Jt,k(e.$t("transfer.newTransfer")),1),l("div",Yt,[V(He,{type:"transfer"}),V(Xe,{"selected-address":p.value},null,8,["selected-address"])]),o.value?(A(),$("div",ea,[V(Ze,{"select-default-address":o.value,"select-default-name":f.value,type:"transfer"},null,8,["select-default-address","select-default-name"])])):B("",!0),ta,l("div",aa,[ue(V(ge,{placeholder:e.$t("transfer.transferPlaceholder"),modelValue:F.value,"onUpdate:modelValue":a[1]||(a[1]=w=>F.value=w),showError:b.value},null,8,["placeholder","modelValue","showError"]),[[J,ve,"1000"]]),l("div",{onClick:a[2]||(a[2]=w=>I.value=!I.value),class:"border rounded-md cursor-pointer flex flex-col justify-center p-1.5"},[V(C,{icon:"id-card-alt",class:"text-blue-primary ml-auto mr-auto"}),l("div",la,k(e.$t("general.select")),1),l("div",sa,k(e.$t("general.contact")),1)])]),(A(!0),$(xe,null,ze(x.value,(w,R)=>{var N;return A(),$("div",{key:R},[V(vt,{class:"mt-3","asset-options":M.value,index:R,"selected-assets":x.value},null,8,["asset-options","index","selected-assets"]),((N=x.value[R].id)==null?void 0:N.length)==16?(A(),me(fe,{key:0,class:"mt-3",modelValue:x.value[R].amount,"onUpdate:modelValue":re=>x.value[R].amount=re,placeholder:e.$t("transfer.assetAmount"),type:"text",decimal:x.value[R].divisibility},null,8,["modelValue","onUpdate:modelValue","placeholder","decimal"])):B("",!0)])}),128)),x.value.length!=M.value.length?(A(),$("button",{key:2,class:"my-2 font-semibold text-xs text-blue-primary outline-none focus:outline-none disabled:opacity-50",onClick:a[3]||(a[3]=w=>x.value.push({id:null,balance:0,amount:"0",namespace:"",divisibility:0}))}," + "+k(e.$t("transfer.addAssets")),1)):(A(),$("div",na)),V(fe,{modelValue:h.value,"onUpdate:modelValue":a[4]||(a[4]=w=>h.value=w),balance:P.value,placeholder:e.$t("transfer.transferAmount"),logo:!0,type:"text",onClickedMaxAvailable:a[5]||(a[5]=w=>Ie()),decimal:6},null,8,["modelValue","balance","placeholder"]),V(Mt,{modelValue:y.value,"onUpdate:modelValue":a[6]||(a[6]=w=>y.value=w),limit:ne.value,placeholder:e.$t("general.message"),"current-bytes":O.value},null,8,["modelValue","limit","placeholder","current-bytes"]),b.value?B("",!0):(A(),$("div",oa,[ue(l("input",{id:"encryptedMsg",type:"checkbox","onUpdate:modelValue":a[7]||(a[7]=w=>u.value=w)},null,512),[[je,u.value]]),l("label",ra,k(e.$t("transfer.enableEncryption")),1)])),u.value?(A(),$("div",ia,[l("div",ua,k(e.$t("general.enterPasswordContinue")),1),V(Ye,{placeholder:e.$t("general.enterPassword"),errorMessage:e.$t("general.passwordRequired"),modelValue:s.value,"onUpdate:modelValue":a[8]||(a[8]=w=>s.value=w),icon:"lock",class:"mt-5 mb-3"},null,8,["placeholder","errorMessage","modelValue"])])):B("",!0),!b.value&&i.value&&u.value&&O.value>0?ue((A(),me(ge,{key:6,placeholder:"Recipient Public Key",modelValue:E.value,"onUpdate:modelValue":a[9]||(a[9]=w=>E.value=w),showError:g.value},null,8,["modelValue","showError"])),[[J,Ee,"1000"]]):B("",!0)]),l("div",ca,[V(Ge,{"signer-native-token-balance":c.value,"native-amount":h.value,"native-token-balance":P.value,"lock-fund":W.value,"lock-fund-tx-fee":G.value,"selected-multisig-address":o.value,"txn-fee":z.value,"total-fee":Q.value,"selected-assets":x.value},null,8,["signer-native-token-balance","native-amount","native-token-balance","lock-fund","lock-fund-tx-fee","selected-multisig-address","txn-fee","total-fee","selected-assets"]),l("button",{type:"submit",class:"w-full blue-btn px-3 py-3 disabled:opacity-50 disabled:cursor-auto",disabled:U.value,onClick:a[10]||(a[10]=w=>Fe())},k(e.$t("general.transfer")),9,da),l("div",va,[V(j,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white underline"},{default:te(()=>[he(k(e.$t("general.cancel")),1)]),_:1})])])])])])}}});export{Ia as default};
