import{_ as G,D as R,u as Z,r as k,c as A,w as o,E as B,H as U,I as ee,g as z,q as te,k as E,o as m,b as g,e as t,t as y,s as $,f as C,F as N,i as O,B as le,a0 as se,p as q,j as J,d as ne,a as Q,l as oe,a1 as ae,z as re,S as ie,a2 as ce,m as ue}from"./index-8ffe16f8.js";import"./index-e6a7cd77.js";import{c as de}from"./functions-00a97599.js";import{t as fe}from"./jdenticon-module-4b08f1ac.js";import{_ as me}from"./proximax-logo-ecfc3767.js";import{_ as ge,a as ve}from"./icon-key-5b3f7dda.js";import{_ as pe}from"./icon-multisig-2a7c5e5f.js";import{_ as be}from"./icon-green-tick-1b766454.js";import{_ as X}from"./icon-arrow-down-83b4f5a8.js";import{T as _e}from"./TextInputClean-36bb88e0.js";const ye="/web-wallet-vuejs/assets/icon-default-account-drop-down-03c40c1e.svg";const he={name:"AccountTile",props:["account"],setup(r){const u=R(),{t:p}=Z(),n=k(""),h=k(!1),x=A(()=>{if(o.currentLoggedInWallet){let f=[];return o.currentLoggedInWallet.labels.forEach(b=>{let W=!1;b.addresses.includes(r.account.address)&&(W=!0),f.push({name:b.name,isLabeled:W})}),f}else return[]}),w=async f=>{if(!o.currentLoggedInWallet)return;let b=o.currentLoggedInWallet.labels.find(P=>P.name==f),W=le.Address.createFromRawAddress(r.account.address).plain();if(!b)return;let F=b.addresses.findIndex(P=>P==W);if(F>=0){b.removeAddress(F),o.wallets.saveMyWalletOnlytoLocalStorage(o.currentLoggedInWallet),u.add({severity:"info",summary:"Label",detail:c.value+" is removed as "+f,group:"br-custom",life:5e3});return}b.addresses.push(W),o.wallets.saveMyWalletOnlytoLocalStorage(o.currentLoggedInWallet),u.add({severity:"info",summary:"Label",detail:c.value+" is added as "+f,group:"br-custom",life:5e3})},c=A(()=>{const f=o.currentLoggedInWallet.contacts.find(b=>b.address==r.account.address);return f?f.name:r.account.name}),_=A(()=>{let f=!1,b=o.currentLoggedInWallet.accounts.find(W=>W.name==r.account.name);return b&&b.getDirectParentMultisig().length==0&&(f=!0),f}),L=A(()=>B.nativeToken.label),s=A(()=>B.nativeToken.divisibility),d=A(()=>U.toCurrencyFormat(r.account.balance,s.value)),e=A(()=>{let f=d.value.split(".");return f[1]!=null?{left:f[0],right:f[1]}:{left:f[0],right:null}});let a=new ee("ThemeStyleConfig");a.init();const l=k(fe(r.account.address,50,a.jdenticonConfig)),v=z().appContext.config.globalProperties.emitter,I=f=>{let b=document.getElementById(f).getAttribute("copyValue"),W=document.getElementById(f).getAttribute("copySubject");de(b),u.add({severity:"info",detail:W+" "+p("general.copied"),group:"br-custom",life:3e3})},M=A(()=>!!r.account.getDirectParentMultisig().length),S=f=>{const b=o.currentLoggedInWallet.others.find(W=>W.address==f);return b!=null&&b.type=="MULTISIG"&&(n.value=b.address),b},K=f=>U.createAddress(f).pretty(),T=k(!1),D=k(!1);v.on("PAGE_CLICK",()=>{!T.value&&!h.value||!T.value&&h.value&&(h.value=!1)});const j=te(),H=()=>{if(S(r.account.address)==null)o.currentLoggedInWallet.setDefaultAccountByName(r.account.name);else return};return{currentNativeTokenName:L,splitBalance:e,svgString:l,otherAccount:S,prettyAddress:K,copy:I,isMultiSig:M,accountName:c,displayDefaultAccountMenu:h,multisig_add:n,isHover:T,isHoverCopy:D,isNormalAcc:_,labels:x,updateLabel:w,navigate:()=>{T.value||D.value||(r.account.type?j.push({name:"ViewAccountDetails",params:{address:r.account.address}}):(H(),se(r.account.address),j.push({name:"ViewAccountDetails",params:{address:r.account.address}})))}}}},V=r=>(q("data-v-45923937"),r=r(),J(),r),xe={class:"flex gap-2"},we=["innerHTML"],Le={class:"flex flex-col"},Ie={class:"text-blue-primary font-bold text-xs mb-0.5"},Ae={class:"flex justify-around"},ke=["id","title","copyValue","copySubject"],Ce={class:"flex"},We={class:"text-xs font-bold"},Me={key:0,class:"text-xs font-bold"},Se={class:"text-xxs mt-0.5"},$e={class:"ml-1 text-xs font-bold"},Te=V(()=>t("img",{src:me,class:"h-4 w-4"},null,-1)),Ke={class:"flex gap-2"},De=["title"],Ee=V(()=>t("img",{src:ge,class:"h-4 w-4"},null,-1)),je={class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"},Ne=["title"],Ve=V(()=>t("img",{src:pe,class:"h-3 w-3 mr-1"},null,-1)),Be={class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"},Oe=["title"],He=V(()=>t("img",{src:ve,class:"h-4 w-4 mr-1"},null,-1)),Pe={class:"font-semibold text-white text-xxs pt-px cursor-default uppercase"},Ge={class:"absolute flex invisible 2xl:visible pt-4 explicitLeft"},ze={key:0,class:"text-xs mr-3 border bg-gray-300 rounded-md p-1"},Fe={class:"ml-auto mt-auto mb-auto"},Ue={key:0,class:"mt-1 pop-option absolute right-0 w-32 rounded-sm shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10 text-left lg:mr-2",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},Qe={role:"none",class:"my-2"},Re=V(()=>t("div",{class:"p-2 z-20 text-xs text-gray-400"},"Change Labels",-1)),qe=["onClick"],Je={class:"text-xs"},Xe={key:0,src:be,class:"h-4 w-4"};function Ye(r,u,p,n,h,x){const w=E("font-awesome-icon");return m(),g("div",{class:"border rounded-lg border-gray-200 p-3 filter shadow-lg cursor-pointer",onClick:u[8]||(u[8]=c=>n.navigate())},[t("div",xe,[t("div",{class:"mt-auto mb-auto",innerHTML:n.svgString},null,8,we),t("div",Le,[t("div",Ie,y(n.accountName),1),t("div",Ae,[t("div",{id:p.account.address,title:n.prettyAddress(p.account.address),class:"text-xs font-bold mt-0.5 mr-2 truncate md:text-clip w-44 md:w-full",copyValue:n.prettyAddress(p.account.address),copySubject:r.$t("general.address")},y(n.prettyAddress(p.account.address)),9,ke),$(w,{onMouseover:u[0]||(u[0]=c=>n.isHoverCopy=!0),onMouseout:u[1]||(u[1]=c=>n.isHoverCopy=!1),icon:"copy",onClick:u[2]||(u[2]=c=>n.copy(p.account.address)),class:"w-5 h-5 text-blue-primary cursor-pointer inline-block"})]),t("div",Ce,[t("div",We,y(n.splitBalance.left),1),n.splitBalance.right!=null?(m(),g("div",Me,".")):C("v-if",!0),t("div",Se,y(n.splitBalance.right),1),t("div",$e,y(n.currentNativeTokenName),1),Te]),t("div",Ke,[p.account.default?(m(),g("div",{key:0,class:"px-1 py-0.5 flex items-center bg-blue-primary rounded-sm",title:r.$t("general.defaultTitle")},[Ee,t("p",je,y(r.$t("general.default")),1)],8,De)):C("v-if",!0),n.isMultiSig?(m(),g("div",{key:1,class:"px-1 py-0.5 flex items-center bg-green-500 rounded-sm",title:r.$t("general.multisigTitle")},[Ve,t("p",Be,y(r.$t("general.multisig")),1)],8,Ne)):C("v-if",!0),n.isMultiSig&&!n.otherAccount(p.account.address)?(m(),g("div",{key:2,class:"px-1 py-0.5 flex items-center bg-purple-500 rounded-sm",title:r.$t("general.ownerTitle")},[He,t("p",Pe,y(r.$t("general.owner")),1)],8,Oe)):C("v-if",!0)])]),t("div",Ge,[(m(!0),g(N,null,O(n.labels,(c,_)=>(m(),g("div",{key:_},[c.isLabeled?(m(),g("div",ze,y(c.name),1)):C("v-if",!0)]))),128))]),t("div",Fe,[t("img",{src:ye,class:"h-6 w-6 cursor-pointer",onMouseover:u[3]||(u[3]=c=>n.isHover=!0),onMouseout:u[4]||(u[4]=c=>n.isHover=!1),onClick:u[5]||(u[5]=c=>n.displayDefaultAccountMenu=!0)},null,32),t("div",{class:"relative",onMouseover:u[6]||(u[6]=c=>n.isHover=!0),onMouseout:u[7]||(u[7]=c=>n.isHover=!1)},[n.displayDefaultAccountMenu?(m(),g("div",Ue,[t("div",Qe,[C(` <router-link  :to="{ name: 'ViewAccountDetails', params: { address: account.address }}" @click="displayDefaultAccountMenu = false" class="block hover:bg-gray-100 transition duration-200 p-2 z-20 text-xs">{{$t('general.details')}}</router-link> `),C(' <hr class="solid"> '),Re,(m(!0),g(N,null,O(n.labels,(c,_)=>(m(),g("div",{key:_},[t("div",{onClick:L=>n.updateLabel(c.name),class:"flex justify-between p-2 cursor-pointer"},[t("div",Je,y(c.name),1),c.isLabeled?(m(),g("img",Xe)):C("v-if",!0)],8,qe)]))),128))])])):C("v-if",!0)],32)])])])}const Ze=G(he,[["render",Ye],["__scopeId","data-v-45923937"],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/components/AccountTile.vue"]]),et={class:"flex flex-col"},tt=t("div",null,"Labels",-1),lt={key:0,src:X,class:"w-3 ml-2 h-3",style:{"margin-top":"0.12em"}},st={key:1,src:X,class:"w-3 ml-2 h-3",style:{"margin-top":"0.12em",transform:"rotate(180deg)"}},nt={key:0,class:"relative"},ot={class:"absolute border-t-0 w-52 border bg-white"},at={class:"flex flex-col max-h-44 overflow-auto"},rt=["onClick"],it={class:"text-xs mt-0.5"},ct=t("div",null,"Create Label",-1),ut={key:0,class:"popup-outer fixed flex z-50"},dt={class:"modal-popup-box"},ft={key:0,class:"error error_box mb-3"},mt=t("div",{class:"text-center my-2 text-xs font-semibold"},"Create Label",-1),gt={name:"LabelComponent"},vt=ne({...gt,setup(r){const p=z().appContext.config.globalProperties.emitter,n=R(),h=k(!1),x=k(!1),w=k(!1),c=k(""),_=k(""),L=k([]),s=A(()=>o.currentLoggedInWallet?o.currentLoggedInWallet.labels:[]);for(let a=0;a<s.value.length;a++)L.value.push(!1);Q(s,(a,l)=>{L.value=[];for(let i=0;i<a.length;i++)L.value.push(!1)},{deep:!0}),Q(L,a=>{let l=[];a.length==s.value.length&&(a.forEach((i,v)=>{i&&l.push(s.value[v].name)}),p.emit("filterByLabel",l))},{deep:!0});const d=async()=>{if(!o.currentLoggedInWallet)return;if(_.value=_.value.trim(),_.value==""){c.value="Label name cannot be empty.";return}if(o.currentLoggedInWallet.labels.find(i=>i.name==_.value)){c.value="Label is already existed in wallet.";return}let l=new ae(_.value,[]);o.currentLoggedInWallet.addLabel(l),await o.wallets.saveMyWalletOnlytoLocalStorage(o.currentLoggedInWallet),c.value="",_.value="",n.add({severity:"info",summary:"Label",detail:"New Label is Created",group:"br-custom",life:5e3}),x.value=!1},e=async a=>{o.currentLoggedInWallet&&(o.currentLoggedInWallet.removeLabel(a),await o.wallets.saveMyWalletOnlytoLocalStorage(o.currentLoggedInWallet),n.add({severity:"info",summary:"Label",detail:"Label is removed",group:"br-custom",life:5e3}),w.value=!1)};return(a,l)=>{const i=E("font-awesome-icon");return m(),g(N,null,[t("div",et,[t("div",{onClick:l[0]||(l[0]=v=>h.value=!h.value),class:"border p-2 cursor-pointer w-52 bg-white text-xs justify-between flex"},[tt,h.value?(m(),g("img",st)):(m(),g("img",lt))]),h.value?(m(),g("div",nt,[t("div",ot,[t("div",at,[(m(!0),g(N,null,O(s.value,(v,I)=>(m(),g("div",{key:I},[t("div",{onClick:M=>w.value?"":L.value[I]=!L.value[I],class:oe(`${L.value[I]?"bg-blue-300 flex cursor-pointer p-2 hover:bg-blue-300 ":"flex cursor-pointer p-2 hover:bg-blue-300 "}`)},[$(i,{icon:"tag",class:"w-4 h-4 mr-3 thin"}),t("div",it,y(v.name),1),$(i,{icon:"trash",onMouseover:l[1]||(l[1]=M=>w.value=!0),onMouseout:l[2]||(l[2]=M=>w.value=!1),onClick:M=>e(I),title:"Remove label",class:"ml-auto w-3 h-3 cursor-pointer mt-0.5"},null,8,["onClick"])],10,rt)]))),128)),t("div",{onClick:l[3]||(l[3]=v=>{x.value=!0,h.value=!1}),class:"text-xs cursor-pointer flex gap-3 p-2 hover:bg-blue-300"},[$(i,{icon:"plus",class:"w-3 h-3 mr-1"}),ct])])])])):C("v-if",!0)]),x.value?(m(),g("div",ut,[t("div",dt,[t("div",null,[c.value!=""?(m(),g("div",ft,y(c.value),1)):C("v-if",!0),mt,$(_e,{placeholder:"Label Name",modelValue:_.value,"onUpdate:modelValue":l[4]||(l[4]=v=>_.value=v)},null,8,["modelValue"]),t("div",{onClick:l[5]||(l[5]=v=>d()),class:"blue-btn font-semibold py-2 cursor-pointer text-center ml-auto mr-auto w-7/12 disabled:opacity-50 disabled:cursor-auto"},y(a.$t("general.confirm")),1),t("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:l[6]||(l[6]=v=>x.value=!1)},y(a.$t("general.cancel")),1)])])])):C("v-if",!0)],64)}}}),pt=G(vt,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/components/LabelComponent.vue"]]);const bt={name:"ViewAccountDisplayAll",components:{AccountTile:Ze,LabelComponent:pt},setup(){const u=z().appContext.config.globalProperties.emitter,p=A(()=>{if(!o.currentLoggedInWallet)return[];let s=o.currentLoggedInWallet.accounts.map(e=>({name:e.name,balance:e.balance,address:e.address,publicKey:e.publicKey,isMultisig:!!e.getDirectParentMultisig().length,multisigInfo:e.multisigInfo})),d=o.currentLoggedInWallet.others.filter(e=>e.type==="MULTISIG").map(e=>({name:e.name,balance:e.balance,address:e.address,publicKey:e.publicKey,isMultisig:!0,multisigInfo:e.multisigInfo}));return s.concat(d)}),n=s=>{let d=p.value,e=!1;return e=d.find(l=>l.publicKey==s).multisigInfo.filter(l=>l.level==-1).length>0,!!e},h=s=>{let d=o.currentLoggedInWallet.accounts.find(i=>i.publicKey==s)?o.currentLoggedInWallet.accounts.find(i=>i.publicKey==s):o.currentLoggedInWallet.others.find(i=>i.publicKey==s),e=d.getDirectParentMultisig(),a=d.getDirectParentMultisig().length,l=!1;for(let i=0;i<a;i++)if(p.value.find(v=>v.publicKey==e[i])!=null){l=!0;break}else continue;return l};A(()=>{if(!o.currentLoggedInWallet)return[];let s={normalAcc:[],multisig:[]};return p.value.forEach(e=>{e.multisigInfo.find(a=>a.level==-1)==null&&e.multisigInfo.find(a=>a.level==1)==null&&s.normalAcc.push(e.publicKey)}),o.currentLoggedInWallet.others.filter(e=>e.type=="DELEGATE").forEach(e=>{s.normalAcc.push(e.publicKey)}),p.value.forEach(e=>{if(n(e.publicKey)&&e.isMultisig&&!h(e.publicKey)){let a=e.multisigInfo.filter(i=>i.level==-1),l=[];a.forEach(i=>{let v=i.getMultisigAccountsAddress(B.networkType),I=[];v.forEach(M=>{let S=p.value.find(K=>K.address==M);S!=null&&I.push(S.publicKey)}),l.push({publicKey:i.publicKey,cosignOf:I})}),s.multisig.push({publicKey:e.publicKey,cosignOf:l})}else if(n(e.publicKey)&&!e.isMultisig){let a=e.multisigInfo.filter(i=>i.level==-1),l=[];a.forEach(i=>{let v=i.getMultisigAccountsAddress(B.networkType),I=[];v.forEach(M=>{let S=p.value.find(T=>T.address==M),K=[];S!=null&&(S.multisigInfo.filter(D=>D.level==-1).forEach(D=>{let j=p.value.find(H=>H.publicKey==D.publicKey);j!=null&&K.push(j.publicKey)}),I.push({publicKey:S.publicKey,cosignOf:K}))}),l.push({publicKey:i.publicKey,cosignOf:I})}),s.multisig.push({publicKey:e.publicKey,cosignOf:l})}}),s},{deep:!0});const x=k([]),w=A(()=>{if(o.currentLoggedInWallet)if(o.currentLoggedInWallet.others){const s=o.currentLoggedInWallet.accounts.concat(o.currentLoggedInWallet.others);let d=[];return x.value.forEach(e=>{let a=o.currentLoggedInWallet.labels.find(l=>l.name==e);a&&a.addresses.forEach(l=>{let i=s.find(v=>v.address==l);d.push(i)})}),d=Array.from(new Set(d)),x.value.length?d:s}else{const s=o.currentLoggedInWallet.accounts;let d=[];return x.value.forEach(e=>{let a=o.currentLoggedInWallet.labels.find(l=>l.name==e);a&&a.addresses.forEach(l=>{let i=s.find(v=>v.address==l);d.push(i)})}),d=Array.from(new Set(d)),x.value.length?d:s}else return null});u.on("filterByLabel",s=>{x.value=s});const c=k(""),_=A(()=>{const s=c.value.toLowerCase();return c.value==""?L(w.value):w.value.filter(d=>d.name.toLowerCase().includes(s)||d.address.toLowerCase().includes(s.replace(/-/g,"")))});function L(s){if(s!==null){var d=s.reduce((e,a)=>(e.some(l=>l.address===a.address&&l.name===a.name)||e.push(a),e),[]);return d}}return{accounts:w,filterQuery:c,filteredAccounts:_}}},Y=r=>(q("data-v-447b24e0"),r=r(),J(),r),_t={class:"my-4 w-11/12 ml-auto mr-auto flex flex-col sm:flex-row justify-between"},yt=Y(()=>t("div",{class:"absolute invisible 2xl:visible text-gray-500 mt-1 explicitLeft"},"Labels",-1)),ht={class:"mt-3 sm:mt-0 text-center w-44 text-white bg-blue-primary rounded-md font-semibold text-xs p-2"},xt={class:"mt-2 py-3"},wt={class:"w-11/12 ml-auto mr-auto flex flex-col gap-3"},Lt={class:"flex items-center"},It=["placeholder"],At=Y(()=>t("div",{class:"mb-36"},null,-1));function kt(r,u,p,n,h,x){const w=E("LabelComponent"),c=E("router-link"),_=E("font-awesome-icon"),L=E("AccountTile");return m(),g("div",null,[t("div",_t,[$(w),yt,$(c,{to:{name:"ViewAccountCreateSelectType"}},{default:re(()=>[t("div",ht,"+ "+y(r.$t("general.createNewAcc")),1)]),_:1})]),t("div",xt,[t("div",wt,[t("div",Lt,[$(_,{icon:"search",class:"text-blue-link mr-1"}),ie(t("input",{"onUpdate:modelValue":u[0]||(u[0]=s=>n.filterQuery=s),type:"text",class:"py-2 px-2 outline-none text-xs text-black",placeholder:r.$t("general.search")},null,8,It),[[ce,n.filterQuery]])]),(m(!0),g(N,null,O(n.filteredAccounts,(s,d)=>(m(),ue(L,{key:d,account:s},null,8,["account"]))),128))])]),At])}const Vt=G(bt,[["render",kt],["__scopeId","data-v-447b24e0"],["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/views/ViewAccountDisplayAll.vue"]]);export{Vt as default};
