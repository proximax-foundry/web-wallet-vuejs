import{d as le,L as Be,r as T,c as E,i as Y,o as x,b as M,m as F,v as ae,e as s,t as w,f as B,y as ce,z as t,B as n,M as ge,O as ee,j as ye,_ as be,x as he,F as _e,P as Ue,Q as Le,R as Re,W as te,w as R,n as H,S as X,T as Ke,h as xe,u as Oe,a as J,H as K,A as qe,l as De,g as We,k as ve,U as ze}from"./index-7c20dbaf.js";import{_ as je,a as He,b as Xe,c as Ze}from"./TxnSummary.vue_vue_type_script_setup_true_lang-002407fc.js";import{_ as Ge}from"./SelectAccountAndContact.vue_vue_type_style_index_0_lang-51431b2b.js";import{_ as Qe}from"./proximax-logo-ecfc3767.js";import{_ as Je}from"./PasswordInput.vue_vue_type_script_setup_true_lang-a41ffb22.js";import{_ as Ye}from"./icon-red-x-a5511f99.js";import{_ as et}from"./icon-green-tick-1b766454.js";import{T as de}from"./transactionState-3edbeb43.js";import"./jdenticon-module-c8a60762.js";const tt={key:0},at={class:"flex justify-between"},st={class:"flex flex-col ml-2 text-left"},lt=s("div",{class:"text-blue-primary font-semibold text-xxs uppercase",style:{"line-height":"9px"}}," Selected Asset",-1),nt={class:"mt-1 text-tsm font-bold"},ot={class:"mt-1 text-tsm font-bold"},rt={class:"account-item"},it={class:"flex justify-between"},ct={class:"mt-1 text-tsm font-bold"},ut={class:"mt-1 text-tsm font-bold"},dt=le({__name:"SelectInputAsset",props:{index:{type:Number,required:!0},assetOptions:{type:Object,required:!0},selectedAssets:{type:Object,required:!1}},emits:["select-asset","update:modelValue"],setup(o){const r=o,u=[{namespace:"prx.xpx",name:"XPX"},{namespace:"prx.metx",name:"METX"},{namespace:"xarcade.xar",name:"XAR"}],d=b=>{const g=u.find(A=>A.namespace==b);return g?g.name:b},{assetOptions:l,selectedAssets:i,index:m}=Be(r),k=T(!1),O=E(()=>{const b=new Set(i.value.map(g=>g.id));return l.value.filter(g=>!b.has(g.id))}),C=async b=>{if(k.value)return;k.value=!0;const{first:g,last:A}=b,v=[];for(let p=g;p<A;p++)l.value[p].hasUpdated||v.push(new t.MosaicId(l.value[p].id));if(!v.length){k.value=!1;return}const I=await n.chainAPI.assetAPI.getMosaicsNames(v),y=await n.chainAPI.assetAPI.getMosaics(v);let f=0,$=0;const N=new Map;I.forEach((p,c)=>{N.set(p.mosaicId.toHex(),c)}),y.sort((p,c)=>{const U=N.get(p.mosaicId.toHex()),q=N.get(c.mosaicId.toHex());return U-q});for(let p=g;p<A;p++){if(!I[f])continue;const c=l.value.find(U=>U.id==I[f].mosaicId.toHex());c&&(c.namespace=I[f].names.length?I[f].names[0].name:"",c.balance=c.balance/Math.pow(10,y[$].divisibility),c.divisibility=y[$].divisibility,c.hasUpdated=!0,f++,$++)}k.value=!1},P=b=>{if(b==null){i.value.splice(m.value,1);return}i.value[m.value].balance=b.balance,i.value[m.value].id=b.id,i.value[m.value].namespace=b.namespace,i.value[m.value].divisibility=b.divisibility,i.value[m.value].amount="0"};return(b,g)=>{const A=Y("Dropdown");return x(),M("div",null,[F(A,{showClear:!0,modelValue:ce(i)[ce(m)],"onUpdate:modelValue":g[0]||(g[0]=v=>ce(i)[ce(m)]=v),style:{width:"100%"},options:O.value,filter:!0,filterFields:["id","namespace"],emptyFilterMessage:" ",placeholder:"Select Asset",virtualScrollerOptions:{lazy:!0,onLazyLoad:C,showLoader:!0,loading:k.value,delay:0,itemSize:38},onChange:g[1]||(g[1]=v=>{var I;P(v.value),b.$emit("update:modelValue",(I=v.value)==null?void 0:I.value)})},{value:ae(v=>[v.value.id?(x(),M("div",tt,[s("div",at,[s("div",st,[lt,s("div",nt,w(d(v.value.namespace==""?v.value.id:v.value.namespace)),1)]),s("div",ot,"Balance: "+w(v.value.balance),1)])])):B("",!0)]),option:ae(v=>[s("div",rt,[s("div",it,[s("div",ct,w(d(v.option.namespace==""?v.option.id:v.option.namespace)),1),s("div",ut,"Balance: "+w(v.option.balance),1)])])]),_:1},8,["modelValue","options","virtualScrollerOptions"])])}}}),mt={class:"border border-gray-200 px-2 py-1 rounded-md"},vt={class:"flex justify-between"},pt={class:"flex flex-col"},ft={class:"uppercase font-light text-gray-500 text-txs text-left mb-2"},gt={class:"flex w-full"},yt={key:0,src:Qe,class:"h-5 w-5 mt-0.5"},bt=["value","data-maska","placeholder"],ht=["disabled"],_t=le({__name:"TransferInputClean",props:{modelValue:{type:String,required:!0},decimal:{type:Number,required:!0},placeholder:{type:String,required:!0},toolTip:{type:String,required:!1},disabled:{type:Boolean,required:!1},showError:{type:Boolean,required:!1},logo:{type:Boolean,required:!1},balance:{type:Number,required:!1}},emits:["update:modelValue","show-error","clickedMaxAvailable"],setup(o){const r=o,u=()=>{let l="0";return r.decimal>0&&(l=l+"."+"9".repeat(r.decimal)),l},d={preProcess:l=>l.replace(/,/g,""),postProcess:l=>{if(!l)return"";let i=0;return r.decimal>0&&(i=1+r.decimal-(l.includes(".")?l.length-l.indexOf("."):0)),Intl.NumberFormat("en-US",{minimumFractionDigits:r.decimal}).format(parseFloat(l)).slice(0,i?-i:void 0)}};return(l,i)=>{const m=ge("maska");return x(),M("div",{class:ye(o.disabled?"opacity-50":"")},[s("div",mt,[s("div",vt,[s("div",pt,[s("div",ft,w(o.placeholder),1),s("div",gt,[o.logo?(x(),M("img",yt)):B("",!0),ee(s("input",{value:o.modelValue,class:"supply_input","data-maska":u(),"data-maska-tokens":"0:\\d:multiple|9:\\d:optional",placeholder:o.placeholder,onInput:i[0]||(i[0]=k=>l.$emit("update:modelValue",parseFloat(k.target.value.replace(/,/g,"")).toString()))},null,40,bt),[[m,void 0,d]])])]),o.logo?(x(),M("button",{key:0,disabled:o.disabled==!0,class:"w-24 cursor-pointer focus:outline-none text-blue-primary text-xs font-bold",onClick:i[1]||(i[1]=k=>l.$emit("clickedMaxAvailable",!0))},w(l.$t("swap.maxAmount")),9,ht)):B("",!0)])])],2)}}});const pe=be(_t,[["__scopeId","data-v-ac217733"]]),xt={class:"rounded-md bg-white flex border mt-3"},wt=["value","placeholder"],kt=s("div",{class:"w-1 flex-none"},null,-1),At={class:"text-gray-800"},It=le({__name:"TextAreaInput",props:{modelValue:{type:String,required:!1},currentBytes:{type:Number,required:!0},limit:{type:Number,required:!0},placeholder:{type:String,required:!0}},emits:["update:modelValue"],setup(o){return(r,u)=>(x(),M(_e,null,[s("div",xt,[s("textarea",{value:o.modelValue,onInput:u[0]||(u[0]=d=>r.$emit("update:modelValue",d.target.value)),rows:"2",class:"w-full text-gray-500 px-2 py-1 outline-none bg-white text-xs",placeholder:o.placeholder.toUpperCase()},null,40,wt),kt]),s("div",{class:ye(["float-right mt-1 text-tsm",o.currentBytes>o.limit?"text-red-500":"text-gray-800"])},[he(w(o.currentBytes)+" ",1),s("span",At,"/"+w(o.limit),1)],2)],64))}}),Mt={class:"border border-gray-200 px-2 py-2 rounded-md w-full"},$t={class:"flex gap-2"},Tt={class:"flex flex-col w-full"},Pt={class:"uppercase text-gray-500 font-light text-xxs text-left"},Ft={key:0,class:"flex flex-col ml-auto justify-center mt-1"},Vt=s("img",{src:Ye,class:"h-5 w-5 mr-auto ml-auto"},null,-1),St={class:"text-xxs text-red-400 font-bold uppercase"},Ct={key:1,class:"flex flex-col ml-auto justify-center mt-1"},Nt=s("img",{src:et,class:"h-5 w-5 mr-auto ml-auto"},null,-1),Et={class:"text-xxs text-green-400 font-bold uppercase"},fe=le({__name:"FieldValidationInput",props:Ue({placeholder:{},showError:{}},{modelValue:{}}),emits:["update:modelValue"],setup(o){const r=Le(o,"modelValue");return(u,d)=>(x(),M("div",Mt,[s("div",$t,[s("div",Tt,[s("div",Pt,w(u.placeholder),1),ee(s("input",{type:"text","onUpdate:modelValue":d[0]||(d[0]=l=>r.value=l),class:"w-full font-semibold text-tsm outline-none mt-1"},null,512),[[Re,r.value]])]),u.showError&&r.value.length!=0?(x(),M("div",Ft,[Vt,s("div",St,w(u.$t("general.invalid")),1)])):u.showError?B("",!0):(x(),M("div",Ct,[Nt,s("div",Et,w(u.$t("general.valid")),1)]))])]))}});const we="0".repeat(64),ke=t.PublicAccount.createFromPublicKey(we,n.networkType).address.plain(),Ae=(o,r)=>{let u=[];return parseInt(o)>0&&u.push(new t.Mosaic(new t.MosaicId(n.nativeToken.assetId),t.UInt64.fromUint(Number(o)))),r.length>0&&r.forEach(d=>{parseInt(d.amount)>0&&u.push(new t.Mosaic(new t.MosaicId(d.id),t.UInt64.fromUint(Number(d.amount))))}),u};class se{}se.createTransaction=async(o,r,u,d,l,i,m,k,O)=>{if(!te.verifyWalletPassword(R.currentLoggedInWallet.name,H.chainNetworkName,l))return!1;const P=H.currentNetworkProfile.generationHash;let b=n.networkType,g=parseFloat(r)*Math.pow(10,n.nativeToken.divisibility),A=[];g>0&&A.push(new t.Mosaic(new t.MosaicId(n.nativeToken.assetId),t.UInt64.fromUint(Number(g)))),d.length>0&&d.forEach(c=>{c.amount>0&&A.push(new t.Mosaic(new t.MosaicId(c.id),t.UInt64.fromUint(Number(c.amount*Math.pow(10,c.divisibility)))))});let v=n.buildTxn,I,y;if(!m)I=R.currentLoggedInWallet.accounts.find(c=>c.address===i);else{I=R.currentLoggedInWallet.accounts.find(U=>U.address===i);const c=await n.chainAPI.accountAPI.getAccountInfo(t.Address.createFromRawAddress(m));y=t.PublicAccount.createFromPublicKey(c.publicKey,b)}let f=te.decryptPrivateKey(new t.Password(l),I.encrypted,I.iv),$;if(k&&u.length>0)try{const c=await n.chainAPI.accountAPI.getAccountInfo(t.Address.createFromRawAddress(o));$=t.EncryptedMessage.create(u,c.publicAccount,f)}catch{$=t.EncryptedMessage.create(u,t.PublicAccount.createFromPublicKey(O,n.networkType),f)}else $=t.PlainMessage.create(u);let N=v.transferBuilder().recipient(t.Address.createFromRawAddress(o)).mosaics(A).message($).build();const p=t.Account.createFromPrivateKey(f,b,1);if(m){let c=R.currentLoggedInWallet.accounts.find(G=>G.address==i),U=te.decryptPrivateKey(new t.Password(l),c.encrypted,c.iv),q=t.Account.createFromPrivateKey(U,b,1);const ne=[N.toAggregateV1(y)],D=await n.chainAPI.nodeAPI.getNodeTime(),oe=v.aggregateBonded(ne,new t.UInt64(D.sendTimeStamp)),W=q.preV2Sign(oe,P),Z=X.lockFundTx(W),re=q.preV2Sign(Z,P);X.announceLF_AND_addAutoAnnounceABT(re,W)}else{const c=p.preV2Sign(N,P);X.announceTransaction(c)}return!0};se.calculateAggregateFee=(o,r,u,d)=>{let l=n.buildTxn,i=Ae(r,u),k=[l.transferBuilder().recipient(t.Address.createFromRawAddress(ke)).mosaics(i).message(d&&o.length>0?t.EncryptedMessage.create(o,t.PublicAccount.createFromPublicKey("0".repeat(64),n.networkType),"0".repeat(64)):t.PlainMessage.create(o)).build().toAggregateV1(t.PublicAccount.createFromPublicKey(we,n.networkType))];return l.aggregateBondedBuilder().innerTransactions(k).build().maxFee.compact()/Math.pow(10,n.nativeToken.divisibility)};se.calculateFee=(o,r,u,d)=>{let l=n.buildTxn,i=Ae(r,u);return l.transferBuilder().recipient(t.Address.createFromRawAddress(ke)).mosaics(i).message(d&&o.length>0?t.EncryptedMessage.create(o,t.PublicAccount.createFromPublicKey("0".repeat(64),n.networkType),"0".repeat(64)):t.PlainMessage.create(o)).build().maxFee.compact()/Math.pow(10,n.nativeToken.divisibility)};const Bt={name:"ConfirmSendModal",props:["toggleModal"],setup(){const r=xe().appContext.config.globalProperties.emitter;return{closeConfirmModal:()=>{r.emit("CLOSE_CONFIRM_SEND_MODAL",!1)},proceedSend:()=>{r.emit("CONFIRM_PROCEED_SEND",!0)}}}},Ut={key:0,class:"popup-outer fixed flex z-50"},Lt={class:"modal-popup-box"},Rt={class:"delete-position"},Kt={class:"w-92"},Ot={class:"text-center"},qt={class:"mt-3"};function Dt(o,r,u,d,l,i){const m=Y("font-awesome-icon");return x(),M("div",null,[F(Ke,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:ae(()=>[u.toggleModal?(x(),M("div",Ut,[s("div",Lt,[s("div",Rt,[F(m,{icon:"times",class:"delete-icon-style",onClick:r[0]||(r[0]=k=>{d.closeConfirmModal()})})]),s("div",Kt,[s("div",Ot,w(o.$t("transfer.proceedWithZero")),1),s("div",qt,[s("div",{onClick:r[1]||(r[1]=k=>d.proceedSend()),class:"blue-btn py-2 font-semibold cursor-pointer text-center ml-auto mr-auto w-7/12"},w(o.$t("general.confirm")),1),s("div",{class:"text-center cursor-pointer text-xs font-semibold text-blue-link mt-2",onClick:r[2]||(r[2]=k=>d.closeConfirmModal())},w(o.$t("general.cancel")),1)])])])])):B("",!0)]),_:1}),u.toggleModal?(x(),M("div",{key:0,onClick:r[3]||(r[3]=k=>{d.closeConfirmModal()}),class:"fixed inset-0 bg-opacity-90 bg-gray-100 z-20"})):B("",!0)])}const Wt=be(Bt,[["render",Dt]]),zt={class:"w-10/12 ml-auto mr-auto mt-5"},jt={class:"border filter shadow-lg xl:grid xl:grid-cols-3 mt-8"},Ht={class:"xl:col-span-2 p-12"},Xt={key:0,class:"mb-3 rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},Zt={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},Gt={class:"inline-block text-xs"},Qt={class:"text-sm font-semibold"},Jt={class:"flex gap-1 mt-3 items-center"},Yt={key:1,class:"mt-3"},ea=s("div",{class:"text-blue-primary font-semibold uppercase mt-3 text-xxs"},"Transfer to",-1),ta={class:"flex mt-1 gap-1"},aa={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},sa={class:"text-xxs text-blue-primary font-semibold uppercase ml-auto mr-auto"},la={key:3,class:"h-3"},na={key:4,class:"mb-5"},oa={for:"encryptedMsg",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},ra={key:5},ia={class:"text-xs font-semibold my-3"},ca={class:"bg-navy-primary py-6 px-6 xl:col-span-1"},ua=["disabled"],da={class:"text-center"},ma="^[0-9A-Za-z]{40}$",va="^[0-9A-Za-z-]{46}$",pa="^[^ ]{8,}$",Aa=le({__name:"ViewTransfer",setup(o){const r=xe(),{t:u}=Oe(),d=r.appContext.config.globalProperties.emitter,l=T(null),i=T(null),m=T(null),k=T(!1),O=T(!1),C=T(""),P=T(!1),b=T(!1),g=T(""),A=T(!0),v=T(!0),I=T([]),y=T([]),f=T("0"),$=T(0),N=T(""),p=T(""),c=T(0),U=E(()=>!(P.value?g.value.match(pa):!A.value&&!ne.value&&D.value<=oe.value&&q.value)),q=E(()=>!(b.value&&P.value&&D.value>0&&v.value));J(y,e=>{for(let a=0;a<e.length;a++)isNaN(parseFloat(e[a].amount))&&(e[a].amount="0")},{deep:!0}),J(f,e=>{isNaN(parseFloat(e))&&(f.value="0")});const ne=E(()=>m.value?l.value?parseFloat(f.value)>$.value||!y.value.every(e=>parseFloat(e.amount)<=e.balance)?!0:G.value>c.value:G.value>$.value||!y.value.every(e=>parseFloat(e.amount)<=e.balance):!1),D=E(()=>p.value.length==0?0:P.value?X.getFakeEncryptedMessageSize(p.value):X.getPlainMessageSize(p.value)),oe=E(()=>{var e;return((e=H)==null?void 0:e.currentNetworkProfileConfig.maxMessageSize)-1}),W=E(()=>{var e;return K.convertToExact((e=H)==null?void 0:e.currentNetworkProfileConfig.lockedFundsPerAggregate,n.nativeToken.divisibility)}),Z=E(()=>H.currentNetworkProfile?K.convertToExact(X.getLockFundFee(),n.nativeToken.divisibility):0),re=E(()=>{if(!m.value)return 0;let e=n.nativeToken.divisibility;return l.value?K.convertNumberMinimumFormat($.value,e):K.convertNumberMinimumFormat($.value-z.value,e)}),G=E(()=>{let e=n.nativeToken.divisibility;return l.value?e==0?Math.trunc(z.value+Z.value+W.value):Math.round((z.value+Z.value+W.value)*Math.pow(10,e))/Math.pow(10,e):e==0?Math.trunc(parseFloat(f.value.replace(/,/g,""))+z.value):Math.round((parseFloat(f.value.replace(/,/g,""))+z.value)*Math.pow(10,e))/Math.pow(10,e)}),z=E(()=>{const e=y.value.map(a=>({id:a.id,amount:a.amount}));return e.push({id:n.nativeToken.assetId,amount:f.value}),l.value?se.calculateAggregateFee(p.value,f.value,e,P.value):m.value?se.calculateFee(p.value,f.value,e,P.value):0}),Ie=()=>{f.value=re.value.toString(),f.value=re.value.toString()},Me=()=>{m.value=null,g.value="",C.value="",P.value=!1,p.value="",f.value="0",d.emit("CLEAR_SELECT",0),y.value=[],l.value=null,N.value=""},$e=qe(),Te=De(),Pe=()=>P.value?te.verifyWalletPassword(R.currentLoggedInWallet.name,H.chainNetworkName,g.value)?!0:($e.add({severity:"error",summary:"Error",detail:"Password is incorrect",group:"br-custom",life:1e3}),!1):!0,Fe=async()=>{if(Pe()){let a=parseFloat(f.value)*Math.pow(10,n.nativeToken.divisibility),h=[],V=y.value.map(S=>({id:S.id,amount:parseFloat(S.amount),divisibility:S.divisibility}));a>0&&h.push(new t.Mosaic(new t.MosaicId(n.nativeToken.assetId),t.UInt64.fromUint(Number(a)))),V.length>0&&V.forEach(S=>{S.amount>0&&h.push(new t.Mosaic(new t.MosaicId(S.id),t.UInt64.fromUint(Number(S.amount*Math.pow(10,S.divisibility)))))});let j=n.buildTxn,Q=R.currentLoggedInWallet.accounts.find(S=>S.address===m.value),_;if(P.value&&p.value.length>0){let S=te.decryptPrivateKey(new t.Password(g.value),Q.encrypted,Q.iv);try{const ie=await n.chainAPI.accountAPI.getAccountInfo(t.Address.createFromRawAddress(C.value));_=t.EncryptedMessage.create(p.value,ie.publicAccount,S)}catch{_=t.EncryptedMessage.create(p.value,t.PublicAccount.createFromPublicKey(N.value,n.networkType),S)}}else _=t.PlainMessage.create(p.value);let L=j.transferBuilder().recipient(t.Address.createFromRawAddress(C.value)).mosaics(h).message(_).build().serialize();de.unsignedTransactionPayload=L,de.selectedAddress=m.value,de.selectedMultisigAddress=l.value,Te.push({name:"ViewConfirmTransaction"}),Me()}else return},Ve=async()=>{if(n.chainAPI)try{const e=await n.chainAPI.accountAPI.getAccountInfo(t.Address.createFromRawAddress(m.value)),a=e.mosaics.findIndex(h=>h.id.toHex()==n.nativeToken.assetId);a!=-1?(c.value=e.mosaics[a].amount.compact()/Math.pow(10,n.nativeToken.divisibility),e.mosaics.splice(a,1)):c.value=0}catch{c.value=0}},ue=async e=>{if(n.chainAPI&&e){I.value=[];try{const a=await n.chainAPI.accountAPI.getAccountInfo(t.Address.createFromRawAddress(e)),h=a.mosaics.findIndex(V=>V.id.toHex()==n.nativeToken.assetId);h!=-1?($.value=a.mosaics[h].amount.compact()/Math.pow(10,n.nativeToken.divisibility),a.mosaics.splice(h,1)):$.value=0;for(let V=0;V<a.mosaics.length;V++){const j=a.mosaics[V];I.value.push({id:j.id.toHex(),balance:j.amount.compact(),divisibility:0,namespace:"",hasUpdated:!1})}}catch{I.value=[],$.value=0}}};J(m,async(e,a)=>{I.value=[],y.value=[],e==null?($.value=0,i.value=null,l.value=null):e!=a&&(i.value=null,l.value=null,await ue(e))}),J(l,async(e,a)=>{I.value=[],y.value=[],e==null&&(c.value=0,i.value=null,l.value=null,await ue(m.value)),e!=a&&(await Ve(),await ue(e))}),d.on("select-account",e=>{m.value=e}),d.on("select-multisig-account",e=>{i.value=e.label,l.value=e.value}),d.on("CLOSE_MULTISIG",()=>{i.value=null,l.value=null});const Se=e=>{k.value=!1,C.value=e.data},Ce=E(()=>{const e=R.currentLoggedInWallet;if(!e)return[];const a=[...e.accounts,...e.others];return e.contacts.length?[{key:"0",label:u("general.ownerAcc"),selectable:!1,children:a.map((h,V)=>({key:"0-"+V.toString(),label:h.name,data:t.Address.createFromRawAddress(h.address).pretty(),selectable:!0}))},{key:"1",label:u("general.contact"),selectable:!1,children:e.contacts.map((h,V)=>({key:"1-"+V.toString(),label:h.name,data:t.Address.createFromRawAddress(h.address).pretty(),selectable:!0}))}]:[{key:"0",label:u("general.ownerAcc"),selectable:!1,children:a.map((h,V)=>({key:"0-"+V.toString(),label:h.name,data:t.Address.createFromRawAddress(h.address).pretty(),selectable:!0}))}]});J([C,A],e=>{if(e[0].match(va)||e[0].match(ma)){if(!e[1]){Ne();return}me()}else A.value=!0});const Ne=()=>{n.chainAPI.accountAPI.getAccountInfo(t.Address.createFromRawAddress(C.value)).then(e=>{b.value=e.publicKey=="0".repeat(64)}).catch(e=>b.value=!0)},Ee=()=>{try{t.PublicAccount.createFromPublicKey(N.value,n.networkType).address.plain()==t.Address.createFromRawAddress(C.value).plain()&&(v.value=!1)}catch{v.value=!0}},me=()=>{if(R.currentLoggedInWallet)try{let e=K.createAddress(C.value);K.checkAddressNetwork(e,n.networkType)?A.value=!1:A.value=!0}catch{try{let a=K.createNamespaceId(C.value);n.chainAPI.namespaceAPI.getLinkedAddress(a).then(h=>{C.value=h.plain(),A.value=!1}).catch(h=>{A.value=!0})}catch{A.value=!0}}};return(e,a)=>{const h=Y("Sidebar"),V=Y("font-awesome-icon"),j=Y("router-link"),Q=ge("debounce");return x(),M("div",null,[F(h,{visible:k.value,"onUpdate:visible":a[0]||(a[0]=_=>k.value=_),baseZIndex:1e4,position:"full"},{default:ae(()=>[F(Ge,{contacts:Ce.value,onNodeSelect:Se},null,8,["contacts"])]),_:1},8,["visible"]),F(Wt,{toggleModal:O.value},null,8,["toggleModal"]),s("div",zt,[s("div",jt,[s("div",Ht,[ne.value?(x(),M("div",Xt,[s("div",Zt,[F(V,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),s("div",Gt,w(e.$t("general.insufficientBalance")),1)])):B("",!0),s("div",Qt,w(e.$t("transfer.newTransfer")),1),s("div",Jt,[F(je,{type:"transfer"}),F(He,{"selected-address":m.value},null,8,["selected-address"])]),l.value?(x(),M("div",Yt,[F(Xe,{"select-default-address":l.value,"select-default-name":i.value,type:"transfer"},null,8,["select-default-address","select-default-name"])])):B("",!0),ea,s("div",ta,[ee(F(fe,{placeholder:e.$t("transfer.transferPlaceholder"),modelValue:C.value,"onUpdate:modelValue":a[1]||(a[1]=_=>C.value=_),showError:A.value},null,8,["placeholder","modelValue","showError"]),[[Q,me,"1000"]]),s("div",{onClick:a[2]||(a[2]=_=>k.value=!k.value),class:"border rounded-md cursor-pointer flex flex-col justify-center p-1.5"},[F(V,{icon:"id-card-alt",class:"text-blue-primary ml-auto mr-auto"}),s("div",aa,w(e.$t("general.select")),1),s("div",sa,w(e.$t("general.contact")),1)])]),(x(!0),M(_e,null,We(y.value,(_,L)=>{var S;return x(),M("div",{key:L},[F(dt,{class:"mt-3","asset-options":I.value,index:L,"selected-assets":y.value},null,8,["asset-options","index","selected-assets"]),((S=y.value[L].id)==null?void 0:S.length)==16?(x(),ve(pe,{key:0,class:"mt-3",modelValue:y.value[L].amount,"onUpdate:modelValue":ie=>y.value[L].amount=ie,placeholder:e.$t("transfer.assetAmount"),type:"text",decimal:y.value[L].divisibility},null,8,["modelValue","onUpdate:modelValue","placeholder","decimal"])):B("",!0)])}),128)),y.value.length!=I.value.length?(x(),M("button",{key:2,class:"my-2 font-semibold text-xs text-blue-primary outline-none focus:outline-none disabled:opacity-50",onClick:a[3]||(a[3]=_=>y.value.push({id:null,balance:0,amount:"0",namespace:"",divisibility:0}))}," + "+w(e.$t("transfer.addAssets")),1)):(x(),M("div",la)),F(pe,{modelValue:f.value,"onUpdate:modelValue":a[4]||(a[4]=_=>f.value=_),balance:$.value,placeholder:e.$t("transfer.transferAmount"),logo:!0,type:"text",onClickedMaxAvailable:a[5]||(a[5]=_=>Ie()),decimal:6},null,8,["modelValue","balance","placeholder"]),F(It,{modelValue:p.value,"onUpdate:modelValue":a[6]||(a[6]=_=>p.value=_),limit:oe.value,placeholder:e.$t("general.message"),"current-bytes":D.value},null,8,["modelValue","limit","placeholder","current-bytes"]),A.value?B("",!0):(x(),M("div",na,[ee(s("input",{id:"encryptedMsg",type:"checkbox","onUpdate:modelValue":a[7]||(a[7]=_=>P.value=_)},null,512),[[ze,P.value]]),s("label",oa,w(e.$t("transfer.enableEncryption")),1)])),P.value?(x(),M("div",ra,[s("div",ia,w(e.$t("general.enterPasswordContinue")),1),F(Je,{placeholder:e.$t("general.enterPassword"),errorMessage:e.$t("general.passwordRequired"),modelValue:g.value,"onUpdate:modelValue":a[8]||(a[8]=_=>g.value=_),icon:"lock",class:"mt-5 mb-3"},null,8,["placeholder","errorMessage","modelValue"])])):B("",!0),!A.value&&b.value&&P.value&&D.value>0?ee((x(),ve(fe,{key:6,placeholder:"Recipient Public Key",modelValue:N.value,"onUpdate:modelValue":a[9]||(a[9]=_=>N.value=_),showError:v.value},null,8,["modelValue","showError"])),[[Q,Ee,"1000"]]):B("",!0)]),s("div",ca,[F(Ze,{"signer-native-token-balance":c.value,"native-amount":f.value,"native-token-balance":$.value,"lock-fund":W.value,"lock-fund-tx-fee":Z.value,"selected-multisig-address":l.value,"txn-fee":z.value,"total-fee":G.value,"selected-assets":y.value},null,8,["signer-native-token-balance","native-amount","native-token-balance","lock-fund","lock-fund-tx-fee","selected-multisig-address","txn-fee","total-fee","selected-assets"]),s("button",{type:"submit",class:"w-full blue-btn px-3 py-3 disabled:opacity-50 disabled:cursor-auto",disabled:U.value,onClick:a[10]||(a[10]=_=>Fe())},w(e.$t("general.transfer")),9,ua),s("div",da,[F(j,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white underline"},{default:ae(()=>[he(w(e.$t("general.cancel")),1)]),_:1})])])])])])}}});export{Aa as default};
