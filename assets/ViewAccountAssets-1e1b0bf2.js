import"./vue-86063517.js";import{_ as O}from"./proximax-logo-ecfc3767.js";import{_ as K}from"./xarcade-logo-c4d3fd5c.js";import{_ as G}from"./metx-logo-27f23eae.js";import{_ as U}from"./icon-proximax-logo-gray-c2486ce1.js";import{_ as W}from"./icon-green-tick-1b766454.js";import{_ as q}from"./icon-red-x-a5511f99.js";import{_ as J}from"./icon-more-options-3f3cfda9.js";import{A,H as Q,k as Y,n as M,_ as Z}from"./index-db436e65.js";import{_ as ee}from"./icon-plus-7207f329.js";import{A as te,a as oe}from"./AccountTabs-f08e2eb0.js";import{d as N}from"./tsjs-xpx-chain-sdk-84426b6a.js";import{f as b,g as re}from"./primevue-e09f7e84.js";import{d as se,r as d,ao as ie,w as ae,B as ne,o as a,z as c,A as m,a as l,m as n,l as v,bf as w,g as p,b as R,e as P,u as me}from"./@vue-a9ecc9f1.js";import"./@js-joda-d98eb16f.js";import"./vue-router-21fffbbf.js";import"./rxjs-1250b26d.js";import"./tslib-8dbab242.js";import"./crypto-js-e64ac54c.js";import"./crypto-browserify-4fd8cccd.js";import"./randombytes-685e9383.js";import"./node-stdlib-browser-23a8bc7f.js";import"./buffer-6d367910.js";import"./base64-js-50a5cdf9.js";import"./ieee754-44f7831e.js";import"./process-2209b2b3.js";import"./safe-buffer-c463177b.js";import"./create-hash-92c04a28.js";import"./inherits-804453d8.js";import"./md5.js-8d474739.js";import"./hash-base-bb85fc42.js";import"./readable-stream-2241ee9e.js";import"./events-86ccc6d8.js";import"./util-06f7ff32.js";import"./is-arguments-86164331.js";import"./has-tostringtag-7c6352d6.js";import"./has-symbols-cd7870b9.js";import"./call-bind-9e7f09da.js";import"./get-intrinsic-f35014ba.js";import"./has-proto-8ede3a55.js";import"./function-bind-68631a08.js";import"./has-ab8e2922.js";import"./is-generator-function-06dfaf9d.js";import"./which-typed-array-cf6b6a29.js";import"./for-each-f57c5052.js";import"./is-callable-7492318c.js";import"./available-typed-arrays-61974ec7.js";import"./gopd-bab4d6bd.js";import"./is-typed-array-037eef20.js";import"./util-deprecate-c3aabb3c.js";import"./string_decoder-ef7b01fe.js";import"./ripemd160-58dcfa02.js";import"./sha.js-cea3da2e.js";import"./cipher-base-aee0e03d.js";import"./stream-browserify-7496a08f.js";import"./create-hmac-e8b5ea4a.js";import"./browserify-sign-a708a95f.js";import"./browserify-rsa-bfbdcbb6.js";import"./bn.js-1ae23332.js";import"./elliptic-75e883ee.js";import"./minimalistic-assert-4cc49674.js";import"./minimalistic-crypto-utils-6f869a51.js";import"./brorand-03f0f79d.js";import"./hash.js-4f5dfe73.js";import"./hmac-drbg-87799258.js";import"./parse-asn1-465c125b.js";import"./asn1.js-405e93e4.js";import"./safer-buffer-2ac6237e.js";import"./evp_bytestokey-e91543fa.js";import"./browserify-aes-ce20a0e6.js";import"./buffer-xor-87a7236a.js";import"./pbkdf2-e2ae8643.js";import"./browserify-cipher-c4c37ca3.js";import"./browserify-des-3f7e64d9.js";import"./des.js-d262604a.js";import"./diffie-hellman-c8260aab.js";import"./miller-rabin-de27bf02.js";import"./create-ecdh-ffe720e9.js";import"./public-encrypt-fc0568a2.js";import"./randomfill-2874e5f1.js";import"./mathjs-2a513dae.js";import"./@babel-484168fe.js";import"./typed-function-4896e4f1.js";import"./decimal.js-d133ee8e.js";import"./complex.js-cf2520e8.js";import"./fraction.js-39e7906a.js";import"./javascript-natural-sort-c4dd0c27.js";import"./escape-latex-c8a96e7a.js";import"./seedrandom-c8f991ad.js";import"./tiny-emitter-56d49cfd.js";import"./js-sha3-d7d4f583.js";import"./crypto-random-string-d158262e.js";import"./jose-92e5544c.js";import"./vue-i18n-728f748b.js";import"./@intlify-16888cd3.js";import"./vue-loading-overlay-b89251b1.js";import"./jspdf-30014160.js";import"./fflate-8981c52c.js";import"./vue-debounce-3bbbf8c6.js";import"./mitt-f7ef348c.js";/* empty css                   */import"./maska-6f10db43.js";import"./@fortawesome-014b81f2.js";import"./vue3-blocks-tree-e53499e3.js";import"./@noble-f8eff84a.js";import"./utf8-c941a4a0.js";import"./bip39-936aefa9.js";import"./axios-b48d2c29.js";import"./flatbuffers-edc4f8d7.js";import"./ws-0a714537.js";import"./jdenticon-e4458e79.js";import"./functions-3b5b4af7.js";import"./TextInput-a92ceb31.js";import"./TextInputClean-ee886b8e.js";import"./icon-key-5b3f7dda.js";const le="/web-wallet-vuejs/assets/icon-transfer-white-08654b1d.svg",ce={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5"},pe={class:"border-2 border-t-0"},de=["href"],ue={class:"text-blue-primary uppercase w-min-max text-xs mt-1.5 cursor-pointertext-blue-primary pr-7"},fe={class:"flex items-center pr-7"},_e={key:0,src:O,class:"inline-block h-7 w-7 mr-2 border-2 rounded-3xl"},ge={key:1,src:K,class:"inline-block h-7 w-7 mr-2 border-2 rounded-3xl"},ve={key:2,src:G,class:"inline-block h-7 w-7 mr-2 border-2 rounded-3xl"},we={key:3},he={key:4,src:U,class:"inline-block h-6 w-6 mr-2"},ye={key:5,class:"inline-block text-xs ml-2 mt-1"},xe={key:6,class:"inline-block text-xs ml-2 cursor-pointer mt-1"},be={key:0,src:W,class:"h-5 w-5"},ke={key:1,src:q,class:"h-5 w-5"},Ae=["onClick","onMouseover"],Pe={key:0,class:"mt-5 w-36 absolute rounded-sm shadow-lg bg-white focus:outline-none z-10 text-left"},Ie={class:"my-2"},Ce=m("div",{class:"block hover:bg-gray-100 transition duration-200 p-2 z-20 cursor-pointer"},"View Metadata",-1),Me={class:"flex my-3 px-6 flex-col w-full ml-auto mr-auto gap-2 sm:flex-row sm:items-center"},Ne=m("img",{src:le,class:"inline-block w-4 h-4 mt-0.5 cursor-pointer mr-1"},null,-1),Se=m("img",{src:Y,class:"w-4 h-4 inline-block relative mr-1"},null,-1),Le=m("img",{src:ee,class:"inline-block w-4 h-4 mr-2"},null,-1),Ve=se({__name:"ViewAccountAssets",props:{address:String},setup(u){const S=u,h=e=>e=="prx.xpx"?{name:"XPX",registered:!0}:e=="prx.metx"?{name:"METX",registered:!0}:e=="xarcade.xar"?{name:"XAR",registered:!0}:{name:e,registered:!1},I=d({page:0,rows:10}),$=d(),B=e=>{I.value.rows=e},f=d([]),X=e=>M.currentNetworkProfile?M.currentNetworkProfile.chainExplorer.url+"/"+M.currentNetworkProfile.chainExplorer.assetInfoRoute+"/"+e:"",y=d([]),k=d(0),z=e=>{k.value=e,y.value[e]=!y.value[e]};me().appContext.config.globalProperties.emitter.on("PAGE_CLICK",()=>{for(var e=0;e<y.value.length;)e!=k.value&&(y.value[e]=!1),e++});const E=e=>{k.value=e},H=()=>{k.value=-1},j=async()=>{try{return(await A.chainAPI.accountAPI.getAccountInfo(N.Address.createFromRawAddress(S.address))).mosaics.map((s,o)=>({i:o,id:s.id.toHex(),amount:s.amount.compact().toString(),name:"",creator:!1,isLoaded:!1}))}catch{return[]}},L=ie(),_=d(!1);L.run(()=>{const e=d(!1),s=ae(A,async o=>{o.isReady&&!e.value&&(_.value=!0,f.value=await j(),e.value=!0,V(),_.value=!1,s(),L.stop())},{immediate:!0})});const F=e=>{const{page:s,rows:o}=e;I.value={page:s,rows:o},V()},V=async()=>{var T;_.value=!0;const{page:e,rows:s}=I.value,o=[];for(let r=0;r<s;r++){const i=e*s+r;if(!f.value[i]||f.value[i].isLoaded)continue;const x=f.value[i];o.push(new N.MosaicId(x.id))}if(!o.length){_.value=!1;return}const t=await A.chainAPI.assetAPI.getMosaicsNames(o),g=await A.chainAPI.assetAPI.getMosaics(o),C={};o.forEach((r,i)=>{C[r.toHex()]=i}),g.sort((r,i)=>{const x=C[r.mosaicId.toHex()],D=C[i.mosaicId.toHex()];return x-D});for(let r=0;r<o.length;r++){const i=f.value.find(x=>x.id==o[r].toHex());i.name=((T=t[r].names[0])==null?void 0:T.name)??"-",i.amount=Q.toCurrencyFormat(parseFloat(i.amount)/Math.pow(10,g[r].divisibility),g[r].divisibility),i.creator=g[r].owner.address.plain()==N.Address.createFromRawAddress(S.address).plain(),i.isLoaded=!0}_.value=!1};return(e,s)=>{const o=ne("router-link");return a(),c("div",null,[m("div",ce,[l(te,{address:u.address,class:"mb-6"},null,8,["address"]),l(oe,{address:u.address,selected:"assets"},null,8,["address"]),m("div",pe,[l(w(re),{value:f.value,paginator:!0,rows:10,dataKey:"id",ref_key:"dt",ref:$,onPage:s[0]||(s[0]=t=>F(t)),"onUpdate:rows":s[1]||(s[1]=t=>B(t)),loading:_.value,rowsPerPageOptions:[10,20,30,40,50],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink  RowsPerPageDropdown",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",responsiveLayout:"scroll"},{empty:n(()=>[v(" No assets found. ")]),default:n(()=>[l(w(b),{field:"id",header:"Asset ID"},{body:n(({data:t})=>[m("a",{href:X(t.id),target:"_new",class:"col-span-2"},[m("div",ue,p(t.id),1)],8,de)]),_:1}),l(w(b),{field:"name",header:"Namespace"},{body:n(({data:t})=>[m("div",fe,[h(t.name).name=="XPX"?(a(),c("img",_e)):h(t.name).name=="XAR"?(a(),c("img",ge)):h(t.name).name=="METX"?(a(),c("img",ve)):t.name=="-"?(a(),c("div",we)):(a(),c("img",he)),h(t.name).registered?(a(),c("div",ye,p(h(t.name).name),1)):(a(),c("div",xe,p(t.name),1))])]),_:1}),l(w(b),{field:"amount",header:"Balance"},{body:n(({data:t})=>[m("div",null,p(t.amount),1)]),_:1}),l(w(b),{field:"creator",header:"Creator"},{body:n(({data:t})=>[t.creator?(a(),c("img",be)):(a(),c("img",ke))]),_:1}),l(w(b),{header:"Actions "},{body:n(({data:t})=>[m("img",{src:J,class:"w-4 h-4 cursor-pointer ml-2 mt-0.5",onClick:g=>z(t.i),onMouseover:g=>E(t.i),onMouseout:H},null,40,Ae),y.value[t.i]?(a(),c("div",Pe,[m("div",Ie,[t.isCreator?(a(),R(o,{key:0,to:{name:"ViewServicesAssetsModifySupplyChange",params:{assetId:t.id,address:u.address,assetBalance:t.balance}},class:"block hover:bg-gray-100 transition duration-200 p-2 z-20"},{default:n(()=>[v(p(e.$t("general.modifySupply")),1)]),_:2},1032,["to"])):P("v-if",!0),t.isCreator?(a(),R(o,{key:1,to:{name:"ViewServicesAssetsLinkToNamespace",params:{assetId:t.id,address:u.address}},class:"block hover:bg-gray-100 transition duration-200 p-2 z-20"},{default:n(()=>[v(p(e.$t("general.linkToNamespace")),1)]),_:2},1032,["to"])):P("v-if",!0),l(o,{to:{name:"ViewAssetMetadata",params:{assetId:t.id,address:u.address}}},{default:n(()=>[Ce]),_:2},1032,["to"])])])):P("v-if",!0)]),_:1})]),_:1},8,["value","loading"]),P(' <AssetDataTable :assets="mosaics" :address="address" /> '),m("div",Me,[l(o,{to:{name:"ViewTransferCreate"},class:"bg-blue-primary px-5 py-2 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center"},{default:n(()=>[Ne,v(p(e.$t("general.transfer")),1)]),_:1}),l(o,{to:{name:"ViewServicesMainnetSwap"},class:"bg-blue-primary px-5 py-2 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center"},{default:n(()=>[Se,v(p(e.$t("general.swap")),1)]),_:1}),l(o,{to:{name:"ViewServicesAssetsCreate"},class:"bg-blue-primary px-5 py-2 text-gray-100 text-xs font-bold rounded-md flex items-center justify-center"},{default:n(()=>[Le,v(p(e.$t("asset.createNewAsset")),1)]),_:1})])])])])}}}),Do=Z(Ve,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/account/views/ViewAccountAssets.vue"]]);export{Do as default};
