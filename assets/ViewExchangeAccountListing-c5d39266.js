import{d as L,c as f,w as S,I as k,r as H,a as E,E as c,k as N,o as D,b as T,e as s,t as d,s as i,z as o,B as R,C as r,A as b,bl as C,_ as M}from"./index-401acdd9.js";import{s as u,a as V}from"./column.esm-71d10fd7.js";import{t as B}from"./jdenticon-module-3e81fcaa.js";const $={class:"lg:w-9/12 ml-2 mr-2 lg:ml-auto lg:mr-auto mt-5 border-2 p-3"},F={class:"border border-blue-300 rounded-md p-3 mt-3 bg-blue-50"},X={class:"flex items-center gap-2"},j=["innerHTML"],O={class:"flex flex-col gap-0.5"},q=s("div",{class:"uppercase text-xxs text-blue-primary"},"Selected Account",-1),z={class:"font-semibold"},W=s("div",{class:"ml-4 my-3"},"SDA Offers",-1),K={class:"flex"},U={class:"mr-1"},J={class:"text-blue-primary"},Q={class:"flex"},Y={class:"mr-1"},Z={class:"text-blue-primary"},ee=s("button",{class:"blue-btn py-2 px-3"},"Remove",-1),te=L({__name:"ViewExchangeAccountListing",props:{address:{type:String,required:!0}},setup(h){const p=h,y=[{namespace:"prx.xpx",name:"XPX"},{namespace:"prx.metx",name:"METX"},{namespace:"xarcade.xar",name:"XAR"}],v=t=>{const n=y.find(l=>l.namespace==t);return n?n.name:t},A=f(()=>S.currentLoggedInWallet.convertAddressToName(p.address,!0)),_=new k("ThemeStyleConfig");_.init();const I=f(()=>B(p.address,40,_.jdenticonConfig)),x=H([]),G=async()=>{let t=[];const n=new b.ExchangeSdaHttp(c.nodeFullURL);t=(await C(n.getAccountSdaExchangeOffers(b.Address.createFromRawAddress(p.address)))).sdaOfferBalances;for(let e=0;e<t.length;e++){const m=await c.chainAPI.assetAPI.getMosaicsNames([t[e].mosaicIdGet,t[e].mosaicIdGive]),w=await c.chainAPI.assetAPI.getMosaics([t[e].mosaicIdGet,t[e].mosaicIdGive]);t[e].mosaicGetName=m[0].names.length?m[0].names[0].name:t[e].mosaicIdGet.toHex(),t[e].mosaicGiveName=m[1].names.length?m[1].names[0].name:t[e].mosaicIdGive.toHex(),t[e].mosaicGetDivisibility=w.find(g=>g.mosaicId.toHex()==t[e].mosaicIdGet.toHex()).divisibility,t[e].mosaicGiveDivisibility=w.find(g=>g.mosaicId.toHex()==t[e].mosaicIdGive.toHex()).divisibility}const a=await c.chainAPI.chainAPI.getBlockchainHeight();x.value=t.map(e=>({idPair:`${e.mosaicIdGive.toHex()}/${e.mosaicIdGet.toHex()}`,pair:`${v(e.mosaicGiveName)}/${v(e.mosaicGetName)} `,giveAmount:e.initialMosaicGiveAmount.compact()/Math.pow(10,e.mosaicGiveDivisibility),getAmount:e.initialMosaicGetAmount.compact()/Math.pow(10,e.mosaicGetDivisibility),deadline:new Date(Date.now()+(e.deadline.compact()-a)*15e3).toLocaleString()}))},P=E(c,async t=>{t.isReady&&(await G(),P())},{immediate:!0});return(t,n)=>{const l=N("router-link");return D(),T("div",null,[s("div",$,[s("div",F,[s("div",X,[s("div",{innerHTML:I.value},null,8,j),s("div",O,[q,s("div",z,d(A.value),1)])])]),W,i(r(V),{value:x.value,paginator:!0,rows:10,responsiveLayout:"scroll",scrollDirection:"horizontal",alwaysShowPaginator:!1,paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",class:"w-full"},{empty:o(()=>[R(" No exchanges found. ")]),default:o(()=>[i(r(u),{field:"deadline",header:"Deadline"}),i(r(u),{field:"give",header:"Give"},{body:o(({data:a})=>[s("div",K,[s("div",U,d(a.giveAmount),1),s("div",J,d(a.pair.split("/")[0]),1)])]),_:1}),i(r(u),{field:"get",header:"Get"},{body:o(({data:a})=>[s("div",Q,[s("div",Y,d(a.getAmount),1),s("div",Z,d(a.pair.split("/")[1]),1)])]),_:1}),i(r(u),{header:"Action"},{body:o(({data:a})=>[i(l,{to:{name:"ViewExchangeRemove",query:{p:a.idPair,o:h.address}}},{default:o(()=>[ee]),_:2},1032,["to"])]),_:1})]),_:1},8,["value"])])])}}}),oe=M(te,[["__file","/home/runner/work/web-wallet-vuejs/web-wallet-vuejs/src/modules/services/submodule/exchange/ViewExchangeAccountListing.vue"]]);export{oe as default};
