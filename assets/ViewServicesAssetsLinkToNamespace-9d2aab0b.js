import{_ as ae,o as n,f as i,e as t,t as a,i as h,d as Te,g as r,c as d,x as W,F as pe,K as fe,h as ge,E as Ce,ag as Se,j as we,k as Ne,y as Ae,A as g,n as V,H as m,B as Le,aq as te,bb as be,w as H,I as Fe,au as R,D as B,r as E,Q as $e,a as Me,b as se,l as P,s as N,O as U,ak as Ie}from"./index-d2e8ccc1.js";import{A}from"./assetsUtils-5b050fb5.js";import{_ as Ve}from"./delete-8b454e7f.js";import{_ as Be}from"./TransactionFeeDisplay.vue_vue_type_script_setup_true_lang-dcb72102.js";import{T as Ee}from"./TransactionLayout-28e8b83b.js";import{t as Pe}from"./jdenticon-module-59aa2fb9.js";import{M as De}from"./multisigUtils-915e0086.js";import{T as q}from"./transactionState-4479ac99.js";import{_ as He}from"./icon-asset-2a9ae6ea.js";import{_ as O}from"./icon-info-8b4f1351.js";import"./TransactionFeeLayout.vue_vue_type_script_setup_true_lang-8a5d8a3f.js";import"./proximax-logo-ecfc3767.js";const Ue={props:{placeholder:String,errorMessage:String,showError:Boolean,modelValue:String,title:String,disabled:Boolean},emits:["update:modelValue"],name:"SelectLinkType",data(){return{inputText:"",borderColor:"border border-gray-300",textErr:!1}},watch:{showError:function(e){e?(this.borderColor="border-2 border-red-primary",this.textErr=!0):(this.borderColor="border-2 border-gray-300",this.textErr=!1)}}},We={class:"border border-gray-200 px-2 py-1 h-14 rounded-md"},je={class:"uppercase text-gray-500 text-txs text-left mb-2"},ze={class:"flex items-center"},Re=["value","disabled","checked"],qe={for:"link",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},Oe=["value","disabled","checked"],Qe={for:"unlink",class:"cursor-pointer font-bold ml-4 mr-5 text-tsm"},Ge={class:"h-3 mb-2"},Je={key:0,class:"error error-text text-left"};function Ke(e,o,v,s,_,S){return n(),i("div",null,[t("div",We,[t("div",je,a(v.title),1),t("div",ze,[t("input",{id:"link",type:"radio",name:"linkType",value:v.modelValue,disabled:v.disabled,class:"h-5 w-5",onChange:o[0]||(o[0]=c=>e.$emit("update:modelValue","link")),checked:v.modelValue=="link"},null,40,Re),t("label",qe,a(e.$t("general.link")),1),t("input",{id:"unlink",type:"radio",name:"linkType",value:v.modelValue,disabled:v.disabled,class:"h-5 w-5",onChange:o[1]||(o[1]=c=>e.$emit("update:modelValue","unlink")),checked:v.modelValue=="unlink"},null,40,Oe),t("label",Qe,a(e.$t("general.unlink")),1)])]),t("div",Ge,[_.textErr||v.showError?(n(),i("div",Je,a(v.errorMessage),1)):h("",!0)])])}const Xe=ae(Ue,[["render",Ke]]),Ye=Te({emits:["select-account","update:modelValue"],name:"SelectInputNamespace",props:["modelValue","action","address","assetId"],setup(e){const o=r(!1);Ce().appContext.config.globalProperties.emitter;const s=r(""),_=c=>{s.value=c.value,o.value=!o.value},S=d(()=>A.listActiveNamespacesToLink(e.assetId,W.Address.createFromRawAddress(e.address).plain(),e.action));return{selectNamespace:_,namespaces:S,toggleSelection:o,selectedNamespace:s}}}),Ze={class:"relative"},et={class:"flex"},tt={class:"flex flex-col ml-2 text-left"},st={class:"text-blue-primary font-semibold text-xxs mb-1 uppercase",style:{"line-height":"9px"}},at={key:0,class:"mt-1 text-tsm font-bold"},lt={key:1,class:"text-tsm font-bold"},nt={key:0,class:"text-xxs ml-auto cursor-pointer text-blue-primary font-semibold mt-auto mb-auto"},ot={key:1,class:"text-xxs ml-auto cursor-pointer text-blue-primary font-semibold mt-auto mb-auto"},it={class:"relative"},rt={key:0,class:"absolute border border-t-0 w-full z-50 bg-white max-h-40 overflow-auto px-3 filter drop-shodow-xl"},ct={key:0,class:"pl-2 pt-4 text-xxs text-gray-400 uppercase"},dt={key:1,class:"text-xxs pt-2 pl-2 pb-2"},ut=["onClick"],mt={key:0,class:"cursor-pointer text-blue-primary text-xxs mt-0.5 ml-auto font-semibold uppercase"},vt={key:1,class:"text-gray-300 text-xxs mt-0.5 ml-auto uppercase"},gt={key:2,class:"text-gray-500 text-xxs mt-0.5 ml-auto uppercase"};function bt(e,o,v,s,_,S){return n(),i("div",Ze,[t("div",{onClick:o[1]||(o[1]=c=>e.toggleSelection=!e.toggleSelection),class:"border ml-auto mr-auto py-3 px-2 cursor-pointer rounded-md w-full h-14"},[t("div",et,[t("div",tt,[t("div",st,a(e.$t("general.namespace")),1),e.selectedNamespace!=""?(n(),i("div",at,a(e.selectedNamespace),1)):(n(),i("div",lt,a(e.$t("namespace.selectNamespace")),1))]),!e.toggleSelection&&e.selectedNamespace==""?(n(),i("div",nt,a(e.$t("general.select")),1)):h("",!0),!e.toggleSelection&&e.selectedNamespace!=""?(n(),i("div",ot,a(e.$t("general.change")),1)):h("",!0),e.toggleSelection?(n(),i("img",{key:2,onClick:o[0]||(o[0]=c=>e.selectedNamespace=""),src:Ve,class:"h-5 w-5 ml-auto cursor-pointer text-blue-primary font-semibold mt-auto mb-auto"})):h("",!0)])]),t("div",it,[e.toggleSelection?(n(),i("div",rt,[e.namespaces.length>0?(n(),i("div",ct,a(e.$t("namespace.selectNamespace")),1)):(n(),i("div",dt,a(e.$t("general.listEmpty")),1)),(n(!0),i(pe,null,fe(e.namespaces,(c,L)=>(n(),i("div",{key:L,class:ge(["px-2 py-3 flex items-center",[L!=e.namespaces.length-1?"border-b border-gray-200":"",c.disabled?"":"cursor-pointer"]]),onClick:p=>{e.selectNamespace(c),e.$emit("update:modelValue",e.selectedNamespace)}},[t("div",{class:ge(["text-xs truncate",c.disabled?"text-gray-300":"text-black font-semibold"])},a(c.label),3),c.label!=e.selectedNamespace&&!c.disabled?(n(),i("div",mt,a(e.$t("general.select")),1)):c.disabled?(n(),i("div",vt,a(e.$t("general.disabled")),1)):(n(),i("div",gt,a(e.$t("general.current")),1))],10,ut))),128))])):h("",!0)])])}const pt=ae(Ye,[["render",bt]]),ft={name:"ViewServicesAssetsLinkToNamespace",directives:{tooltip:Se},components:{SelectLinkType:Xe,SelectInputNamespace:pt,TransactionFeeDisplay:Be,TransactionLayout:Ee},props:{assetId:String,address:String},setup(e){we();const o=Ne();Ae();const v=d(()=>g.nativeToken.label),s=r(""),_=r(!1),S=r(!1),c=r(!1),L=r(!1),p=r(""),Q=d(()=>g.nativeToken.label),G=d(()=>V.currentNetworkProfileConfig?m.convertToExact(V.currentNetworkProfileConfig.lockedFundsPerAggregate,g.nativeToken.divisibility):0),J=d(()=>V.currentNetworkProfileConfig?m.convertToCurrency(V.currentNetworkProfileConfig.lockedFundsPerAggregate,g.nativeToken.divisibility):0),w=d(()=>V.currentNetworkProfile?m.convertToExact(Le.getLockFundFee(),g.nativeToken.divisibility):0),u=d(()=>G.value+w.value),K=d(()=>j.value==""),le=r(""),b=r(m.createAddress(e.address).plain()),X=r(""),Y=r(0),ye=r(te(b.value)),ne=d(()=>{let l=be(p.value)?be(p.value).balance:0;return m.toCurrencyFormat(l)}),oe=d(()=>p.value.length<=0?Y.value<C.value:Number(ne.value)<C.value+u.value),ie=d(()=>k.value.cosignerList.length==0&&te(b.value)),F=r("0");let f=d(()=>H.currentLoggedInWallet?H.currentLoggedInWallet.accounts.find(l=>l.address==b.value)||H.currentLoggedInWallet.others.find(l=>l.address==b.value):null);f.value&&(le.value=f.value.name,b.value=f.value.address,X.value=m.toCurrencyFormat(f.value.balance,g.nativeToken.divisibility),Y.value=f.value.balance);let re=new Fe("ThemeStyleConfig");re.init();const he=r(Pe(e.address,40,re.jdenticonConfig)),y=r(""),x=r(0),ce=r(0),de=r(0),ue=r(!1),me=r(!1),T=r("link"),j=r("");if(f.value){let l=f.value.assets.find(M=>M.idHex===e.assetId);l!=null&&(y.value=l.idHex,ue.value=l.transferable,me.value=l.supplyMutable,x.value=l.divisibility,ce.value=m.convertToCurrency(l.supply,l.divisibility),de.value=l.amount)}const z=r("0.000000"),C=r(0),k=d(()=>{if(!f.value)return{hasCosigner:!1,cosignerList:[]};if(V.currentNetworkProfileConfig){let l=De.getCosignerInWallet(f.value?f.value.publicKey:""),M=[];return l.cosignerList.forEach(I=>{M.push({publicKey:I,name:R(I).name,balance:R(I).balance,address:R(I).address})}),l.cosignerList=M,{hasCosigner:l.hasCosigner,cosignerList:l.cosignerList}}else return{hasCosigner:!1,cosignerList:[]}}),Z=d(()=>k.value.cosignerList.length>0?k.value.cosignerList.length>1?p.value:R(k.value.cosignerList[0].publicKey).address:"");p.value=k.value.cosignerList.length>0?k.value.cosignerList[0].address:"",B(k,l=>{l.cosignerList.length>0&&(p.value=l.cosignerList.length>0?k.value.cosignerList[0].address:"")});try{z.value=m.convertToCurrency(A.getMosaicSupplyChangeTransactionFee(y.value,T.value,F.value,x.value),g.nativeToken.divisibility),C.value=m.convertToExact(A.getMosaicSupplyChangeTransactionFee(y.value,T.value,F.value,x.value),g.nativeToken.divisibility)}catch(l){console.log(l)}const ke=()=>{let l;if(T.value=="link")l=y.value;else{let ee=H.currentLoggedInWallet.accounts.find(D=>D.address==b.value);ee||(ee=H.currentLoggedInWallet.others.find(D=>D.address==b.value)),l=ee.namespaces.find(D=>D.name===j.value).linkedId}const M=g.buildTxn;let I=T.value=="link"?W.AliasActionType.Link:W.AliasActionType.Unlink;const xe=M.assetAlias(I,new W.NamespaceId(j.value),new W.MosaicId(l));Z.value?(q.selectedAddress=Z.value,q.selectedMultisigAddress=b.value):q.selectedAddress=b.value,q.unsignedTransactionPayload=xe.serialize(),o.push({name:"ViewConfirmTransaction"})};B(T,l=>{z.value=m.convertToCurrency(A.getMosaicSupplyChangeTransactionFee(y.value,l,F.value,x.value),g.nativeToken.divisibility),C.value=m.convertToExact(A.getMosaicSupplyChangeTransactionFee(y.value,l,F.value,x.value),g.nativeToken.divisibility)}),B(F,l=>{y.value&&(z.value=m.convertToCurrency(A.getMosaicSupplyChangeTransactionFee(y.value,T.value,l,x.value),g.nativeToken.divisibility),C.value=m.convertToExact(A.getMosaicSupplyChangeTransactionFee(y.value,T.value,l,x.value),g.nativeToken.divisibility))});const ve=d(()=>te(b.value)?parseFloat(u.value)+C.value:C.value),_e=d(()=>m.amountFormatterSimple(ve.value,0)),$=l=>{_.value=l,S.value=l};return B(ve,l=>{X.value<l?$(!0):$(!1)}),B(oe,l=>{$(!!l)}),B(ie,l=>{$(!!l)}),{currentNativeTokenName:v,selectedAccName:le,selectedAccAdd:b,balance:X,balanceNumber:Y,showNoBalance:oe,lockFundTxFee:w,lockFundCurrency:J,lockFundTotalFee:u,totalFeeFormatted:_e,err:s,disableCreate:K,showPasswdError:c,supply:F,disabledPassword:_,currencyName:Q,isMultiSigBool:ye,selectAsset:y,selectAction:T,linkNamespace:ke,transactionFee:z,transactionFeeExact:C,assetSupply:ce,assetAmount:de,assetDivisibility:x,assetTransferable:ue,assetMutable:me,selectNamespace:j,getMultiSigCosigner:k,cosignerBalanceInsufficient:L,cosignerAddress:p,cosigner:Z,isNotCosigner:ie,disabledSelectAction:S,Helper:m,svgString:he,checkCosignBalance:ne}}},yt={class:"lg:flex lg:justify-between lg:items-center"},ht={class:"font-semibold mb-4 inline-block mt-1"},kt={class:"flex items-center"},_t=["innerHTML"],xt={class:"ml-2"},Tt={class:"text-blue-primary text-xxs font-bold uppercase mb-1"},Ct={class:"font-bold text-black text-sm"},St={key:0,class:"rounded-md bg-red-200 w-full p-2 flex items-center justify-center"},wt={class:"rounded-full w-5 h-5 border border-red-500 inline-block relative mr-2"},Nt={class:"inline-block text-xs"},At={key:1,class:"rounded-md bg-yellow-200 w-full p-2 flex items-center justify-center"},Lt={class:"rounded-full w-5 h-5 bg-yellow-100 inline-block relative mr-2"},Ft={class:"inline-block text-xs"},$t={key:2,class:"error error_box"},Mt={class:"text-right w-full"},It={key:0,class:"inline-block"},Vt={class:"text-tsm text-left mt-3"},Bt={key:0,class:"font-bold"},Et={key:0,class:"error"},Pt={key:1,class:"font-bold"},Dt=["value"],Ht={key:2,class:"error"},Ut={class:"border border-blue-primary p-4 bg-blue-100 flex items-center rounded mt-5"},Wt={class:"ml-1"},jt={class:"uppercase text-blue-primary font-semibold text-xxs"},zt={class:"text-black text-sm font-bold"},Rt={class:"border border-gray-200 p-4 rounded mt-5"},qt={class:"lg:grid lg:grid-cols-2"},Ot={class:"my-3"},Qt={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Gt={src:O,class:"inline-block ml-2 relative",style:{top:"-1px"}},Jt={class:"text-black font-bold text-sm"},Kt={class:"my-3"},Xt={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},Yt={src:O,class:"inline-block ml-2 relative",style:{top:"-1px"}},Zt={class:"text-black font-bold text-sm"},es={class:"my-3"},ts={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},ss={src:O,class:"inline-block ml-2 relative",style:{top:"-1px"}},as={class:"uppercase text-black font-bold text-sm"},ls={class:"my-3"},ns={class:"text-xxs text-blue-primary uppercase mb-1 font-bold"},os={src:O,class:"inline-block ml-2 relative",style:{top:"-1px"}},is={class:"uppercase text-black font-bold text-sm"},rs={class:"lg:grid lg:grid-cols-2 mt-5"},cs=["disabled"],ds={class:"text-center"};function us(e,o,v,s,_,S){const c=E("font-awesome-icon"),L=E("SelectLinkType"),p=E("SelectInputNamespace"),Q=E("TransactionFeeDisplay"),G=E("router-link"),J=E("TransactionLayout"),w=$e("tooltip");return n(),Me(J,{class:"mt-8"},{white:se(()=>[t("div",yt,[t("div",ht,a(e.$t("general.linkToNamespace")),1),t("div",kt,[t("div",{innerHTML:s.svgString,class:"inline-block"},null,8,_t),t("div",xt,[t("div",Tt,a(e.$t("asset.assetCreatedBy")),1),t("div",Ct,a(s.selectedAccName),1)])])]),s.showNoBalance?(n(),i("div",St,[t("div",wt,[P(c,{icon:"times",class:"text-red-500 h-3 w-3 absolute",style:{top:"3px",left:"4px"}})]),t("div",Nt,a(e.$t("general.insufficientBalance")),1)])):s.isNotCosigner?(n(),i("div",At,[t("div",Lt,[P(c,{icon:"exclamation",class:"text-yellow-500 h-3 w-3 absolute",style:{top:"5px",left:"7px"}})]),t("div",Ft,a(e.$t("general.noCosigner")),1)])):h("",!0),s.err!=""?(n(),i("div",$t,a(s.err),1)):h("",!0),t("div",Mt,[s.getMultiSigCosigner.cosignerList.length>0?(n(),i("div",It,[t("div",Vt,[N(a(e.$t("general.initiateBy"))+": ",1),s.getMultiSigCosigner.cosignerList.length==1?(n(),i("span",Bt,[N(a(s.getMultiSigCosigner.cosignerList[0].name)+" ("+a(e.$t("general.balance"))+": "+a(s.Helper.amountFormatterSimple(s.getMultiSigCosigner.cosignerList[0].balance,0))+" "+a(s.currentNativeTokenName)+") ",1),s.getMultiSigCosigner.cosignerList[0].balance<s.lockFundTotalFee?(n(),i("span",Et,"- "+a(e.$t("general.insufficientBalance")),1)):h("",!0)])):(n(),i("span",Pt,[U(t("select",{"onUpdate:modelValue":o[0]||(o[0]=u=>s.cosignerAddress=u)},[(n(!0),i(pe,null,fe(s.getMultiSigCosigner.cosignerList,(u,K)=>(n(),i("option",{value:u.address,key:K},a(u.name)+" ("+a(e.$t("general.balance"))+": "+a(u.balance)+" "+a(s.currentNativeTokenName)+") ",9,Dt))),128))],512),[[Ie,s.cosignerAddress]])])),s.cosignerBalanceInsufficient?(n(),i("div",Ht," - "+a(e.$t("general.insufficientBalance")),1)):h("",!0)])])):h("",!0)]),t("div",Ut,[o[4]||(o[4]=t("img",{src:He},null,-1)),t("div",Wt,[t("div",jt,a(e.$t("general.assetId")),1),t("div",zt,a(s.selectAsset),1)])]),t("div",Rt,[t("div",qt,[t("div",Ot,[t("div",Qt,[N(a(e.$t("asset.currentSupply")),1),U(t("img",Gt,null,512),[[w,{value:"<tiptext>"+e.$t("asset.supplyMsg2")+"<br>"+e.$t("asset.supplyMsg3")+"</tiptext>",escape:!1},void 0,{bottom:!0}]])]),t("div",Jt,a(s.assetAmount),1)]),t("div",Kt,[t("div",Xt,[N(a(e.$t("general.divisibility")),1),U(t("img",Yt,null,512),[[w,{value:"<tiptext>"+e.$t("asset.divisibilityMsg4")+"<br><br>"+e.$t("asset.divisibilityMsg2")+"<br>"+e.$t("asset.divisibilityMsg3")+"</tiptext>",escape:!1},void 0,{bottom:!0}]])]),t("div",Zt,a(s.assetDivisibility),1)]),t("div",es,[t("div",ts,[N(a(e.$t("general.transferable")),1),U(t("img",ss,null,512),[[w,{value:"<tiptext>"+e.$t("asset.transferableMsg")+"</tiptext>",escape:!1},void 0,{bottom:!0}]])]),t("div",as,a(s.assetTransferable?e.$t("general.yes"):e.$t("general.no")),1)]),t("div",ls,[t("div",ns,[N(a(e.$t("general.supplyMutable")),1),U(t("img",os,null,512),[[w,{value:"<tiptext>"+e.$t("asset.supplyMutableMsg")+"</tiptext>",escape:!1},void 0,{bottom:!0}]])]),t("div",is,a(s.assetMutable?e.$t("general.yes"):e.$t("general.no")),1)])])]),t("div",rs,[P(L,{title:e.$t("asset.modificationType"),class:"lg:mr-4",modelValue:s.selectAction,"onUpdate:modelValue":o[1]||(o[1]=u=>s.selectAction=u),disabled:s.disabledSelectAction},null,8,["title","modelValue","disabled"]),P(p,{action:s.selectAction,modelValue:s.selectNamespace,"onUpdate:modelValue":o[2]||(o[2]=u=>s.selectNamespace=u),address:s.selectedAccAdd,assetId:s.selectAsset},null,8,["action","modelValue","address","assetId"])])]),navy:se(()=>[P(Q,{"transaction-fee":s.transactionFee,"total-fee-formatted":s.totalFeeFormatted,"get-multi-sig-cosigner":s.getMultiSigCosigner,"check-cosign-balance":s.checkCosignBalance,"lock-fund-currency":s.lockFundCurrency,"lock-fund-tx-fee":String(s.lockFundTxFee),balance:s.balance,"selected-acc-add":s.selectedAccAdd},null,8,["transaction-fee","total-fee-formatted","get-multi-sig-cosigner","check-cosign-balance","lock-fund-currency","lock-fund-tx-fee","balance","selected-acc-add"]),t("button",{type:"submit",class:"mt-3 w-full blue-btn py-4 disabled:opacity-50 disabled:cursor-auto text-white",disabled:s.disableCreate,onClick:o[3]||(o[3]=(...u)=>s.linkNamespace&&s.linkNamespace(...u))},a(s.selectAction=="link"?e.$t("general.linkToNamespace"):e.$t("namespace.unlinkNamespace")),9,cs),t("div",ds,[P(G,{to:{name:"ViewDashboard"},class:"content-center text-xs text-white border-b-2 border-white"},{default:se(()=>[N(a(e.$t("general.cancel")),1)]),_:1})])]),_:1})}const Cs=ae(ft,[["render",us]]);export{Cs as default};
